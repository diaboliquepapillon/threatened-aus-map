var wZ=Object.defineProperty;var RO=e=>{throw TypeError(e)};var EZ=(e,t,n)=>t in e?wZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H=(e,t,n)=>EZ(e,typeof t!="symbol"?t+"":t,n),M2=(e,t,n)=>t.has(e)||RO("Cannot "+n);var q=(e,t,n)=>(M2(e,t,"read from private field"),n?n.call(e):t.get(e)),Ue=(e,t,n)=>t.has(e)?RO("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Se=(e,t,n,r)=>(M2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),_n=(e,t,n)=>(M2(e,t,"access private method"),n);var $0=(e,t,n,r)=>({set _(i){Se(e,t,i,n)},get _(){return q(e,t,r)}});function SZ(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function C6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k6={exports:{}},Wx={},A6={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=Symbol.for("react.element"),_Z=Symbol.for("react.portal"),CZ=Symbol.for("react.fragment"),kZ=Symbol.for("react.strict_mode"),AZ=Symbol.for("react.profiler"),$Z=Symbol.for("react.provider"),TZ=Symbol.for("react.context"),NZ=Symbol.for("react.forward_ref"),MZ=Symbol.for("react.suspense"),RZ=Symbol.for("react.memo"),FZ=Symbol.for("react.lazy"),FO=Symbol.iterator;function OZ(e){return e===null||typeof e!="object"?null:(e=FO&&e[FO]||e["@@iterator"],typeof e=="function"?e:null)}var $6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T6=Object.assign,N6={};function fh(e,t,n){this.props=e,this.context=t,this.refs=N6,this.updater=n||$6}fh.prototype.isReactComponent={};fh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function M6(){}M6.prototype=fh.prototype;function zA(e,t,n){this.props=e,this.context=t,this.refs=N6,this.updater=n||$6}var jA=zA.prototype=new M6;jA.constructor=zA;T6(jA,fh.prototype);jA.isPureReactComponent=!0;var OO=Array.isArray,R6=Object.prototype.hasOwnProperty,BA={current:null},F6={key:!0,ref:!0,__self:!0,__source:!0};function O6(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)R6.call(t,r)&&!F6.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Am,type:e,key:o,ref:s,props:i,_owner:BA.current}}function PZ(e,t){return{$$typeof:Am,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function UA(e){return typeof e=="object"&&e!==null&&e.$$typeof===Am}function DZ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var PO=/\/+/g;function R2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?DZ(""+e.key):t.toString(36)}function Wy(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Am:case _Z:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+R2(s,0):r,OO(i)?(n="",e!=null&&(n=e.replace(PO,"$&/")+"/"),Wy(i,t,n,"",function(u){return u})):i!=null&&(UA(i)&&(i=PZ(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(PO,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",OO(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+R2(o,a);s+=Wy(o,t,n,l,i)}else if(l=OZ(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+R2(o,a++),s+=Wy(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function T0(e,t,n){if(e==null)return e;var r=[],i=0;return Wy(e,r,"","",function(o){return t.call(n,o,i++)}),r}function IZ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var cr={current:null},qy={transition:null},LZ={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:qy,ReactCurrentOwner:BA};function P6(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:T0,forEach:function(e,t,n){T0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T0(e,function(){t++}),t},toArray:function(e){return T0(e,function(t){return t})||[]},only:function(e){if(!UA(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pe.Component=fh;Pe.Fragment=CZ;Pe.Profiler=AZ;Pe.PureComponent=zA;Pe.StrictMode=kZ;Pe.Suspense=MZ;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LZ;Pe.act=P6;Pe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=T6({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=BA.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)R6.call(t,l)&&!F6.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Am,type:e.type,key:i,ref:o,props:r,_owner:s}};Pe.createContext=function(e){return e={$$typeof:TZ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$Z,_context:e},e.Consumer=e};Pe.createElement=O6;Pe.createFactory=function(e){var t=O6.bind(null,e);return t.type=e,t};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(e){return{$$typeof:NZ,render:e}};Pe.isValidElement=UA;Pe.lazy=function(e){return{$$typeof:FZ,_payload:{_status:-1,_result:e},_init:IZ}};Pe.memo=function(e,t){return{$$typeof:RZ,type:e,compare:t===void 0?null:t}};Pe.startTransition=function(e){var t=qy.transition;qy.transition={};try{e()}finally{qy.transition=t}};Pe.unstable_act=P6;Pe.useCallback=function(e,t){return cr.current.useCallback(e,t)};Pe.useContext=function(e){return cr.current.useContext(e)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(e){return cr.current.useDeferredValue(e)};Pe.useEffect=function(e,t){return cr.current.useEffect(e,t)};Pe.useId=function(){return cr.current.useId()};Pe.useImperativeHandle=function(e,t,n){return cr.current.useImperativeHandle(e,t,n)};Pe.useInsertionEffect=function(e,t){return cr.current.useInsertionEffect(e,t)};Pe.useLayoutEffect=function(e,t){return cr.current.useLayoutEffect(e,t)};Pe.useMemo=function(e,t){return cr.current.useMemo(e,t)};Pe.useReducer=function(e,t,n){return cr.current.useReducer(e,t,n)};Pe.useRef=function(e){return cr.current.useRef(e)};Pe.useState=function(e){return cr.current.useState(e)};Pe.useSyncExternalStore=function(e,t,n){return cr.current.useSyncExternalStore(e,t,n)};Pe.useTransition=function(){return cr.current.useTransition()};Pe.version="18.3.1";A6.exports=Pe;var C=A6.exports;const re=C6(C),WA=SZ({__proto__:null,default:re},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zZ=C,jZ=Symbol.for("react.element"),BZ=Symbol.for("react.fragment"),UZ=Object.prototype.hasOwnProperty,WZ=zZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qZ={key:!0,ref:!0,__self:!0,__source:!0};function D6(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)UZ.call(t,r)&&!qZ.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:jZ,type:e,key:o,ref:s,props:i,_owner:WZ.current}}Wx.Fragment=BZ;Wx.jsx=D6;Wx.jsxs=D6;k6.exports=Wx;var A=k6.exports,I6={exports:{}},ni={},L6={exports:{}},z6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,O){var L=F.length;F.push(O);e:for(;0<L;){var X=L-1>>>1,V=F[X];if(0<i(V,O))F[X]=O,F[L]=V,L=X;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var O=F[0],L=F.pop();if(L!==O){F[0]=L;e:for(var X=0,V=F.length,ne=V>>>1;X<ne;){var de=2*(X+1)-1,he=F[de],Ne=de+1,oe=F[Ne];if(0>i(he,L))Ne<V&&0>i(oe,he)?(F[X]=oe,F[Ne]=L,X=Ne):(F[X]=he,F[de]=L,X=de);else if(Ne<V&&0>i(oe,L))F[X]=oe,F[Ne]=L,X=Ne;else break e}}return O}function i(F,O){var L=F.sortIndex-O.sortIndex;return L!==0?L:F.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,g=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=F)r(u),O.sortIndex=O.expirationTime,t(l,O);else break;O=n(u)}}function b(F){if(p=!1,x(F),!g)if(n(l)!==null)g=!0,R(w);else{var O=n(u);O!==null&&I(b,O.startTime-F)}}function w(F,O){g=!1,p&&(p=!1,y(_),_=-1),h=!0;var L=d;try{for(x(O),f=n(l);f!==null&&(!(f.expirationTime>O)||F&&!N());){var X=f.callback;if(typeof X=="function"){f.callback=null,d=f.priorityLevel;var V=X(f.expirationTime<=O);O=e.unstable_now(),typeof V=="function"?f.callback=V:f===n(l)&&r(l),x(O)}else r(l);f=n(l)}if(f!==null)var ne=!0;else{var de=n(u);de!==null&&I(b,de.startTime-O),ne=!1}return ne}finally{f=null,d=L,h=!1}}var S=!1,E=null,_=-1,k=5,T=-1;function N(){return!(e.unstable_now()-T<k)}function P(){if(E!==null){var F=e.unstable_now();T=F;var O=!0;try{O=E(!0,F)}finally{O?D():(S=!1,E=null)}}else S=!1}var D;if(typeof v=="function")D=function(){v(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$=M.port2;M.port1.onmessage=P,D=function(){$.postMessage(null)}}else D=function(){m(P,0)};function R(F){E=F,S||(S=!0,D())}function I(F,O){_=m(function(){F(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,R(w))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(F){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var L=d;d=O;try{return F()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,O){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var L=d;d=F;try{return O()}finally{d=L}},e.unstable_scheduleCallback=function(F,O,L){var X=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?X+L:X):L=X,F){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,F={id:c++,callback:O,priorityLevel:F,startTime:L,expirationTime:V,sortIndex:-1},L>X?(F.sortIndex=L,t(u,F),n(l)===null&&F===n(u)&&(p?(y(_),_=-1):p=!0,I(b,L-X))):(F.sortIndex=V,t(l,F),g||h||(g=!0,R(w))),F},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(F){var O=d;return function(){var L=d;d=O;try{return F.apply(this,arguments)}finally{d=L}}}})(z6);L6.exports=z6;var HZ=L6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VZ=C,Qr=HZ;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j6=new Set,Cg={};function Dc(e,t){wd(e,t),wd(e+"Capture",t)}function wd(e,t){for(Cg[e]=t,e=0;e<t.length;e++)j6.add(t[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u_=Object.prototype.hasOwnProperty,GZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DO={},IO={};function YZ(e){return u_.call(IO,e)?!0:u_.call(DO,e)?!1:GZ.test(e)?IO[e]=!0:(DO[e]=!0,!1)}function XZ(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KZ(e,t,n,r){if(t===null||typeof t>"u"||XZ(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fr(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bn[e]=new fr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bn[t]=new fr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bn[e]=new fr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bn[e]=new fr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bn[e]=new fr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bn[e]=new fr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bn[e]=new fr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bn[e]=new fr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bn[e]=new fr(e,5,!1,e.toLowerCase(),null,!1,!1)});var qA=/[\-:]([a-z])/g;function HA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qA,HA);bn[t]=new fr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qA,HA);bn[t]=new fr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qA,HA);bn[t]=new fr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bn[e]=new fr(e,1,!1,e.toLowerCase(),null,!1,!1)});bn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bn[e]=new fr(e,1,!1,e.toLowerCase(),null,!0,!0)});function VA(e,t,n,r){var i=bn.hasOwnProperty(t)?bn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KZ(t,n,i,r)&&(n=null),r||i===null?YZ(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ma=VZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N0=Symbol.for("react.element"),Af=Symbol.for("react.portal"),$f=Symbol.for("react.fragment"),GA=Symbol.for("react.strict_mode"),c_=Symbol.for("react.profiler"),B6=Symbol.for("react.provider"),U6=Symbol.for("react.context"),YA=Symbol.for("react.forward_ref"),f_=Symbol.for("react.suspense"),d_=Symbol.for("react.suspense_list"),XA=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),W6=Symbol.for("react.offscreen"),LO=Symbol.iterator;function Vh(e){return e===null||typeof e!="object"?null:(e=LO&&e[LO]||e["@@iterator"],typeof e=="function"?e:null)}var kt=Object.assign,F2;function Ap(e){if(F2===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F2=t&&t[1]||""}return`
`+F2+e}var O2=!1;function P2(e,t){if(!e||O2)return"";O2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{O2=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ap(e):""}function QZ(e){switch(e.tag){case 5:return Ap(e.type);case 16:return Ap("Lazy");case 13:return Ap("Suspense");case 19:return Ap("SuspenseList");case 0:case 2:case 15:return e=P2(e.type,!1),e;case 11:return e=P2(e.type.render,!1),e;case 1:return e=P2(e.type,!0),e;default:return""}}function h_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $f:return"Fragment";case Af:return"Portal";case c_:return"Profiler";case GA:return"StrictMode";case f_:return"Suspense";case d_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U6:return(e.displayName||"Context")+".Consumer";case B6:return(e._context.displayName||"Context")+".Provider";case YA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case XA:return t=e.displayName||null,t!==null?t:h_(e.type)||"Memo";case za:t=e._payload,e=e._init;try{return h_(e(t))}catch{}}return null}function ZZ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return h_(t);case 8:return t===GA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function q6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JZ(e){var t=q6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function M0(e){e._valueTracker||(e._valueTracker=JZ(e))}function H6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q6(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function R1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function p_(e,t){var n=t.checked;return kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zO(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function V6(e,t){t=t.checked,t!=null&&VA(e,"checked",t,!1)}function g_(e,t){V6(e,t);var n=kl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?m_(e,t.type,n):t.hasOwnProperty("defaultValue")&&m_(e,t.type,kl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jO(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function m_(e,t,n){(t!=="number"||R1(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $p=Array.isArray;function Vf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kl(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function y_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function BO(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Z(92));if($p(n)){if(1<n.length)throw Error(Z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kl(n)}}function G6(e,t){var n=kl(t.value),r=kl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function UO(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Y6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Y6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var R0,X6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(R0=R0||document.createElement("div"),R0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=R0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function kg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eJ=["Webkit","ms","Moz","O"];Object.keys(tg).forEach(function(e){eJ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tg[t]=tg[e]})});function K6(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||tg.hasOwnProperty(e)&&tg[e]?(""+t).trim():t+"px"}function Q6(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=K6(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var tJ=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x_(e,t){if(t){if(tJ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function b_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w_=null;function KA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var E_=null,Gf=null,Yf=null;function WO(e){if(e=Nm(e)){if(typeof E_!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=Yx(t),E_(e.stateNode,e.type,t))}}function Z6(e){Gf?Yf?Yf.push(e):Yf=[e]:Gf=e}function J6(){if(Gf){var e=Gf,t=Yf;if(Yf=Gf=null,WO(e),t)for(e=0;e<t.length;e++)WO(t[e])}}function ez(e,t){return e(t)}function tz(){}var D2=!1;function nz(e,t,n){if(D2)return e(t,n);D2=!0;try{return ez(e,t,n)}finally{D2=!1,(Gf!==null||Yf!==null)&&(tz(),J6())}}function Ag(e,t){var n=e.stateNode;if(n===null)return null;var r=Yx(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var S_=!1;if(ia)try{var Gh={};Object.defineProperty(Gh,"passive",{get:function(){S_=!0}}),window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{S_=!1}function nJ(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var ng=!1,F1=null,O1=!1,__=null,rJ={onError:function(e){ng=!0,F1=e}};function iJ(e,t,n,r,i,o,s,a,l){ng=!1,F1=null,nJ.apply(rJ,arguments)}function oJ(e,t,n,r,i,o,s,a,l){if(iJ.apply(this,arguments),ng){if(ng){var u=F1;ng=!1,F1=null}else throw Error(Z(198));O1||(O1=!0,__=u)}}function Ic(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rz(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qO(e){if(Ic(e)!==e)throw Error(Z(188))}function sJ(e){var t=e.alternate;if(!t){if(t=Ic(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qO(i),e;if(o===r)return qO(i),t;o=o.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function iz(e){return e=sJ(e),e!==null?oz(e):null}function oz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=oz(e);if(t!==null)return t;e=e.sibling}return null}var sz=Qr.unstable_scheduleCallback,HO=Qr.unstable_cancelCallback,aJ=Qr.unstable_shouldYield,lJ=Qr.unstable_requestPaint,Pt=Qr.unstable_now,uJ=Qr.unstable_getCurrentPriorityLevel,QA=Qr.unstable_ImmediatePriority,az=Qr.unstable_UserBlockingPriority,P1=Qr.unstable_NormalPriority,cJ=Qr.unstable_LowPriority,lz=Qr.unstable_IdlePriority,qx=null,Yo=null;function fJ(e){if(Yo&&typeof Yo.onCommitFiberRoot=="function")try{Yo.onCommitFiberRoot(qx,e,void 0,(e.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:pJ,dJ=Math.log,hJ=Math.LN2;function pJ(e){return e>>>=0,e===0?32:31-(dJ(e)/hJ|0)|0}var F0=64,O0=4194304;function Tp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function D1(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Tp(a):(o&=s,o!==0&&(r=Tp(o)))}else s=n&~i,s!==0?r=Tp(s):o!==0&&(r=Tp(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-io(t),i=1<<n,r|=e[n],t&=~i;return r}function gJ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mJ(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-io(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=gJ(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function C_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uz(){var e=F0;return F0<<=1,!(F0&4194240)&&(F0=64),e}function I2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $m(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-io(t),e[t]=n}function yJ(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-io(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ZA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-io(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var et=0;function cz(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fz,JA,dz,hz,pz,k_=!1,P0=[],dl=null,hl=null,pl=null,$g=new Map,Tg=new Map,Va=[],vJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VO(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":$g.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tg.delete(t.pointerId)}}function Yh(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Nm(t),t!==null&&JA(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xJ(e,t,n,r,i){switch(t){case"focusin":return dl=Yh(dl,e,t,n,r,i),!0;case"dragenter":return hl=Yh(hl,e,t,n,r,i),!0;case"mouseover":return pl=Yh(pl,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return $g.set(o,Yh($g.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Tg.set(o,Yh(Tg.get(o)||null,e,t,n,r,i)),!0}return!1}function gz(e){var t=Pu(e.target);if(t!==null){var n=Ic(t);if(n!==null){if(t=n.tag,t===13){if(t=rz(n),t!==null){e.blockedOn=t,pz(e.priority,function(){dz(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=A_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);w_=r,n.target.dispatchEvent(r),w_=null}else return t=Nm(n),t!==null&&JA(t),e.blockedOn=n,!1;t.shift()}return!0}function GO(e,t,n){Hy(e)&&n.delete(t)}function bJ(){k_=!1,dl!==null&&Hy(dl)&&(dl=null),hl!==null&&Hy(hl)&&(hl=null),pl!==null&&Hy(pl)&&(pl=null),$g.forEach(GO),Tg.forEach(GO)}function Xh(e,t){e.blockedOn===t&&(e.blockedOn=null,k_||(k_=!0,Qr.unstable_scheduleCallback(Qr.unstable_NormalPriority,bJ)))}function Ng(e){function t(i){return Xh(i,e)}if(0<P0.length){Xh(P0[0],e);for(var n=1;n<P0.length;n++){var r=P0[n];r.blockedOn===e&&(r.blockedOn=null)}}for(dl!==null&&Xh(dl,e),hl!==null&&Xh(hl,e),pl!==null&&Xh(pl,e),$g.forEach(t),Tg.forEach(t),n=0;n<Va.length;n++)r=Va[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Va.length&&(n=Va[0],n.blockedOn===null);)gz(n),n.blockedOn===null&&Va.shift()}var Xf=ma.ReactCurrentBatchConfig,I1=!0;function wJ(e,t,n,r){var i=et,o=Xf.transition;Xf.transition=null;try{et=1,e$(e,t,n,r)}finally{et=i,Xf.transition=o}}function EJ(e,t,n,r){var i=et,o=Xf.transition;Xf.transition=null;try{et=4,e$(e,t,n,r)}finally{et=i,Xf.transition=o}}function e$(e,t,n,r){if(I1){var i=A_(e,t,n,r);if(i===null)G2(e,t,r,L1,n),VO(e,r);else if(xJ(i,e,t,n,r))r.stopPropagation();else if(VO(e,r),t&4&&-1<vJ.indexOf(e)){for(;i!==null;){var o=Nm(i);if(o!==null&&fz(o),o=A_(e,t,n,r),o===null&&G2(e,t,r,L1,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else G2(e,t,r,null,n)}}var L1=null;function A_(e,t,n,r){if(L1=null,e=KA(r),e=Pu(e),e!==null)if(t=Ic(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rz(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return L1=e,null}function mz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uJ()){case QA:return 1;case az:return 4;case P1:case cJ:return 16;case lz:return 536870912;default:return 16}default:return 16}}var el=null,t$=null,Vy=null;function yz(){if(Vy)return Vy;var e,t=t$,n=t.length,r,i="value"in el?el.value:el.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Vy=i.slice(e,1<r?1-r:void 0)}function Gy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function D0(){return!0}function YO(){return!1}function ri(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?D0:YO,this.isPropagationStopped=YO,this}return kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=D0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=D0)},persist:function(){},isPersistent:D0}),t}var dh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n$=ri(dh),Tm=kt({},dh,{view:0,detail:0}),SJ=ri(Tm),L2,z2,Kh,Hx=kt({},Tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r$,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kh&&(Kh&&e.type==="mousemove"?(L2=e.screenX-Kh.screenX,z2=e.screenY-Kh.screenY):z2=L2=0,Kh=e),L2)},movementY:function(e){return"movementY"in e?e.movementY:z2}}),XO=ri(Hx),_J=kt({},Hx,{dataTransfer:0}),CJ=ri(_J),kJ=kt({},Tm,{relatedTarget:0}),j2=ri(kJ),AJ=kt({},dh,{animationName:0,elapsedTime:0,pseudoElement:0}),$J=ri(AJ),TJ=kt({},dh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),NJ=ri(TJ),MJ=kt({},dh,{data:0}),KO=ri(MJ),RJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=OJ[e])?!!t[e]:!1}function r$(){return PJ}var DJ=kt({},Tm,{key:function(e){if(e.key){var t=RJ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?FJ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r$,charCode:function(e){return e.type==="keypress"?Gy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),IJ=ri(DJ),LJ=kt({},Hx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QO=ri(LJ),zJ=kt({},Tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r$}),jJ=ri(zJ),BJ=kt({},dh,{propertyName:0,elapsedTime:0,pseudoElement:0}),UJ=ri(BJ),WJ=kt({},Hx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qJ=ri(WJ),HJ=[9,13,27,32],i$=ia&&"CompositionEvent"in window,rg=null;ia&&"documentMode"in document&&(rg=document.documentMode);var VJ=ia&&"TextEvent"in window&&!rg,vz=ia&&(!i$||rg&&8<rg&&11>=rg),ZO=" ",JO=!1;function xz(e,t){switch(e){case"keyup":return HJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tf=!1;function GJ(e,t){switch(e){case"compositionend":return bz(t);case"keypress":return t.which!==32?null:(JO=!0,ZO);case"textInput":return e=t.data,e===ZO&&JO?null:e;default:return null}}function YJ(e,t){if(Tf)return e==="compositionend"||!i$&&xz(e,t)?(e=yz(),Vy=t$=el=null,Tf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vz&&t.locale!=="ko"?null:t.data;default:return null}}var XJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XJ[e.type]:t==="textarea"}function wz(e,t,n,r){Z6(r),t=z1(t,"onChange"),0<t.length&&(n=new n$("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ig=null,Mg=null;function KJ(e){Rz(e,0)}function Vx(e){var t=Rf(e);if(H6(t))return e}function QJ(e,t){if(e==="change")return t}var Ez=!1;if(ia){var B2;if(ia){var U2="oninput"in document;if(!U2){var tP=document.createElement("div");tP.setAttribute("oninput","return;"),U2=typeof tP.oninput=="function"}B2=U2}else B2=!1;Ez=B2&&(!document.documentMode||9<document.documentMode)}function nP(){ig&&(ig.detachEvent("onpropertychange",Sz),Mg=ig=null)}function Sz(e){if(e.propertyName==="value"&&Vx(Mg)){var t=[];wz(t,Mg,e,KA(e)),nz(KJ,t)}}function ZJ(e,t,n){e==="focusin"?(nP(),ig=t,Mg=n,ig.attachEvent("onpropertychange",Sz)):e==="focusout"&&nP()}function JJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vx(Mg)}function eee(e,t){if(e==="click")return Vx(t)}function tee(e,t){if(e==="input"||e==="change")return Vx(t)}function nee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lo=typeof Object.is=="function"?Object.is:nee;function Rg(e,t){if(lo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u_.call(t,i)||!lo(e[i],t[i]))return!1}return!0}function rP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iP(e,t){var n=rP(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rP(n)}}function _z(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_z(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cz(){for(var e=window,t=R1();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=R1(e.document)}return t}function o$(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ree(e){var t=Cz(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_z(n.ownerDocument.documentElement,n)){if(r!==null&&o$(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=iP(n,o);var s=iP(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iee=ia&&"documentMode"in document&&11>=document.documentMode,Nf=null,$_=null,og=null,T_=!1;function oP(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;T_||Nf==null||Nf!==R1(r)||(r=Nf,"selectionStart"in r&&o$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),og&&Rg(og,r)||(og=r,r=z1($_,"onSelect"),0<r.length&&(t=new n$("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nf)))}function I0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mf={animationend:I0("Animation","AnimationEnd"),animationiteration:I0("Animation","AnimationIteration"),animationstart:I0("Animation","AnimationStart"),transitionend:I0("Transition","TransitionEnd")},W2={},kz={};ia&&(kz=document.createElement("div").style,"AnimationEvent"in window||(delete Mf.animationend.animation,delete Mf.animationiteration.animation,delete Mf.animationstart.animation),"TransitionEvent"in window||delete Mf.transitionend.transition);function Gx(e){if(W2[e])return W2[e];if(!Mf[e])return e;var t=Mf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in kz)return W2[e]=t[n];return e}var Az=Gx("animationend"),$z=Gx("animationiteration"),Tz=Gx("animationstart"),Nz=Gx("transitionend"),Mz=new Map,sP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hl(e,t){Mz.set(e,t),Dc(t,[e])}for(var q2=0;q2<sP.length;q2++){var H2=sP[q2],oee=H2.toLowerCase(),see=H2[0].toUpperCase()+H2.slice(1);Hl(oee,"on"+see)}Hl(Az,"onAnimationEnd");Hl($z,"onAnimationIteration");Hl(Tz,"onAnimationStart");Hl("dblclick","onDoubleClick");Hl("focusin","onFocus");Hl("focusout","onBlur");Hl(Nz,"onTransitionEnd");wd("onMouseEnter",["mouseout","mouseover"]);wd("onMouseLeave",["mouseout","mouseover"]);wd("onPointerEnter",["pointerout","pointerover"]);wd("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Np="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aee=new Set("cancel close invalid load scroll toggle".split(" ").concat(Np));function aP(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,oJ(r,t,void 0,e),e.currentTarget=null}function Rz(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;aP(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;aP(i,a,u),o=l}}}if(O1)throw e=__,O1=!1,__=null,e}function dt(e,t){var n=t[O_];n===void 0&&(n=t[O_]=new Set);var r=e+"__bubble";n.has(r)||(Fz(t,e,2,!1),n.add(r))}function V2(e,t,n){var r=0;t&&(r|=4),Fz(n,e,r,t)}var L0="_reactListening"+Math.random().toString(36).slice(2);function Fg(e){if(!e[L0]){e[L0]=!0,j6.forEach(function(n){n!=="selectionchange"&&(aee.has(n)||V2(n,!1,e),V2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[L0]||(t[L0]=!0,V2("selectionchange",!1,t))}}function Fz(e,t,n,r){switch(mz(t)){case 1:var i=wJ;break;case 4:i=EJ;break;default:i=e$}n=i.bind(null,t,n,e),i=void 0,!S_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function G2(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Pu(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}nz(function(){var u=o,c=KA(n),f=[];e:{var d=Mz.get(e);if(d!==void 0){var h=n$,g=e;switch(e){case"keypress":if(Gy(n)===0)break e;case"keydown":case"keyup":h=IJ;break;case"focusin":g="focus",h=j2;break;case"focusout":g="blur",h=j2;break;case"beforeblur":case"afterblur":h=j2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=XO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=CJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=jJ;break;case Az:case $z:case Tz:h=$J;break;case Nz:h=UJ;break;case"scroll":h=SJ;break;case"wheel":h=qJ;break;case"copy":case"cut":case"paste":h=NJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=QO}var p=(t&4)!==0,m=!p&&e==="scroll",y=p?d!==null?d+"Capture":null:d;p=[];for(var v=u,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,y!==null&&(b=Ag(v,y),b!=null&&p.push(Og(v,b,x)))),m)break;v=v.return}0<p.length&&(d=new h(d,g,null,n,c),f.push({event:d,listeners:p}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==w_&&(g=n.relatedTarget||n.fromElement)&&(Pu(g)||g[oa]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=u,g=g?Pu(g):null,g!==null&&(m=Ic(g),g!==m||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(p=XO,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(p=QO,b="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:Rf(h),x=g==null?d:Rf(g),d=new p(b,v+"leave",h,n,c),d.target=m,d.relatedTarget=x,b=null,Pu(c)===u&&(p=new p(y,v+"enter",g,n,c),p.target=x,p.relatedTarget=m,b=p),m=b,h&&g)t:{for(p=h,y=g,v=0,x=p;x;x=lf(x))v++;for(x=0,b=y;b;b=lf(b))x++;for(;0<v-x;)p=lf(p),v--;for(;0<x-v;)y=lf(y),x--;for(;v--;){if(p===y||y!==null&&p===y.alternate)break t;p=lf(p),y=lf(y)}p=null}else p=null;h!==null&&lP(f,d,h,p,!1),g!==null&&m!==null&&lP(f,m,g,p,!0)}}e:{if(d=u?Rf(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=QJ;else if(eP(d))if(Ez)w=tee;else{w=JJ;var S=ZJ}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=eee);if(w&&(w=w(e,u))){wz(f,w,n,c);break e}S&&S(e,d,u),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&m_(d,"number",d.value)}switch(S=u?Rf(u):window,e){case"focusin":(eP(S)||S.contentEditable==="true")&&(Nf=S,$_=u,og=null);break;case"focusout":og=$_=Nf=null;break;case"mousedown":T_=!0;break;case"contextmenu":case"mouseup":case"dragend":T_=!1,oP(f,n,c);break;case"selectionchange":if(iee)break;case"keydown":case"keyup":oP(f,n,c)}var E;if(i$)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Tf?xz(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(vz&&n.locale!=="ko"&&(Tf||_!=="onCompositionStart"?_==="onCompositionEnd"&&Tf&&(E=yz()):(el=c,t$="value"in el?el.value:el.textContent,Tf=!0)),S=z1(u,_),0<S.length&&(_=new KO(_,e,null,n,c),f.push({event:_,listeners:S}),E?_.data=E:(E=bz(n),E!==null&&(_.data=E)))),(E=VJ?GJ(e,n):YJ(e,n))&&(u=z1(u,"onBeforeInput"),0<u.length&&(c=new KO("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=E))}Rz(f,t)})}function Og(e,t,n){return{instance:e,listener:t,currentTarget:n}}function z1(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ag(e,n),o!=null&&r.unshift(Og(e,o,i)),o=Ag(e,t),o!=null&&r.push(Og(e,o,i))),e=e.return}return r}function lf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lP(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Ag(n,o),l!=null&&s.unshift(Og(n,l,a))):i||(l=Ag(n,o),l!=null&&s.push(Og(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var lee=/\r\n?/g,uee=/\u0000|\uFFFD/g;function uP(e){return(typeof e=="string"?e:""+e).replace(lee,`
`).replace(uee,"")}function z0(e,t,n){if(t=uP(t),uP(e)!==t&&n)throw Error(Z(425))}function j1(){}var N_=null,M_=null;function R_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var F_=typeof setTimeout=="function"?setTimeout:void 0,cee=typeof clearTimeout=="function"?clearTimeout:void 0,cP=typeof Promise=="function"?Promise:void 0,fee=typeof queueMicrotask=="function"?queueMicrotask:typeof cP<"u"?function(e){return cP.resolve(null).then(e).catch(dee)}:F_;function dee(e){setTimeout(function(){throw e})}function Y2(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ng(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ng(t)}function gl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hh=Math.random().toString(36).slice(2),jo="__reactFiber$"+hh,Pg="__reactProps$"+hh,oa="__reactContainer$"+hh,O_="__reactEvents$"+hh,hee="__reactListeners$"+hh,pee="__reactHandles$"+hh;function Pu(e){var t=e[jo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[oa]||n[jo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=fP(e);e!==null;){if(n=e[jo])return n;e=fP(e)}return t}e=n,n=e.parentNode}return null}function Nm(e){return e=e[jo]||e[oa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Yx(e){return e[Pg]||null}var P_=[],Ff=-1;function Vl(e){return{current:e}}function gt(e){0>Ff||(e.current=P_[Ff],P_[Ff]=null,Ff--)}function lt(e,t){Ff++,P_[Ff]=e.current,e.current=t}var Al={},Bn=Vl(Al),Er=Vl(!1),sc=Al;function Ed(e,t){var n=e.type.contextTypes;if(!n)return Al;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Sr(e){return e=e.childContextTypes,e!=null}function B1(){gt(Er),gt(Bn)}function dP(e,t,n){if(Bn.current!==Al)throw Error(Z(168));lt(Bn,t),lt(Er,n)}function Oz(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Z(108,ZZ(e)||"Unknown",i));return kt({},n,r)}function U1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Al,sc=Bn.current,lt(Bn,e),lt(Er,Er.current),!0}function hP(e,t,n){var r=e.stateNode;if(!r)throw Error(Z(169));n?(e=Oz(e,t,sc),r.__reactInternalMemoizedMergedChildContext=e,gt(Er),gt(Bn),lt(Bn,e)):gt(Er),lt(Er,n)}var Ps=null,Xx=!1,X2=!1;function Pz(e){Ps===null?Ps=[e]:Ps.push(e)}function gee(e){Xx=!0,Pz(e)}function Gl(){if(!X2&&Ps!==null){X2=!0;var e=0,t=et;try{var n=Ps;for(et=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ps=null,Xx=!1}catch(i){throw Ps!==null&&(Ps=Ps.slice(e+1)),sz(QA,Gl),i}finally{et=t,X2=!1}}return null}var Of=[],Pf=0,W1=null,q1=0,ui=[],ci=0,ac=null,Bs=1,Us="";function _u(e,t){Of[Pf++]=q1,Of[Pf++]=W1,W1=e,q1=t}function Dz(e,t,n){ui[ci++]=Bs,ui[ci++]=Us,ui[ci++]=ac,ac=e;var r=Bs;e=Us;var i=32-io(r)-1;r&=~(1<<i),n+=1;var o=32-io(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Bs=1<<32-io(t)+i|n<<i|r,Us=o+e}else Bs=1<<o|n<<i|r,Us=e}function s$(e){e.return!==null&&(_u(e,1),Dz(e,1,0))}function a$(e){for(;e===W1;)W1=Of[--Pf],Of[Pf]=null,q1=Of[--Pf],Of[Pf]=null;for(;e===ac;)ac=ui[--ci],ui[ci]=null,Us=ui[--ci],ui[ci]=null,Bs=ui[--ci],ui[ci]=null}var Hr=null,Br=null,vt=!1,Xi=null;function Iz(e,t){var n=hi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function pP(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hr=e,Br=gl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hr=e,Br=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ac!==null?{id:Bs,overflow:Us}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=hi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hr=e,Br=null,!0):!1;default:return!1}}function D_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function I_(e){if(vt){var t=Br;if(t){var n=t;if(!pP(e,t)){if(D_(e))throw Error(Z(418));t=gl(n.nextSibling);var r=Hr;t&&pP(e,t)?Iz(r,n):(e.flags=e.flags&-4097|2,vt=!1,Hr=e)}}else{if(D_(e))throw Error(Z(418));e.flags=e.flags&-4097|2,vt=!1,Hr=e}}}function gP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hr=e}function j0(e){if(e!==Hr)return!1;if(!vt)return gP(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!R_(e.type,e.memoizedProps)),t&&(t=Br)){if(D_(e))throw Lz(),Error(Z(418));for(;t;)Iz(e,t),t=gl(t.nextSibling)}if(gP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Br=gl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Br=null}}else Br=Hr?gl(e.stateNode.nextSibling):null;return!0}function Lz(){for(var e=Br;e;)e=gl(e.nextSibling)}function Sd(){Br=Hr=null,vt=!1}function l$(e){Xi===null?Xi=[e]:Xi.push(e)}var mee=ma.ReactCurrentBatchConfig;function Qh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,e))}return e}function B0(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mP(e){var t=e._init;return t(e._payload)}function zz(e){function t(y,v){if(e){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=xl(y,v),y.index=0,y.sibling=null,y}function o(y,v,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,b){return v===null||v.tag!==6?(v=nE(x,y.mode,b),v.return=y,v):(v=i(v,x),v.return=y,v)}function l(y,v,x,b){var w=x.type;return w===$f?c(y,v,x.props.children,b,x.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===za&&mP(w)===v.type)?(b=i(v,x.props),b.ref=Qh(y,v,x),b.return=y,b):(b=e1(x.type,x.key,x.props,null,y.mode,b),b.ref=Qh(y,v,x),b.return=y,b)}function u(y,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=rE(x,y.mode,b),v.return=y,v):(v=i(v,x.children||[]),v.return=y,v)}function c(y,v,x,b,w){return v===null||v.tag!==7?(v=Xu(x,y.mode,b,w),v.return=y,v):(v=i(v,x),v.return=y,v)}function f(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=nE(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case N0:return x=e1(v.type,v.key,v.props,null,y.mode,x),x.ref=Qh(y,null,v),x.return=y,x;case Af:return v=rE(v,y.mode,x),v.return=y,v;case za:var b=v._init;return f(y,b(v._payload),x)}if($p(v)||Vh(v))return v=Xu(v,y.mode,x,null),v.return=y,v;B0(y,v)}return null}function d(y,v,x,b){var w=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(y,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case N0:return x.key===w?l(y,v,x,b):null;case Af:return x.key===w?u(y,v,x,b):null;case za:return w=x._init,d(y,v,w(x._payload),b)}if($p(x)||Vh(x))return w!==null?null:c(y,v,x,b,null);B0(y,x)}return null}function h(y,v,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(x)||null,a(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case N0:return y=y.get(b.key===null?x:b.key)||null,l(v,y,b,w);case Af:return y=y.get(b.key===null?x:b.key)||null,u(v,y,b,w);case za:var S=b._init;return h(y,v,x,S(b._payload),w)}if($p(b)||Vh(b))return y=y.get(x)||null,c(v,y,b,w,null);B0(v,b)}return null}function g(y,v,x,b){for(var w=null,S=null,E=v,_=v=0,k=null;E!==null&&_<x.length;_++){E.index>_?(k=E,E=null):k=E.sibling;var T=d(y,E,x[_],b);if(T===null){E===null&&(E=k);break}e&&E&&T.alternate===null&&t(y,E),v=o(T,v,_),S===null?w=T:S.sibling=T,S=T,E=k}if(_===x.length)return n(y,E),vt&&_u(y,_),w;if(E===null){for(;_<x.length;_++)E=f(y,x[_],b),E!==null&&(v=o(E,v,_),S===null?w=E:S.sibling=E,S=E);return vt&&_u(y,_),w}for(E=r(y,E);_<x.length;_++)k=h(E,y,_,x[_],b),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?_:k.key),v=o(k,v,_),S===null?w=k:S.sibling=k,S=k);return e&&E.forEach(function(N){return t(y,N)}),vt&&_u(y,_),w}function p(y,v,x,b){var w=Vh(x);if(typeof w!="function")throw Error(Z(150));if(x=w.call(x),x==null)throw Error(Z(151));for(var S=w=null,E=v,_=v=0,k=null,T=x.next();E!==null&&!T.done;_++,T=x.next()){E.index>_?(k=E,E=null):k=E.sibling;var N=d(y,E,T.value,b);if(N===null){E===null&&(E=k);break}e&&E&&N.alternate===null&&t(y,E),v=o(N,v,_),S===null?w=N:S.sibling=N,S=N,E=k}if(T.done)return n(y,E),vt&&_u(y,_),w;if(E===null){for(;!T.done;_++,T=x.next())T=f(y,T.value,b),T!==null&&(v=o(T,v,_),S===null?w=T:S.sibling=T,S=T);return vt&&_u(y,_),w}for(E=r(y,E);!T.done;_++,T=x.next())T=h(E,y,_,T.value,b),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?_:T.key),v=o(T,v,_),S===null?w=T:S.sibling=T,S=T);return e&&E.forEach(function(P){return t(y,P)}),vt&&_u(y,_),w}function m(y,v,x,b){if(typeof x=="object"&&x!==null&&x.type===$f&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case N0:e:{for(var w=x.key,S=v;S!==null;){if(S.key===w){if(w=x.type,w===$f){if(S.tag===7){n(y,S.sibling),v=i(S,x.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===za&&mP(w)===S.type){n(y,S.sibling),v=i(S,x.props),v.ref=Qh(y,S,x),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}x.type===$f?(v=Xu(x.props.children,y.mode,b,x.key),v.return=y,y=v):(b=e1(x.type,x.key,x.props,null,y.mode,b),b.ref=Qh(y,v,x),b.return=y,y=b)}return s(y);case Af:e:{for(S=x.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=i(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=rE(x,y.mode,b),v.return=y,y=v}return s(y);case za:return S=x._init,m(y,v,S(x._payload),b)}if($p(x))return g(y,v,x,b);if(Vh(x))return p(y,v,x,b);B0(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,x),v.return=y,y=v):(n(y,v),v=nE(x,y.mode,b),v.return=y,y=v),s(y)):n(y,v)}return m}var _d=zz(!0),jz=zz(!1),H1=Vl(null),V1=null,Df=null,u$=null;function c$(){u$=Df=V1=null}function f$(e){var t=H1.current;gt(H1),e._currentValue=t}function L_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kf(e,t){V1=e,u$=Df=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(br=!0),e.firstContext=null)}function wi(e){var t=e._currentValue;if(u$!==e)if(e={context:e,memoizedValue:t,next:null},Df===null){if(V1===null)throw Error(Z(308));Df=e,V1.dependencies={lanes:0,firstContext:e}}else Df=Df.next=e;return t}var Du=null;function d$(e){Du===null?Du=[e]:Du.push(e)}function Bz(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,d$(t)):(n.next=i.next,i.next=n),t.interleaved=n,sa(e,r)}function sa(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ja=!1;function h$(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ml(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,sa(e,n)}return i=r.interleaved,i===null?(t.next=t,d$(r)):(t.next=i.next,i.next=t),r.interleaved=t,sa(e,n)}function Yy(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ZA(e,n)}}function yP(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function G1(e,t,n,r){var i=e.updateQueue;ja=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,p=a;switch(d=t,h=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(h,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,d=typeof g=="function"?g.call(h,f,d):g,d==null)break e;f=kt({},f,d);break e;case 2:ja=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);uc|=s,e.lanes=s,e.memoizedState=f}}function vP(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Mm={},Xo=Vl(Mm),Dg=Vl(Mm),Ig=Vl(Mm);function Iu(e){if(e===Mm)throw Error(Z(174));return e}function p$(e,t){switch(lt(Ig,t),lt(Dg,e),lt(Xo,Mm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:v_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=v_(t,e)}gt(Xo),lt(Xo,t)}function Cd(){gt(Xo),gt(Dg),gt(Ig)}function Wz(e){Iu(Ig.current);var t=Iu(Xo.current),n=v_(t,e.type);t!==n&&(lt(Dg,e),lt(Xo,n))}function g$(e){Dg.current===e&&(gt(Xo),gt(Dg))}var Et=Vl(0);function Y1(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var K2=[];function m$(){for(var e=0;e<K2.length;e++)K2[e]._workInProgressVersionPrimary=null;K2.length=0}var Xy=ma.ReactCurrentDispatcher,Q2=ma.ReactCurrentBatchConfig,lc=0,Ct=null,Ut=null,Qt=null,X1=!1,sg=!1,Lg=0,yee=0;function Cn(){throw Error(Z(321))}function y$(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lo(e[n],t[n]))return!1;return!0}function v$(e,t,n,r,i,o){if(lc=o,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xy.current=e===null||e.memoizedState===null?wee:Eee,e=n(r,i),sg){o=0;do{if(sg=!1,Lg=0,25<=o)throw Error(Z(301));o+=1,Qt=Ut=null,t.updateQueue=null,Xy.current=See,e=n(r,i)}while(sg)}if(Xy.current=K1,t=Ut!==null&&Ut.next!==null,lc=0,Qt=Ut=Ct=null,X1=!1,t)throw Error(Z(300));return e}function x$(){var e=Lg!==0;return Lg=0,e}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Ct.memoizedState=Qt=e:Qt=Qt.next=e,Qt}function Ei(){if(Ut===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var t=Qt===null?Ct.memoizedState:Qt.next;if(t!==null)Qt=t,Ut=e;else{if(e===null)throw Error(Z(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Qt===null?Ct.memoizedState=Qt=e:Qt=Qt.next=e}return Qt}function zg(e,t){return typeof t=="function"?t(e):t}function Z2(e){var t=Ei(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=Ut,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((lc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,Ct.lanes|=c,uc|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,lo(r,t.memoizedState)||(br=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ct.lanes|=o,uc|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function J2(e){var t=Ei(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);lo(o,t.memoizedState)||(br=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function qz(){}function Hz(e,t){var n=Ct,r=Ei(),i=t(),o=!lo(r.memoizedState,i);if(o&&(r.memoizedState=i,br=!0),r=r.queue,b$(Yz.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Qt!==null&&Qt.memoizedState.tag&1){if(n.flags|=2048,jg(9,Gz.bind(null,n,r,i,t),void 0,null),on===null)throw Error(Z(349));lc&30||Vz(n,t,i)}return i}function Vz(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gz(e,t,n,r){t.value=n,t.getSnapshot=r,Xz(t)&&Kz(e)}function Yz(e,t,n){return n(function(){Xz(t)&&Kz(e)})}function Xz(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lo(e,n)}catch{return!0}}function Kz(e){var t=sa(e,1);t!==null&&oo(t,e,1,-1)}function xP(e){var t=Ro();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:e},t.queue=e,e=e.dispatch=bee.bind(null,Ct,e),[t.memoizedState,e]}function jg(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qz(){return Ei().memoizedState}function Ky(e,t,n,r){var i=Ro();Ct.flags|=e,i.memoizedState=jg(1|t,n,void 0,r===void 0?null:r)}function Kx(e,t,n,r){var i=Ei();r=r===void 0?null:r;var o=void 0;if(Ut!==null){var s=Ut.memoizedState;if(o=s.destroy,r!==null&&y$(r,s.deps)){i.memoizedState=jg(t,n,o,r);return}}Ct.flags|=e,i.memoizedState=jg(1|t,n,o,r)}function bP(e,t){return Ky(8390656,8,e,t)}function b$(e,t){return Kx(2048,8,e,t)}function Zz(e,t){return Kx(4,2,e,t)}function Jz(e,t){return Kx(4,4,e,t)}function e8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function t8(e,t,n){return n=n!=null?n.concat([e]):null,Kx(4,4,e8.bind(null,t,e),n)}function w$(){}function n8(e,t){var n=Ei();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&y$(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function r8(e,t){var n=Ei();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&y$(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function i8(e,t,n){return lc&21?(lo(n,t)||(n=uz(),Ct.lanes|=n,uc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,br=!0),e.memoizedState=n)}function vee(e,t){var n=et;et=n!==0&&4>n?n:4,e(!0);var r=Q2.transition;Q2.transition={};try{e(!1),t()}finally{et=n,Q2.transition=r}}function o8(){return Ei().memoizedState}function xee(e,t,n){var r=vl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},s8(e))a8(t,n);else if(n=Bz(e,t,n,r),n!==null){var i=ir();oo(n,e,r,i),l8(n,t,r)}}function bee(e,t,n){var r=vl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(s8(e))a8(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,lo(a,s)){var l=t.interleaved;l===null?(i.next=i,d$(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Bz(e,t,i,r),n!==null&&(i=ir(),oo(n,e,r,i),l8(n,t,r))}}function s8(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function a8(e,t){sg=X1=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function l8(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ZA(e,n)}}var K1={readContext:wi,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},wee={readContext:wi,useCallback:function(e,t){return Ro().memoizedState=[e,t===void 0?null:t],e},useContext:wi,useEffect:bP,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ky(4194308,4,e8.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ky(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ky(4,2,e,t)},useMemo:function(e,t){var n=Ro();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ro();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xee.bind(null,Ct,e),[r.memoizedState,e]},useRef:function(e){var t=Ro();return e={current:e},t.memoizedState=e},useState:xP,useDebugValue:w$,useDeferredValue:function(e){return Ro().memoizedState=e},useTransition:function(){var e=xP(!1),t=e[0];return e=vee.bind(null,e[1]),Ro().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ct,i=Ro();if(vt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),on===null)throw Error(Z(349));lc&30||Vz(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,bP(Yz.bind(null,r,o,e),[e]),r.flags|=2048,jg(9,Gz.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ro(),t=on.identifierPrefix;if(vt){var n=Us,r=Bs;n=(r&~(1<<32-io(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Lg++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yee++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eee={readContext:wi,useCallback:n8,useContext:wi,useEffect:b$,useImperativeHandle:t8,useInsertionEffect:Zz,useLayoutEffect:Jz,useMemo:r8,useReducer:Z2,useRef:Qz,useState:function(){return Z2(zg)},useDebugValue:w$,useDeferredValue:function(e){var t=Ei();return i8(t,Ut.memoizedState,e)},useTransition:function(){var e=Z2(zg)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:qz,useSyncExternalStore:Hz,useId:o8,unstable_isNewReconciler:!1},See={readContext:wi,useCallback:n8,useContext:wi,useEffect:b$,useImperativeHandle:t8,useInsertionEffect:Zz,useLayoutEffect:Jz,useMemo:r8,useReducer:J2,useRef:Qz,useState:function(){return J2(zg)},useDebugValue:w$,useDeferredValue:function(e){var t=Ei();return Ut===null?t.memoizedState=e:i8(t,Ut.memoizedState,e)},useTransition:function(){var e=J2(zg)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:qz,useSyncExternalStore:Hz,useId:o8,unstable_isNewReconciler:!1};function Ui(e,t){if(e&&e.defaultProps){t=kt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function z_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:kt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qx={isMounted:function(e){return(e=e._reactInternals)?Ic(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ir(),i=vl(e),o=Xs(r,i);o.payload=t,n!=null&&(o.callback=n),t=ml(e,o,i),t!==null&&(oo(t,e,i,r),Yy(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ir(),i=vl(e),o=Xs(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ml(e,o,i),t!==null&&(oo(t,e,i,r),Yy(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ir(),r=vl(e),i=Xs(n,r);i.tag=2,t!=null&&(i.callback=t),t=ml(e,i,r),t!==null&&(oo(t,e,r,n),Yy(t,e,r))}};function wP(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Rg(n,r)||!Rg(i,o):!0}function u8(e,t,n){var r=!1,i=Al,o=t.contextType;return typeof o=="object"&&o!==null?o=wi(o):(i=Sr(t)?sc:Bn.current,r=t.contextTypes,o=(r=r!=null)?Ed(e,i):Al),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function EP(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qx.enqueueReplaceState(t,t.state,null)}function j_(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},h$(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=wi(o):(o=Sr(t)?sc:Bn.current,i.context=Ed(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(z_(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Qx.enqueueReplaceState(i,i.state,null),G1(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function kd(e,t){try{var n="",r=t;do n+=QZ(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function eE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function B_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _ee=typeof WeakMap=="function"?WeakMap:Map;function c8(e,t,n){n=Xs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Z1||(Z1=!0,Q_=r),B_(e,t)},n}function f8(e,t,n){n=Xs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){B_(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){B_(e,t),typeof r!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function SP(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _ee;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Lee.bind(null,e,t,n),t.then(e,e))}function _P(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function CP(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xs(-1,1),t.tag=2,ml(n,t,1))),n.lanes|=1),e)}var Cee=ma.ReactCurrentOwner,br=!1;function Xn(e,t,n,r){t.child=e===null?jz(t,null,n,r):_d(t,e.child,n,r)}function kP(e,t,n,r,i){n=n.render;var o=t.ref;return Kf(t,i),r=v$(e,t,n,r,o,i),n=x$(),e!==null&&!br?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,aa(e,t,i)):(vt&&n&&s$(t),t.flags|=1,Xn(e,t,r,i),t.child)}function AP(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!T$(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,d8(e,t,o,r,i)):(e=e1(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Rg,n(s,r)&&e.ref===t.ref)return aa(e,t,i)}return t.flags|=1,e=xl(o,r),e.ref=t.ref,e.return=t,t.child=e}function d8(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Rg(o,r)&&e.ref===t.ref)if(br=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(br=!0);else return t.lanes=e.lanes,aa(e,t,i)}return U_(e,t,n,r,i)}function h8(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Lf,Dr),Dr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lt(Lf,Dr),Dr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,lt(Lf,Dr),Dr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,lt(Lf,Dr),Dr|=r;return Xn(e,t,i,n),t.child}function p8(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function U_(e,t,n,r,i){var o=Sr(n)?sc:Bn.current;return o=Ed(t,o),Kf(t,i),n=v$(e,t,n,r,o,i),r=x$(),e!==null&&!br?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,aa(e,t,i)):(vt&&r&&s$(t),t.flags|=1,Xn(e,t,n,i),t.child)}function $P(e,t,n,r,i){if(Sr(n)){var o=!0;U1(t)}else o=!1;if(Kf(t,i),t.stateNode===null)Qy(e,t),u8(t,n,r),j_(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=wi(u):(u=Sr(n)?sc:Bn.current,u=Ed(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&EP(t,s,r,u),ja=!1;var d=t.memoizedState;s.state=d,G1(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Er.current||ja?(typeof c=="function"&&(z_(t,n,c,r),l=t.memoizedState),(a=ja||wP(t,n,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uz(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ui(t.type,a),s.props=u,f=t.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=wi(l):(l=Sr(n)?sc:Bn.current,l=Ed(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&EP(t,s,r,l),ja=!1,d=t.memoizedState,s.state=d,G1(t,r,s,i);var g=t.memoizedState;a!==f||d!==g||Er.current||ja?(typeof h=="function"&&(z_(t,n,h,r),g=t.memoizedState),(u=ja||wP(t,n,u,r,d,g,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),s.props=r,s.state=g,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return W_(e,t,n,r,o,i)}function W_(e,t,n,r,i,o){p8(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&hP(t,n,!1),aa(e,t,o);r=t.stateNode,Cee.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=_d(t,e.child,null,o),t.child=_d(t,null,a,o)):Xn(e,t,a,o),t.memoizedState=r.state,i&&hP(t,n,!0),t.child}function g8(e){var t=e.stateNode;t.pendingContext?dP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dP(e,t.context,!1),p$(e,t.containerInfo)}function TP(e,t,n,r,i){return Sd(),l$(i),t.flags|=256,Xn(e,t,n,r),t.child}var q_={dehydrated:null,treeContext:null,retryLane:0};function H_(e){return{baseLanes:e,cachePool:null,transitions:null}}function m8(e,t,n){var r=t.pendingProps,i=Et.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),lt(Et,i&1),e===null)return I_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=eb(s,r,0,null),e=Xu(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=H_(n),t.memoizedState=q_,e):E$(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kee(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=xl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=xl(a,o):(o=Xu(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?H_(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=q_,r}return o=e.child,e=o.sibling,r=xl(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function E$(e,t){return t=eb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function U0(e,t,n,r){return r!==null&&l$(r),_d(t,e.child,null,n),e=E$(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kee(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=eE(Error(Z(422))),U0(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=eb({mode:"visible",children:r.children},i,0,null),o=Xu(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&_d(t,e.child,null,s),t.child.memoizedState=H_(s),t.memoizedState=q_,o);if(!(t.mode&1))return U0(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Z(419)),r=eE(o,r,void 0),U0(e,t,s,r)}if(a=(s&e.childLanes)!==0,br||a){if(r=on,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,sa(e,i),oo(r,e,i,-1))}return $$(),r=eE(Error(Z(421))),U0(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=zee.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Br=gl(i.nextSibling),Hr=t,vt=!0,Xi=null,e!==null&&(ui[ci++]=Bs,ui[ci++]=Us,ui[ci++]=ac,Bs=e.id,Us=e.overflow,ac=t),t=E$(t,r.children),t.flags|=4096,t)}function NP(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),L_(e.return,t,n)}function tE(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function y8(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Xn(e,t,r.children,n),r=Et.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&NP(e,n,t);else if(e.tag===19)NP(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(Et,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Y1(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),tE(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Y1(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}tE(t,!0,n,null,o);break;case"together":tE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function aa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),uc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=xl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Aee(e,t,n){switch(t.tag){case 3:g8(t),Sd();break;case 5:Wz(t);break;case 1:Sr(t.type)&&U1(t);break;case 4:p$(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;lt(H1,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(lt(Et,Et.current&1),t.flags|=128,null):n&t.child.childLanes?m8(e,t,n):(lt(Et,Et.current&1),e=aa(e,t,n),e!==null?e.sibling:null);lt(Et,Et.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return y8(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(Et,Et.current),r)break;return null;case 22:case 23:return t.lanes=0,h8(e,t,n)}return aa(e,t,n)}var v8,V_,x8,b8;v8=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};V_=function(){};x8=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Iu(Xo.current);var o=null;switch(n){case"input":i=p_(e,i),r=p_(e,r),o=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),o=[];break;case"textarea":i=y_(e,i),r=y_(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=j1)}x_(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cg.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cg.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dt("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};b8=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zh(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $ee(e,t,n){var r=t.pendingProps;switch(a$(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(t),null;case 1:return Sr(t.type)&&B1(),kn(t),null;case 3:return r=t.stateNode,Cd(),gt(Er),gt(Bn),m$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(j0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xi!==null&&(eC(Xi),Xi=null))),V_(e,t),kn(t),null;case 5:g$(t);var i=Iu(Ig.current);if(n=t.type,e!==null&&t.stateNode!=null)x8(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return kn(t),null}if(e=Iu(Xo.current),j0(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[jo]=t,r[Pg]=o,e=(t.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(i=0;i<Np.length;i++)dt(Np[i],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":zO(r,o),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},dt("invalid",r);break;case"textarea":BO(r,o),dt("invalid",r)}x_(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&z0(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&z0(r.textContent,a,e),i=["children",""+a]):Cg.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&dt("scroll",r)}switch(n){case"input":M0(r),jO(r,o,!0);break;case"textarea":M0(r),UO(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=j1)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Y6(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[jo]=t,e[Pg]=r,v8(e,t,!1,!1),t.stateNode=e;e:{switch(s=b_(n,r),n){case"dialog":dt("cancel",e),dt("close",e),i=r;break;case"iframe":case"object":case"embed":dt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Np.length;i++)dt(Np[i],e);i=r;break;case"source":dt("error",e),i=r;break;case"img":case"image":case"link":dt("error",e),dt("load",e),i=r;break;case"details":dt("toggle",e),i=r;break;case"input":zO(e,r),i=p_(e,r),dt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),dt("invalid",e);break;case"textarea":BO(e,r),i=y_(e,r),dt("invalid",e);break;default:i=r}x_(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Q6(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X6(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&kg(e,l):typeof l=="number"&&kg(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cg.hasOwnProperty(o)?l!=null&&o==="onScroll"&&dt("scroll",e):l!=null&&VA(e,o,l,s))}switch(n){case"input":M0(e),jO(e,r,!1);break;case"textarea":M0(e),UO(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kl(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Vf(e,!!r.multiple,o,!1):r.defaultValue!=null&&Vf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=j1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kn(t),null;case 6:if(e&&t.stateNode!=null)b8(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Z(166));if(n=Iu(Ig.current),Iu(Xo.current),j0(t)){if(r=t.stateNode,n=t.memoizedProps,r[jo]=t,(o=r.nodeValue!==n)&&(e=Hr,e!==null))switch(e.tag){case 3:z0(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&z0(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jo]=t,t.stateNode=r}return kn(t),null;case 13:if(gt(Et),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&Br!==null&&t.mode&1&&!(t.flags&128))Lz(),Sd(),t.flags|=98560,o=!1;else if(o=j0(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[jo]=t}else Sd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kn(t),o=!1}else Xi!==null&&(eC(Xi),Xi=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Et.current&1?Ht===0&&(Ht=3):$$())),t.updateQueue!==null&&(t.flags|=4),kn(t),null);case 4:return Cd(),V_(e,t),e===null&&Fg(t.stateNode.containerInfo),kn(t),null;case 10:return f$(t.type._context),kn(t),null;case 17:return Sr(t.type)&&B1(),kn(t),null;case 19:if(gt(Et),o=t.memoizedState,o===null)return kn(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Zh(o,!1);else{if(Ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Y1(e),s!==null){for(t.flags|=128,Zh(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lt(Et,Et.current&1|2),t.child}e=e.sibling}o.tail!==null&&Pt()>Ad&&(t.flags|=128,r=!0,Zh(o,!1),t.lanes=4194304)}else{if(!r)if(e=Y1(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!vt)return kn(t),null}else 2*Pt()-o.renderingStartTime>Ad&&n!==1073741824&&(t.flags|=128,r=!0,Zh(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pt(),t.sibling=null,n=Et.current,lt(Et,r?n&1|2:n&1),t):(kn(t),null);case 22:case 23:return A$(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dr&1073741824&&(kn(t),t.subtreeFlags&6&&(t.flags|=8192)):kn(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function Tee(e,t){switch(a$(t),t.tag){case 1:return Sr(t.type)&&B1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cd(),gt(Er),gt(Bn),m$(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return g$(t),null;case 13:if(gt(Et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Sd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gt(Et),null;case 4:return Cd(),null;case 10:return f$(t.type._context),null;case 22:case 23:return A$(),null;case 24:return null;default:return null}}var W0=!1,Fn=!1,Nee=typeof WeakSet=="function"?WeakSet:Set,pe=null;function If(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(e,t,r)}else n.current=null}function G_(e,t,n){try{n()}catch(r){Nt(e,t,r)}}var MP=!1;function Mee(e,t){if(N_=I1,e=Cz(),o$(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(M_={focusedElem:e,selectionRange:n},I1=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,m=g.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ui(t.type,p),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(b){Nt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return g=MP,MP=!1,g}function ag(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&G_(t,n,o)}i=i.next}while(i!==r)}}function Zx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Y_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function w8(e){var t=e.alternate;t!==null&&(e.alternate=null,w8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jo],delete t[Pg],delete t[O_],delete t[hee],delete t[pee])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function E8(e){return e.tag===5||e.tag===3||e.tag===4}function RP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||E8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function X_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=j1));else if(r!==4&&(e=e.child,e!==null))for(X_(e,t,n),e=e.sibling;e!==null;)X_(e,t,n),e=e.sibling}function K_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(K_(e,t,n),e=e.sibling;e!==null;)K_(e,t,n),e=e.sibling}var fn=null,Vi=!1;function Na(e,t,n){for(n=n.child;n!==null;)S8(e,t,n),n=n.sibling}function S8(e,t,n){if(Yo&&typeof Yo.onCommitFiberUnmount=="function")try{Yo.onCommitFiberUnmount(qx,n)}catch{}switch(n.tag){case 5:Fn||If(n,t);case 6:var r=fn,i=Vi;fn=null,Na(e,t,n),fn=r,Vi=i,fn!==null&&(Vi?(e=fn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(Vi?(e=fn,n=n.stateNode,e.nodeType===8?Y2(e.parentNode,n):e.nodeType===1&&Y2(e,n),Ng(e)):Y2(fn,n.stateNode));break;case 4:r=fn,i=Vi,fn=n.stateNode.containerInfo,Vi=!0,Na(e,t,n),fn=r,Vi=i;break;case 0:case 11:case 14:case 15:if(!Fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&G_(n,t,s),i=i.next}while(i!==r)}Na(e,t,n);break;case 1:if(!Fn&&(If(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nt(n,t,a)}Na(e,t,n);break;case 21:Na(e,t,n);break;case 22:n.mode&1?(Fn=(r=Fn)||n.memoizedState!==null,Na(e,t,n),Fn=r):Na(e,t,n);break;default:Na(e,t,n)}}function FP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Nee),t.forEach(function(r){var i=jee.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Di(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:fn=a.stateNode,Vi=!1;break e;case 3:fn=a.stateNode.containerInfo,Vi=!0;break e;case 4:fn=a.stateNode.containerInfo,Vi=!0;break e}a=a.return}if(fn===null)throw Error(Z(160));S8(o,s,i),fn=null,Vi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Nt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_8(t,e),t=t.sibling}function _8(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Di(t,e),$o(e),r&4){try{ag(3,e,e.return),Zx(3,e)}catch(p){Nt(e,e.return,p)}try{ag(5,e,e.return)}catch(p){Nt(e,e.return,p)}}break;case 1:Di(t,e),$o(e),r&512&&n!==null&&If(n,n.return);break;case 5:if(Di(t,e),$o(e),r&512&&n!==null&&If(n,n.return),e.flags&32){var i=e.stateNode;try{kg(i,"")}catch(p){Nt(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&V6(i,o),b_(a,s);var u=b_(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?Q6(i,f):c==="dangerouslySetInnerHTML"?X6(i,f):c==="children"?kg(i,f):VA(i,c,f,u)}switch(a){case"input":g_(i,o);break;case"textarea":G6(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Vf(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Vf(i,!!o.multiple,o.defaultValue,!0):Vf(i,!!o.multiple,o.multiple?[]:"",!1))}i[Pg]=o}catch(p){Nt(e,e.return,p)}}break;case 6:if(Di(t,e),$o(e),r&4){if(e.stateNode===null)throw Error(Z(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(p){Nt(e,e.return,p)}}break;case 3:if(Di(t,e),$o(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ng(t.containerInfo)}catch(p){Nt(e,e.return,p)}break;case 4:Di(t,e),$o(e);break;case 13:Di(t,e),$o(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(C$=Pt())),r&4&&FP(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Fn=(u=Fn)||c,Di(t,e),Fn=u):Di(t,e),$o(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(pe=e,c=e.child;c!==null;){for(f=pe=c;pe!==null;){switch(d=pe,h=d.child,d.tag){case 0:case 11:case 14:case 15:ag(4,d,d.return);break;case 1:If(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Nt(r,n,p)}}break;case 5:If(d,d.return);break;case 22:if(d.memoizedState!==null){PP(f);continue}}h!==null?(h.return=d,pe=h):PP(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=K6("display",s))}catch(p){Nt(e,e.return,p)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Nt(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Di(t,e),$o(e),r&4&&FP(e);break;case 21:break;default:Di(t,e),$o(e)}}function $o(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(E8(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kg(i,""),r.flags&=-33);var o=RP(e);K_(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=RP(e);X_(e,a,s);break;default:throw Error(Z(161))}}catch(l){Nt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ree(e,t,n){pe=e,C8(e)}function C8(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var i=pe,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||W0;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Fn;a=W0;var u=Fn;if(W0=s,(Fn=l)&&!u)for(pe=i;pe!==null;)s=pe,l=s.child,s.tag===22&&s.memoizedState!==null?DP(i):l!==null?(l.return=s,pe=l):DP(i);for(;o!==null;)pe=o,C8(o),o=o.sibling;pe=i,W0=a,Fn=u}OP(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,pe=o):OP(e)}}function OP(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fn||Zx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ui(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&vP(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}vP(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ng(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Fn||t.flags&512&&Y_(t)}catch(d){Nt(t,t.return,d)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function PP(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function DP(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zx(4,t)}catch(l){Nt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Nt(t,i,l)}}var o=t.return;try{Y_(t)}catch(l){Nt(t,o,l)}break;case 5:var s=t.return;try{Y_(t)}catch(l){Nt(t,s,l)}}}catch(l){Nt(t,t.return,l)}if(t===e){pe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,pe=a;break}pe=t.return}}var Fee=Math.ceil,Q1=ma.ReactCurrentDispatcher,S$=ma.ReactCurrentOwner,vi=ma.ReactCurrentBatchConfig,We=0,on=null,zt=null,vn=0,Dr=0,Lf=Vl(0),Ht=0,Bg=null,uc=0,Jx=0,_$=0,lg=null,yr=null,C$=0,Ad=1/0,Fs=null,Z1=!1,Q_=null,yl=null,q0=!1,tl=null,J1=0,ug=0,Z_=null,Zy=-1,Jy=0;function ir(){return We&6?Pt():Zy!==-1?Zy:Zy=Pt()}function vl(e){return e.mode&1?We&2&&vn!==0?vn&-vn:mee.transition!==null?(Jy===0&&(Jy=uz()),Jy):(e=et,e!==0||(e=window.event,e=e===void 0?16:mz(e.type)),e):1}function oo(e,t,n,r){if(50<ug)throw ug=0,Z_=null,Error(Z(185));$m(e,n,r),(!(We&2)||e!==on)&&(e===on&&(!(We&2)&&(Jx|=n),Ht===4&&Ga(e,vn)),_r(e,r),n===1&&We===0&&!(t.mode&1)&&(Ad=Pt()+500,Xx&&Gl()))}function _r(e,t){var n=e.callbackNode;mJ(e,t);var r=D1(e,e===on?vn:0);if(r===0)n!==null&&HO(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&HO(n),t===1)e.tag===0?gee(IP.bind(null,e)):Pz(IP.bind(null,e)),fee(function(){!(We&6)&&Gl()}),n=null;else{switch(cz(r)){case 1:n=QA;break;case 4:n=az;break;case 16:n=P1;break;case 536870912:n=lz;break;default:n=P1}n=F8(n,k8.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function k8(e,t){if(Zy=-1,Jy=0,We&6)throw Error(Z(327));var n=e.callbackNode;if(Qf()&&e.callbackNode!==n)return null;var r=D1(e,e===on?vn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ev(e,r);else{t=r;var i=We;We|=2;var o=$8();(on!==e||vn!==t)&&(Fs=null,Ad=Pt()+500,Yu(e,t));do try{Dee();break}catch(a){A8(e,a)}while(!0);c$(),Q1.current=o,We=i,zt!==null?t=0:(on=null,vn=0,t=Ht)}if(t!==0){if(t===2&&(i=C_(e),i!==0&&(r=i,t=J_(e,i))),t===1)throw n=Bg,Yu(e,0),Ga(e,r),_r(e,Pt()),n;if(t===6)Ga(e,r);else{if(i=e.current.alternate,!(r&30)&&!Oee(i)&&(t=ev(e,r),t===2&&(o=C_(e),o!==0&&(r=o,t=J_(e,o))),t===1))throw n=Bg,Yu(e,0),Ga(e,r),_r(e,Pt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Z(345));case 2:Cu(e,yr,Fs);break;case 3:if(Ga(e,r),(r&130023424)===r&&(t=C$+500-Pt(),10<t)){if(D1(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ir(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=F_(Cu.bind(null,e,yr,Fs),t);break}Cu(e,yr,Fs);break;case 4:if(Ga(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-io(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fee(r/1960))-r,10<r){e.timeoutHandle=F_(Cu.bind(null,e,yr,Fs),r);break}Cu(e,yr,Fs);break;case 5:Cu(e,yr,Fs);break;default:throw Error(Z(329))}}}return _r(e,Pt()),e.callbackNode===n?k8.bind(null,e):null}function J_(e,t){var n=lg;return e.current.memoizedState.isDehydrated&&(Yu(e,t).flags|=256),e=ev(e,t),e!==2&&(t=yr,yr=n,t!==null&&eC(t)),e}function eC(e){yr===null?yr=e:yr.push.apply(yr,e)}function Oee(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!lo(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ga(e,t){for(t&=~_$,t&=~Jx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-io(t),r=1<<n;e[n]=-1,t&=~r}}function IP(e){if(We&6)throw Error(Z(327));Qf();var t=D1(e,0);if(!(t&1))return _r(e,Pt()),null;var n=ev(e,t);if(e.tag!==0&&n===2){var r=C_(e);r!==0&&(t=r,n=J_(e,r))}if(n===1)throw n=Bg,Yu(e,0),Ga(e,t),_r(e,Pt()),n;if(n===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e,yr,Fs),_r(e,Pt()),null}function k$(e,t){var n=We;We|=1;try{return e(t)}finally{We=n,We===0&&(Ad=Pt()+500,Xx&&Gl())}}function cc(e){tl!==null&&tl.tag===0&&!(We&6)&&Qf();var t=We;We|=1;var n=vi.transition,r=et;try{if(vi.transition=null,et=1,e)return e()}finally{et=r,vi.transition=n,We=t,!(We&6)&&Gl()}}function A$(){Dr=Lf.current,gt(Lf)}function Yu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cee(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(a$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&B1();break;case 3:Cd(),gt(Er),gt(Bn),m$();break;case 5:g$(r);break;case 4:Cd();break;case 13:gt(Et);break;case 19:gt(Et);break;case 10:f$(r.type._context);break;case 22:case 23:A$()}n=n.return}if(on=e,zt=e=xl(e.current,null),vn=Dr=t,Ht=0,Bg=null,_$=Jx=uc=0,yr=lg=null,Du!==null){for(t=0;t<Du.length;t++)if(n=Du[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Du=null}return e}function A8(e,t){do{var n=zt;try{if(c$(),Xy.current=K1,X1){for(var r=Ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}X1=!1}if(lc=0,Qt=Ut=Ct=null,sg=!1,Lg=0,S$.current=null,n===null||n.return===null){Ht=1,Bg=t,zt=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=_P(s);if(h!==null){h.flags&=-257,CP(h,s,a,o,t),h.mode&1&&SP(o,u,t),t=h,l=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(l),t.updateQueue=p}else g.add(l);break e}else{if(!(t&1)){SP(o,u,t),$$();break e}l=Error(Z(426))}}else if(vt&&a.mode&1){var m=_P(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),CP(m,s,a,o,t),l$(kd(l,a));break e}}o=l=kd(l,a),Ht!==4&&(Ht=2),lg===null?lg=[o]:lg.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=c8(o,l,t);yP(o,y);break e;case 1:a=l;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(yl===null||!yl.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=f8(o,a,t);yP(o,b);break e}}o=o.return}while(o!==null)}N8(n)}catch(w){t=w,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function $8(){var e=Q1.current;return Q1.current=K1,e===null?K1:e}function $$(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),on===null||!(uc&268435455)&&!(Jx&268435455)||Ga(on,vn)}function ev(e,t){var n=We;We|=2;var r=$8();(on!==e||vn!==t)&&(Fs=null,Yu(e,t));do try{Pee();break}catch(i){A8(e,i)}while(!0);if(c$(),We=n,Q1.current=r,zt!==null)throw Error(Z(261));return on=null,vn=0,Ht}function Pee(){for(;zt!==null;)T8(zt)}function Dee(){for(;zt!==null&&!aJ();)T8(zt)}function T8(e){var t=R8(e.alternate,e,Dr);e.memoizedProps=e.pendingProps,t===null?N8(e):zt=t,S$.current=null}function N8(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Tee(n,t),n!==null){n.flags&=32767,zt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,zt=null;return}}else if(n=$ee(n,t,Dr),n!==null){zt=n;return}if(t=t.sibling,t!==null){zt=t;return}zt=t=e}while(t!==null);Ht===0&&(Ht=5)}function Cu(e,t,n){var r=et,i=vi.transition;try{vi.transition=null,et=1,Iee(e,t,n,r)}finally{vi.transition=i,et=r}return null}function Iee(e,t,n,r){do Qf();while(tl!==null);if(We&6)throw Error(Z(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(yJ(e,o),e===on&&(zt=on=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||q0||(q0=!0,F8(P1,function(){return Qf(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=vi.transition,vi.transition=null;var s=et;et=1;var a=We;We|=4,S$.current=null,Mee(e,n),_8(n,e),ree(M_),I1=!!N_,M_=N_=null,e.current=n,Ree(n),lJ(),We=a,et=s,vi.transition=o}else e.current=n;if(q0&&(q0=!1,tl=e,J1=i),o=e.pendingLanes,o===0&&(yl=null),fJ(n.stateNode),_r(e,Pt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Z1)throw Z1=!1,e=Q_,Q_=null,e;return J1&1&&e.tag!==0&&Qf(),o=e.pendingLanes,o&1?e===Z_?ug++:(ug=0,Z_=e):ug=0,Gl(),null}function Qf(){if(tl!==null){var e=cz(J1),t=vi.transition,n=et;try{if(vi.transition=null,et=16>e?16:e,tl===null)var r=!1;else{if(e=tl,tl=null,J1=0,We&6)throw Error(Z(331));var i=We;for(We|=4,pe=e.current;pe!==null;){var o=pe,s=o.child;if(pe.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(pe=u;pe!==null;){var c=pe;switch(c.tag){case 0:case 11:case 15:ag(8,c,o)}var f=c.child;if(f!==null)f.return=c,pe=f;else for(;pe!==null;){c=pe;var d=c.sibling,h=c.return;if(w8(c),c===u){pe=null;break}if(d!==null){d.return=h,pe=d;break}pe=h}}}var g=o.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}pe=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,pe=s;else e:for(;pe!==null;){if(o=pe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ag(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,pe=y;break e}pe=o.return}}var v=e.current;for(pe=v;pe!==null;){s=pe;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,pe=x;else e:for(s=v;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zx(9,a)}}catch(w){Nt(a,a.return,w)}if(a===s){pe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,pe=b;break e}pe=a.return}}if(We=i,Gl(),Yo&&typeof Yo.onPostCommitFiberRoot=="function")try{Yo.onPostCommitFiberRoot(qx,e)}catch{}r=!0}return r}finally{et=n,vi.transition=t}}return!1}function LP(e,t,n){t=kd(n,t),t=c8(e,t,1),e=ml(e,t,1),t=ir(),e!==null&&($m(e,1,t),_r(e,t))}function Nt(e,t,n){if(e.tag===3)LP(e,e,n);else for(;t!==null;){if(t.tag===3){LP(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yl===null||!yl.has(r))){e=kd(n,e),e=f8(t,e,1),t=ml(t,e,1),e=ir(),t!==null&&($m(t,1,e),_r(t,e));break}}t=t.return}}function Lee(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ir(),e.pingedLanes|=e.suspendedLanes&n,on===e&&(vn&n)===n&&(Ht===4||Ht===3&&(vn&130023424)===vn&&500>Pt()-C$?Yu(e,0):_$|=n),_r(e,t)}function M8(e,t){t===0&&(e.mode&1?(t=O0,O0<<=1,!(O0&130023424)&&(O0=4194304)):t=1);var n=ir();e=sa(e,t),e!==null&&($m(e,t,n),_r(e,n))}function zee(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),M8(e,n)}function jee(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(t),M8(e,n)}var R8;R8=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Er.current)br=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return br=!1,Aee(e,t,n);br=!!(e.flags&131072)}else br=!1,vt&&t.flags&1048576&&Dz(t,q1,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qy(e,t),e=t.pendingProps;var i=Ed(t,Bn.current);Kf(t,n),i=v$(null,t,r,e,i,n);var o=x$();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sr(r)?(o=!0,U1(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,h$(t),i.updater=Qx,t.stateNode=i,i._reactInternals=t,j_(t,r,e,n),t=W_(null,t,r,!0,o,n)):(t.tag=0,vt&&o&&s$(t),Xn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qy(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Uee(r),e=Ui(r,e),i){case 0:t=U_(null,t,r,e,n);break e;case 1:t=$P(null,t,r,e,n);break e;case 11:t=kP(null,t,r,e,n);break e;case 14:t=AP(null,t,r,Ui(r.type,e),n);break e}throw Error(Z(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),U_(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),$P(e,t,r,i,n);case 3:e:{if(g8(t),e===null)throw Error(Z(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Uz(e,t),G1(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=kd(Error(Z(423)),t),t=TP(e,t,r,n,i);break e}else if(r!==i){i=kd(Error(Z(424)),t),t=TP(e,t,r,n,i);break e}else for(Br=gl(t.stateNode.containerInfo.firstChild),Hr=t,vt=!0,Xi=null,n=jz(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sd(),r===i){t=aa(e,t,n);break e}Xn(e,t,r,n)}t=t.child}return t;case 5:return Wz(t),e===null&&I_(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,R_(r,i)?s=null:o!==null&&R_(r,o)&&(t.flags|=32),p8(e,t),Xn(e,t,s,n),t.child;case 6:return e===null&&I_(t),null;case 13:return m8(e,t,n);case 4:return p$(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_d(t,null,r,n):Xn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),kP(e,t,r,i,n);case 7:return Xn(e,t,t.pendingProps,n),t.child;case 8:return Xn(e,t,t.pendingProps.children,n),t.child;case 12:return Xn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,lt(H1,r._currentValue),r._currentValue=s,o!==null)if(lo(o.value,s)){if(o.children===i.children&&!Er.current){t=aa(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Xs(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),L_(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Z(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),L_(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Xn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Kf(t,n),i=wi(i),r=r(i),t.flags|=1,Xn(e,t,r,n),t.child;case 14:return r=t.type,i=Ui(r,t.pendingProps),i=Ui(r.type,i),AP(e,t,r,i,n);case 15:return d8(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),Qy(e,t),t.tag=1,Sr(r)?(e=!0,U1(t)):e=!1,Kf(t,n),u8(t,r,i),j_(t,r,i,n),W_(null,t,r,!0,e,n);case 19:return y8(e,t,n);case 22:return h8(e,t,n)}throw Error(Z(156,t.tag))};function F8(e,t){return sz(e,t)}function Bee(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(e,t,n,r){return new Bee(e,t,n,r)}function T$(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uee(e){if(typeof e=="function")return T$(e)?1:0;if(e!=null){if(e=e.$$typeof,e===YA)return 11;if(e===XA)return 14}return 2}function xl(e,t){var n=e.alternate;return n===null?(n=hi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function e1(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")T$(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case $f:return Xu(n.children,i,o,t);case GA:s=8,i|=8;break;case c_:return e=hi(12,n,t,i|2),e.elementType=c_,e.lanes=o,e;case f_:return e=hi(13,n,t,i),e.elementType=f_,e.lanes=o,e;case d_:return e=hi(19,n,t,i),e.elementType=d_,e.lanes=o,e;case W6:return eb(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B6:s=10;break e;case U6:s=9;break e;case YA:s=11;break e;case XA:s=14;break e;case za:s=16,r=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=hi(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Xu(e,t,n,r){return e=hi(7,e,r,t),e.lanes=n,e}function eb(e,t,n,r){return e=hi(22,e,r,t),e.elementType=W6,e.lanes=n,e.stateNode={isHidden:!1},e}function nE(e,t,n){return e=hi(6,e,null,t),e.lanes=n,e}function rE(e,t,n){return t=hi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wee(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=I2(0),this.expirationTimes=I2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I2(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function N$(e,t,n,r,i,o,s,a,l){return e=new Wee(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=hi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},h$(o),e}function qee(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Af,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function O8(e){if(!e)return Al;e=e._reactInternals;e:{if(Ic(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var n=e.type;if(Sr(n))return Oz(e,n,t)}return t}function P8(e,t,n,r,i,o,s,a,l){return e=N$(n,r,!0,e,i,o,s,a,l),e.context=O8(null),n=e.current,r=ir(),i=vl(n),o=Xs(r,i),o.callback=t??null,ml(n,o,i),e.current.lanes=i,$m(e,i,r),_r(e,r),e}function tb(e,t,n,r){var i=t.current,o=ir(),s=vl(i);return n=O8(n),t.context===null?t.context=n:t.pendingContext=n,t=Xs(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ml(i,t,s),e!==null&&(oo(e,i,s,o),Yy(e,i,s)),s}function tv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function M$(e,t){zP(e,t),(e=e.alternate)&&zP(e,t)}function Hee(){return null}var D8=typeof reportError=="function"?reportError:function(e){console.error(e)};function R$(e){this._internalRoot=e}nb.prototype.render=R$.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));tb(e,t,null,null)};nb.prototype.unmount=R$.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cc(function(){tb(null,e,null,null)}),t[oa]=null}};function nb(e){this._internalRoot=e}nb.prototype.unstable_scheduleHydration=function(e){if(e){var t=hz();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Va.length&&t!==0&&t<Va[n].priority;n++);Va.splice(n,0,e),n===0&&gz(e)}};function F$(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jP(){}function Vee(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=tv(s);o.call(u)}}var s=P8(t,r,e,0,null,!1,!1,"",jP);return e._reactRootContainer=s,e[oa]=s.current,Fg(e.nodeType===8?e.parentNode:e),cc(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=tv(l);a.call(u)}}var l=N$(e,0,!1,null,null,!1,!1,"",jP);return e._reactRootContainer=l,e[oa]=l.current,Fg(e.nodeType===8?e.parentNode:e),cc(function(){tb(t,l,n,r)}),l}function ib(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=tv(s);a.call(l)}}tb(t,s,e,i)}else s=Vee(n,t,e,i,r);return tv(s)}fz=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Tp(t.pendingLanes);n!==0&&(ZA(t,n|1),_r(t,Pt()),!(We&6)&&(Ad=Pt()+500,Gl()))}break;case 13:cc(function(){var r=sa(e,1);if(r!==null){var i=ir();oo(r,e,1,i)}}),M$(e,1)}};JA=function(e){if(e.tag===13){var t=sa(e,134217728);if(t!==null){var n=ir();oo(t,e,134217728,n)}M$(e,134217728)}};dz=function(e){if(e.tag===13){var t=vl(e),n=sa(e,t);if(n!==null){var r=ir();oo(n,e,t,r)}M$(e,t)}};hz=function(){return et};pz=function(e,t){var n=et;try{return et=e,t()}finally{et=n}};E_=function(e,t,n){switch(t){case"input":if(g_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Yx(r);if(!i)throw Error(Z(90));H6(r),g_(r,i)}}}break;case"textarea":G6(e,n);break;case"select":t=n.value,t!=null&&Vf(e,!!n.multiple,t,!1)}};ez=k$;tz=cc;var Gee={usingClientEntryPoint:!1,Events:[Nm,Rf,Yx,Z6,J6,k$]},Jh={findFiberByHostInstance:Pu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yee={bundleType:Jh.bundleType,version:Jh.version,rendererPackageName:Jh.rendererPackageName,rendererConfig:Jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iz(e),e===null?null:e.stateNode},findFiberByHostInstance:Jh.findFiberByHostInstance||Hee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H0.isDisabled&&H0.supportsFiber)try{qx=H0.inject(Yee),Yo=H0}catch{}}ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gee;ni.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!F$(t))throw Error(Z(200));return qee(e,t,null,n)};ni.createRoot=function(e,t){if(!F$(e))throw Error(Z(299));var n=!1,r="",i=D8;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=N$(e,1,!1,null,null,n,!1,r,i),e[oa]=t.current,Fg(e.nodeType===8?e.parentNode:e),new R$(t)};ni.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=iz(t),e=e===null?null:e.stateNode,e};ni.flushSync=function(e){return cc(e)};ni.hydrate=function(e,t,n){if(!rb(t))throw Error(Z(200));return ib(null,e,t,!0,n)};ni.hydrateRoot=function(e,t,n){if(!F$(e))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=D8;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=P8(t,null,e,1,n??null,i,!1,o,s),e[oa]=t.current,Fg(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new nb(t)};ni.render=function(e,t,n){if(!rb(t))throw Error(Z(200));return ib(null,e,t,!1,n)};ni.unmountComponentAtNode=function(e){if(!rb(e))throw Error(Z(40));return e._reactRootContainer?(cc(function(){ib(null,null,e,!1,function(){e._reactRootContainer=null,e[oa]=null})}),!0):!1};ni.unstable_batchedUpdates=k$;ni.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rb(n))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return ib(e,t,n,!1,r)};ni.version="18.3.1-next-f1338f8080-20240426";function I8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I8)}catch(e){console.error(e)}}I8(),I6.exports=ni;var Lc=I6.exports;const L8=C6(Lc);var z8,BP=Lc;z8=BP.createRoot,BP.hydrateRoot;const Xee=1,Kee=1e6;let iE=0;function Qee(){return iE=(iE+1)%Number.MAX_SAFE_INTEGER,iE.toString()}const oE=new Map,UP=e=>{if(oE.has(e))return;const t=setTimeout(()=>{oE.delete(e),cg({type:"REMOVE_TOAST",toastId:e})},Kee);oE.set(e,t)},Zee=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Xee)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?UP(n):e.toasts.forEach(r=>{UP(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},t1=[];let n1={toasts:[]};function cg(e){n1=Zee(n1,e),t1.forEach(t=>{t(n1)})}function Jee({...e}){const t=Qee(),n=i=>cg({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>cg({type:"DISMISS_TOAST",toastId:t});return cg({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function ete(){const[e,t]=C.useState(n1);return C.useEffect(()=>(t1.push(t),()=>{const n=t1.indexOf(t);n>-1&&t1.splice(n,1)}),[e]),{...e,toast:Jee,dismiss:n=>cg({type:"DISMISS_TOAST",toastId:n})}}function De(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function WP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function j8(...e){return t=>{let n=!1;const r=e.map(i=>{const o=WP(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():WP(e[i],null)}}}}function Ft(...e){return C.useCallback(j8(...e),e)}function Rm(e,t=[]){let n=[];function r(o,s){const a=C.createContext(s),l=n.length;n=[...n,s];const u=f=>{var y;const{scope:d,children:h,...g}=f,p=((y=d==null?void 0:d[e])==null?void 0:y[l])||a,m=C.useMemo(()=>g,Object.values(g));return A.jsx(p.Provider,{value:m,children:h})};u.displayName=o+"Provider";function c(f,d){var p;const h=((p=d==null?void 0:d[e])==null?void 0:p[l])||a,g=C.useContext(h);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,c]}const i=()=>{const o=n.map(s=>C.createContext(s));return function(a){const l=(a==null?void 0:a[e])||o;return C.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,tte(i,...t)]}function tte(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function Ug(e){const t=rte(e),n=C.forwardRef((r,i)=>{const{children:o,...s}=r,a=C.Children.toArray(o),l=a.find(ote);if(l){const u=l.props.children,c=a.map(f=>f===l?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:f);return A.jsx(t,{...s,ref:i,children:C.isValidElement(u)?C.cloneElement(u,void 0,c):null})}return A.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}var nte=Ug("Slot");function rte(e){const t=C.forwardRef((n,r)=>{const{children:i,...o}=n;if(C.isValidElement(i)){const s=ate(i),a=ste(o,i.props);return i.type!==C.Fragment&&(a.ref=r?j8(r,s):s),C.cloneElement(i,a)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var B8=Symbol("radix.slottable");function ite(e){const t=({children:n})=>A.jsx(A.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=B8,t}function ote(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===B8}function ste(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const l=o(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function ate(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function U8(e){const t=e+"CollectionProvider",[n,r]=Rm(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:m,children:y}=p,v=re.useRef(null),x=re.useRef(new Map).current;return A.jsx(i,{scope:m,itemMap:x,collectionRef:v,children:y})};s.displayName=t;const a=e+"CollectionSlot",l=Ug(a),u=re.forwardRef((p,m)=>{const{scope:y,children:v}=p,x=o(a,y),b=Ft(m,x.collectionRef);return A.jsx(l,{ref:b,children:v})});u.displayName=a;const c=e+"CollectionItemSlot",f="data-radix-collection-item",d=Ug(c),h=re.forwardRef((p,m)=>{const{scope:y,children:v,...x}=p,b=re.useRef(null),w=Ft(m,b),S=o(c,y);return re.useEffect(()=>(S.itemMap.set(b,{ref:b,...x}),()=>void S.itemMap.delete(b))),A.jsx(d,{[f]:"",ref:w,children:v})});h.displayName=c;function g(p){const m=o(e+"CollectionConsumer",p);return re.useCallback(()=>{const v=m.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(m.itemMap.values()).sort((S,E)=>x.indexOf(S.ref.current)-x.indexOf(E.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:s,Slot:u,ItemSlot:h},g,r]}var lte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=lte.reduce((e,t)=>{const n=Ug(`Primitive.${t}`),r=C.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function W8(e,t){e&&Lc.flushSync(()=>e.dispatchEvent(t))}function uo(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function ute(e,t=globalThis==null?void 0:globalThis.document){const n=uo(e);C.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var cte="DismissableLayer",tC="dismissableLayer.update",fte="dismissableLayer.pointerDownOutside",dte="dismissableLayer.focusOutside",qP,q8=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ob=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=e,u=C.useContext(q8),[c,f]=C.useState(null),d=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=C.useState({}),g=Ft(t,E=>f(E)),p=Array.from(u.layers),[m]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(m),v=c?p.indexOf(c):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,b=v>=y,w=pte(E=>{const _=E.target,k=[...u.branches].some(T=>T.contains(_));!b||k||(i==null||i(E),s==null||s(E),E.defaultPrevented||a==null||a())},d),S=gte(E=>{const _=E.target;[...u.branches].some(T=>T.contains(_))||(o==null||o(E),s==null||s(E),E.defaultPrevented||a==null||a())},d);return ute(E=>{v===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},d),C.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(qP=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),HP(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=qP)}},[c,d,n,u]),C.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),HP())},[c,u]),C.useEffect(()=>{const E=()=>h({});return document.addEventListener(tC,E),()=>document.removeEventListener(tC,E)},[]),A.jsx(rt.div,{...l,ref:g,style:{pointerEvents:x?b?"auto":"none":void 0,...e.style},onFocusCapture:De(e.onFocusCapture,S.onFocusCapture),onBlurCapture:De(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:De(e.onPointerDownCapture,w.onPointerDownCapture)})});ob.displayName=cte;var hte="DismissableLayerBranch",H8=C.forwardRef((e,t)=>{const n=C.useContext(q8),r=C.useRef(null),i=Ft(t,r);return C.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),A.jsx(rt.div,{...e,ref:i})});H8.displayName=hte;function pte(e,t=globalThis==null?void 0:globalThis.document){const n=uo(e),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){V8(fte,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function gte(e,t=globalThis==null?void 0:globalThis.document){const n=uo(e),r=C.useRef(!1);return C.useEffect(()=>{const i=o=>{o.target&&!r.current&&V8(dte,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function HP(){const e=new CustomEvent(tC);document.dispatchEvent(e)}function V8(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?W8(i,o):i.dispatchEvent(o)}var mte=ob,yte=H8,wn=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},vte="Portal",O$=C.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[i,o]=C.useState(!1);wn(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?L8.createPortal(A.jsx(rt.div,{...r,ref:t}),s):null});O$.displayName=vte;function xte(e,t){return C.useReducer((n,r)=>t[n][r]??n,e)}var P$=e=>{const{present:t,children:n}=e,r=bte(t),i=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),o=Ft(r.ref,wte(i));return typeof n=="function"||r.isPresent?C.cloneElement(i,{ref:o}):null};P$.displayName="Presence";function bte(e){const[t,n]=C.useState(),r=C.useRef(null),i=C.useRef(e),o=C.useRef("none"),s=e?"mounted":"unmounted",[a,l]=xte(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=V0(r.current);o.current=a==="mounted"?u:"none"},[a]),wn(()=>{const u=r.current,c=i.current;if(c!==e){const d=o.current,h=V0(u);e?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),wn(()=>{if(t){let u;const c=t.ownerDocument.defaultView??window,f=h=>{const p=V0(r.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!i.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",u=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},d=h=>{h.target===t&&(o.current=V0(r.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{c.clearTimeout(u),t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function V0(e){return(e==null?void 0:e.animationName)||"none"}function wte(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ete=WA[" useInsertionEffect ".trim().toString()]||wn;function nC({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,o,s]=Ste({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:i;{const c=C.useRef(e!==void 0);C.useEffect(()=>{const f=c.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=a},[a,r])}const u=C.useCallback(c=>{var f;if(a){const d=_te(c)?c(e):c;d!==e&&((f=s.current)==null||f.call(s,d))}else o(c)},[a,e,o,s]);return[l,u]}function Ste({defaultProp:e,onChange:t}){const[n,r]=C.useState(e),i=C.useRef(n),o=C.useRef(t);return Ete(()=>{o.current=t},[t]),C.useEffect(()=>{var s;i.current!==n&&((s=o.current)==null||s.call(o,n),i.current=n)},[n,i]),[n,r,o]}function _te(e){return typeof e=="function"}var G8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Cte="VisuallyHidden",sb=C.forwardRef((e,t)=>A.jsx(rt.span,{...e,ref:t,style:{...G8,...e.style}}));sb.displayName=Cte;var kte=sb,D$="ToastProvider",[I$,Ate,$te]=U8("Toast"),[Y8,a5e]=Rm("Toast",[$te]),[Tte,ab]=Y8(D$),X8=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=e,[a,l]=C.useState(null),[u,c]=C.useState(0),f=C.useRef(!1),d=C.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${D$}\`. Expected non-empty \`string\`.`),A.jsx(I$.Provider,{scope:t,children:A.jsx(Tte,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:C.useCallback(()=>c(h=>h+1),[]),onToastRemove:C.useCallback(()=>c(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:d,children:s})})};X8.displayName=D$;var K8="ToastViewport",Nte=["F8"],rC="toast.viewportPause",iC="toast.viewportResume",Q8=C.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Nte,label:i="Notifications ({hotkey})",...o}=e,s=ab(K8,n),a=Ate(n),l=C.useRef(null),u=C.useRef(null),c=C.useRef(null),f=C.useRef(null),d=Ft(t,f,s.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=s.toastCount>0;C.useEffect(()=>{const m=y=>{var x;r.length!==0&&r.every(b=>y[b]||y.code===b)&&((x=f.current)==null||x.focus())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[r]),C.useEffect(()=>{const m=l.current,y=f.current;if(g&&m&&y){const v=()=>{if(!s.isClosePausedRef.current){const S=new CustomEvent(rC);y.dispatchEvent(S),s.isClosePausedRef.current=!0}},x=()=>{if(s.isClosePausedRef.current){const S=new CustomEvent(iC);y.dispatchEvent(S),s.isClosePausedRef.current=!1}},b=S=>{!m.contains(S.relatedTarget)&&x()},w=()=>{m.contains(document.activeElement)||x()};return m.addEventListener("focusin",v),m.addEventListener("focusout",b),m.addEventListener("pointermove",v),m.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{m.removeEventListener("focusin",v),m.removeEventListener("focusout",b),m.removeEventListener("pointermove",v),m.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[g,s.isClosePausedRef]);const p=C.useCallback(({tabbingDirection:m})=>{const v=a().map(x=>{const b=x.ref.current,w=[b,...Wte(b)];return m==="forwards"?w:w.reverse()});return(m==="forwards"?v.reverse():v).flat()},[a]);return C.useEffect(()=>{const m=f.current;if(m){const y=v=>{var w,S,E;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const _=document.activeElement,k=v.shiftKey;if(v.target===m&&k){(w=u.current)==null||w.focus();return}const P=p({tabbingDirection:k?"backwards":"forwards"}),D=P.findIndex(M=>M===_);sE(P.slice(D+1))?v.preventDefault():k?(S=u.current)==null||S.focus():(E=c.current)==null||E.focus()}};return m.addEventListener("keydown",y),()=>m.removeEventListener("keydown",y)}},[a,p]),A.jsxs(yte,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&A.jsx(oC,{ref:u,onFocusFromOutsideViewport:()=>{const m=p({tabbingDirection:"forwards"});sE(m)}}),A.jsx(I$.Slot,{scope:n,children:A.jsx(rt.ol,{tabIndex:-1,...o,ref:d})}),g&&A.jsx(oC,{ref:c,onFocusFromOutsideViewport:()=>{const m=p({tabbingDirection:"backwards"});sE(m)}})]})});Q8.displayName=K8;var Z8="ToastFocusProxy",oC=C.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,o=ab(Z8,n);return A.jsx(sb,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:s=>{var u;const a=s.relatedTarget;!((u=o.viewport)!=null&&u.contains(a))&&r()}})});oC.displayName=Z8;var Fm="Toast",Mte="toast.swipeStart",Rte="toast.swipeMove",Fte="toast.swipeCancel",Ote="toast.swipeEnd",J8=C.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...s}=e,[a,l]=nC({prop:r,defaultProp:i??!0,onChange:o,caller:Fm});return A.jsx(P$,{present:n||a,children:A.jsx(Ite,{open:a,...s,ref:t,onClose:()=>l(!1),onPause:uo(e.onPause),onResume:uo(e.onResume),onSwipeStart:De(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:De(e.onSwipeMove,u=>{const{x:c,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:De(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:De(e.onSwipeEnd,u=>{const{x:c,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});J8.displayName=Fm;var[Pte,Dte]=Y8(Fm,{onClose(){}}),Ite=C.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:f,onSwipeCancel:d,onSwipeEnd:h,...g}=e,p=ab(Fm,n),[m,y]=C.useState(null),v=Ft(t,M=>y(M)),x=C.useRef(null),b=C.useRef(null),w=i||p.duration,S=C.useRef(0),E=C.useRef(w),_=C.useRef(0),{onToastAdd:k,onToastRemove:T}=p,N=uo(()=>{var $;(m==null?void 0:m.contains(document.activeElement))&&(($=p.viewport)==null||$.focus()),s()}),P=C.useCallback(M=>{!M||M===1/0||(window.clearTimeout(_.current),S.current=new Date().getTime(),_.current=window.setTimeout(N,M))},[N]);C.useEffect(()=>{const M=p.viewport;if(M){const $=()=>{P(E.current),u==null||u()},R=()=>{const I=new Date().getTime()-S.current;E.current=E.current-I,window.clearTimeout(_.current),l==null||l()};return M.addEventListener(rC,R),M.addEventListener(iC,$),()=>{M.removeEventListener(rC,R),M.removeEventListener(iC,$)}}},[p.viewport,w,l,u,P]),C.useEffect(()=>{o&&!p.isClosePausedRef.current&&P(w)},[o,w,p.isClosePausedRef,P]),C.useEffect(()=>(k(),()=>T()),[k,T]);const D=C.useMemo(()=>m?s9(m):null,[m]);return p.viewport?A.jsxs(A.Fragment,{children:[D&&A.jsx(Lte,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),A.jsx(Pte,{scope:n,onClose:N,children:Lc.createPortal(A.jsx(I$.ItemSlot,{scope:n,children:A.jsx(mte,{asChild:!0,onEscapeKeyDown:De(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||N(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:A.jsx(rt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:De(e.onKeyDown,M=>{M.key==="Escape"&&(a==null||a(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:De(e.onPointerDown,M=>{M.button===0&&(x.current={x:M.clientX,y:M.clientY})}),onPointerMove:De(e.onPointerMove,M=>{if(!x.current)return;const $=M.clientX-x.current.x,R=M.clientY-x.current.y,I=!!b.current,F=["left","right"].includes(p.swipeDirection),O=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,L=F?O(0,$):0,X=F?0:O(0,R),V=M.pointerType==="touch"?10:2,ne={x:L,y:X},de={originalEvent:M,delta:ne};I?(b.current=ne,G0(Rte,f,de,{discrete:!1})):VP(ne,p.swipeDirection,V)?(b.current=ne,G0(Mte,c,de,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs($)>V||Math.abs(R)>V)&&(x.current=null)}),onPointerUp:De(e.onPointerUp,M=>{const $=b.current,R=M.target;if(R.hasPointerCapture(M.pointerId)&&R.releasePointerCapture(M.pointerId),b.current=null,x.current=null,$){const I=M.currentTarget,F={originalEvent:M,delta:$};VP($,p.swipeDirection,p.swipeThreshold)?G0(Ote,h,F,{discrete:!0}):G0(Fte,d,F,{discrete:!0}),I.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Lte=e=>{const{__scopeToast:t,children:n,...r}=e,i=ab(Fm,t),[o,s]=C.useState(!1),[a,l]=C.useState(!1);return Bte(()=>s(!0)),C.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:A.jsx(O$,{asChild:!0,children:A.jsx(sb,{...r,children:o&&A.jsxs(A.Fragment,{children:[i.label," ",n]})})})},zte="ToastTitle",e9=C.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return A.jsx(rt.div,{...r,ref:t})});e9.displayName=zte;var jte="ToastDescription",t9=C.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return A.jsx(rt.div,{...r,ref:t})});t9.displayName=jte;var n9="ToastAction",r9=C.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?A.jsx(o9,{altText:n,asChild:!0,children:A.jsx(L$,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${n9}\`. Expected non-empty \`string\`.`),null)});r9.displayName=n9;var i9="ToastClose",L$=C.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=Dte(i9,n);return A.jsx(o9,{asChild:!0,children:A.jsx(rt.button,{type:"button",...r,ref:t,onClick:De(e.onClick,i.onClose)})})});L$.displayName=i9;var o9=C.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return A.jsx(rt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function s9(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Ute(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...s9(r))}}),t}function G0(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?W8(i,o):i.dispatchEvent(o)}var VP=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),o=r>i;return t==="left"||t==="right"?o&&r>n:!o&&i>n};function Bte(e=()=>{}){const t=uo(e);wn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Ute(e){return e.nodeType===e.ELEMENT_NODE}function Wte(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function sE(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var qte=X8,a9=Q8,l9=J8,u9=e9,c9=t9,f9=r9,d9=L$;function h9(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=h9(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function p9(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=h9(e))&&(r&&(r+=" "),r+=t);return r}const GP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,YP=p9,g9=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return YP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(u=>{const c=n==null?void 0:n[u],f=o==null?void 0:o[u];if(c===null)return null;const d=GP(c)||GP(f);return i[u][d]}),a=n&&Object.entries(n).reduce((u,c)=>{let[f,d]=c;return d===void 0||(u[f]=d),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:f,className:d,...h}=c;return Object.entries(h).every(g=>{let[p,m]=g;return Array.isArray(m)?m.includes({...o,...a}[p]):{...o,...a}[p]===m})?[...u,f,d]:u},[]);return YP(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m9=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>C.createElement("svg",{ref:l,...Vte,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:m9("lucide",i),...a},[...s.map(([u,c])=>C.createElement(u,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=(e,t)=>{const n=C.forwardRef(({className:r,...i},o)=>C.createElement(Gte,{ref:o,iconNode:t,className:m9(`lucide-${Hte(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=ii("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=ii("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=ii("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=ii("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=ii("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=ii("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=ii("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=ii("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=ii("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=ii("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=ii("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=ii("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=ii("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),z$="-",sne=e=>{const t=lne(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const a=s.split(z$);return a[0]===""&&a.length!==1&&a.shift(),v9(a,t)||ane(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},v9=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?v9(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(z$);return(s=t.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},XP=/^\[(.+)\]$/,ane=e=>{if(XP.test(e)){const t=XP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},lne=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return cne(Object.entries(e.classGroups),n).forEach(([o,s])=>{sC(s,r,o,t)}),r},sC=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:KP(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(une(i)){sC(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{sC(s,KP(t,o),n,r)})})},KP=(e,t)=>{let n=e;return t.split(z$).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},une=e=>e.isThemeGetter,cne=(e,t)=>t?e.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[t+s,a])):o);return[n,i]}):e,fne=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},x9="!",dne=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],o=t.length,s=a=>{const l=[];let u=0,c=0,f;for(let m=0;m<a.length;m++){let y=a[m];if(u===0){if(y===i&&(r||a.slice(m,m+o)===t)){l.push(a.slice(c,m)),c=m+o;continue}if(y==="/"){f=m;continue}}y==="["?u++:y==="]"&&u--}const d=l.length===0?a:a.substring(c),h=d.startsWith(x9),g=h?d.substring(1):d,p=f&&f>c?f-c:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:s}):s},hne=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},pne=e=>({cache:fne(e.cacheSize),parseClassName:dne(e),...sne(e)}),gne=/\s+/,mne=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,o=[],s=e.trim().split(gne);let a="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:c,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}=n(u);let g=!!h,p=r(g?d.substring(0,h):d);if(!p){if(!g){a=u+(a.length>0?" "+a:a);continue}if(p=r(d),!p){a=u+(a.length>0?" "+a:a);continue}g=!1}const m=hne(c).join(":"),y=f?m+x9:m,v=y+p;if(o.includes(v))continue;o.push(v);const x=i(p,g);for(let b=0;b<x.length;++b){const w=x[b];o.push(y+w)}a=u+(a.length>0?" "+a:a)}return a};function yne(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=b9(t))&&(r&&(r+=" "),r+=n);return r}const b9=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=b9(e[r]))&&(n&&(n+=" "),n+=t);return n};function vne(e,...t){let n,r,i,o=s;function s(l){const u=t.reduce((c,f)=>f(c),e());return n=pne(u),r=n.cache.get,i=n.cache.set,o=a,a(l)}function a(l){const u=r(l);if(u)return u;const c=mne(l,n);return i(l,c),c}return function(){return o(yne.apply(null,arguments))}}const ft=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},w9=/^\[(?:([a-z-]+):)?(.+)\]$/i,xne=/^\d+\/\d+$/,bne=new Set(["px","full","screen"]),wne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ene=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_ne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,As=e=>Zf(e)||bne.has(e)||xne.test(e),Ma=e=>ph(e,"length",Fne),Zf=e=>!!e&&!Number.isNaN(Number(e)),aE=e=>ph(e,"number",Zf),ep=e=>!!e&&Number.isInteger(Number(e)),kne=e=>e.endsWith("%")&&Zf(e.slice(0,-1)),Te=e=>w9.test(e),Ra=e=>wne.test(e),Ane=new Set(["length","size","percentage"]),$ne=e=>ph(e,Ane,E9),Tne=e=>ph(e,"position",E9),Nne=new Set(["image","url"]),Mne=e=>ph(e,Nne,Pne),Rne=e=>ph(e,"",One),tp=()=>!0,ph=(e,t,n)=>{const r=w9.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},Fne=e=>Ene.test(e)&&!Sne.test(e),E9=()=>!1,One=e=>_ne.test(e),Pne=e=>Cne.test(e),Dne=()=>{const e=ft("colors"),t=ft("spacing"),n=ft("blur"),r=ft("brightness"),i=ft("borderColor"),o=ft("borderRadius"),s=ft("borderSpacing"),a=ft("borderWidth"),l=ft("contrast"),u=ft("grayscale"),c=ft("hueRotate"),f=ft("invert"),d=ft("gap"),h=ft("gradientColorStops"),g=ft("gradientColorStopPositions"),p=ft("inset"),m=ft("margin"),y=ft("opacity"),v=ft("padding"),x=ft("saturate"),b=ft("scale"),w=ft("sepia"),S=ft("skew"),E=ft("space"),_=ft("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Te,t],P=()=>[Te,t],D=()=>["",As,Ma],M=()=>["auto",Zf,Te],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",Te],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Zf,Te];return{cacheSize:500,separator:":",theme:{colors:[tp],spacing:[As,Ma],blur:["none","",Ra,Te],brightness:X(),borderColor:[e],borderRadius:["none","","full",Ra,Te],borderSpacing:P(),borderWidth:D(),contrast:X(),grayscale:O(),hueRotate:X(),invert:O(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[kne,Ma],inset:N(),margin:N(),opacity:X(),padding:P(),saturate:X(),scale:X(),sepia:O(),skew:X(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[Ra]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Te]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ep,Te]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",ep,Te]}],"grid-cols":[{"grid-cols":[tp]}],"col-start-end":[{col:["auto",{span:["full",ep,Te]},Te]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[tp]}],"row-start-end":[{row:["auto",{span:[ep,Te]},Te]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,t]}],"min-w":[{"min-w":[Te,t,"min","max","fit"]}],"max-w":[{"max-w":[Te,t,"none","full","min","max","fit","prose",{screen:[Ra]},Ra]}],h:[{h:[Te,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ra,Ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",aE]}],"font-family":[{font:[tp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",Zf,aE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",As,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",As,Ma]}],"underline-offset":[{"underline-offset":["auto",As,Te]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),Tne]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$ne]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mne]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:R()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[As,Te]}],"outline-w":[{outline:[As,Ma]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[As,Ma]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ra,Rne]}],"shadow-color":[{shadow:[tp]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ra,Te]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ep,Te]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[As,Ma,aE]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ine=vne(Dne);function Un(...e){return Ine(p9(e))}const Lne=qte,S9=C.forwardRef(({className:e,...t},n)=>A.jsx(a9,{ref:n,className:Un("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));S9.displayName=a9.displayName;const zne=g9("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_9=C.forwardRef(({className:e,variant:t,...n},r)=>A.jsx(l9,{ref:r,className:Un(zne({variant:t}),e),...n}));_9.displayName=l9.displayName;const jne=C.forwardRef(({className:e,...t},n)=>A.jsx(f9,{ref:n,className:Un("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));jne.displayName=f9.displayName;const C9=C.forwardRef(({className:e,...t},n)=>A.jsx(d9,{ref:n,className:Un("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:A.jsx(one,{className:"h-4 w-4"})}));C9.displayName=d9.displayName;const k9=C.forwardRef(({className:e,...t},n)=>A.jsx(u9,{ref:n,className:Un("text-sm font-semibold",e),...t}));k9.displayName=u9.displayName;const A9=C.forwardRef(({className:e,...t},n)=>A.jsx(c9,{ref:n,className:Un("text-sm opacity-90",e),...t}));A9.displayName=c9.displayName;function Bne(){const{toasts:e}=ete();return A.jsxs(Lne,{children:[e.map(function({id:t,title:n,description:r,action:i,...o}){return A.jsxs(_9,{...o,children:[A.jsxs("div",{className:"grid gap-1",children:[n&&A.jsx(k9,{children:n}),r&&A.jsx(A9,{children:r})]}),i,A.jsx(C9,{})]},t)}),A.jsx(S9,{})]})}var QP=["light","dark"],Une="(prefers-color-scheme: dark)",Wne=C.createContext(void 0),qne={setTheme:e=>{},themes:[]},Hne=()=>{var e;return(e=C.useContext(Wne))!=null?e:qne};C.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:s,attrs:a,nonce:l})=>{let u=o==="system",c=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=i?QP.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",d=(g,p=!1,m=!0)=>{let y=s?s[g]:g,v=p?g+"|| ''":`'${y}'`,x="";return i&&m&&!p&&QP.includes(g)&&(x+=`d.style.colorScheme = '${g}';`),n==="class"?p||y?x+=`c.add(${v})`:x+="null":y&&(x+=`d[s](n,${v})`),x},h=e?`!function(){${c}${d(e)}}()`:r?`!function(){try{${c}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${Une}',m=window.matchMedia(t);if(m.media!==t||m.matches){${d("dark")}}else{${d("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${d(s?"x[e]":"e",!0)}}${u?"":"else{"+d(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${c}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${d(s?"x[e]":"e",!0)}}else{${d(o,!1,!1)};}${f}}catch(t){}}();`;return C.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:h}})});var Vne=e=>{switch(e){case"success":return Xne;case"info":return Qne;case"warning":return Kne;case"error":return Zne;default:return null}},Gne=Array(12).fill(0),Yne=({visible:e,className:t})=>re.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},re.createElement("div",{className:"sonner-spinner"},Gne.map((n,r)=>re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Xne=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Kne=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Qne=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Zne=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Jne=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ere=()=>{let[e,t]=re.useState(document.hidden);return re.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},aC=1,tre=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:aC++,o=this.toasts.find(a=>a.id===i),s=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...e,id:i,title:n}),{...a,...e,id:i,dismissible:s,title:n}):a):this.addToast({title:n,...r,dismissible:s,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=n!==void 0,o,s=r.then(async l=>{if(o=["resolve",l],re.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(rre(l)&&!l.ok){i=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${l.status}`):t.error,c=typeof t.description=="function"?await t.description(`HTTP error! status: ${l.status}`):t.description;this.create({id:n,type:"error",message:u,description:c})}else if(t.success!==void 0){i=!1;let u=typeof t.success=="function"?await t.success(l):t.success,c=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"success",message:u,description:c})}}).catch(async l=>{if(o=["reject",l],t.error!==void 0){i=!1;let u=typeof t.error=="function"?await t.error(l):t.error,c=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"error",message:u,description:c})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=t.finally)==null||l.call(t)}),a=()=>new Promise((l,u)=>s.then(()=>o[0]==="reject"?u(o[1]):l(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||aC++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},gr=new tre,nre=(e,t)=>{let n=(t==null?void 0:t.id)||aC++;return gr.addToast({title:e,...t,id:n}),n},rre=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ire=nre,ore=()=>gr.toasts,sre=()=>gr.getActiveToasts();Object.assign(ire,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:ore,getToasts:sre});function are(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}are(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Y0(e){return e.label!==void 0}var lre=3,ure="32px",cre="16px",ZP=4e3,fre=356,dre=14,hre=20,pre=200;function Ii(...e){return e.filter(Boolean).join(" ")}function gre(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var mre=e=>{var t,n,r,i,o,s,a,l,u,c,f;let{invert:d,toast:h,unstyled:g,interacting:p,setHeights:m,visibleToasts:y,heights:v,index:x,toasts:b,expanded:w,removeToast:S,defaultRichColors:E,closeButton:_,style:k,cancelButtonStyle:T,actionButtonStyle:N,className:P="",descriptionClassName:D="",duration:M,position:$,gap:R,loadingIcon:I,expandByDefault:F,classNames:O,icons:L,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:V}=e,[ne,de]=re.useState(null),[he,Ne]=re.useState(null),[oe,Re]=re.useState(!1),[ee,ue]=re.useState(!1),[ce,j]=re.useState(!1),[je,ke]=re.useState(!1),[at,ct]=re.useState(!1),[cn,ka]=re.useState(0),[rf,kO]=re.useState(0),Hh=re.useRef(h.duration||M||ZP),AO=re.useRef(null),fu=re.useRef(null),dZ=x===0,hZ=x+1<=y,oi=h.type,of=h.dismissible!==!1,pZ=h.className||"",gZ=h.descriptionClassName||"",A0=re.useMemo(()=>v.findIndex(Ce=>Ce.toastId===h.id)||0,[v,h.id]),mZ=re.useMemo(()=>{var Ce;return(Ce=h.closeButton)!=null?Ce:_},[h.closeButton,_]),$O=re.useMemo(()=>h.duration||M||ZP,[h.duration,M]),T2=re.useRef(0),sf=re.useRef(0),TO=re.useRef(0),af=re.useRef(null),[yZ,vZ]=$.split("-"),NO=re.useMemo(()=>v.reduce((Ce,nt,mt)=>mt>=A0?Ce:Ce+nt.height,0),[v,A0]),MO=ere(),xZ=h.invert||d,N2=oi==="loading";sf.current=re.useMemo(()=>A0*R+NO,[A0,NO]),re.useEffect(()=>{Hh.current=$O},[$O]),re.useEffect(()=>{Re(!0)},[]),re.useEffect(()=>{let Ce=fu.current;if(Ce){let nt=Ce.getBoundingClientRect().height;return kO(nt),m(mt=>[{toastId:h.id,height:nt,position:h.position},...mt]),()=>m(mt=>mt.filter(Fi=>Fi.toastId!==h.id))}},[m,h.id]),re.useLayoutEffect(()=>{if(!oe)return;let Ce=fu.current,nt=Ce.style.height;Ce.style.height="auto";let mt=Ce.getBoundingClientRect().height;Ce.style.height=nt,kO(mt),m(Fi=>Fi.find(Oi=>Oi.toastId===h.id)?Fi.map(Oi=>Oi.toastId===h.id?{...Oi,height:mt}:Oi):[{toastId:h.id,height:mt,position:h.position},...Fi])},[oe,h.title,h.description,m,h.id]);let Aa=re.useCallback(()=>{ue(!0),ka(sf.current),m(Ce=>Ce.filter(nt=>nt.toastId!==h.id)),setTimeout(()=>{S(h)},pre)},[h,S,m,sf]);re.useEffect(()=>{if(h.promise&&oi==="loading"||h.duration===1/0||h.type==="loading")return;let Ce;return w||p||V&&MO?(()=>{if(TO.current<T2.current){let nt=new Date().getTime()-T2.current;Hh.current=Hh.current-nt}TO.current=new Date().getTime()})():Hh.current!==1/0&&(T2.current=new Date().getTime(),Ce=setTimeout(()=>{var nt;(nt=h.onAutoClose)==null||nt.call(h,h),Aa()},Hh.current)),()=>clearTimeout(Ce)},[w,p,h,oi,V,MO,Aa]),re.useEffect(()=>{h.delete&&Aa()},[Aa,h.delete]);function bZ(){var Ce,nt,mt;return L!=null&&L.loading?re.createElement("div",{className:Ii(O==null?void 0:O.loader,(Ce=h==null?void 0:h.classNames)==null?void 0:Ce.loader,"sonner-loader"),"data-visible":oi==="loading"},L.loading):I?re.createElement("div",{className:Ii(O==null?void 0:O.loader,(nt=h==null?void 0:h.classNames)==null?void 0:nt.loader,"sonner-loader"),"data-visible":oi==="loading"},I):re.createElement(Yne,{className:Ii(O==null?void 0:O.loader,(mt=h==null?void 0:h.classNames)==null?void 0:mt.loader),visible:oi==="loading"})}return re.createElement("li",{tabIndex:0,ref:fu,className:Ii(P,pZ,O==null?void 0:O.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[oi],(n=h==null?void 0:h.classNames)==null?void 0:n[oi]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:E,"data-styled":!(h.jsx||h.unstyled||g),"data-mounted":oe,"data-promise":!!h.promise,"data-swiped":at,"data-removed":ee,"data-visible":hZ,"data-y-position":yZ,"data-x-position":vZ,"data-index":x,"data-front":dZ,"data-swiping":ce,"data-dismissible":of,"data-type":oi,"data-invert":xZ,"data-swipe-out":je,"data-swipe-direction":he,"data-expanded":!!(w||F&&oe),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":`${ee?cn:sf.current}px`,"--initial-height":F?"auto":`${rf}px`,...k,...h.style},onDragEnd:()=>{j(!1),de(null),af.current=null},onPointerDown:Ce=>{N2||!of||(AO.current=new Date,ka(sf.current),Ce.target.setPointerCapture(Ce.pointerId),Ce.target.tagName!=="BUTTON"&&(j(!0),af.current={x:Ce.clientX,y:Ce.clientY}))},onPointerUp:()=>{var Ce,nt,mt,Fi;if(je||!of)return;af.current=null;let Oi=Number(((Ce=fu.current)==null?void 0:Ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$a=Number(((nt=fu.current)==null?void 0:nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),du=new Date().getTime()-((mt=AO.current)==null?void 0:mt.getTime()),Pi=ne==="x"?Oi:$a,Ta=Math.abs(Pi)/du;if(Math.abs(Pi)>=hre||Ta>.11){ka(sf.current),(Fi=h.onDismiss)==null||Fi.call(h,h),Ne(ne==="x"?Oi>0?"right":"left":$a>0?"down":"up"),Aa(),ke(!0),ct(!1);return}j(!1),de(null)},onPointerMove:Ce=>{var nt,mt,Fi,Oi;if(!af.current||!of||((nt=window.getSelection())==null?void 0:nt.toString().length)>0)return;let $a=Ce.clientY-af.current.y,du=Ce.clientX-af.current.x,Pi=(mt=e.swipeDirections)!=null?mt:gre($);!ne&&(Math.abs(du)>1||Math.abs($a)>1)&&de(Math.abs(du)>Math.abs($a)?"x":"y");let Ta={x:0,y:0};ne==="y"?(Pi.includes("top")||Pi.includes("bottom"))&&(Pi.includes("top")&&$a<0||Pi.includes("bottom")&&$a>0)&&(Ta.y=$a):ne==="x"&&(Pi.includes("left")||Pi.includes("right"))&&(Pi.includes("left")&&du<0||Pi.includes("right")&&du>0)&&(Ta.x=du),(Math.abs(Ta.x)>0||Math.abs(Ta.y)>0)&&ct(!0),(Fi=fu.current)==null||Fi.style.setProperty("--swipe-amount-x",`${Ta.x}px`),(Oi=fu.current)==null||Oi.style.setProperty("--swipe-amount-y",`${Ta.y}px`)}},mZ&&!h.jsx?re.createElement("button",{"aria-label":X,"data-disabled":N2,"data-close-button":!0,onClick:N2||!of?()=>{}:()=>{var Ce;Aa(),(Ce=h.onDismiss)==null||Ce.call(h,h)},className:Ii(O==null?void 0:O.closeButton,(i=h==null?void 0:h.classNames)==null?void 0:i.closeButton)},(o=L==null?void 0:L.close)!=null?o:Jne):null,h.jsx||C.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:re.createElement(re.Fragment,null,oi||h.icon||h.promise?re.createElement("div",{"data-icon":"",className:Ii(O==null?void 0:O.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||bZ():null,h.type!=="loading"?h.icon||(L==null?void 0:L[oi])||Vne(oi):null):null,re.createElement("div",{"data-content":"",className:Ii(O==null?void 0:O.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},re.createElement("div",{"data-title":"",className:Ii(O==null?void 0:O.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?re.createElement("div",{"data-description":"",className:Ii(D,gZ,O==null?void 0:O.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),C.isValidElement(h.cancel)?h.cancel:h.cancel&&Y0(h.cancel)?re.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||T,onClick:Ce=>{var nt,mt;Y0(h.cancel)&&of&&((mt=(nt=h.cancel).onClick)==null||mt.call(nt,Ce),Aa())},className:Ii(O==null?void 0:O.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,C.isValidElement(h.action)?h.action:h.action&&Y0(h.action)?re.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||N,onClick:Ce=>{var nt,mt;Y0(h.action)&&((mt=(nt=h.action).onClick)==null||mt.call(nt,Ce),!Ce.defaultPrevented&&Aa())},className:Ii(O==null?void 0:O.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function JP(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function yre(e,t){let n={};return[e,t].forEach((r,i)=>{let o=i===1,s=o?"--mobile-offset":"--offset",a=o?cre:ure;function l(u){["top","right","bottom","left"].forEach(c=>{n[`${s}-${c}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=a:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}var vre=C.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:a,offset:l,mobileOffset:u,theme:c="light",richColors:f,duration:d,style:h,visibleToasts:g=lre,toastOptions:p,dir:m=JP(),gap:y=dre,loadingIcon:v,icons:x,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w}=e,[S,E]=re.useState([]),_=re.useMemo(()=>Array.from(new Set([r].concat(S.filter(V=>V.position).map(V=>V.position)))),[S,r]),[k,T]=re.useState([]),[N,P]=re.useState(!1),[D,M]=re.useState(!1),[$,R]=re.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=re.useRef(null),F=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=re.useRef(null),L=re.useRef(!1),X=re.useCallback(V=>{E(ne=>{var de;return(de=ne.find(he=>he.id===V.id))!=null&&de.delete||gr.dismiss(V.id),ne.filter(({id:he})=>he!==V.id)})},[]);return re.useEffect(()=>gr.subscribe(V=>{if(V.dismiss){E(ne=>ne.map(de=>de.id===V.id?{...de,delete:!0}:de));return}setTimeout(()=>{L8.flushSync(()=>{E(ne=>{let de=ne.findIndex(he=>he.id===V.id);return de!==-1?[...ne.slice(0,de),{...ne[de],...V},...ne.slice(de+1)]:[V,...ne]})})})}),[]),re.useEffect(()=>{if(c!=="system"){R(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window>"u")return;let V=window.matchMedia("(prefers-color-scheme: dark)");try{V.addEventListener("change",({matches:ne})=>{R(ne?"dark":"light")})}catch{V.addListener(({matches:de})=>{try{R(de?"dark":"light")}catch(he){console.error(he)}})}},[c]),re.useEffect(()=>{S.length<=1&&P(!1)},[S]),re.useEffect(()=>{let V=ne=>{var de,he;i.every(Ne=>ne[Ne]||ne.code===Ne)&&(P(!0),(de=I.current)==null||de.focus()),ne.code==="Escape"&&(document.activeElement===I.current||(he=I.current)!=null&&he.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[i]),re.useEffect(()=>{if(I.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,L.current=!1)}},[I.current]),re.createElement("section",{ref:t,"aria-label":`${b} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((V,ne)=>{var de;let[he,Ne]=V.split("-");return S.length?re.createElement("ol",{key:V,dir:m==="auto"?JP():m,tabIndex:-1,ref:I,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":he,"data-lifted":N&&S.length>1&&!o,"data-x-position":Ne,style:{"--front-toast-height":`${((de=k[0])==null?void 0:de.height)||0}px`,"--width":`${fre}px`,"--gap":`${y}px`,...h,...yre(l,u)},onBlur:oe=>{L.current&&!oe.currentTarget.contains(oe.relatedTarget)&&(L.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||L.current||(L.current=!0,O.current=oe.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{D||P(!1)},onDragEnd:()=>P(!1),onPointerDown:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},S.filter(oe=>!oe.position&&ne===0||oe.position===V).map((oe,Re)=>{var ee,ue;return re.createElement(mre,{key:oe.id,icons:x,index:Re,toast:oe,defaultRichColors:f,duration:(ee=p==null?void 0:p.duration)!=null?ee:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:g,closeButton:(ue=p==null?void 0:p.closeButton)!=null?ue:s,interacting:D,position:V,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:X,toasts:S.filter(ce=>ce.position==oe.position),heights:k.filter(ce=>ce.position==oe.position),setHeights:T,expandByDefault:o,gap:y,loadingIcon:v,expanded:N,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const xre=({...e})=>{const{theme:t="system"}=Hne();return A.jsx(vre,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var bre=WA[" useId ".trim().toString()]||(()=>{}),wre=0;function j$(e){const[t,n]=C.useState(bre());return wn(()=>{n(r=>r??String(wre++))},[e]),t?`radix-${t}`:""}const Ere=["top","right","bottom","left"],$l=Math.min,Lr=Math.max,nv=Math.round,X0=Math.floor,Ko=e=>({x:e,y:e}),Sre={left:"right",right:"left",bottom:"top",top:"bottom"},_re={start:"end",end:"start"};function lC(e,t,n){return Lr(e,$l(t,n))}function la(e,t){return typeof e=="function"?e(t):e}function ua(e){return e.split("-")[0]}function gh(e){return e.split("-")[1]}function B$(e){return e==="x"?"y":"x"}function U$(e){return e==="y"?"height":"width"}const Cre=new Set(["top","bottom"]);function Ho(e){return Cre.has(ua(e))?"y":"x"}function W$(e){return B$(Ho(e))}function kre(e,t,n){n===void 0&&(n=!1);const r=gh(e),i=W$(e),o=U$(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=rv(s)),[s,rv(s)]}function Are(e){const t=rv(e);return[uC(e),t,uC(t)]}function uC(e){return e.replace(/start|end/g,t=>_re[t])}const e3=["left","right"],t3=["right","left"],$re=["top","bottom"],Tre=["bottom","top"];function Nre(e,t,n){switch(e){case"top":case"bottom":return n?t?t3:e3:t?e3:t3;case"left":case"right":return t?$re:Tre;default:return[]}}function Mre(e,t,n,r){const i=gh(e);let o=Nre(ua(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(uC)))),o}function rv(e){return e.replace(/left|right|bottom|top/g,t=>Sre[t])}function Rre(e){return{top:0,right:0,bottom:0,left:0,...e}}function $9(e){return typeof e!="number"?Rre(e):{top:e,right:e,bottom:e,left:e}}function iv(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function n3(e,t,n){let{reference:r,floating:i}=e;const o=Ho(t),s=W$(t),a=U$(s),l=ua(t),u=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(gh(t)){case"start":h[s]-=d*(n&&u?-1:1);break;case"end":h[s]+=d*(n&&u?-1:1);break}return h}const Fre=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=n3(u,r,l),d=r,h={},g=0;for(let p=0;p<a.length;p++){const{name:m,fn:y}=a[p],{x:v,y:x,data:b,reset:w}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:e,floating:t}});c=v??c,f=x??f,h={...h,[m]:{...h[m],...b}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(u=w.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:c,y:f}=n3(u,d,l)),p=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Wg(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=la(t,e),g=$9(h),m=a[d?f==="floating"?"reference":"floating":f],y=iv(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(m)))==null||n?m:m.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},w=iv(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(y.top-w.top+g.top)/b.y,bottom:(w.bottom-y.bottom+g.bottom)/b.y,left:(y.left-w.left+g.left)/b.x,right:(w.right-y.right+g.right)/b.x}}const Ore=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=la(e,t)||{};if(u==null)return{};const f=$9(c),d={x:n,y:r},h=W$(i),g=U$(h),p=await s.getDimensions(u),m=h==="y",y=m?"top":"left",v=m?"bottom":"right",x=m?"clientHeight":"clientWidth",b=o.reference[g]+o.reference[h]-d[h]-o.floating[g],w=d[h]-o.reference[h],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let E=S?S[x]:0;(!E||!await(s.isElement==null?void 0:s.isElement(S)))&&(E=a.floating[x]||o.floating[g]);const _=b/2-w/2,k=E/2-p[g]/2-1,T=$l(f[y],k),N=$l(f[v],k),P=T,D=E-p[g]-N,M=E/2-p[g]/2+_,$=lC(P,M,D),R=!l.arrow&&gh(i)!=null&&M!==$&&o.reference[g]/2-(M<P?T:N)-p[g]/2<0,I=R?M<P?M-P:M-D:0;return{[h]:d[h]+I,data:{[h]:$,centerOffset:M-$-I,...R&&{alignmentOffset:I}},reset:R}}}),Pre=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...m}=la(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=ua(i),v=Ho(a),x=ua(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),w=d||(x||!p?[rv(a)]:Are(a)),S=g!=="none";!d&&S&&w.push(...Mre(a,p,g,b));const E=[a,...w],_=await Wg(t,m),k=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&k.push(_[y]),f){const M=kre(i,s,b);k.push(_[M[0]],_[M[1]])}if(T=[...T,{placement:i,overflows:k}],!k.every(M=>M<=0)){var N,P;const M=(((N=o.flip)==null?void 0:N.index)||0)+1,$=E[M];if($&&(!(f==="alignment"?v!==Ho($):!1)||T.every(F=>F.overflows[0]>0&&Ho(F.placement)===v)))return{data:{index:M,overflows:T},reset:{placement:$}};let R=(P=T.filter(I=>I.overflows[0]<=0).sort((I,F)=>I.overflows[1]-F.overflows[1])[0])==null?void 0:P.placement;if(!R)switch(h){case"bestFit":{var D;const I=(D=T.filter(F=>{if(S){const O=Ho(F.placement);return O===v||O==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(O=>O>0).reduce((O,L)=>O+L,0)]).sort((F,O)=>F[1]-O[1])[0])==null?void 0:D[0];I&&(R=I);break}case"initialPlacement":R=a;break}if(i!==R)return{reset:{placement:R}}}return{}}}};function r3(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function i3(e){return Ere.some(t=>e[t]>=0)}const Dre=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=la(e,t);switch(r){case"referenceHidden":{const o=await Wg(t,{...i,elementContext:"reference"}),s=r3(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:i3(s)}}}case"escaped":{const o=await Wg(t,{...i,altBoundary:!0}),s=r3(o,n.floating);return{data:{escapedOffsets:s,escaped:i3(s)}}}default:return{}}}}},T9=new Set(["left","top"]);async function Ire(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=ua(n),a=gh(n),l=Ho(n)==="y",u=T9.has(s)?-1:1,c=o&&l?-1:1,f=la(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),l?{x:h*c,y:d*u}:{x:d*u,y:h*c}}const Lre=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await Ire(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},zre=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:m=>{let{x:y,y:v}=m;return{x:y,y:v}}},...l}=la(e,t),u={x:n,y:r},c=await Wg(t,l),f=Ho(ua(i)),d=B$(f);let h=u[d],g=u[f];if(o){const m=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[m],x=h-c[y];h=lC(v,h,x)}if(s){const m=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=g+c[m],x=g-c[y];g=lC(v,g,x)}const p=a.fn({...t,[d]:h,[f]:g});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[d]:o,[f]:s}}}}}},jre=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=la(e,t),c={x:n,y:r},f=Ho(i),d=B$(f);let h=c[d],g=c[f];const p=la(a,t),m=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const x=d==="y"?"height":"width",b=o.reference[d]-o.floating[x]+m.mainAxis,w=o.reference[d]+o.reference[x]-m.mainAxis;h<b?h=b:h>w&&(h=w)}if(u){var y,v;const x=d==="y"?"width":"height",b=T9.has(ua(i)),w=o.reference[f]-o.floating[x]+(b&&((y=s.offset)==null?void 0:y[f])||0)+(b?0:m.crossAxis),S=o.reference[f]+o.reference[x]+(b?0:((v=s.offset)==null?void 0:v[f])||0)-(b?m.crossAxis:0);g<w?g=w:g>S&&(g=S)}return{[d]:h,[f]:g}}}},Bre=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...u}=la(e,t),c=await Wg(t,u),f=ua(i),d=gh(i),h=Ho(i)==="y",{width:g,height:p}=o.floating;let m,y;f==="top"||f==="bottom"?(m=f,y=d===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(y=f,m=d==="end"?"top":"bottom");const v=p-c.top-c.bottom,x=g-c.left-c.right,b=$l(p-c[m],v),w=$l(g-c[y],x),S=!t.middlewareData.shift;let E=b,_=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=v),S&&!d){const T=Lr(c.left,0),N=Lr(c.right,0),P=Lr(c.top,0),D=Lr(c.bottom,0);h?_=g-2*(T!==0||N!==0?T+N:Lr(c.left,c.right)):E=p-2*(P!==0||D!==0?P+D:Lr(c.top,c.bottom))}await l({...t,availableWidth:_,availableHeight:E});const k=await s.getDimensions(a.floating);return g!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function lb(){return typeof window<"u"}function mh(e){return N9(e)?(e.nodeName||"").toLowerCase():"#document"}function Vr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function hs(e){var t;return(t=(N9(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function N9(e){return lb()?e instanceof Node||e instanceof Vr(e).Node:!1}function co(e){return lb()?e instanceof Element||e instanceof Vr(e).Element:!1}function rs(e){return lb()?e instanceof HTMLElement||e instanceof Vr(e).HTMLElement:!1}function o3(e){return!lb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vr(e).ShadowRoot}const Ure=new Set(["inline","contents"]);function Om(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=fo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Ure.has(i)}const Wre=new Set(["table","td","th"]);function qre(e){return Wre.has(mh(e))}const Hre=[":popover-open",":modal"];function ub(e){return Hre.some(t=>{try{return e.matches(t)}catch{return!1}})}const Vre=["transform","translate","scale","rotate","perspective"],Gre=["transform","translate","scale","rotate","perspective","filter"],Yre=["paint","layout","strict","content"];function q$(e){const t=H$(),n=co(e)?fo(e):e;return Vre.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Gre.some(r=>(n.willChange||"").includes(r))||Yre.some(r=>(n.contain||"").includes(r))}function Xre(e){let t=Tl(e);for(;rs(t)&&!$d(t);){if(q$(t))return t;if(ub(t))return null;t=Tl(t)}return null}function H$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Kre=new Set(["html","body","#document"]);function $d(e){return Kre.has(mh(e))}function fo(e){return Vr(e).getComputedStyle(e)}function cb(e){return co(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Tl(e){if(mh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||o3(e)&&e.host||hs(e);return o3(t)?t.host:t}function M9(e){const t=Tl(e);return $d(t)?e.ownerDocument?e.ownerDocument.body:e.body:rs(t)&&Om(t)?t:M9(t)}function qg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=M9(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Vr(i);if(o){const a=cC(s);return t.concat(s,s.visualViewport||[],Om(i)?i:[],a&&n?qg(a):[])}return t.concat(i,qg(i,[],n))}function cC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function R9(e){const t=fo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=rs(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=nv(n)!==o||nv(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function V$(e){return co(e)?e:e.contextElement}function Jf(e){const t=V$(e);if(!rs(t))return Ko(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=R9(t);let s=(o?nv(n.width):n.width)/r,a=(o?nv(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Qre=Ko(0);function F9(e){const t=Vr(e);return!H$()||!t.visualViewport?Qre:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Zre(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vr(e)?!1:t}function fc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=V$(e);let s=Ko(1);t&&(r?co(r)&&(s=Jf(r)):s=Jf(e));const a=Zre(o,n,r)?F9(o):Ko(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const d=Vr(o),h=r&&co(r)?Vr(r):r;let g=d,p=cC(g);for(;p&&r&&h!==g;){const m=Jf(p),y=p.getBoundingClientRect(),v=fo(p),x=y.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,b=y.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,f*=m.y,l+=x,u+=b,g=Vr(p),p=cC(g)}}return iv({width:c,height:f,x:l,y:u})}function G$(e,t){const n=cb(e).scrollLeft;return t?t.left+n:fc(hs(e)).left+n}function O9(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:G$(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function Jre(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=hs(r),a=t?ub(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Ko(1);const c=Ko(0),f=rs(r);if((f||!f&&!o)&&((mh(r)!=="body"||Om(s))&&(l=cb(r)),rs(r))){const h=fc(r);u=Jf(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const d=s&&!f&&!o?O9(s,l,!0):Ko(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+d.x,y:n.y*u.y-l.scrollTop*u.y+c.y+d.y}}function eie(e){return Array.from(e.getClientRects())}function tie(e){const t=hs(e),n=cb(e),r=e.ownerDocument.body,i=Lr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Lr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+G$(e);const a=-n.scrollTop;return fo(r).direction==="rtl"&&(s+=Lr(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function nie(e,t){const n=Vr(e),r=hs(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=H$();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}const rie=new Set(["absolute","fixed"]);function iie(e,t){const n=fc(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=rs(e)?Jf(e):Ko(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function s3(e,t,n){let r;if(t==="viewport")r=nie(e,n);else if(t==="document")r=tie(hs(e));else if(co(t))r=iie(t,n);else{const i=F9(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return iv(r)}function P9(e,t){const n=Tl(e);return n===t||!co(n)||$d(n)?!1:fo(n).position==="fixed"||P9(n,t)}function oie(e,t){const n=t.get(e);if(n)return n;let r=qg(e,[],!1).filter(a=>co(a)&&mh(a)!=="body"),i=null;const o=fo(e).position==="fixed";let s=o?Tl(e):e;for(;co(s)&&!$d(s);){const a=fo(s),l=q$(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&rie.has(i.position)||Om(s)&&!l&&P9(e,s))?r=r.filter(c=>c!==s):i=a,s=Tl(s)}return t.set(e,r),r}function sie(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?ub(t)?[]:oie(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,c)=>{const f=s3(t,c,i);return u.top=Lr(f.top,u.top),u.right=$l(f.right,u.right),u.bottom=$l(f.bottom,u.bottom),u.left=Lr(f.left,u.left),u},s3(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function aie(e){const{width:t,height:n}=R9(e);return{width:t,height:n}}function lie(e,t,n){const r=rs(t),i=hs(t),o=n==="fixed",s=fc(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Ko(0);function u(){l.x=G$(i)}if(r||!r&&!o)if((mh(t)!=="body"||Om(i))&&(a=cb(t)),r){const h=fc(t,!0,o,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&u();o&&!r&&i&&u();const c=i&&!r&&!o?O9(i,a):Ko(0),f=s.left+a.scrollLeft-l.x-c.x,d=s.top+a.scrollTop-l.y-c.y;return{x:f,y:d,width:s.width,height:s.height}}function lE(e){return fo(e).position==="static"}function a3(e,t){if(!rs(e)||fo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return hs(e)===n&&(n=n.ownerDocument.body),n}function D9(e,t){const n=Vr(e);if(ub(e))return n;if(!rs(e)){let i=Tl(e);for(;i&&!$d(i);){if(co(i)&&!lE(i))return i;i=Tl(i)}return n}let r=a3(e,t);for(;r&&qre(r)&&lE(r);)r=a3(r,t);return r&&$d(r)&&lE(r)&&!q$(r)?n:r||Xre(e)||n}const uie=async function(e){const t=this.getOffsetParent||D9,n=this.getDimensions,r=await n(e.floating);return{reference:lie(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cie(e){return fo(e).direction==="rtl"}const fie={convertOffsetParentRelativeRectToViewportRelativeRect:Jre,getDocumentElement:hs,getClippingRect:sie,getOffsetParent:D9,getElementRects:uie,getClientRects:eie,getDimensions:aie,getScale:Jf,isElement:co,isRTL:cie};function I9(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function die(e,t){let n=null,r;const i=hs(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:c,top:f,width:d,height:h}=u;if(a||t(),!d||!h)return;const g=X0(f),p=X0(i.clientWidth-(c+d)),m=X0(i.clientHeight-(f+h)),y=X0(c),x={rootMargin:-g+"px "+-p+"px "+-m+"px "+-y+"px",threshold:Lr(0,$l(1,l))||1};let b=!0;function w(S){const E=S[0].intersectionRatio;if(E!==l){if(!b)return s();E?s(!1,E):r=setTimeout(()=>{s(!1,1e-7)},1e3)}E===1&&!I9(u,e.getBoundingClientRect())&&s(),b=!1}try{n=new IntersectionObserver(w,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,x)}n.observe(e)}return s(!0),o}function hie(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=V$(e),c=i||o?[...u?qg(u):[],...qg(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const f=u&&a?die(u,n):null;let d=-1,h=null;s&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let g,p=l?fc(e):null;l&&m();function m(){const y=fc(e);p&&!I9(p,y)&&n(),p=y,g=requestAnimationFrame(m)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const pie=Lre,gie=zre,mie=Pre,yie=Bre,vie=Dre,l3=Ore,xie=jre,bie=(e,t,n)=>{const r=new Map,i={platform:fie,...n},o={...i.platform,_c:r};return Fre(e,t,{...i,platform:o})};var wie=typeof document<"u",Eie=function(){},r1=wie?C.useLayoutEffect:Eie;function ov(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ov(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!ov(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function L9(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function u3(e,t){const n=L9(e);return Math.round(t*n)/n}function uE(e){const t=C.useRef(e);return r1(()=>{t.current=e}),t}function Sie(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,f]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=C.useState(r);ov(d,r)||h(r);const[g,p]=C.useState(null),[m,y]=C.useState(null),v=C.useCallback(F=>{F!==S.current&&(S.current=F,p(F))},[]),x=C.useCallback(F=>{F!==E.current&&(E.current=F,y(F))},[]),b=o||g,w=s||m,S=C.useRef(null),E=C.useRef(null),_=C.useRef(c),k=l!=null,T=uE(l),N=uE(i),P=uE(u),D=C.useCallback(()=>{if(!S.current||!E.current)return;const F={placement:t,strategy:n,middleware:d};N.current&&(F.platform=N.current),bie(S.current,E.current,F).then(O=>{const L={...O,isPositioned:P.current!==!1};M.current&&!ov(_.current,L)&&(_.current=L,Lc.flushSync(()=>{f(L)}))})},[d,t,n,N,P]);r1(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[u]);const M=C.useRef(!1);r1(()=>(M.current=!0,()=>{M.current=!1}),[]),r1(()=>{if(b&&(S.current=b),w&&(E.current=w),b&&w){if(T.current)return T.current(b,w,D);D()}},[b,w,D,T,k]);const $=C.useMemo(()=>({reference:S,floating:E,setReference:v,setFloating:x}),[v,x]),R=C.useMemo(()=>({reference:b,floating:w}),[b,w]),I=C.useMemo(()=>{const F={position:n,left:0,top:0};if(!R.floating)return F;const O=u3(R.floating,c.x),L=u3(R.floating,c.y);return a?{...F,transform:"translate("+O+"px, "+L+"px)",...L9(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:L}},[n,a,R.floating,c.x,c.y]);return C.useMemo(()=>({...c,update:D,refs:$,elements:R,floatingStyles:I}),[c,D,$,R,I])}const _ie=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?l3({element:r.current,padding:i}).fn(n):{}:r?l3({element:r,padding:i}).fn(n):{}}}},Cie=(e,t)=>({...pie(e),options:[e,t]}),kie=(e,t)=>({...gie(e),options:[e,t]}),Aie=(e,t)=>({...xie(e),options:[e,t]}),$ie=(e,t)=>({...mie(e),options:[e,t]}),Tie=(e,t)=>({...yie(e),options:[e,t]}),Nie=(e,t)=>({...vie(e),options:[e,t]}),Mie=(e,t)=>({..._ie(e),options:[e,t]});var Rie="Arrow",z9=C.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return A.jsx(rt.svg,{...o,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:A.jsx("polygon",{points:"0,0 30,0 15,10"})})});z9.displayName=Rie;var Fie=z9;function Oie(e){const[t,n]=C.useState(void 0);return wn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,a=u.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Y$="Popper",[j9,fb]=Rm(Y$),[Pie,B9]=j9(Y$),U9=e=>{const{__scopePopper:t,children:n}=e,[r,i]=C.useState(null);return A.jsx(Pie,{scope:t,anchor:r,onAnchorChange:i,children:n})};U9.displayName=Y$;var W9="PopperAnchor",q9=C.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=B9(W9,n),s=C.useRef(null),a=Ft(t,s);return C.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:A.jsx(rt.div,{...i,ref:a})});q9.displayName=W9;var X$="PopperContent",[Die,Iie]=j9(X$),H9=C.forwardRef((e,t)=>{var oe,Re,ee,ue,ce,j;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:h="optimized",onPlaced:g,...p}=e,m=B9(X$,n),[y,v]=C.useState(null),x=Ft(t,je=>v(je)),[b,w]=C.useState(null),S=Oie(b),E=(S==null?void 0:S.width)??0,_=(S==null?void 0:S.height)??0,k=r+(o!=="center"?"-"+o:""),T=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},N=Array.isArray(u)?u:[u],P=N.length>0,D={padding:T,boundary:N.filter(zie),altBoundary:P},{refs:M,floatingStyles:$,placement:R,isPositioned:I,middlewareData:F}=Sie({strategy:"fixed",placement:k,whileElementsMounted:(...je)=>hie(...je,{animationFrame:h==="always"}),elements:{reference:m.anchor},middleware:[Cie({mainAxis:i+_,alignmentAxis:s}),l&&kie({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Aie():void 0,...D}),l&&$ie({...D}),Tie({...D,apply:({elements:je,rects:ke,availableWidth:at,availableHeight:ct})=>{const{width:cn,height:ka}=ke.reference,rf=je.floating.style;rf.setProperty("--radix-popper-available-width",`${at}px`),rf.setProperty("--radix-popper-available-height",`${ct}px`),rf.setProperty("--radix-popper-anchor-width",`${cn}px`),rf.setProperty("--radix-popper-anchor-height",`${ka}px`)}}),b&&Mie({element:b,padding:a}),jie({arrowWidth:E,arrowHeight:_}),d&&Nie({strategy:"referenceHidden",...D})]}),[O,L]=Y9(R),X=uo(g);wn(()=>{I&&(X==null||X())},[I,X]);const V=(oe=F.arrow)==null?void 0:oe.x,ne=(Re=F.arrow)==null?void 0:Re.y,de=((ee=F.arrow)==null?void 0:ee.centerOffset)!==0,[he,Ne]=C.useState();return wn(()=>{y&&Ne(window.getComputedStyle(y).zIndex)},[y]),A.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:I?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(ue=F.transformOrigin)==null?void 0:ue.x,(ce=F.transformOrigin)==null?void 0:ce.y].join(" "),...((j=F.hide)==null?void 0:j.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:A.jsx(Die,{scope:n,placedSide:O,onArrowChange:w,arrowX:V,arrowY:ne,shouldHideArrow:de,children:A.jsx(rt.div,{"data-side":O,"data-align":L,...p,ref:x,style:{...p.style,animation:I?void 0:"none"}})})})});H9.displayName=X$;var V9="PopperArrow",Lie={top:"bottom",right:"left",bottom:"top",left:"right"},G9=C.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=Iie(V9,r),s=Lie[o.placedSide];return A.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:A.jsx(Fie,{...i,ref:n,style:{...i.style,display:"block"}})})});G9.displayName=V9;function zie(e){return e!==null}var jie=e=>({name:"transformOrigin",options:e,fn(t){var m,y,v;const{placement:n,rects:r,middlewareData:i}=t,s=((m=i.arrow)==null?void 0:m.centerOffset)!==0,a=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[u,c]=Y9(n),f={start:"0%",center:"50%",end:"100%"}[c],d=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let g="",p="";return u==="bottom"?(g=s?f:`${d}px`,p=`${-l}px`):u==="top"?(g=s?f:`${d}px`,p=`${r.floating.height+l}px`):u==="right"?(g=`${-l}px`,p=s?f:`${h}px`):u==="left"&&(g=`${r.floating.width+l}px`,p=s?f:`${h}px`),{data:{x:g,y:p}}}});function Y9(e){const[t,n="center"]=e.split("-");return[t,n]}var Bie=U9,X9=q9,K9=H9,Q9=G9,[db,l5e]=Rm("Tooltip",[fb]),K$=fb(),Z9="TooltipProvider",Uie=700,c3="tooltip.open",[Wie,J9]=db(Z9),e7=e=>{const{__scopeTooltip:t,delayDuration:n=Uie,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=e,s=C.useRef(!0),a=C.useRef(!1),l=C.useRef(0);return C.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),A.jsx(Wie,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:C.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:C.useCallback(u=>{a.current=u},[]),disableHoverableContent:i,children:o})};e7.displayName=Z9;var t7="Tooltip",[u5e,hb]=db(t7),fC="TooltipTrigger",qie=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=hb(fC,n),o=J9(fC,n),s=K$(n),a=C.useRef(null),l=Ft(t,a,i.onTriggerChange),u=C.useRef(!1),c=C.useRef(!1),f=C.useCallback(()=>u.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),A.jsx(X9,{asChild:!0,...s,children:A.jsx(rt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:De(e.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:De(e.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:De(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:De(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:De(e.onBlur,i.onClose),onClick:De(e.onClick,i.onClose)})})});qie.displayName=fC;var Hie="TooltipPortal",[c5e,Vie]=db(Hie,{forceMount:void 0}),Td="TooltipContent",n7=C.forwardRef((e,t)=>{const n=Vie(Td,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=e,s=hb(Td,e.__scopeTooltip);return A.jsx(P$,{present:r||s.open,children:s.disableHoverableContent?A.jsx(r7,{side:i,...o,ref:t}):A.jsx(Gie,{side:i,...o,ref:t})})}),Gie=C.forwardRef((e,t)=>{const n=hb(Td,e.__scopeTooltip),r=J9(Td,e.__scopeTooltip),i=C.useRef(null),o=Ft(t,i),[s,a]=C.useState(null),{trigger:l,onClose:u}=n,c=i.current,{onPointerInTransitChange:f}=r,d=C.useCallback(()=>{a(null),f(!1)},[f]),h=C.useCallback((g,p)=>{const m=g.currentTarget,y={x:g.clientX,y:g.clientY},v=Zie(y,m.getBoundingClientRect()),x=Jie(y,v),b=eoe(p.getBoundingClientRect()),w=noe([...x,...b]);a(w),f(!0)},[f]);return C.useEffect(()=>()=>d(),[d]),C.useEffect(()=>{if(l&&c){const g=m=>h(m,c),p=m=>h(m,l);return l.addEventListener("pointerleave",g),c.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",g),c.removeEventListener("pointerleave",p)}}},[l,c,h,d]),C.useEffect(()=>{if(s){const g=p=>{const m=p.target,y={x:p.clientX,y:p.clientY},v=(l==null?void 0:l.contains(m))||(c==null?void 0:c.contains(m)),x=!toe(y,s);v?d():x&&(d(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,c,s,u,d]),A.jsx(r7,{...e,ref:o})}),[Yie,Xie]=db(t7,{isInside:!1}),Kie=ite("TooltipContent"),r7=C.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=e,l=hb(Td,n),u=K$(n),{onClose:c}=l;return C.useEffect(()=>(document.addEventListener(c3,c),()=>document.removeEventListener(c3,c)),[c]),C.useEffect(()=>{if(l.trigger){const f=d=>{const h=d.target;h!=null&&h.contains(l.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,c]),A.jsx(ob,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:c,children:A.jsxs(K9,{"data-state":l.stateAttribute,...u,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[A.jsx(Kie,{children:r}),A.jsx(Yie,{scope:n,isInside:!0,children:A.jsx(kte,{id:l.contentId,role:"tooltip",children:i||r})})]})})});n7.displayName=Td;var i7="TooltipArrow",Qie=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=K$(n);return Xie(i7,n).isInside?null:A.jsx(Q9,{...i,...r,ref:t})});Qie.displayName=i7;function Zie(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Jie(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function eoe(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function toe(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o],l=t[s],u=a.x,c=a.y,f=l.x,d=l.y;c>r!=d>r&&n<(f-u)*(r-c)/(d-c)+u&&(i=!i)}return i}function noe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),roe(t)}function roe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const o=t[t.length-1],s=t[t.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const o=n[n.length-1],s=n[n.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var ioe=e7,o7=n7;const ooe=ioe,soe=C.forwardRef(({className:e,sideOffset:t=4,...n},r)=>A.jsx(o7,{ref:r,sideOffset:t,className:Un("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));soe.displayName=o7.displayName;var pb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gb=typeof window>"u"||"Deno"in globalThis;function Wi(){}function aoe(e,t){return typeof e=="function"?e(t):e}function loe(e){return typeof e=="number"&&e>=0&&e!==1/0}function uoe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function dC(e,t){return typeof e=="function"?e(t):e}function coe(e,t){return typeof e=="function"?e(t):e}function f3(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==Q$(s,t.options))return!1}else if(!Vg(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function d3(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Hg(t.options.mutationKey)!==Hg(o))return!1}else if(!Vg(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Q$(e,t){return((t==null?void 0:t.queryKeyHashFn)||Hg)(e)}function Hg(e){return JSON.stringify(e,(t,n)=>hC(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Vg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Vg(e[n],t[n])):!1}function s7(e,t){if(e===t)return e;const n=h3(e)&&h3(t);if(n||hC(e)&&hC(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),s=o.length,a=n?[]:{},l=new Set(r);let u=0;for(let c=0;c<s;c++){const f=n?c:o[c];(!n&&l.has(f)||n)&&e[f]===void 0&&t[f]===void 0?(a[f]=void 0,u++):(a[f]=s7(e[f],t[f]),a[f]===e[f]&&e[f]!==void 0&&u++)}return i===s&&u===i?e:a}return t}function h3(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function hC(e){if(!p3(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!p3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function p3(e){return Object.prototype.toString.call(e)==="[object Object]"}function foe(e){return new Promise(t=>{setTimeout(t,e)})}function doe(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?s7(e,t):t}function hoe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function poe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Z$=Symbol();function a7(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Z$?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Uu,Xa,dd,m6,goe=(m6=class extends pb{constructor(){super();Ue(this,Uu);Ue(this,Xa);Ue(this,dd);Se(this,dd,t=>{if(!gb&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,Xa)||this.setEventListener(q(this,dd))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Xa))==null||t.call(this),Se(this,Xa,void 0))}setEventListener(t){var n;Se(this,dd,t),(n=q(this,Xa))==null||n.call(this),Se(this,Xa,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){q(this,Uu)!==t&&(Se(this,Uu,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof q(this,Uu)=="boolean"?q(this,Uu):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Uu=new WeakMap,Xa=new WeakMap,dd=new WeakMap,m6),l7=new goe,hd,Ka,pd,y6,moe=(y6=class extends pb{constructor(){super();Ue(this,hd,!0);Ue(this,Ka);Ue(this,pd);Se(this,pd,t=>{if(!gb&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,Ka)||this.setEventListener(q(this,pd))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Ka))==null||t.call(this),Se(this,Ka,void 0))}setEventListener(t){var n;Se(this,pd,t),(n=q(this,Ka))==null||n.call(this),Se(this,Ka,t(this.setOnline.bind(this)))}setOnline(t){q(this,hd)!==t&&(Se(this,hd,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return q(this,hd)}},hd=new WeakMap,Ka=new WeakMap,pd=new WeakMap,y6),sv=new moe;function yoe(){let e,t;const n=new Promise((i,o)=>{e=i,t=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function voe(e){return Math.min(1e3*2**e,3e4)}function u7(e){return(e??"online")==="online"?sv.isOnline():!0}var c7=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function cE(e){return e instanceof c7}function f7(e){let t=!1,n=0,r=!1,i;const o=yoe(),s=p=>{var m;r||(d(new c7(p)),(m=e.abort)==null||m.call(e))},a=()=>{t=!0},l=()=>{t=!1},u=()=>l7.isFocused()&&(e.networkMode==="always"||sv.isOnline())&&e.canRun(),c=()=>u7(e.networkMode)&&e.canRun(),f=p=>{var m;r||(r=!0,(m=e.onSuccess)==null||m.call(e,p),i==null||i(),o.resolve(p))},d=p=>{var m;r||(r=!0,(m=e.onError)==null||m.call(e,p),i==null||i(),o.reject(p))},h=()=>new Promise(p=>{var m;i=y=>{(r||u())&&p(y)},(m=e.onPause)==null||m.call(e)}).then(()=>{var p;i=void 0,r||(p=e.onContinue)==null||p.call(e)}),g=()=>{if(r)return;let p;const m=n===0?e.initialPromise:void 0;try{p=m??e.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(f).catch(y=>{var S;if(r)return;const v=e.retry??(gb?0:3),x=e.retryDelay??voe,b=typeof x=="function"?x(n,y):x,w=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(t||!w){d(y);return}n++,(S=e.onFail)==null||S.call(e,n,y),foe(b).then(()=>u()?void 0:h()).then(()=>{t?d(y):g()})})};return{promise:o,cancel:s,continue:()=>(i==null||i(),o),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?g():h().then(g),o)}}var xoe=e=>setTimeout(e,0);function boe(){let e=[],t=0,n=a=>{a()},r=a=>{a()},i=xoe;const o=a=>{t?e.push(a):i(()=>{n(a)})},s=()=>{const a=e;e=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||s()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Qn=boe(),Wu,v6,d7=(v6=class{constructor(){Ue(this,Wu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),loe(this.gcTime)&&Se(this,Wu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(gb?1/0:5*60*1e3))}clearGcTimeout(){q(this,Wu)&&(clearTimeout(q(this,Wu)),Se(this,Wu,void 0))}},Wu=new WeakMap,v6),gd,qu,li,Hu,Mn,Cm,Vu,qi,Rs,x6,woe=(x6=class extends d7{constructor(t){super();Ue(this,qi);Ue(this,gd);Ue(this,qu);Ue(this,li);Ue(this,Hu);Ue(this,Mn);Ue(this,Cm);Ue(this,Vu);Se(this,Vu,!1),Se(this,Cm,t.defaultOptions),this.setOptions(t.options),this.observers=[],Se(this,Hu,t.client),Se(this,li,q(this,Hu).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Se(this,gd,Soe(this.options)),this.state=t.state??q(this,gd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,Mn))==null?void 0:t.promise}setOptions(t){this.options={...q(this,Cm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,li).remove(this)}setData(t,n){const r=doe(this.state.data,t,this.options);return _n(this,qi,Rs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){_n(this,qi,Rs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=q(this,Mn))==null?void 0:r.promise;return(i=q(this,Mn))==null||i.cancel(t),n?n.then(Wi).catch(Wi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,gd))}isActive(){return this.observers.some(t=>coe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Z$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>dC(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!uoe(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,Mn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,Mn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,li).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(q(this,Mn)&&(q(this,Vu)?q(this,Mn).cancel({revert:!0}):q(this,Mn).cancelRetry()),this.scheduleGc()),q(this,li).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_n(this,qi,Rs).call(this,{type:"invalidate"})}fetch(t,n){var u,c,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,Mn))return q(this,Mn).continueRetry(),q(this,Mn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Se(this,Vu,!0),r.signal)})},o=()=>{const d=a7(this.options,n),g=(()=>{const p={client:q(this,Hu),queryKey:this.queryKey,meta:this.meta};return i(p),p})();return Se(this,Vu,!1),this.options.persister?this.options.persister(d,g,this):d(g)},a=(()=>{const d={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,Hu),state:this.state,fetchFn:o};return i(d),d})();(u=this.options.behavior)==null||u.onFetch(a,this),Se(this,qu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&_n(this,qi,Rs).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=d=>{var h,g,p,m;cE(d)&&d.silent||_n(this,qi,Rs).call(this,{type:"error",error:d}),cE(d)||((g=(h=q(this,li).config).onError)==null||g.call(h,d,this),(m=(p=q(this,li).config).onSettled)==null||m.call(p,this.state.data,d,this)),this.scheduleGc()};return Se(this,Mn,f7({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var h,g,p,m;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){l(y);return}(g=(h=q(this,li).config).onSuccess)==null||g.call(h,d,this),(m=(p=q(this,li).config).onSettled)==null||m.call(p,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,h)=>{_n(this,qi,Rs).call(this,{type:"failed",failureCount:d,error:h})},onPause:()=>{_n(this,qi,Rs).call(this,{type:"pause"})},onContinue:()=>{_n(this,qi,Rs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),q(this,Mn).start()}},gd=new WeakMap,qu=new WeakMap,li=new WeakMap,Hu=new WeakMap,Mn=new WeakMap,Cm=new WeakMap,Vu=new WeakMap,qi=new WeakSet,Rs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Eoe(r.data,this.options),fetchMeta:t.meta??null};case"success":return Se(this,qu,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return cE(i)&&i.revert&&q(this,qu)?{...q(this,qu),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Qn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),q(this,li).notify({query:this,type:"updated",action:t})})},x6);function Eoe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:u7(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Soe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Do,b6,_oe=(b6=class extends pb{constructor(t={}){super();Ue(this,Do);this.config=t,Se(this,Do,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??Q$(i,n);let s=this.get(o);return s||(s=new woe({client:t,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){q(this,Do).has(t.queryHash)||(q(this,Do).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=q(this,Do).get(t.queryHash);n&&(t.destroy(),n===t&&q(this,Do).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Qn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,Do).get(t)}getAll(){return[...q(this,Do).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>f3(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>f3(t,r)):n}notify(t){Qn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Qn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Qn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Do=new WeakMap,b6),Io,Gn,Gu,Lo,Oa,w6,Coe=(w6=class extends d7{constructor(t){super();Ue(this,Lo);Ue(this,Io);Ue(this,Gn);Ue(this,Gu);this.mutationId=t.mutationId,Se(this,Gn,t.mutationCache),Se(this,Io,[]),this.state=t.state||koe(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,Io).includes(t)||(q(this,Io).push(t),this.clearGcTimeout(),q(this,Gn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Se(this,Io,q(this,Io).filter(n=>n!==t)),this.scheduleGc(),q(this,Gn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,Io).length||(this.state.status==="pending"?this.scheduleGc():q(this,Gn).remove(this))}continue(){var t;return((t=q(this,Gu))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,s,a,l,u,c,f,d,h,g,p,m,y,v,x,b,w,S,E,_;const n=()=>{_n(this,Lo,Oa).call(this,{type:"continue"})};Se(this,Gu,f7({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,T)=>{_n(this,Lo,Oa).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{_n(this,Lo,Oa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Gn).canRun(this)}));const r=this.state.status==="pending",i=!q(this,Gu).canStart();try{if(r)n();else{_n(this,Lo,Oa).call(this,{type:"pending",variables:t,isPaused:i}),await((s=(o=q(this,Gn).config).onMutate)==null?void 0:s.call(o,t,this));const T=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));T!==this.state.context&&_n(this,Lo,Oa).call(this,{type:"pending",context:T,variables:t,isPaused:i})}const k=await q(this,Gu).start();return await((c=(u=q(this,Gn).config).onSuccess)==null?void 0:c.call(u,k,t,this.state.context,this)),await((d=(f=this.options).onSuccess)==null?void 0:d.call(f,k,t,this.state.context)),await((g=(h=q(this,Gn).config).onSettled)==null?void 0:g.call(h,k,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,k,null,t,this.state.context)),_n(this,Lo,Oa).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(y=q(this,Gn).config).onError)==null?void 0:v.call(y,k,t,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,k,t,this.state.context)),await((S=(w=q(this,Gn).config).onSettled)==null?void 0:S.call(w,void 0,k,this.state.variables,this.state.context,this)),await((_=(E=this.options).onSettled)==null?void 0:_.call(E,void 0,k,t,this.state.context)),k}finally{_n(this,Lo,Oa).call(this,{type:"error",error:k})}}finally{q(this,Gn).runNext(this)}}},Io=new WeakMap,Gn=new WeakMap,Gu=new WeakMap,Lo=new WeakSet,Oa=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Qn.batch(()=>{q(this,Io).forEach(r=>{r.onMutationUpdate(t)}),q(this,Gn).notify({mutation:this,type:"updated",action:t})})},w6);function koe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ls,Hi,km,E6,Aoe=(E6=class extends pb{constructor(t={}){super();Ue(this,Ls);Ue(this,Hi);Ue(this,km);this.config=t,Se(this,Ls,new Set),Se(this,Hi,new Map),Se(this,km,0)}build(t,n,r){const i=new Coe({mutationCache:this,mutationId:++$0(this,km)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){q(this,Ls).add(t);const n=K0(t);if(typeof n=="string"){const r=q(this,Hi).get(n);r?r.push(t):q(this,Hi).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,Ls).delete(t)){const n=K0(t);if(typeof n=="string"){const r=q(this,Hi).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&q(this,Hi).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=K0(t);if(typeof n=="string"){const r=q(this,Hi).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=K0(t);if(typeof n=="string"){const i=(r=q(this,Hi).get(n))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Qn.batch(()=>{q(this,Ls).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,Ls).clear(),q(this,Hi).clear()})}getAll(){return Array.from(q(this,Ls))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>d3(n,r))}findAll(t={}){return this.getAll().filter(n=>d3(t,n))}notify(t){Qn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Qn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Wi))))}},Ls=new WeakMap,Hi=new WeakMap,km=new WeakMap,E6);function K0(e){var t;return(t=e.options.scope)==null?void 0:t.id}function g3(e){return{onFetch:(t,n)=>{var c,f,d,h,g;const r=t.options,i=(d=(f=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:d.direction,o=((h=t.state.data)==null?void 0:h.pages)||[],s=((g=t.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let p=!1;const m=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},y=a7(t.options,t.fetchOptions),v=async(x,b,w)=>{if(p)return Promise.reject();if(b==null&&x.pages.length)return Promise.resolve(x);const E=(()=>{const N={client:t.client,queryKey:t.queryKey,pageParam:b,direction:w?"backward":"forward",meta:t.options.meta};return m(N),N})(),_=await y(E),{maxPages:k}=t.options,T=w?poe:hoe;return{pages:T(x.pages,_,k),pageParams:T(x.pageParams,b,k)}};if(i&&o.length){const x=i==="backward",b=x?$oe:m3,w={pages:o,pageParams:s},S=b(r,w);a=await v(w,S,x)}else{const x=e??o.length;do{const b=l===0?s[0]??r.initialPageParam:m3(r,a);if(l>0&&b==null)break;a=await v(a,b),l++}while(l<x)}return a};t.options.persister?t.fetchFn=()=>{var p,m;return(m=(p=t.options).persister)==null?void 0:m.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function m3(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function $oe(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var At,Qa,Za,md,yd,Ja,vd,xd,S6,Toe=(S6=class{constructor(e={}){Ue(this,At);Ue(this,Qa);Ue(this,Za);Ue(this,md);Ue(this,yd);Ue(this,Ja);Ue(this,vd);Ue(this,xd);Se(this,At,e.queryCache||new _oe),Se(this,Qa,e.mutationCache||new Aoe),Se(this,Za,e.defaultOptions||{}),Se(this,md,new Map),Se(this,yd,new Map),Se(this,Ja,0)}mount(){$0(this,Ja)._++,q(this,Ja)===1&&(Se(this,vd,l7.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,At).onFocus())})),Se(this,xd,sv.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,At).onOnline())})))}unmount(){var e,t;$0(this,Ja)._--,q(this,Ja)===0&&((e=q(this,vd))==null||e.call(this),Se(this,vd,void 0),(t=q(this,xd))==null||t.call(this),Se(this,xd,void 0))}isFetching(e){return q(this,At).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,Qa).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,At).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=q(this,At).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(dC(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return q(this,At).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=q(this,At).get(r.queryHash),o=i==null?void 0:i.state.data,s=aoe(t,o);if(s!==void 0)return q(this,At).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return Qn.batch(()=>q(this,At).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,At).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=q(this,At);Qn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=q(this,At);return Qn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Qn.batch(()=>q(this,At).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Wi).catch(Wi)}invalidateQueries(e,t={}){return Qn.batch(()=>(q(this,At).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Qn.batch(()=>q(this,At).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Wi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Wi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=q(this,At).build(this,t);return n.isStaleByTime(dC(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Wi).catch(Wi)}fetchInfiniteQuery(e){return e.behavior=g3(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Wi).catch(Wi)}ensureInfiniteQueryData(e){return e.behavior=g3(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return sv.isOnline()?q(this,Qa).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,At)}getMutationCache(){return q(this,Qa)}getDefaultOptions(){return q(this,Za)}setDefaultOptions(e){Se(this,Za,e)}setQueryDefaults(e,t){q(this,md).set(Hg(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,md).values()],n={};return t.forEach(r=>{Vg(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){q(this,yd).set(Hg(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,yd).values()],n={};return t.forEach(r=>{Vg(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,Za).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Q$(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Z$&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,Za).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,At).clear(),q(this,Qa).clear()}},At=new WeakMap,Qa=new WeakMap,Za=new WeakMap,md=new WeakMap,yd=new WeakMap,Ja=new WeakMap,vd=new WeakMap,xd=new WeakMap,S6),Noe=C.createContext(void 0),Moe=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),A.jsx(Noe.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},av.apply(this,arguments)}var nl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(nl||(nl={}));const y3="popstate";function Roe(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return pC("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:p7(i)}return Ooe(t,n,null,e)}function kr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function h7(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Foe(){return Math.random().toString(36).substr(2,8)}function v3(e,t){return{usr:e.state,key:e.key,idx:t}}function pC(e,t,n,r){return n===void 0&&(n=null),av({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?mb(t):t,{state:n,key:t&&t.key||r||Foe()})}function p7(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function mb(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Ooe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=nl.Pop,l=null,u=c();u==null&&(u=0,s.replaceState(av({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function f(){a=nl.Pop;let m=c(),y=m==null?null:m-u;u=m,l&&l({action:a,location:p.location,delta:y})}function d(m,y){a=nl.Push;let v=pC(p.location,m,y);u=c()+1;let x=v3(v,u),b=p.createHref(v);try{s.pushState(x,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(b)}o&&l&&l({action:a,location:p.location,delta:1})}function h(m,y){a=nl.Replace;let v=pC(p.location,m,y);u=c();let x=v3(v,u),b=p.createHref(v);s.replaceState(x,"",b),o&&l&&l({action:a,location:p.location,delta:0})}function g(m){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof m=="string"?m:p7(m);return v=v.replace(/ $/,"%20"),kr(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let p={get action(){return a},get location(){return e(i,s)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(y3,f),l=m,()=>{i.removeEventListener(y3,f),l=null}},createHref(m){return t(i,m)},createURL:g,encodeLocation(m){let y=g(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(m){return s.go(m)}};return p}var x3;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(x3||(x3={}));function Poe(e,t,n){return n===void 0&&(n="/"),Doe(e,t,n,!1)}function Doe(e,t,n,r){let i=typeof t=="string"?mb(t):t,o=y7(i.pathname||"/",n);if(o==null)return null;let s=g7(e);Ioe(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=Yoe(o);a=Voe(s[l],u,r)}return a}function g7(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(kr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ed([r,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(kr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),g7(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:qoe(u,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of m7(o.path))i(o,s,l)}),t}function m7(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=m7(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Ioe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Hoe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Loe=/^:[\w-]+$/,zoe=3,joe=2,Boe=1,Uoe=10,Woe=-2,b3=e=>e==="*";function qoe(e,t){let n=e.split("/"),r=n.length;return n.some(b3)&&(r+=Woe),t&&(r+=joe),n.filter(i=>!b3(i)).reduce((i,o)=>i+(Loe.test(o)?zoe:o===""?Boe:Uoe),r)}function Hoe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Voe(e,t,n){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",f=w3({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=w3({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:ed([o,f.pathname]),pathnameBase:Xoe(ed([o,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(o=ed([o,f.pathnameBase]))}return s}function w3(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Goe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let p=a[f]||"";s=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[f];return h&&!g?u[d]=void 0:u[d]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function Goe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),h7(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Yoe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return h7(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function y7(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const ed=e=>e.join("/").replace(/\/\/+/g,"/"),Xoe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function Koe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const v7=["post","put","patch","delete"];new Set(v7);const Qoe=["get",...v7];new Set(Qoe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(this,arguments)}const Zoe=C.createContext(null),Joe=C.createContext(null),x7=C.createContext(null),yb=C.createContext(null),vb=C.createContext({outlet:null,matches:[],isDataRoute:!1}),b7=C.createContext(null);function J$(){return C.useContext(yb)!=null}function w7(){return J$()||kr(!1),C.useContext(yb).location}function ese(e,t){return tse(e,t)}function tse(e,t,n,r){J$()||kr(!1);let{navigator:i}=C.useContext(x7),{matches:o}=C.useContext(vb),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=w7(),c;if(t){var f;let m=typeof t=="string"?mb(t):t;l==="/"||(f=m.pathname)!=null&&f.startsWith(l)||kr(!1),c=m}else c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let m=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(m.length).join("/")}let g=Poe(e,{pathname:h}),p=sse(g&&g.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:ed([l,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:ed([l,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return t&&p?C.createElement(yb.Provider,{value:{location:lv({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:nl.Pop}},p):p}function nse(){let e=cse(),t=Koe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,null)}const rse=C.createElement(nse,null);class ise extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(vb.Provider,{value:this.props.routeContext},C.createElement(b7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ose(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(Zoe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(vb.Provider,{value:t},r)}function sse(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||kr(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:h}=n,g=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||g){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,f,d)=>{let h,g=!1,p=null,m=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,p=f.route.errorElement||rse,l&&(u<0&&d===0?(g=!0,m=null):u===d&&(g=!0,m=f.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,d+1)),v=()=>{let x;return h?x=p:g?x=m:f.route.Component?x=C.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=c,C.createElement(ose,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?C.createElement(ise,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var gC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gC||{});function ase(e){let t=C.useContext(Joe);return t||kr(!1),t}function lse(e){let t=C.useContext(vb);return t||kr(!1),t}function use(e){let t=lse(),n=t.matches[t.matches.length-1];return n.route.id||kr(!1),n.route.id}function cse(){var e;let t=C.useContext(b7),n=ase(gC.UseRouteError),r=use(gC.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function fse(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function mC(e){kr(!1)}function dse(e){let{basename:t="/",children:n=null,location:r,navigationType:i=nl.Pop,navigator:o,static:s=!1,future:a}=e;J$()&&kr(!1);let l=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:o,static:s,future:lv({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=mb(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:g="default"}=r,p=C.useMemo(()=>{let m=y7(c,l);return m==null?null:{location:{pathname:m,search:f,hash:d,state:h,key:g},navigationType:i}},[l,c,f,d,h,g,i]);return p==null?null:C.createElement(x7.Provider,{value:u},C.createElement(yb.Provider,{children:n,value:p}))}function hse(e){let{children:t,location:n}=e;return ese(yC(t),n)}new Promise(()=>{});function yC(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let o=[...t,i];if(r.type===C.Fragment){n.push.apply(n,yC(r.props.children,o));return}r.type!==mC&&kr(!1),!r.props.index||!r.props.children||kr(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=yC(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const pse="6";try{window.__reactRouterVersion=pse}catch{}const gse="startTransition",E3=WA[gse];function mse(e){let{basename:t,children:n,future:r,window:i}=e,o=C.useRef();o.current==null&&(o.current=Roe({window:i,v5Compat:!0}));let s=o.current,[a,l]=C.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},c=C.useCallback(f=>{u&&E3?E3(()=>l(f)):l(f)},[l,u]);return C.useLayoutEffect(()=>s.listen(c),[s,c]),C.useEffect(()=>fse(r),[r]),C.createElement(dse,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}var S3;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(S3||(S3={}));var _3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_3||(_3={}));const yse=()=>{const[e,t]=C.useState(!1),n=r=>{const i=document.getElementById(r);i&&(i.scrollIntoView({behavior:"smooth",block:"start"}),t(!1))};return A.jsx("nav",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border shadow-sm",children:A.jsxs("div",{className:"container mx-auto px-6 lg:px-8 max-w-7xl",children:[A.jsxs("div",{className:"flex items-center justify-between h-16",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("h1",{className:"text-xl font-bold text-primary",children:"Australia's Threatened Animals"})}),A.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[A.jsx("button",{onClick:()=>n("visualisation"),className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:"Visualisation"}),A.jsx("button",{onClick:()=>n("insights"),className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:"Insights"}),A.jsx("button",{onClick:()=>n("data"),className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:"Data"})]}),A.jsx("button",{onClick:()=>t(!e),className:"md:hidden p-2 rounded-lg hover:bg-muted transition-colors","aria-label":"Toggle menu",children:A.jsx(ene,{className:"h-5 w-5"})})]}),e&&A.jsxs("div",{className:"md:hidden pb-4 space-y-2",children:[A.jsx("button",{onClick:()=>n("visualisation"),className:"block w-full text-left px-4 py-2 text-sm font-medium text-muted-foreground hover:bg-muted rounded-lg transition-colors",children:"Visualisation"}),A.jsx("button",{onClick:()=>n("insights"),className:"block w-full text-left px-4 py-2 text-sm font-medium text-muted-foreground hover:bg-muted rounded-lg transition-colors",children:"Insights"}),A.jsx("button",{onClick:()=>n("data"),className:"block w-full text-left px-4 py-2 text-sm font-medium text-muted-foreground hover:bg-muted rounded-lg transition-colors",children:"Data"})]})]})})},Q0=({icon:e,state:t,abbrev:n,description:r,color:i})=>A.jsxs("div",{className:`rounded-xl p-6 border-2 transition-all hover:scale-105 hover:shadow-lg ${i}`,children:[A.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[A.jsx("div",{className:"flex-shrink-0 mt-1",children:e}),A.jsx("div",{children:A.jsxs("h3",{className:"font-bold text-lg mb-1",children:[t," ",A.jsxs("span",{className:"text-sm font-normal opacity-70",children:["(",n,")"]})]})})]}),A.jsx("p",{className:"text-sm text-foreground/80 leading-relaxed",children:r})]}),vse=/("(?:[^\\"]|\\.)*")|[:,]/g;function fE(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function o(s,a,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const u=JSON.stringify(s,i);if(u===void 0)return u;const c=r-a.length-l;if(u.length<=c){const f=u.replace(vse,(d,h)=>h||`${d} `);if(f.length<=c)return f}if(i!=null&&(s=JSON.parse(u),i=void 0),typeof s=="object"&&s!==null){const f=a+n,d=[];let h=0,g,p;if(Array.isArray(s)){g="[",p="]";const{length:m}=s;for(;h<m;h++)d.push(o(s[h],f,h===m-1?0:1)||"null")}else{g="{",p="}";const m=Object.keys(s),{length:y}=m;for(;h<y;h++){const v=m[h],x=`${JSON.stringify(v)}: `,b=o(s[v],f,x.length+(h===y-1?0:1));b!==void 0&&d.push(x+b)}}if(d.length>0)return[g,n+d.join(`,
${f}`),p].join(`
${a}`)}return u}(e,"",0)}function Fr(e,t,n){return e.fields=t||[],e.fname=n,e}function Rt(e){return e==null?null:e.fname}function In(e){return e==null?null:e.fields}function E7(e){return e.length===1?xse(e[0]):bse(e)}const xse=e=>function(t){return t[e]},bse=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function U(e){throw Error(e)}function ps(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||U("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&U("Access path missing closing bracket: "+e),r&&U("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Si(e,t,n){const r=ps(e);return e=r.length===1?r[0]:e,Fr((n&&n.get||E7)(r),[e],t||e)}const Pm=Si("id"),Wn=Fr(e=>e,[],"identity"),Ya=Fr(()=>0,[],"zero"),yh=Fr(()=>1,[],"one"),_i=Fr(()=>!0,[],"true"),Pa=Fr(()=>!1,[],"false"),eT=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function"),"__proto__"]);function wse(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const S7=0,tT=1,nT=2,_7=3,C7=4;function xb(e,t,n=wse){let r=e||S7;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=tT&&n(t||"error","ERROR",arguments),this},warn(){return r>=nT&&n(t||"warn","WARN",arguments),this},info(){return r>=_7&&n(t||"log","INFO",arguments),this},debug(){return r>=C7&&n(t||"log","DEBUG",arguments),this}}}var W=Array.isArray;function ae(e){return e===Object(e)}const C3=e=>e!=="__proto__";function vh(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=Ese(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;xh(t,r,n[r],i)}return t},{})}function xh(e,t,n,r){if(!C3(t))return;let i,o;if(ae(n)&&!W(n)){o=ae(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?xh(o,i,n[i]):C3(i)&&(o[i]=n[i])}else e[t]=n}function Ese(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function ze(e){return e[e.length-1]}function Pn(e){return e==null||e===""?null:+e}const k7=e=>t=>e*Math.exp(t),A7=e=>t=>Math.log(e*t),$7=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),T7=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,uv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function bb(e,t,n,r){const i=n(e[0]),o=n(ze(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function N7(e,t){return bb(e,t,Pn,Wn)}function M7(e,t){var n=Math.sign(e[0]);return bb(e,t,A7(n),k7(n))}function R7(e,t,n){return bb(e,t,uv(n),uv(1/n))}function F7(e,t,n){return bb(e,t,$7(n),T7(n))}function wb(e,t,n,r,i){const o=r(e[0]),s=r(ze(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function rT(e,t,n){return wb(e,t,n,Pn,Wn)}function iT(e,t,n){const r=Math.sign(e[0]);return wb(e,t,n,A7(r),k7(r))}function cv(e,t,n,r){return wb(e,t,n,uv(r),uv(1/r))}function oT(e,t,n,r){return wb(e,t,n,$7(r),T7(r))}function O7(e){return 1+~~(new Date(e).getMonth()/3)}function P7(e){return 1+~~(new Date(e).getUTCMonth()/3)}function le(e){return e!=null?W(e)?e:[e]:[]}function D7(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function $e(e){return typeof e=="function"}const Sse="descending";function sT(e,t,n){n=n||{},t=le(t)||[];const r=[],i=[],o={},s=n.comparator||_se;return le(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===Sse?-1:1),i.push(a=$e(a)?a:Si(a,null,n)),(In(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:Fr(s(i,r),Object.keys(o))}const bh=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),_se=(e,t)=>e.length===1?Cse(e[0],t[0]):kse(e,t,e.length),Cse=(e,t)=>function(n,r){return bh(e(n),e(r))*t},kse=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=bh(o(r),o(i));return s*t[a]});function qn(e){return $e(e)?e:()=>e}function aT(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Ae(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function is(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function I7(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}function fe(e,t){return Object.hasOwn(e,t)}const Z0={};function wh(e){let t={},n;function r(o){return fe(t,o)&&t[o]!==Z0}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Z0&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Z0),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==Z0&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function L7(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=ze(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?r:c<=s?i:o}function te(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ae(r,n)}function zf(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Yl(e){return typeof e=="boolean"}function bl(e){return Object.prototype.toString.call(e)==="[object Date]"}function z7(e){return e&&$e(e[Symbol.iterator])}function He(e){return typeof e=="number"}function lT(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function se(e){return typeof e=="string"}function uT(e,t,n){e&&(e=t?le(e).map(a=>a.replace(/\\(.)/g,"$1")):le(e));const r=e&&e.length,i=n&&n.get||E7,o=a=>i(t?[a]:ps(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return Fr(s,e,"key")}function j7(e,t){const n=e[0],r=ze(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Ase=1e4;function B7(e){e=+e||Ase;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>fe(t,s)||fe(n,s),get:s=>fe(t,s)?t[s]:fe(n,s)?o(s,n[s]):void 0,set:(s,a)=>fe(t,s)?t[s]=a:o(s,a)}}function U7(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function Mp(e,t){let n="";for(;--t>=0;)n+=e;return n}function W7(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?Mp(i,s)+o:r==="center"?Mp(i,~~(s/2))+o+Mp(i,Math.ceil(s/2)):o+Mp(i,s)}function Dm(e){return e&&ze(e)-e[0]||0}function J(e){return W(e)?`[${e.map(t=>t===null?"null":J(t))}]`:ae(e)||se(e)?JSON.stringify(e).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):e}function cT(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const $se=e=>He(e)||bl(e)?e:Date.parse(e);function fT(e,t){return t=t||$se,e==null||e===""?null:t(e)}function dT(e){return e==null||e===""?null:e+""}function ho(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function q7(e,t,n,r){const i=r??"…",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Ba(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var k3={},dE={},hE=34,np=10,pE=13;function H7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Tse(e,t){var n=H7(e);return function(r,i){return t(n(r),i,e)}}function A3(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Nse(e){return e<0?"-"+pr(-e,6):e>9999?"+"+pr(e,6):pr(e,4)}function Mse(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Nse(e.getUTCFullYear())+"-"+pr(e.getUTCMonth()+1,2)+"-"+pr(e.getUTCDate(),2)+(i?"T"+pr(t,2)+":"+pr(n,2)+":"+pr(r,2)+"."+pr(i,3)+"Z":r?"T"+pr(t,2)+":"+pr(n,2)+":"+pr(r,2)+"Z":n||t?"T"+pr(t,2)+":"+pr(n,2)+"Z":"")}function Rse(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,g,p=i(f,function(m,y){if(h)return h(m,y-1);g=m,h=d?Tse(m,d):H7(m)});return p.columns=g||[],p}function i(f,d){var h=[],g=f.length,p=0,m=0,y,v=g<=0,x=!1;f.charCodeAt(g-1)===np&&--g,f.charCodeAt(g-1)===pE&&--g;function b(){if(v)return dE;if(x)return x=!1,k3;var S,E=p,_;if(f.charCodeAt(E)===hE){for(;p++<g&&f.charCodeAt(p)!==hE||f.charCodeAt(++p)===hE;);return(S=p)>=g?v=!0:(_=f.charCodeAt(p++))===np?x=!0:_===pE&&(x=!0,f.charCodeAt(p)===np&&++p),f.slice(E+1,S-1).replace(/""/g,'"')}for(;p<g;){if((_=f.charCodeAt(S=p++))===np)x=!0;else if(_===pE)x=!0,f.charCodeAt(p)===np&&++p;else if(_!==n)continue;return f.slice(E,S)}return v=!0,f.slice(E,g)}for(;(y=b())!==dE;){for(var w=[];y!==k3&&y!==dE;)w.push(y),y=b();d&&(w=d(w,m++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(g){return c(h[g])}).join(e)})}function s(f,d){return d==null&&(d=A3(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=A3(f)),o(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Mse(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function Fse(e){return e}function Ose(e){if(e==null)return Fse;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;u<c;)f[u]=a[u],++u;return f}}function Pse(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Dse(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return $3(e,n)})}:$3(e,t)}function $3(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=V7(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function V7(e,t){var n=Ose(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,g=d.length;h<g;++h)f.push(n(d[h],h));c<0&&Pse(f,g)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function Ise(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,g;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,g=r[d]){delete r[g.start];var p=g===h?h:h.concat(g);r[p.start=h.start]=i[p.end=g.end]=p}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,g=i[f]){delete i[g.end];var m=g===h?h:g.concat(h);r[m.start=g.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function Lse(e){return V7(e,zse.apply(this,arguments))}function zse(e,t,n){var r,i,o;if(arguments.length>1)r=jse(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Ise(e,r)}}function jse(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Ks(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Bse(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Eh(e){let t,n,r;e.length!==2?(t=Ks,n=(a,l)=>Ks(e(a),l),r=(a,l)=>e(a)-l):(t=e===Ks||e===Bse?e:Use,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function Use(){return 0}function G7(e){return e===null?NaN:+e}function*Wse(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Y7=Eh(Ks),Nl=Y7.right,qse=Y7.left;Eh(G7).center;function Hse(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function Vse(e,t){const n=Hse(e,t);return n&&Math.sqrt(n)}class or{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class T3 extends Map{constructor(t,n=Q7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(vC(this,t))}has(t){return super.has(vC(this,t))}set(t,n){return super.set(X7(this,t),n)}delete(t){return super.delete(K7(this,t))}}class fv extends Set{constructor(t,n=Q7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(vC(this,t))}add(t){return super.add(X7(this,t))}delete(t){return super.delete(K7(this,t))}}function vC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function X7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function K7({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Q7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Gse(e,t){return Array.from(t,n=>e[n])}function Yse(e=Ks){if(e===Ks)return Z7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Z7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xse=Math.sqrt(50),Kse=Math.sqrt(10),Qse=Math.sqrt(2);function dv(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Xse?10:o>=Kse?5:o>=Qse?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?dv(e,t,n*2):[a,l,u]}function xC(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?dv(t,e,n):dv(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function bC(e,t,n){return t=+t,e=+e,n=+n,dv(e,t,n)[2]}function Ml(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bC(t,e,n):bC(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ku(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function wC(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function J7(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Z7:Yse(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),g=Math.min(r,Math.floor(t+(l-u)*f/l+d));J7(e,t,h,g,i)}const o=e[t];let s=n,a=r;for(rp(e,n,t),i(e[r],o)>0&&rp(e,n,r);s<a;){for(rp(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?rp(e,n,a):(++a,rp(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function rp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function EC(e,t,n){if(e=Float64Array.from(Wse(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return wC(e);if(t>=1)return Ku(e);var r,i=(r-1)*t,o=Math.floor(i),s=Ku(J7(e,o).subarray(0,o+1)),a=wC(e.subarray(o+1));return s+(a-s)*(i-o)}}function ej(e,t,n=G7){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function Zse(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function tj(e,t){return EC(e,.5,t)}function*Jse(e){for(const t of e)yield*t}function nj(e){return Array.from(Jse(e))}function Ur(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function rj(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function eae(e,...t){e=new fv(e),t=t.map(tae);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function tae(e){return e instanceof fv?e:new fv(e)}function nae(...e){const t=new fv;for(const n of e)for(const r of n)t.add(r);return t}function rae(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Nd(e){return e=hv(Math.abs(e)),e?e[1]:NaN}function iae(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function oae(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var sae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dc(e){if(!(t=sae.exec(e)))throw new Error("invalid format: "+e);var t;return new hT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dc.prototype=hT.prototype;function hT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aae(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ij;function lae(e,t){var n=hv(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(ij=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+hv(e,Math.max(0,t+o-1))[0]}function N3(e,t){var n=hv(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const M3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rae,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>N3(e*100,t),r:N3,s:lae,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function R3(e){return e}var F3=Array.prototype.map,O3=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function oj(e){var t=e.grouping===void 0||e.thousands===void 0?R3:iae(F3.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?R3:oae(F3.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=dc(f);var d=f.fill,h=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,v=f.comma,x=f.precision,b=f.trim,w=f.type;w==="n"?(v=!0,w="g"):M3[w]||(x===void 0&&(x=12),b=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var S=p==="$"?n:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E=p==="$"?r:/[%p]/.test(w)?s:"",_=M3[w],k=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function T(N){var P=S,D=E,M,$,R;if(w==="c")D=_(N)+D,N="";else{N=+N;var I=N<0||1/N<0;if(N=isNaN(N)?l:_(Math.abs(N),x),b&&(N=aae(N)),I&&+N==0&&g!=="+"&&(I=!1),P=(I?g==="("?g:a:g==="-"||g==="("?"":g)+P,D=(w==="s"?O3[8+ij/3]:"")+D+(I&&g==="("?")":""),k){for(M=-1,$=N.length;++M<$;)if(R=N.charCodeAt(M),48>R||R>57){D=(R===46?i+N.slice(M+1):N.slice(M))+D,N=N.slice(0,M);break}}}v&&!m&&(N=t(N,1/0));var F=P.length+N.length+D.length,O=F<y?new Array(y-F+1).join(d):"";switch(v&&m&&(N=t(O+N,O.length?y-D.length:1/0),O=""),h){case"<":N=P+N+D+O;break;case"=":N=P+O+N+D;break;case"^":N=O.slice(0,F=O.length>>1)+P+N+D+O.slice(F);break;default:N=O+P+N+D;break}return o(N)}return T.toString=function(){return f+""},T}function c(f,d){var h=u((f=dc(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Nd(d)/3)))*3,p=Math.pow(10,-g),m=O3[8+g/3];return function(y){return h(p*y)+m}}return{format:u,formatPrefix:c}}var J0,Eb,pT;uae({thousands:",",grouping:[3],currency:["$",""]});function uae(e){return J0=oj(e),Eb=J0.format,pT=J0.formatPrefix,J0}function sj(e){return Math.max(0,-Nd(Math.abs(e)))}function aj(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nd(t)/3)))*3-Nd(Math.abs(e)))}function lj(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nd(t)-Nd(e))+1}const gE=new Date,mE=new Date;function Xt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>Xt(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(gE.setTime(+o),mE.setTime(+s),e(gE),e(mE),Math.floor(n(gE,mE))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Md=Xt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Md.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Xt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Md);Md.range;const Ws=1e3,pi=Ws*60,qs=pi*60,ca=qs*24,gT=ca*7,P3=ca*30,yE=ca*365,Hs=Xt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getUTCSeconds());Hs.range;const Sb=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ws)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getMinutes());Sb.range;const _b=Xt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getUTCMinutes());_b.range;const Cb=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ws-e.getMinutes()*pi)},(e,t)=>{e.setTime(+e+t*qs)},(e,t)=>(t-e)/qs,e=>e.getHours());Cb.range;const kb=Xt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qs)},(e,t)=>(t-e)/qs,e=>e.getUTCHours());kb.range;const Qs=Xt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pi)/ca,e=>e.getDate()-1);Qs.range;const wl=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ca,e=>e.getUTCDate()-1);wl.range;const uj=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ca,e=>Math.floor(e/ca));uj.range;function zc(e){return Xt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*pi)/gT)}const Sh=zc(0),pv=zc(1),cae=zc(2),fae=zc(3),Rd=zc(4),dae=zc(5),hae=zc(6);Sh.range;pv.range;cae.range;fae.range;Rd.range;dae.range;hae.range;function jc(e){return Xt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/gT)}const _h=jc(0),gv=jc(1),pae=jc(2),gae=jc(3),Fd=jc(4),mae=jc(5),yae=jc(6);_h.range;gv.range;pae.range;gae.range;Fd.range;mae.range;yae.range;const Gg=Xt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Gg.range;const Yg=Xt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Yg.range;const os=Xt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());os.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});os.range;const ss=Xt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ss.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ss.range;function cj(e,t,n,r,i,o){const s=[[Hs,1,Ws],[Hs,5,5*Ws],[Hs,15,15*Ws],[Hs,30,30*Ws],[o,1,pi],[o,5,5*pi],[o,15,15*pi],[o,30,30*pi],[i,1,qs],[i,3,3*qs],[i,6,6*qs],[i,12,12*qs],[r,1,ca],[r,2,2*ca],[n,1,gT],[t,1,P3],[t,3,3*P3],[e,1,yE]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),g=h?h.range(u,+c+1):[];return d?g.reverse():g}function l(u,c,f){const d=Math.abs(c-u)/f,h=Eh(([,,m])=>m).right(s,d);if(h===s.length)return e.every(Ml(u/yE,c/yE,f));if(h===0)return Md.every(Math.max(Ml(u,c,f),1));const[g,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return g.every(p)}return[a,l]}const[vae,xae]=cj(ss,Yg,_h,uj,kb,_b),[bae,wae]=cj(os,Gg,Sh,Qs,Cb,Sb),xn="year",Ar="quarter",Ln="month",Vt="week",$r="date",On="day",as="dayofyear",Zr="hours",Jr="minutes",Ci="seconds",po="milliseconds",mT=[xn,Ar,Ln,Vt,$r,On,as,Zr,Jr,Ci,po],vE=mT.reduce((e,t,n)=>(e[t]=1+n,e),{});function yT(e){const t=le(e).slice(),n={};return t.length||U("Missing time unit."),t.forEach(i=>{fe(vE,i)?n[i]=1:U(`Invalid time unit: ${i}.`)}),(n[Vt]||n[On]?1:0)+(n[Ar]||n[Ln]||n[$r]?1:0)+(n[as]?1:0)>1&&U(`Incompatible time units: ${e}`),t.sort((i,o)=>vE[i]-vE[o]),t}const Eae={[xn]:"%Y ",[Ar]:"Q%q ",[Ln]:"%b ",[$r]:"%d ",[Vt]:"W%U ",[On]:"%a ",[as]:"%j ",[Zr]:"%H:00",[Jr]:"00:%M",[Ci]:":%S",[po]:".%L",[`${xn}-${Ln}`]:"%Y-%m ",[`${xn}-${Ln}-${$r}`]:"%Y-%m-%d ",[`${Zr}-${Jr}`]:"%H:%M"};function fj(e,t){const n=Ae({},Eae,t),r=yT(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const Nu=new Date;function vT(e){return Nu.setFullYear(e),Nu.setMonth(0),Nu.setDate(1),Nu.setHours(0,0,0,0),Nu}function dj(e){return pj(new Date(e))}function hj(e){return SC(new Date(e))}function pj(e){return Qs.count(vT(e.getFullYear())-1,e)}function SC(e){return Sh.count(vT(e.getFullYear())-1,e)}function _C(e){return vT(e).getDay()}function Sae(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function gj(e){return yj(new Date(e))}function mj(e){return CC(new Date(e))}function yj(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return wl.count(t-1,e)}function CC(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return _h.count(t-1,e)}function kC(e){return Nu.setTime(Date.UTC(e,0,1)),Nu.getUTCDay()}function _ae(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function vj(e,t,n,r,i){const o=t||1,s=ze(e),a=(y,v,x)=>(x=x||y,Cae(n[x],r[x],y===s&&o,v)),l=new Date,u=ho(e),c=u[xn]?a(xn):qn(2012),f=u[Ln]?a(Ln):u[Ar]?a(Ar):Ya,d=u[Vt]&&u[On]?a(On,1,Vt+On):u[Vt]?a(Vt,1):u[On]?a(On,1):u[$r]?a($r,1):u[as]?a(as,1):yh,h=u[Zr]?a(Zr):Ya,g=u[Jr]?a(Jr):Ya,p=u[Ci]?a(Ci):Ya,m=u[po]?a(po):Ya;return function(y){l.setTime(+y);const v=c(l);return i(v,f(l),d(l,v),h(l),g(l),p(l),m(l))}}function Cae(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Od(e,t,n){return t+e*7-(n+6)%7}const kae={[xn]:e=>e.getFullYear(),[Ar]:e=>Math.floor(e.getMonth()/3),[Ln]:e=>e.getMonth(),[$r]:e=>e.getDate(),[Zr]:e=>e.getHours(),[Jr]:e=>e.getMinutes(),[Ci]:e=>e.getSeconds(),[po]:e=>e.getMilliseconds(),[as]:e=>pj(e),[Vt]:e=>SC(e),[Vt+On]:(e,t)=>Od(SC(e),e.getDay(),_C(t)),[On]:(e,t)=>Od(1,e.getDay(),_C(t))},Aae={[Ar]:e=>3*e,[Vt]:(e,t)=>Od(e,0,_C(t))};function xj(e,t){return vj(e,t||1,kae,Aae,Sae)}const $ae={[xn]:e=>e.getUTCFullYear(),[Ar]:e=>Math.floor(e.getUTCMonth()/3),[Ln]:e=>e.getUTCMonth(),[$r]:e=>e.getUTCDate(),[Zr]:e=>e.getUTCHours(),[Jr]:e=>e.getUTCMinutes(),[Ci]:e=>e.getUTCSeconds(),[po]:e=>e.getUTCMilliseconds(),[as]:e=>yj(e),[Vt]:e=>CC(e),[On]:(e,t)=>Od(1,e.getUTCDay(),kC(t)),[Vt+On]:(e,t)=>Od(CC(e),e.getUTCDay(),kC(t))},Tae={[Ar]:e=>3*e,[Vt]:(e,t)=>Od(e,0,kC(t))};function bj(e,t){return vj(e,t||1,$ae,Tae,_ae)}const Nae={[xn]:os,[Ar]:Gg.every(3),[Ln]:Gg,[Vt]:Sh,[$r]:Qs,[On]:Qs,[as]:Qs,[Zr]:Cb,[Jr]:Sb,[Ci]:Hs,[po]:Md},Mae={[xn]:ss,[Ar]:Yg.every(3),[Ln]:Yg,[Vt]:_h,[$r]:wl,[On]:wl,[as]:wl,[Zr]:kb,[Jr]:_b,[Ci]:Hs,[po]:Md};function Ch(e){return Nae[e]}function kh(e){return Mae[e]}function wj(e,t,n){return e?e.offset(t,n):void 0}function Ej(e,t,n){return wj(Ch(e),t,n)}function Sj(e,t,n){return wj(kh(e),t,n)}function _j(e,t,n,r){return e?e.range(t,n,r):void 0}function Cj(e,t,n,r){return _j(Ch(e),t,n,r)}function kj(e,t,n,r){return _j(kh(e),t,n,r)}const Rp=1e3,Fp=Rp*60,Op=Fp*60,Ab=Op*24,Rae=Ab*7,D3=Ab*30,AC=Ab*365,Aj=[xn,Ln,$r,Zr,Jr,Ci,po],Pp=Aj.slice(0,-1),Dp=Pp.slice(0,-1),Ip=Dp.slice(0,-1),Fae=Ip.slice(0,-1),Oae=[xn,Vt],I3=[xn,Ln],$j=[xn],ip=[[Pp,1,Rp],[Pp,5,5*Rp],[Pp,15,15*Rp],[Pp,30,30*Rp],[Dp,1,Fp],[Dp,5,5*Fp],[Dp,15,15*Fp],[Dp,30,30*Fp],[Ip,1,Op],[Ip,3,3*Op],[Ip,6,6*Op],[Ip,12,12*Op],[Fae,1,Ab],[Oae,1,Rae],[I3,1,D3],[I3,3,3*D3],[$j,1,AC]];function Tj(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Dm(t))/n;let i=Eh(a=>a[2]).right(ip,r),o,s;return i===ip.length?(o=$j,s=Ml(t[0]/AC,t[1]/AC,n)):i?(i=ip[r/ip[i-1][2]<ip[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=Aj,s=Math.max(Ml(t[0],t[1],n),1)),{units:o,step:s}}function xE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function op(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Nj(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=sp(i),c=ap(i),f=sp(o),d=ap(o),h=sp(s),g=ap(s),p=sp(a),m=ap(a),y=sp(l),v=ap(l),x={a:I,A:F,b:O,B:L,c:null,d:W3,e:W3,f:rle,g:hle,G:gle,H:ele,I:tle,j:nle,L:Mj,m:ile,M:ole,p:X,q:V,Q:V3,s:G3,S:sle,u:ale,U:lle,V:ule,w:cle,W:fle,x:null,X:null,y:dle,Y:ple,Z:mle,"%":H3},b={a:ne,A:de,b:he,B:Ne,c:null,d:q3,e:q3,f:ble,g:Nle,G:Rle,H:yle,I:vle,j:xle,L:Fj,m:wle,M:Ele,p:oe,q:Re,Q:V3,s:G3,S:Sle,u:_le,U:Cle,V:kle,w:Ale,W:$le,x:null,X:null,y:Tle,Y:Mle,Z:Fle,"%":H3},w={a:T,A:N,b:P,B:D,c:M,d:B3,e:B3,f:Kae,g:j3,G:z3,H:U3,I:U3,j:Vae,L:Xae,m:Hae,M:Gae,p:k,q:qae,Q:Zae,s:Jae,S:Yae,u:zae,U:jae,V:Bae,w:Lae,W:Uae,x:$,X:R,y:j3,Y:z3,Z:Wae,"%":Qae};x.x=S(n,x),x.X=S(r,x),x.c=S(t,x),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(ee,ue){return function(ce){var j=[],je=-1,ke=0,at=ee.length,ct,cn,ka;for(ce instanceof Date||(ce=new Date(+ce));++je<at;)ee.charCodeAt(je)===37&&(j.push(ee.slice(ke,je)),(cn=L3[ct=ee.charAt(++je)])!=null?ct=ee.charAt(++je):cn=ct==="e"?" ":"0",(ka=ue[ct])&&(ct=ka(ce,cn)),j.push(ct),ke=je+1);return j.push(ee.slice(ke,je)),j.join("")}}function E(ee,ue){return function(ce){var j=op(1900,void 0,1),je=_(j,ee,ce+="",0),ke,at;if(je!=ce.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(ue&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(ke=bE(op(j.y,0,1)),at=ke.getUTCDay(),ke=at>4||at===0?gv.ceil(ke):gv(ke),ke=wl.offset(ke,(j.V-1)*7),j.y=ke.getUTCFullYear(),j.m=ke.getUTCMonth(),j.d=ke.getUTCDate()+(j.w+6)%7):(ke=xE(op(j.y,0,1)),at=ke.getDay(),ke=at>4||at===0?pv.ceil(ke):pv(ke),ke=Qs.offset(ke,(j.V-1)*7),j.y=ke.getFullYear(),j.m=ke.getMonth(),j.d=ke.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),at="Z"in j?bE(op(j.y,0,1)).getUTCDay():xE(op(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(at+5)%7:j.w+j.U*7-(at+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,bE(j)):xE(j)}}function _(ee,ue,ce,j){for(var je=0,ke=ue.length,at=ce.length,ct,cn;je<ke;){if(j>=at)return-1;if(ct=ue.charCodeAt(je++),ct===37){if(ct=ue.charAt(je++),cn=w[ct in L3?ue.charAt(je++):ct],!cn||(j=cn(ee,ce,j))<0)return-1}else if(ct!=ce.charCodeAt(j++))return-1}return j}function k(ee,ue,ce){var j=u.exec(ue.slice(ce));return j?(ee.p=c.get(j[0].toLowerCase()),ce+j[0].length):-1}function T(ee,ue,ce){var j=h.exec(ue.slice(ce));return j?(ee.w=g.get(j[0].toLowerCase()),ce+j[0].length):-1}function N(ee,ue,ce){var j=f.exec(ue.slice(ce));return j?(ee.w=d.get(j[0].toLowerCase()),ce+j[0].length):-1}function P(ee,ue,ce){var j=y.exec(ue.slice(ce));return j?(ee.m=v.get(j[0].toLowerCase()),ce+j[0].length):-1}function D(ee,ue,ce){var j=p.exec(ue.slice(ce));return j?(ee.m=m.get(j[0].toLowerCase()),ce+j[0].length):-1}function M(ee,ue,ce){return _(ee,t,ue,ce)}function $(ee,ue,ce){return _(ee,n,ue,ce)}function R(ee,ue,ce){return _(ee,r,ue,ce)}function I(ee){return s[ee.getDay()]}function F(ee){return o[ee.getDay()]}function O(ee){return l[ee.getMonth()]}function L(ee){return a[ee.getMonth()]}function X(ee){return i[+(ee.getHours()>=12)]}function V(ee){return 1+~~(ee.getMonth()/3)}function ne(ee){return s[ee.getUTCDay()]}function de(ee){return o[ee.getUTCDay()]}function he(ee){return l[ee.getUTCMonth()]}function Ne(ee){return a[ee.getUTCMonth()]}function oe(ee){return i[+(ee.getUTCHours()>=12)]}function Re(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var ue=S(ee+="",x);return ue.toString=function(){return ee},ue},parse:function(ee){var ue=E(ee+="",!1);return ue.toString=function(){return ee},ue},utcFormat:function(ee){var ue=S(ee+="",b);return ue.toString=function(){return ee},ue},utcParse:function(ee){var ue=E(ee+="",!0);return ue.toString=function(){return ee},ue}}}var L3={"-":"",_:" ",0:"0"},ln=/^\s*\d+/,Pae=/^%/,Dae=/[\\^$*+?|[\]().{}]/g;function Ve(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Iae(e){return e.replace(Dae,"\\$&")}function sp(e){return new RegExp("^(?:"+e.map(Iae).join("|")+")","i")}function ap(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Lae(e,t,n){var r=ln.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function zae(e,t,n){var r=ln.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jae(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Bae(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Uae(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function z3(e,t,n){var r=ln.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function j3(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Wae(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function qae(e,t,n){var r=ln.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Hae(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function B3(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Vae(e,t,n){var r=ln.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function U3(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Gae(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Yae(e,t,n){var r=ln.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Xae(e,t,n){var r=ln.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Kae(e,t,n){var r=ln.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qae(e,t,n){var r=Pae.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Zae(e,t,n){var r=ln.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Jae(e,t,n){var r=ln.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function W3(e,t){return Ve(e.getDate(),t,2)}function ele(e,t){return Ve(e.getHours(),t,2)}function tle(e,t){return Ve(e.getHours()%12||12,t,2)}function nle(e,t){return Ve(1+Qs.count(os(e),e),t,3)}function Mj(e,t){return Ve(e.getMilliseconds(),t,3)}function rle(e,t){return Mj(e,t)+"000"}function ile(e,t){return Ve(e.getMonth()+1,t,2)}function ole(e,t){return Ve(e.getMinutes(),t,2)}function sle(e,t){return Ve(e.getSeconds(),t,2)}function ale(e){var t=e.getDay();return t===0?7:t}function lle(e,t){return Ve(Sh.count(os(e)-1,e),t,2)}function Rj(e){var t=e.getDay();return t>=4||t===0?Rd(e):Rd.ceil(e)}function ule(e,t){return e=Rj(e),Ve(Rd.count(os(e),e)+(os(e).getDay()===4),t,2)}function cle(e){return e.getDay()}function fle(e,t){return Ve(pv.count(os(e)-1,e),t,2)}function dle(e,t){return Ve(e.getFullYear()%100,t,2)}function hle(e,t){return e=Rj(e),Ve(e.getFullYear()%100,t,2)}function ple(e,t){return Ve(e.getFullYear()%1e4,t,4)}function gle(e,t){var n=e.getDay();return e=n>=4||n===0?Rd(e):Rd.ceil(e),Ve(e.getFullYear()%1e4,t,4)}function mle(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ve(t/60|0,"0",2)+Ve(t%60,"0",2)}function q3(e,t){return Ve(e.getUTCDate(),t,2)}function yle(e,t){return Ve(e.getUTCHours(),t,2)}function vle(e,t){return Ve(e.getUTCHours()%12||12,t,2)}function xle(e,t){return Ve(1+wl.count(ss(e),e),t,3)}function Fj(e,t){return Ve(e.getUTCMilliseconds(),t,3)}function ble(e,t){return Fj(e,t)+"000"}function wle(e,t){return Ve(e.getUTCMonth()+1,t,2)}function Ele(e,t){return Ve(e.getUTCMinutes(),t,2)}function Sle(e,t){return Ve(e.getUTCSeconds(),t,2)}function _le(e){var t=e.getUTCDay();return t===0?7:t}function Cle(e,t){return Ve(_h.count(ss(e)-1,e),t,2)}function Oj(e){var t=e.getUTCDay();return t>=4||t===0?Fd(e):Fd.ceil(e)}function kle(e,t){return e=Oj(e),Ve(Fd.count(ss(e),e)+(ss(e).getUTCDay()===4),t,2)}function Ale(e){return e.getUTCDay()}function $le(e,t){return Ve(gv.count(ss(e)-1,e),t,2)}function Tle(e,t){return Ve(e.getUTCFullYear()%100,t,2)}function Nle(e,t){return e=Oj(e),Ve(e.getUTCFullYear()%100,t,2)}function Mle(e,t){return Ve(e.getUTCFullYear()%1e4,t,4)}function Rle(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fd(e):Fd.ceil(e),Ve(e.getUTCFullYear()%1e4,t,4)}function Fle(){return"+0000"}function H3(){return"%"}function V3(e){return+e}function G3(e){return Math.floor(+e/1e3)}var uf,xT,Pj,bT,Dj;Ole({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ole(e){return uf=Nj(e),xT=uf.format,Pj=uf.parse,bT=uf.utcFormat,Dj=uf.utcParse,uf}function Lp(e){const t={};return n=>t[n]||(t[n]=e(n))}function Ple(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Dle(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function Dle(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Ij(e){const t=Lp(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=dc(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Ple(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=dc(s??",f");const a=Ml(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=aj(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=lj(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=sj(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let $C;Lj();function Lj(){return $C=Ij({format:Eb,formatPrefix:pT})}function zj(e){return Ij(oj(e))}function mv(e){return arguments.length?$C=zj(e):$C}function Y3(e,t,n){n=n||{},ae(n)||U(`Invalid time multi-format specifier: ${n}`);const r=t(Ci),i=t(Jr),o=t(Zr),s=t($r),a=t(Vt),l=t(Ln),u=t(Ar),c=t(xn),f=e(n[po]||".%L"),d=e(n[Ci]||":%S"),h=e(n[Jr]||"%I:%M"),g=e(n[Zr]||"%I %p"),p=e(n[$r]||n[On]||"%a %d"),m=e(n[Vt]||"%b %d"),y=e(n[Ln]||"%B"),v=e(n[Ar]||"%B"),x=e(n[xn]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?h:s(b)<b?g:l(b)<b?a(b)<b?p:m:c(b)<b?u(b)<b?y:v:x)(b)}function jj(e){const t=Lp(e.format),n=Lp(e.utcFormat);return{timeFormat:r=>se(r)?t(r):Y3(t,Ch,r),utcFormat:r=>se(r)?n(r):Y3(n,kh,r),timeParse:Lp(e.parse),utcParse:Lp(e.utcParse)}}let TC;Bj();function Bj(){return TC=jj({format:xT,parse:Pj,utcFormat:bT,utcParse:Dj})}function Uj(e){return jj(Nj(e))}function Xg(e){return arguments.length?TC=Uj(e):TC}const NC=(e,t)=>Ae({},e,t);function Wj(e,t){const n=e?zj(e):mv(),r=t?Uj(t):Xg();return NC(n,r)}function wT(e,t){const n=arguments.length;return n&&n!==2&&U("defaultLocale expects either zero or two arguments."),n?NC(mv(e),Xg(t)):NC(mv(),Xg())}function Ile(){return Lj(),Bj(),wT()}const Lle=/^(data:|([A-Za-z]+:)?\/\/)/,zle=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,jle=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,X3="file://";function Ble(e){return t=>({options:t||{},sanitize:Wle,load:Ule,fileAccess:!1,file:qle(),http:Vle})}async function Ule(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t==null?void 0:t.http)}async function Wle(e,t){t=Ae({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=zle.test(e.replace(jle,""));(e==null||typeof e!="string"||!a)&&U("Sanitize failure, invalid URI: "+J(e));const l=Lle.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(X3))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(X3.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function qle(e){return Hle}async function Hle(){U("No file system access.")}async function Vle(e,t){const n=Ae({},this.options.http,t),r=t&&t.response,i=await fetch(e,n);return i.ok?$e(i[r])?i[r]():i.text():U(i.status+""+i.statusText)}const Gle=e=>e!=null&&e===e,Yle=e=>e==="true"||e==="false"||e===!0||e===!1,Xle=e=>!Number.isNaN(Date.parse(e)),qj=e=>!Number.isNaN(+e)&&!(e instanceof Date),Kle=e=>qj(e)&&Number.isInteger(+e),MC={boolean:cT,integer:Pn,number:Pn,date:fT,string:dT,unknown:Wn},ey=[Yle,Kle,qj,Xle],Qle=["boolean","integer","number","date"];function Hj(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=ey.length,i=ey.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&Gle(l)&&!ey[a](l)&&(i[a]=0,++s,s===ey.length))return"string";return Qle[i.reduce((o,s)=>o===0?s:o,0)-1]}function Vj(e,t){return t.reduce((n,r)=>(n[r]=Hj(e,r),n),{})}function K3(e){const t=function(n,r){const i={delimiter:e};return ET(n,r?Ae(r,i):i)};return t.responseType="text",t}function ET(e,t){return t.header&&(e=t.header.map(J).join(t.delimiter)+`
`+e),Rse(t.delimiter).parse(e+"")}ET.responseType="text";function Zle(e){return typeof Buffer=="function"&&$e(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function ST(e,t){const n=t&&t.property?Si(t.property):Wn;return ae(e)&&!Zle(e)?Jle(n(e),t):n(JSON.parse(e))}ST.responseType="json";function Jle(e,t){return!W(e)&&z7(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const eue={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Gj(e,t){let n,r,i,o;return e=ST(e,t),t&&t.feature?(n=Dse,i=t.feature):t&&t.mesh?(n=Lse,i=t.mesh,o=eue[t.filter]):U("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):U("Invalid TopoJSON object: "+i),r&&r.features||[r]}Gj.responseType="json";const i1={dsv:ET,csv:K3(","),tsv:K3("	"),json:ST,topojson:Gj};function _T(e,t){return arguments.length>1?(i1[e]=t,this):fe(i1,e)?i1[e]:null}function Yj(e){const t=_T(e);return t&&t.responseType||"text"}function Xj(e,t,n,r){t=t||{};const i=_T(t.type||"json");return i||U("Unknown data format type: "+t.type),e=i(e,t),t.parse&&tue(e,t.parse,n,r),fe(e,"columns")&&delete e.columns,e}function tue(e,t,n,r){if(!e.length)return;const i=Xg();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=Vj(e,o)),o=Object.keys(t);const d=o.map(h=>{const g=t[h];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?r:n)(m);if(!MC[g])throw Error("Illegal format pattern: "+h+":"+g);return MC[g]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=d[u](s[a])}const $b=Ble();function Tb(e){const t=e||Wn,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function o1(e,t){try{await t(e)}catch(n){e.error(n)}}const Kj=Symbol("vega_id");let nue=1;function Nb(e){return!!(e&&ve(e))}function ve(e){return e[Kj]}function Qj(e,t){return e[Kj]=t,e}function Ye(e){const t=e===Object(e)?e:{data:e};return ve(t)?t:Qj(t,nue++)}function CT(e){return Mb(e,Ye({}))}function Mb(e,t){for(const n in e)t[n]=e[n];return t}function Zj(e,t){return Qj(t,ve(e))}function Bc(e,t){return e?t?(n,r)=>e(n,r)||ve(t(n))-ve(t(r)):(n,r)=>e(n,r)||ve(n)-ve(r):null}function Jj(e){return e&&e.constructor===Uc}function Uc(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Uc,insert(a){const l=le(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=$e(a)?r:t,u=le(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:qn(u)};return $e(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return $e(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let f,d,h,g,p,m;for(f=0,d=l.length;f<d;++f)u[ve(l[f])]=1;for(f=0,d=t.length;f<d;++f)p=t[f],u[ve(p)]=-1;for(f=0,d=r.length;f<d;++f)g=r[f],l.forEach(v=>{g(v)&&(u[ve(v)]=-1)});for(f=0,d=e.length;f<d;++f)p=e[f],m=ve(p),u[m]?u[m]=1:a.add.push(Ye(e[f]));for(f=0,d=l.length;f<d;++f)p=l[f],u[ve(p)]<0&&a.rem.push(p);function y(v,x,b){b?v[x]=b(v):a.encode=x,s||(c[ve(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],p=h.tuple,g=h.field,m=u[ve(p)],m>0&&(y(p,g,h.value),a.modifies(g));for(f=0,d=i.length;f<d;++f)h=i[f],g=h.filter,l.forEach(v=>{g(v)&&u[ve(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[ve(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const s1="_:mod:_";function Rb(){Object.defineProperty(this,s1,{writable:!0,value:{}})}Rb.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[s1];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=W(n)?1+n.length:-1),i},modified(e,t){const n=this[s1];if(arguments.length){if(W(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[s1]={},this}};let rue=0;const iue="pulse",oue=new Rb,sue=1,aue=2;function ot(e,t,n,r){this.id=++rue,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Q3(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ot.prototype={targets(){return this._targets||(this._targets=Tb(Pm))},set(e){return this.value!==e?(this.value=e,1):0},skip:Q3(sue),modified:Q3(aue),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Rb,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(f,d,h)=>{h instanceof ot?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===iue)le(a).forEach(f=>{f instanceof ot?f!==this&&(f.targets().add(this),o.push(f)):U("Pulse parameters must be operator instances.")}),this.source=a;else if(W(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||oue,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function lue(e,t,n,r){let i=1,o;return e instanceof ot?o=e:e&&e.prototype instanceof ot?o=new e:$e(e)?o=new ot(null,e):(i=0,o=new ot(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function uue(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let cue=0;function Fb(e,t,n){this.id=++cue,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Da(e,t,n){return new Fb(e,t,n)}Fb.prototype={_filter:_i,_apply:Wn,targets(){return this._targets||(this._targets=Tb(Pm))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Da(e);return this.targets().add(t),t},apply(e){const t=Da(null,e);return this.targets().add(t),t},merge(){const e=Da();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Da();return this.targets().add(Da(null,null,aT(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Da(null,null,()=>n=!0)),t.targets().add(Da(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=_i,this._targets=null}};function fue(e,t,n,r){const i=this,o=Da(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=le(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function due(e,t){const n=this.locale();return Xj(e,t,n.timeParse,n.utcParse)}function hue(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function pue(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:Yj(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function gue(e,t,n){const r=this,i=r._pending||mue(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(_i).insert(o.data||[])),i.done(),o}function mue(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const yue={skip:!0};function vue(e,t,n,r,i){return(e instanceof ot?bue:xue)(this,e,t,n,r,i),this}function xue(e,t,n,r,i,o){const s=Ae({},o,yue);let a,l;$e(n)||(n=qn(n)),r===void 0?a=u=>e.touch(n(u)):$e(r)?(l=new ot(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;Jj(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function bue(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new ot(null,wue(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function wue(e,t){return t=$e(t)?t:qn(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Eue(e){e.rank=++this._rank}function Sue(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&U("Cycle detected in dataflow graph.")}const yv={},Oo=1,Ua=2,Os=4,_ue=Oo|Ua,Z3=Oo|Os,cf=Oo|Ua|Os,J3=8,lp=16,eD=32,tD=64;function El(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function wE(e,t){const n=[];return Ba(e,t,r=>n.push(r)),n}function nD(e,t){const n={};return e.visit(t,r=>{n[ve(r)]=1}),r=>n[ve(r)]?null:r}function ty(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}El.prototype={StopPropagation:yv,ADD:Oo,REM:Ua,MOD:Os,ADD_REM:_ue,ADD_MOD:Z3,ALL:cf,REFLOW:J3,SOURCE:lp,NO_SOURCE:eD,NO_FIELDS:tD,fork(e){return new El(this.dataflow).init(this,e)},clone(){const e=this.fork(cf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(cf|lp)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new El(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&tD)&&(n.fields=e.fields),t&Oo?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ua?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Os?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&eD?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||cf;return t&Oo&&this.add.length||t&Ua&&this.rem.length||t&Os&&this.mod.length},reflow(e){if(e)return this.fork(cf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Os,nD(this,Oo))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return W(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?W(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Oo&&(n.addF=ty(n.addF,t)),e&Ua&&(n.remF=ty(n.remF,t)),e&Os&&(n.modF=ty(n.modF,t)),e&lp&&(n.srcF=ty(n.srcF,t)),n},materialize(e){e=e||cf;const t=this;return e&Oo&&t.addF&&(t.add=wE(t.add,t.addF),t.addF=null),e&Ua&&t.remF&&(t.rem=wE(t.rem,t.remF),t.remF=null),e&Os&&t.modF&&(t.mod=wE(t.mod,t.modF),t.modF=null),e&lp&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&lp)return Ba(n.source,n.srcF,r),n;e&Oo&&Ba(n.add,n.addF,r),e&Ua&&Ba(n.rem,n.remF,r),e&Os&&Ba(n.mod,n.modF,r);const i=n.source;if(e&J3&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Ba(i,nD(n,Z3),r):Ba(i,n.srcF,r))}return n}};function kT(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}te(kT,El,{fork(e){const t=new El(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?W(e)?e.some(r=>n[r]):n[e]:0},filter(){U("MultiPulse does not support filtering.")},materialize(){U("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function Cue(e,t,n){const r=this,i=[];if(r._pulse)return eB(r);if(r._pending&&await r._pending,t&&await o1(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new El(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Tb(Pm);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=yv),l!==yv&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await o1(r,c[f].callback)}return n&&await o1(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function kue(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Aue(e,t,n){return this._pulse?eB(this):(this.evaluate(e,t,n),this)}function $ue(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function eB(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Tue(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Nue(e,t){const n=e.source,r=this._clock;return n&&W(n)?new kT(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Mue(this._pulse,n&&n.pulse)}function Mue(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==yv&&(e.source=t.source),e)}const AT={skip:!1,force:!1};function Rue(e,t){const n=t||AT;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Fue(e,t,n){const r=n||AT;return(e.set(t)||r.force)&&this.touch(e,r),this}function Oue(e,t,n){this.touch(e,n||AT);const r=new El(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Pue(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),tB(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Due(t,0,e)):r=n,r}}}function tB(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function Due(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,tB(e,r,t,n)}function td(){this.logger(xb()),this.logLevel(tT),this._clock=0,this._rank=0,this._locale=wT();try{this._loader=$b()}catch{}this._touched=Tb(Pm),this._input={},this._pulse=null,this._heap=Pue((e,t)=>e.qrank-t.qrank),this._postrun=[]}function up(e){return function(){return this._log[e].apply(this,arguments)}}td.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:up("error"),warn:up("warn"),info:up("info"),debug:up("debug"),logLevel:up("level"),cleanThreshold:1e4,add:lue,connect:uue,rank:Eue,rerank:Sue,pulse:Oue,touch:Rue,update:Fue,changeset:Uc,ingest:hue,parse:due,preload:gue,request:pue,events:fue,on:vue,evaluate:Cue,run:Aue,runAsync:kue,runAfter:$ue,_enqueue:Tue,_getPulse:Nue};function z(e,t){ot.call(this,e,null,t)}te(z,ot,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Pd={};function nB(e){const t=rB(e);return t&&t.Definition||null}function rB(e){return e=e&&e.toLowerCase(),fe(Pd,e)?Pd[e]:null}function*iB(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function $T(e,t,n){const r=Float64Array.from(iB(e,n));return r.sort(Ks),t.map(i=>ej(r,i))}function TT(e,t){return $T(e,[.25,.5,.75],t)}function NT(e,t){const n=e.length,r=Vse(e,t),i=TT(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function oB(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const g=c>=0?0:~~(-c/r)+1,p=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+p)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var ki=Math.random;function Iue(e){ki=e}function sB(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(iB(e,r)),o=i.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(ki()*o)];c[u]=a/o}return c.sort(Ks),[EC(c,n/2),EC(c,1-n/2)]}function aB(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?Lue(o,t+t/4):o}function Lue(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function zue(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function jue(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*ki())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const lB=Math.sqrt(2*Math.PI),Bue=Math.SQRT2;let cp=NaN;function Ob(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(cp===cp)n=cp,cp=NaN;else{do n=ki()*2-1,r=ki()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,cp=r*o}return e+n*t}function MT(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*lB)}function Pb(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function Db(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Bue*Uue(2*e-1)}function Uue(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function RT(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Ob(n,r),pdf:o=>MT(o,n,r),cdf:o=>Pb(o,n,r),icdf:o=>Db(o,n,r)};return i.mean(e).stdev(t)}function FT(e,t){const n=RT();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=NT(e)),i):t},sample(){return e[~~(ki()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function OT(e,t){return e=e||0,t=t??1,Math.exp(e+Ob()*t)}function PT(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*lB*e)}function DT(e,t,n){return Pb(Math.log(e),t,n)}function IT(e,t,n){return Math.exp(Db(e,t,n))}function uB(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>OT(n,r),pdf:o=>PT(o,n,r),cdf:o=>DT(o,n,r),icdf:o=>IT(o,n,r)};return i.mean(e).stdev(t)}function cB(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=ki();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function LT(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ki()}function zT(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function jT(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function BT(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function fB(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>LT(n,r),pdf:o=>zT(o,n,r),cdf:o=>jT(o,n,r),icdf:o=>BT(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function UT(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Im(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Ib(e,t,n,r){e=e.filter(h=>{let g=t(h),p=n(h);return g!=null&&(g=+g)>=g&&p!=null&&(p=+p)>=p}),r&&e.sort((h,g)=>t(h)-t(g));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function Lm(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function Ah(e,t,n,r,i){let o=0,s=0;return Lm(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;o+=u*u,s+=c*c}),1-o/s}function WT(e,t,n){let r=0,i=0,o=0,s=0,a=0;Lm(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=Im(r,i,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Ah(e,t,n,i,u)}}function dB(e,t,n){let r=0,i=0,o=0,s=0,a=0;Lm(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=Im(r,i,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Ah(e,t,n,i,u)}}function hB(e,t,n){const[r,i,o,s]=Ib(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,g;Lm(e,t,n,(v,x)=>{d=r[f++],h=Math.log(x),g=d*x,a+=(x*h-a)/f,l+=(g-l)/f,u+=(g*h-u)/f,c+=(d*g-c)/f});const[p,m]=Im(l/s,a/s,u/s,c/s),y=v=>Math.exp(p+m*(v-o));return{coef:[Math.exp(p-m*o),m],predict:y,rSquared:Ah(e,t,n,s,y)}}function pB(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;Lm(e,t,n,(f,d)=>{const h=Math.log(f),g=Math.log(d);++l,r+=(h-r)/l,i+=(g-i)/l,o+=(h*g-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=Im(r,i,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Ah(e,t,n,a,c)}}function qT(e,t,n){const[r,i,o,s]=Ib(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,g,p,m;for(h=0;h<a;)g=r[h],p=i[h++],m=g*g,l+=(m-l)/h,u+=(m*g-u)/h,c+=(m*m-c)/h,f+=(g*p-f)/h,d+=(m*p-d)/h;const y=c-l*l,v=l*y-u*u,x=(d*l-f*u)/v,b=(f*y-d*u)/v,w=-x*l,S=E=>(E=E-o,x*E*E+b*E+w+s);return{coef:[w-b*o+x*o*o+s,b-2*x*o,x],predict:S,rSquared:Ah(e,t,n,s,S)}}function gB(e,t,n,r){if(r===0)return UT(e,t,n);if(r===1)return WT(e,t,n);if(r===2)return qT(e,t,n);const[i,o,s,a]=Ib(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,g,p,m;for(d=0;d<f;++d){for(g=0,p=0;g<l;++g)p+=Math.pow(i[g],d)*o[g];for(u.push(p),m=new Float64Array(f),h=0;h<f;++h){for(g=0,p=0;g<l;++g)p+=Math.pow(i[g],d+h);m[h]=p}c.push(m)}c.push(u);const y=que(c),v=x=>{x-=s;let b=a+y[0]+y[1]*x+y[2]*x*x;for(d=3;d<f;++d)b+=y[d]*Math.pow(x,d);return b};return{coef:Wue(f,y,-s,a),predict:v,rSquared:Ah(e,t,n,a,v)}}function Wue(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function que(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const rD=2,iD=1e-12;function mB(e,t,n,r){const[i,o,s,a]=Ib(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=rD;){const g=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=g[0],x=g[1],b=y-i[v]>i[x]-y?v:x;let w=0,S=0,E=0,_=0,k=0;const T=1/Math.abs(i[b]-y||1);for(let D=v;D<=x;++D){const M=i[D],$=o[D],R=Hue(Math.abs(y-M)*T)*d[D],I=M*R;w+=R,S+=I,E+=$*R,_+=$*I,k+=M*I}const[N,P]=Im(S/w,E/w,_/w,k/w);c[m]=N+P*y,f[m]=Math.abs(o[m]-c[m]),Vue(i,m+1,g)}if(h===rD)break;const p=tj(f);if(Math.abs(p)<iD)break;for(let m=0,y,v;m<l;++m)y=f[m]/(6*p),d[m]=y>=1?iD:(v=1-y*y)*v}return Gue(i,c,s,a)}function Hue(e){return(e=1-e*e*e)*e*e}function Vue(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function Gue(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const Yue=.5*Math.PI/180;function Lb(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=p=>[p,e(p)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let p=1;p<r;++p)u.push(i(o+p/n*a));return u.push(i(s)),u}else{c.push(i(s));for(let p=n;--p>0;)c.push(i(o+p/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,g=Xue(f[1],c);for(;d;){const p=i((f[0]+d[0])/2);p[0]-f[0]>=l&&Kue(f,p,d,h,g)>Yue?c.push(p):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function Xue(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function Kue(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function Que(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function RC(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Que(e)}function yB(e,t,n){return n||e+(t?"_"+t:"")}const EE=()=>{},Zue={init:EE,add:EE,rem:EE,idx:0},Kg={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},zm=Object.keys(Kg).filter(e=>e!=="__count__");function Jue(e,t){return(n,r)=>Ae({name:e,aggregate_param:r,out:n||e},Zue,t)}[...zm,"__count__"].forEach(e=>{Kg[e]=Jue(e,Kg[e])});function vB(e,t,n){return Kg[e](n,t)}function xB(e,t){return e.idx-t.idx}function ece(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Kg[i]())})};return e.forEach(n),Object.values(t).sort(xB)}function tce(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function nce(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function rce(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function ice(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function bB(e,t){const n=t||Wn,r=ece(e),i=e.slice().sort(xB);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=tce,o.prototype.add=nce,o.prototype.rem=rce,o.prototype.set=ice,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function HT(e){this._key=e?Si(e):ve,this.reset()}const Sn=HT.prototype;Sn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Sn.add=function(e){this._add.push(e)};Sn.rem=function(e){this._rem.push(e)};Sn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Sn.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",fe(n,o)||(n[o]=1,++i);return i};Sn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=I7(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Sn.argmin=function(e){return this.extent(e)[0]||{}};Sn.argmax=function(e){return this.extent(e)[1]||{}};Sn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Sn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Sn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=TT(this.values(),e),this._get=e),this._q};Sn.q1=function(e){return this.quartile(e)[0]};Sn.q2=function(e){return this.quartile(e)[1]};Sn.q3=function(e){return this.quartile(e)[2]};Sn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=sB(this.values(),1e3,.05,e),this._get=e),this._ci};Sn.ci0=function(e){return this.ci(e)[0]};Sn.ci1=function(e){return this.ci(e)[1]};function Rl(e){z.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Rl.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zm},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};te(Rl,z,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}o(e._prev),o(t);function s(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const x=le(In(v)),b=x.length;let w=0,S;for(;w<b;++w)r[S=x[w]]||(r[S]=1,t.push(S))}this._dims=le(e.groupby),this._dnames=this._dims.map(v=>{const x=Rt(v);return i(v),n.push(x),x}),this.cellkey=e.key?e.key:RC(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let f,d,h,g,p,m,y;for(u!==s.length&&U("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(f=o[y],d=s[y],h=a[y]||null,f==null&&d!=="count"&&U("Null aggregate field specified."),p=Rt(f),m=yB(d,p,l[y]),n.push(m),d==="count"){this._counts.push(m);continue}g=c[p],g||(i(f),g=c[p]=[],g.field=f,this._measures.push(g)),d!=="count"&&(this._countOnly=!1),g.push(vB(d,h,m))}return this._measures=this._measures.map(v=>bB(v,v.field)),Object.create(null)},cellkey:RC(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new HT),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?Zj(t.tuple,o):Ye(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const oce=1e-14;function VT(e){z.call(this,null,e)}VT.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};te(VT,z,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(In(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=oB(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let c=Pn(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(oce+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=Fr(l,In(t),e.name||"bin_"+Rt(t))}});function wB(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?U7(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function GT(e){z.call(this,[],e)}GT.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};te(GT,z,{transform(e,t){const n=t.fork(t.ALL),r=wB(ve,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Bc(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function EB(e){ot.call(this,null,sce,e)}te(EB,ot);function sce(e){return this.value&&!e.modified()?this.value:sT(e.fields,e.orders)}function YT(e){z.call(this,null,e)}YT.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function ace(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}te(YT,z,{transform(e,t){const n=f=>d=>{for(var h=ace(a(d),e.case,o)||[],g,p=0,m=h.length;p<m;++p)s.test(g=h[p])||f(g)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=Ye({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function XT(e){z.call(this,null,e)}XT.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};te(XT,z,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=lce(a,i,o,e.filter||_i)):n.mod=a,n.source=this.value,n.modifies(r)}});function lce(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(Ye(o)),o={},o[t]=u);return i}const oD={kde:FT,mixture:cB,normal:RT,lognormal:uB,uniform:fB},uce="distributions",sD="function",cce="field";function SB(e,t){const n=e[sD];fe(oD,n)||U("Unknown distribution function: "+n);const r=oD[n]();for(const i in e)i===cce?r.data((e.from||t()).map(e[i])):i===uce?r[i](e[i].map(o=>SB(o,t))):typeof r[i]===sD&&r[i](e[i]);return r}function KT(e){z.call(this,null,e)}const _B=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],fce={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:_B},{name:"weights",type:"number",array:!0}]};KT.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:_B.concat(fce)},{name:"as",type:"string",array:!0,default:["value","density"]}]};te(KT,z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=SB(e.distribution,dce(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&U("Invalid density method: "+s),!e.extent&&!r.data&&U("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||is(r.data()),u=Lb(s,l,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ye(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function dce(e){return()=>e.materialize(e.SOURCE).source}function CB(e,t){return e?e.map((n,r)=>t[r]||Rt(n)):null}function QT(e,t,n){const r=[],i=f=>f(l);let o,s,a,l,u,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const kB="bin";function ZT(e){z.call(this,null,e)}ZT.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:kB}]};const hce=(e,t)=>Dm(is(e,t))/30;te(ZT,z,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=QT(t.source,e.groupby,Wn),i=e.smooth||!1,o=e.field,s=e.step||hce(n,o),a=Bc((g,p)=>o(g)-o(p)),l=e.as||kB,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const g=r[d].sort(a);h=-1;for(const p of aB(g,s,i,o))p<c&&(c=p),p>f&&(f=p),g[++h][l]=p}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function AB(e){ot.call(this,null,pce,e),this.modified(!0)}te(AB,ot);function pce(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Fr(n=>t(n,e),In(t),Rt(t))}function JT(e){z.call(this,[void 0,void 0],e)}JT.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};te(JT,z,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Pn(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Rt(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function eN(e,t){ot.call(this,e),this.parent=t,this.count=0}te(eN,ot,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function zb(e){z.call(this,{},e),this._keys=wh();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}te(zb,z,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=fe(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new eN(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=ve(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(ve(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=ve(l),c=o.get(u),f=r(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(ve(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=ve(l),c=o.get(u),f=r(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function $B(e){ot.call(this,null,gce,e)}te($B,ot);function gce(e){return this.value&&!e.modified()?this.value:W(e.name)?le(e.name).map(t=>Si(t)):Si(e.name,e.as)}function tN(e){z.call(this,wh(),e)}tN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};te(tN,z,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=ve(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):r.set(ve(f),1)});function c(f){const d=ve(f),h=l(f,e),g=r.get(d);h&&g?(r.delete(d),o.push(f)):!h&&!g?(r.set(d,1),s.push(f)):u&&h&&!g&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function nN(e){z.call(this,[],e)}nN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};te(nN,z,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=CB(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(g=>g(a)),u=l.reduce((g,p)=>Math.max(g,p.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=CT(a),f=0;f<s;++f)d[i[f]]=(h=l[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function rN(e){z.call(this,[],e)}rN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};te(rN,z,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Rt),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=CT(u),f[s]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function iN(e){z.call(this,null,e)}iN.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};te(iN,z,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function TB(e){z.call(this,[],e)}te(TB,z,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=Ye(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const ny={value:"value",median:tj,mean:Zse,min:wC,max:Ku},mce=[];function oN(e){z.call(this,[],e)}oN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function yce(e){var t=e.method||ny.value,n;if(ny[t]==null)U("Unrecognized imputation method: "+t);else return t===ny.value?(n=e.value!==void 0?e.value:0,()=>n):ny[t]}function vce(e){const t=e.field;return n=>n?t(n):NaN}te(oN,z,{transform(e,t){var n=t.fork(t.ALL),r=yce(e),i=vce(e),o=Rt(e.field),s=Rt(e.key),a=(e.groupby||[]).map(Rt),l=xce(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,g,p,m,y,v,x,b,w;for(m=0,x=l.length;m<x;++m)for(d=l[m],g=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(p=l.domain[v],w={_impute:!0},y=0,b=g.length;y<b;++y)w[a[y]]=g[y];w[s]=p,w[o]=Number.isNaN(h)?h=r(d,i):h,u.push(Ye(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function xce(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},l={},u,c,f,d,h,g,p,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,p=e.length;d<p;++d)m=e[d],g=n(m),h=a[g]||(a[g]=s.push(g)),c=(u=t?t.map(i):mce)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[h-1]=m;return o.domain=s,o}function sN(e){Rl.call(this,e)}sN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:zm},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};te(sN,Rl,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Ae(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function aN(e){z.call(this,null,e)}aN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};te(aN,z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=QT(r,e.groupby,e.field),o=(e.groupby||[]).map(Rt),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&U("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=is(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const g=FT(h,s)[a],p=e.counts?h.length:1,m=c||is(h);Lb(g,m,f,d).forEach(y=>{const v={};for(let x=0;x<o.length;++x)v[o[x]]=h.dims[x];v[l[0]]=y[0],v[l[1]]=y[1]*p,u.push(Ye(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function NB(e){ot.call(this,null,bce,e)}te(NB,ot);function bce(e){return this.value&&!e.modified()?this.value:uT(e.fields,e.flat)}function MB(e){z.call(this,[],e),this._pending=null}te(MB,z,{transform(e,t){const n=t.dataflow;return this._pending?SE(this,t,this._pending):wce(e)?t.StopPropagation:e.values?SE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=le(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>SE(this,t,le(r.data)))}});function wce(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function SE(e,t,n){n.forEach(Ye);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function lN(e){z.call(this,{},e)}lN.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};te(lN,z,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&U('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&U('The "as" parameter has too few output field names.'),c=c||i.map(Rt),f=function(g){for(var p=0,m=0,y,v;p<a;++p)if(v=r.get(n[p](g)),v==null)for(y=0;y<d;++y,++m)g[c[m]]=o;else for(y=0;y<d;++y,++m)g[c[m]]=i[y](v)}):(c||U("Missing output field names."),f=function(g){for(var p=0,m;p<a;++p)m=r.get(n[p](g)),g[c[p]]=m??o}),s?u=t.reflow(!0):(h=n.some(g=>t.modified(g.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function RB(e){ot.call(this,null,Ece,e)}te(RB,ot);function Ece(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function FB(e){ot.call(this,null,Sce,e)}te(FB,ot);function Sce(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function OB(e){z.call(this,null,e)}te(OB,z,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uN(e){Rl.call(this,e)}uN.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:zm,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};te(uN,Rl,{_transform:Rl.prototype.transform,transform(e,t){return this._transform(_ce(e,t),t)}});function _ce(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=In(n).concat(In(r)),s=kce(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>Cce(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function Cce(e,t,n,r){return Fr(i=>t(i)===e?n(i):NaN,r,e+"")}function kce(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(bh),t?i.slice(0,t):i}function PB(e){zb.call(this,e)}te(PB,zb,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(ve(o),n,t,o);return(e.modified("field")||r&&t.modified(In(r)))&&U("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(Ye(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function cN(e){z.call(this,null,e)}cN.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};te(cN,z,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=CB(e.fields,e.as||[]),o=r?(a,l)=>Ace(a,l,r,i):Mb;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=ve(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,Ye({}));s[ve(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[ve(a)]))}),n}});function Ace(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function DB(e){z.call(this,null,e)}te(DB,z,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function fN(e){z.call(this,null,e)}fN.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const $ce=1e-14;te(fN,z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=QT(i,e.groupby,e.field),s=(e.groupby||[]).map(Rt),a=[],l=e.step||.01,u=e.probs||Ur(l/2,1-$ce,l),c=u.length;return o.forEach(f=>{const d=$T(f,u);for(let h=0;h<c;++h){const g={};for(let p=0;p<s.length;++p)g[s[p]]=f.dims[p];g[r[0]]=u[h],g[r[1]]=d[h],a.push(Ye(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function IB(e){z.call(this,null,e)}te(IB,z,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=ve(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=CT(i);r[ve(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[ve(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function dN(e){z.call(this,[],e),this.count=0}dN.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};te(dN,z,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[ve(f)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*ki()),d<s.length&&d>=l&&(f=s[d],o[ve(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=ve(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[ve(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[ve(c)]||u(c)}),l=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[ve(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[ve(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[ve(c)])),this.count=a,this.value=n.source=s,n}});function hN(e){z.call(this,null,e)}hN.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};te(hN,z,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ur(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,Ye(o)}),n.add=t.add.concat(this.value),n}});function LB(e){z.call(this,null,e),this.modified(!0)}te(LB,z,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function pN(e){z.call(this,null,e)}const zB=["unit0","unit1"];pN.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:mT,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:zB}]};te(pN,z,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?kh:Ch)(o.unit).offset,a=e.as||zB,l=a[0],u=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(In(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,g=>{const p=n(g);let m,y;p==null?(g[l]=null,r&&(g[u]=null)):(g[l]=m=y=o(p),r&&(g[u]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Tj({extent:e.extent||is(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=yT(r),s=this.value||{},a=(n?bj:xj)(o,i);return a.unit=ze(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function jB(e){z.call(this,wh(),e)}te(jB,z,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function BB(e){z.call(this,null,e)}te(BB,z,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Bc(e.sort)):t.source).map(e.field))}});function Tce(e,t,n,r){const i=Qg[e](t,n);return{init:i.init||Ya,update:function(o,s){s[r]=i.next(o)}}}const Qg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Qg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||U("ntile num must be greater than zero.");const n=Qg.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||U("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Nce(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Nce(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Mce=Object.keys(Qg);function UB(e){const t=le(e.ops),n=le(e.fields),r=le(e.params),i=le(e.aggregate_params),o=le(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[];let d=!0;function h(g){le(In(g)).forEach(p=>l[p]=1)}h(e.sort),t.forEach((g,p)=>{const m=n[p],y=r[p],v=i[p]||null,x=Rt(m),b=yB(g,x,o[p]);if(h(m),s.push(b),fe(Qg,g))a.push(Tce(g,m,y,b));else{if(m==null&&g!=="count"&&U("Null aggregate field specified."),g==="count"){c.push(b);return}d=!1;let w=u[x];w||(w=u[x]=[],w.field=m,f.push(w)),w.push(vB(g,v,b))}}),(c.length||f.length)&&(this.cell=Rce(f,c,d)),this.inputs=Object.keys(l)}const WB=UB.prototype;WB.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};WB.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function Rce(e,t,n){e=e.map(l=>bB(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new HT;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function gN(e){z.call(this,{},e),this._mlen=0,this._mods=[]}gN.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Mce.concat(zm)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};te(gN,z,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Bc(e.sort),i=RC(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new UB(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)Fce(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=wB(ve),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Fce(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?Eh(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||qn(-1)};t.init();for(let f=0;f<l;++f)Oce(c,s,f,l),o&&Pce(c,u),t.update(c,a[f])}function Oce(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Pce(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const Dce=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Rl,bin:VT,collect:GT,compare:EB,countpattern:YT,cross:XT,density:KT,dotbin:ZT,expression:AB,extent:JT,facet:zb,field:$B,filter:tN,flatten:nN,fold:rN,formula:iN,generate:TB,impute:oN,joinaggregate:sN,kde:aN,key:NB,load:MB,lookup:lN,multiextent:RB,multivalues:FB,params:OB,pivot:uN,prefacet:PB,project:cN,proxy:DB,quantile:fN,relay:IB,sample:dN,sequence:hN,sieve:LB,subflow:eN,timeunit:pN,tupleindex:jB,values:BB,window:gN},Symbol.toStringTag,{value:"Module"}));function Xe(e){return function(){return e}}const aD=Math.abs,An=Math.atan2,hu=Math.cos,Ice=Math.max,_E=Math.min,To=Math.sin,Lu=Math.sqrt,Tn=1e-12,Dd=Math.PI,vv=Dd/2,qB=2*Dd;function Lce(e){return e>1?0:e<-1?Dd:Math.acos(e)}function lD(e){return e>=1?vv:e<=-1?-vv:Math.asin(e)}const FC=Math.PI,OC=2*FC,ku=1e-6,zce=OC-ku;function HB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function jce(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return HB;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let mN=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?HB:jce(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>ku)if(!(Math.abs(f*l-u*c)>ku)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,g=i-a,p=l*l+u*u,m=h*h+g*g,y=Math.sqrt(p),v=Math.sqrt(d),x=o*Math.tan((FC-Math.acos((p+d-m)/(2*y*v)))/2),b=x/v,w=x/y;Math.abs(b-1)>ku&&this._append`L${t+b*c},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*h>c*g)},${this._x1=t+w*l},${this._y1=n+w*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>ku||Math.abs(this._y1-c)>ku)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%OC+OC),d>zce?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>ku&&this._append`A${r},${r},0,${+(d>=FC)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function jb(){return new mN}jb.prototype=mN.prototype;function Bb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new mN(t)}function Bce(e){return e.innerRadius}function Uce(e){return e.outerRadius}function Wce(e){return e.startAngle}function qce(e){return e.endAngle}function Hce(e){return e&&e.padAngle}function Vce(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,c=s-i,f=a-o,d=f*l-c*u;if(!(d*d<Tn))return d=(c*(t-o)-f*(e-i))/d,[e+d*l,t+d*u]}function ry(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/Lu(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,g=n+c,p=r+f,m=(d+g)/2,y=(h+p)/2,v=g-d,x=p-h,b=v*v+x*x,w=i-o,S=d*p-g*h,E=(x<0?-1:1)*Lu(Ice(0,w*w*b-S*S)),_=(S*x-v*E)/b,k=(-S*v-x*E)/b,T=(S*x+v*E)/b,N=(-S*v+x*E)/b,P=_-m,D=k-y,M=T-m,$=N-y;return P*P+D*D>M*M+$*$&&(_=T,k=N),{cx:_,cy:k,x01:-c,y01:-f,x11:_*(i/w-1),y11:k*(i/w-1)}}function Gce(){var e=Bce,t=Uce,n=Xe(0),r=null,i=Wce,o=qce,s=Hce,a=null,l=Bb(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),g=i.apply(this,arguments)-vv,p=o.apply(this,arguments)-vv,m=aD(p-g),y=p>g;if(a||(a=c=l()),h<d&&(f=h,h=d,d=f),!(h>Tn))a.moveTo(0,0);else if(m>qB-Tn)a.moveTo(h*hu(g),h*To(g)),a.arc(0,0,h,g,p,!y),d>Tn&&(a.moveTo(d*hu(p),d*To(p)),a.arc(0,0,d,p,g,y));else{var v=g,x=p,b=g,w=p,S=m,E=m,_=s.apply(this,arguments)/2,k=_>Tn&&(r?+r.apply(this,arguments):Lu(d*d+h*h)),T=_E(aD(h-d)/2,+n.apply(this,arguments)),N=T,P=T,D,M;if(k>Tn){var $=lD(k/d*To(_)),R=lD(k/h*To(_));(S-=$*2)>Tn?($*=y?1:-1,b+=$,w-=$):(S=0,b=w=(g+p)/2),(E-=R*2)>Tn?(R*=y?1:-1,v+=R,x-=R):(E=0,v=x=(g+p)/2)}var I=h*hu(v),F=h*To(v),O=d*hu(w),L=d*To(w);if(T>Tn){var X=h*hu(x),V=h*To(x),ne=d*hu(b),de=d*To(b),he;if(m<Dd)if(he=Vce(I,F,ne,de,X,V,O,L)){var Ne=I-he[0],oe=F-he[1],Re=X-he[0],ee=V-he[1],ue=1/To(Lce((Ne*Re+oe*ee)/(Lu(Ne*Ne+oe*oe)*Lu(Re*Re+ee*ee)))/2),ce=Lu(he[0]*he[0]+he[1]*he[1]);N=_E(T,(d-ce)/(ue-1)),P=_E(T,(h-ce)/(ue+1))}else N=P=0}E>Tn?P>Tn?(D=ry(ne,de,I,F,h,P,y),M=ry(X,V,O,L,h,P,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),P<T?a.arc(D.cx,D.cy,P,An(D.y01,D.x01),An(M.y01,M.x01),!y):(a.arc(D.cx,D.cy,P,An(D.y01,D.x01),An(D.y11,D.x11),!y),a.arc(0,0,h,An(D.cy+D.y11,D.cx+D.x11),An(M.cy+M.y11,M.cx+M.x11),!y),a.arc(M.cx,M.cy,P,An(M.y11,M.x11),An(M.y01,M.x01),!y))):(a.moveTo(I,F),a.arc(0,0,h,v,x,!y)):a.moveTo(I,F),!(d>Tn)||!(S>Tn)?a.lineTo(O,L):N>Tn?(D=ry(O,L,X,V,d,-N,y),M=ry(I,F,ne,de,d,-N,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),N<T?a.arc(D.cx,D.cy,N,An(D.y01,D.x01),An(M.y01,M.x01),!y):(a.arc(D.cx,D.cy,N,An(D.y01,D.x01),An(D.y11,D.x11),!y),a.arc(0,0,d,An(D.cy+D.y11,D.cx+D.x11),An(M.cy+M.y11,M.cx+M.x11),y),a.arc(M.cx,M.cy,N,An(M.y11,M.x11),An(M.y01,M.x01),!y))):a.arc(0,0,d,w,b,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Dd/2;return[hu(f)*c,To(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Xe(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Xe(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Xe(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Xe(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Xe(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Xe(+c),u):o},u.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Xe(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function VB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function GB(e){this._context=e}GB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yN(e){return new GB(e)}function YB(e){return e[0]}function XB(e){return e[1]}function KB(e,t){var n=Xe(!0),r=null,i=yN,o=null,s=Bb(a);e=typeof e=="function"?e:e===void 0?YB:Xe(e),t=typeof t=="function"?t:t===void 0?XB:Xe(t);function a(l){var u,c=(l=VB(l)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,u,l),+t(f,u,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Xe(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Xe(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Xe(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function QB(e,t,n){var r=null,i=Xe(!0),o=null,s=yN,a=null,l=Bb(u);e=typeof e=="function"?e:e===void 0?YB:Xe(+e),t=typeof t=="function"?t:Xe(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?XB:Xe(+n);function u(f){var d,h,g,p=(f=VB(f)).length,m,y=!1,v,x=new Array(p),b=new Array(p);for(o==null&&(a=s(v=l())),d=0;d<=p;++d){if(!(d<p&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=d-1;g>=h;--g)a.point(x[g],b[g]);a.lineEnd(),a.areaEnd()}y&&(x[d]=+e(m,d,f),b[d]=+t(m,d,f),a.point(r?+r(m,d,f):x[d],n?+n(m,d,f):b[d]))}if(v)return a=null,v+""||null}function c(){return KB().defined(i).curve(s).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xe(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Xe(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xe(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Xe(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Xe(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Xe(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Xe(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),u):o},u}const Yce={draw(e,t){const n=Lu(t/Dd);e.moveTo(n,0),e.arc(0,0,n,0,qB)}};function Xce(e,t){let n=null,r=Bb(i);e=typeof e=="function"?e:Xe(e||Yce),t=typeof t=="function"?t:Xe(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:Xe(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:Xe(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Fl(){}function xv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Ub(e){this._context=e}Ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kce(e){return new Ub(e)}function ZB(e){this._context=e}ZB.prototype={areaStart:Fl,areaEnd:Fl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qce(e){return new ZB(e)}function JB(e){this._context=e}JB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zce(e){return new JB(e)}function eU(e,t){this._basis=new Ub(e),this._beta=t}eU.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Jce=function e(t){function n(r){return t===1?new Ub(r):new eU(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function bv(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function vN(e,t){this._context=e,this._k=(1-t)/6}vN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:bv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const efe=function e(t){function n(r){return new vN(r,t)}return n.tension=function(r){return e(+r)},n}(0);function xN(e,t){this._context=e,this._k=(1-t)/6}xN.prototype={areaStart:Fl,areaEnd:Fl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:bv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tfe=function e(t){function n(r){return new xN(r,t)}return n.tension=function(r){return e(+r)},n}(0);function bN(e,t){this._context=e,this._k=(1-t)/6}bN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nfe=function e(t){function n(r){return new bN(r,t)}return n.tension=function(r){return e(+r)},n}(0);function wN(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>Tn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Tn){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function tU(e,t){this._context=e,this._alpha=t}tU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:wN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rfe=function e(t){function n(r){return t?new tU(r,t):new vN(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function nU(e,t){this._context=e,this._alpha=t}nU.prototype={areaStart:Fl,areaEnd:Fl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:wN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ife=function e(t){function n(r){return t?new nU(r,t):new xN(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function rU(e,t){this._context=e,this._alpha=t}rU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ofe=function e(t){function n(r){return t?new rU(r,t):new bN(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function iU(e){this._context=e}iU.prototype={areaStart:Fl,areaEnd:Fl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function sfe(e){return new iU(e)}function uD(e){return e<0?-1:1}function cD(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(uD(o)+uD(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function fD(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function CE(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function wv(e){this._context=e}wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:CE(this,this._t0,fD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,CE(this,fD(this,n=cD(this,e,t)),n);break;default:CE(this,this._t0,n=cD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function oU(e){this._context=new sU(e)}(oU.prototype=Object.create(wv.prototype)).point=function(e,t){wv.prototype.point.call(this,t,e)};function sU(e){this._context=e}sU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function afe(e){return new wv(e)}function lfe(e){return new oU(e)}function aU(e){this._context=e}aU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=dD(e),i=dD(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dD(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function ufe(e){return new aU(e)}function Wb(e,t){this._context=e,this._t=t}Wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function cfe(e){return new Wb(e,.5)}function ffe(e){return new Wb(e,0)}function dfe(e){return new Wb(e,1)}function Sl(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const hfe=()=>typeof Image<"u"?Image:null;function gs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Xl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const PC=Symbol("implicit");function EN(){var e=new T3,t=[],n=[],r=PC;function i(o){let s=e.get(o);if(s===void 0){if(r!==PC)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new T3;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return EN(t,n).unknown(r)},gs.apply(i,arguments),i}function $h(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Kl(){}var hc=.7,Id=1/hc,nd="\\s*([+-]?\\d+)\\s*",Zg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pfe=/^#([0-9a-f]{3,8})$/,gfe=new RegExp(`^rgb\\(${nd},${nd},${nd}\\)$`),mfe=new RegExp(`^rgb\\(${Qo},${Qo},${Qo}\\)$`),yfe=new RegExp(`^rgba\\(${nd},${nd},${nd},${Zg}\\)$`),vfe=new RegExp(`^rgba\\(${Qo},${Qo},${Qo},${Zg}\\)$`),xfe=new RegExp(`^hsl\\(${Zg},${Qo},${Qo}\\)$`),bfe=new RegExp(`^hsla\\(${Zg},${Qo},${Qo},${Zg}\\)$`),hD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$h(Kl,Jg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:pD,formatHex:pD,formatHex8:wfe,formatHsl:Efe,formatRgb:gD,toString:gD});function pD(){return this.rgb().formatHex()}function wfe(){return this.rgb().formatHex8()}function Efe(){return lU(this).formatHsl()}function gD(){return this.rgb().formatRgb()}function Jg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pfe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?mD(t):n===3?new Jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?iy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?iy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gfe.exec(e))?new Jt(t[1],t[2],t[3],1):(t=mfe.exec(e))?new Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yfe.exec(e))?iy(t[1],t[2],t[3],t[4]):(t=vfe.exec(e))?iy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xfe.exec(e))?xD(t[1],t[2]/100,t[3]/100,1):(t=bfe.exec(e))?xD(t[1],t[2]/100,t[3]/100,t[4]):hD.hasOwnProperty(e)?mD(hD[e]):e==="transparent"?new Jt(NaN,NaN,NaN,0):null}function mD(e){return new Jt(e>>16&255,e>>8&255,e&255,1)}function iy(e,t,n,r){return r<=0&&(e=t=n=NaN),new Jt(e,t,n,r)}function SN(e){return e instanceof Kl||(e=Jg(e)),e?(e=e.rgb(),new Jt(e.r,e.g,e.b,e.opacity)):new Jt}function Ol(e,t,n,r){return arguments.length===1?SN(e):new Jt(e,t,n,r??1)}function Jt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$h(Jt,Ol,jm(Kl,{brighter(e){return e=e==null?Id:Math.pow(Id,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hc:Math.pow(hc,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(Qu(this.r),Qu(this.g),Qu(this.b),Ev(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yD,formatHex:yD,formatHex8:Sfe,formatRgb:vD,toString:vD}));function yD(){return`#${zu(this.r)}${zu(this.g)}${zu(this.b)}`}function Sfe(){return`#${zu(this.r)}${zu(this.g)}${zu(this.b)}${zu((isNaN(this.opacity)?1:this.opacity)*255)}`}function vD(){const e=Ev(this.opacity);return`${e===1?"rgb(":"rgba("}${Qu(this.r)}, ${Qu(this.g)}, ${Qu(this.b)}${e===1?")":`, ${e})`}`}function Ev(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zu(e){return e=Qu(e),(e<16?"0":"")+e.toString(16)}function xD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zi(e,t,n,r)}function lU(e){if(e instanceof Zi)return new Zi(e.h,e.s,e.l,e.opacity);if(e instanceof Kl||(e=Jg(e)),!e)return new Zi;if(e instanceof Zi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Zi(s,a,l,e.opacity)}function Sv(e,t,n,r){return arguments.length===1?lU(e):new Zi(e,t,n,r??1)}function Zi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$h(Zi,Sv,jm(Kl,{brighter(e){return e=e==null?Id:Math.pow(Id,e),new Zi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hc:Math.pow(hc,e),new Zi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Jt(kE(e>=240?e-240:e+120,i,r),kE(e,i,r),kE(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Zi(bD(this.h),oy(this.s),oy(this.l),Ev(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ev(this.opacity);return`${e===1?"hsl(":"hsla("}${bD(this.h)}, ${oy(this.s)*100}%, ${oy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bD(e){return e=(e||0)%360,e<0?e+360:e}function oy(e){return Math.max(0,Math.min(1,e||0))}function kE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const uU=Math.PI/180,cU=180/Math.PI,_v=18,fU=.96422,dU=1,hU=.82521,pU=4/29,rd=6/29,gU=3*rd*rd,_fe=rd*rd*rd;function mU(e){if(e instanceof Zo)return new Zo(e.l,e.a,e.b,e.opacity);if(e instanceof Vs)return yU(e);e instanceof Jt||(e=SN(e));var t=NE(e.r),n=NE(e.g),r=NE(e.b),i=AE((.2225045*t+.7168786*n+.0606169*r)/dU),o,s;return t===n&&n===r?o=s=i:(o=AE((.4360747*t+.3850649*n+.1430804*r)/fU),s=AE((.0139322*t+.0971045*n+.7141733*r)/hU)),new Zo(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Cv(e,t,n,r){return arguments.length===1?mU(e):new Zo(e,t,n,r??1)}function Zo(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}$h(Zo,Cv,jm(Kl,{brighter(e){return new Zo(this.l+_v*(e??1),this.a,this.b,this.opacity)},darker(e){return new Zo(this.l-_v*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=fU*$E(t),e=dU*$E(e),n=hU*$E(n),new Jt(TE(3.1338561*t-1.6168667*e-.4906146*n),TE(-.9787684*t+1.9161415*e+.033454*n),TE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function AE(e){return e>_fe?Math.pow(e,1/3):e/gU+pU}function $E(e){return e>rd?e*e*e:gU*(e-pU)}function TE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function NE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Cfe(e){if(e instanceof Vs)return new Vs(e.h,e.c,e.l,e.opacity);if(e instanceof Zo||(e=mU(e)),e.a===0&&e.b===0)return new Vs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*cU;return new Vs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function kv(e,t,n,r){return arguments.length===1?Cfe(e):new Vs(e,t,n,r??1)}function Vs(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function yU(e){if(isNaN(e.h))return new Zo(e.l,0,0,e.opacity);var t=e.h*uU;return new Zo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}$h(Vs,kv,jm(Kl,{brighter(e){return new Vs(this.h,this.c,this.l+_v*(e??1),this.opacity)},darker(e){return new Vs(this.h,this.c,this.l-_v*(e??1),this.opacity)},rgb(){return yU(this).rgb()}}));var vU=-.14861,_N=1.78277,CN=-.29227,qb=-.90649,em=1.97294,wD=em*qb,ED=em*_N,SD=_N*CN-qb*vU;function kfe(e){if(e instanceof Zu)return new Zu(e.h,e.s,e.l,e.opacity);e instanceof Jt||(e=SN(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(SD*r+wD*t-ED*n)/(SD+wD-ED),o=r-i,s=(em*(n-i)-CN*o)/qb,a=Math.sqrt(s*s+o*o)/(em*i*(1-i)),l=a?Math.atan2(s,o)*cU-120:NaN;return new Zu(l<0?l+360:l,a,i,e.opacity)}function DC(e,t,n,r){return arguments.length===1?kfe(e):new Zu(e,t,n,r??1)}function Zu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$h(Zu,DC,jm(Kl,{brighter(e){return e=e==null?Id:Math.pow(Id,e),new Zu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hc:Math.pow(hc,e),new Zu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*uU,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Jt(255*(t+n*(vU*r+_N*i)),255*(t+n*(CN*r+qb*i)),255*(t+n*(em*r)),this.opacity)}}));function xU(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function bU(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return xU((n-r/t)*t,s,i,o,a)}}function wU(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return xU((n-r/t)*t,i,o,s,a)}}const Hb=e=>()=>e;function EU(e,t){return function(n){return e+n*t}}function Afe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Vb(e,t){var n=t-e;return n?EU(e,n>180||n<-180?n-360*Math.round(n/360):n):Hb(isNaN(e)?t:e)}function $fe(e){return(e=+e)==1?en:function(t,n){return n-t?Afe(t,n,e):Hb(isNaN(t)?n:t)}}function en(e,t){var n=t-e;return n?EU(e,n):Hb(isNaN(e)?t:e)}const IC=function e(t){var n=$fe(t);function r(i,o){var s=n((i=Ol(i)).r,(o=Ol(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=en(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function SU(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=Ol(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var Tfe=SU(bU),Nfe=SU(wU);function kN(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function _U(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mfe(e,t){return(_U(t)?kN:CU)(e,t)}function CU(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Ql(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function kU(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ki(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function AU(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ql(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var LC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ME=new RegExp(LC.source,"g");function Rfe(e){return function(){return e}}function Ffe(e){return function(t){return e(t)+""}}function $U(e,t){var n=LC.lastIndex=ME.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=LC.exec(e))&&(i=ME.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Ki(r,i)})),n=ME.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Ffe(l[0].x):Rfe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function Ql(e,t){var n=typeof t,r;return t==null||n==="boolean"?Hb(t):(n==="number"?Ki:n==="string"?(r=Jg(t))?(t=r,IC):$U:t instanceof Jg?IC:t instanceof Date?kU:_U(t)?kN:Array.isArray(t)?CU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?AU:Ki)(e,t)}function Ofe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Pfe(e,t){var n=Vb(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Bm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var _D=180/Math.PI,zC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TU(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*_D,skewX:Math.atan(l)*_D,scaleX:s,scaleY:a}}var sy;function Dfe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zC:TU(t.a,t.b,t.c,t.d,t.e,t.f)}function Ife(e){return e==null||(sy||(sy=document.createElementNS("http://www.w3.org/2000/svg","g")),sy.setAttribute("transform",e),!(e=sy.transform.baseVal.consolidate()))?zC:(e=e.matrix,TU(e.a,e.b,e.c,e.d,e.e,e.f))}function NU(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,g){if(u!==f||c!==d){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:Ki(u,f)},{i:p-2,x:Ki(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ki(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ki(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,g){if(u!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:Ki(u,f)},{i:p-2,x:Ki(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var g=-1,p=d.length,m;++g<p;)f[(m=d[g]).i]=m.x(h);return f.join("")}}}var Lfe=NU(Dfe,"px, ","px)","deg)"),zfe=NU(Ife,", ",")",")"),jfe=1e-12;function CD(e){return((e=Math.exp(e))+1/e)/2}function Bfe(e){return((e=Math.exp(e))-1/e)/2}function Ufe(e){return((e=Math.exp(2*e))-1)/(e+1)}const Wfe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],h=c-a,g=f-l,p=h*h+g*g,m,y;if(p<jfe)y=Math.log(d/u)/t,m=function(E){return[a+E*h,l+E*g,u*Math.exp(t*E*y)]};else{var v=Math.sqrt(p),x=(d*d-u*u+r*p)/(2*u*n*v),b=(d*d-u*u-r*p)/(2*d*n*v),w=Math.log(Math.sqrt(x*x+1)-x),S=Math.log(Math.sqrt(b*b+1)-b);y=(S-w)/t,m=function(E){var _=E*y,k=CD(w),T=u/(n*v)*(k*Ufe(t*_+w)-Bfe(w));return[a+T*h,l+T*g,u*k/CD(t*_+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function MU(e){return function(t,n){var r=e((t=Sv(t)).h,(n=Sv(n)).h),i=en(t.s,n.s),o=en(t.l,n.l),s=en(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const qfe=MU(Vb);var Hfe=MU(en);function Vfe(e,t){var n=en((e=Cv(e)).l,(t=Cv(t)).l),r=en(e.a,t.a),i=en(e.b,t.b),o=en(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function RU(e){return function(t,n){var r=e((t=kv(t)).h,(n=kv(n)).h),i=en(t.c,n.c),o=en(t.l,n.l),s=en(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Gfe=RU(Vb);var Yfe=RU(en);function FU(e){return function t(n){n=+n;function r(i,o){var s=e((i=DC(i)).h,(o=DC(o)).h),a=en(i.s,o.s),l=en(i.l,o.l),u=en(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const Xfe=FU(Vb);var Kfe=FU(en);function AN(e,t){t===void 0&&(t=e,e=Ql);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Qfe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Zfe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ql,interpolateArray:Mfe,interpolateBasis:bU,interpolateBasisClosed:wU,interpolateCubehelix:Xfe,interpolateCubehelixLong:Kfe,interpolateDate:kU,interpolateDiscrete:Ofe,interpolateHcl:Gfe,interpolateHclLong:Yfe,interpolateHsl:qfe,interpolateHslLong:Hfe,interpolateHue:Pfe,interpolateLab:Vfe,interpolateNumber:Ki,interpolateNumberArray:kN,interpolateObject:AU,interpolateRgb:IC,interpolateRgbBasis:Tfe,interpolateRgbBasisClosed:Nfe,interpolateRound:Bm,interpolateString:$U,interpolateTransformCss:Lfe,interpolateTransformSvg:zfe,interpolateZoom:Wfe,piecewise:AN,quantize:Qfe},Symbol.toStringTag,{value:"Module"}));function Jfe(e){return function(){return e}}function jC(e){return+e}var kD=[0,1];function wr(e){return e}function BC(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Jfe(isNaN(t)?NaN:.5)}function ede(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function tde(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=BC(i,r),o=n(s,o)):(r=BC(r,i),o=n(o,s)),function(a){return o(r(a))}}function nde(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=BC(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=Nl(e,a,1,r)-1;return o[l](i[l](a))}}function Um(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gb(){var e=kD,t=kD,n=Ql,r,i,o,s=wr,a,l,u;function c(){var d=Math.min(e.length,t.length);return s!==wr&&(s=ede(e[0],e[d-1])),a=d>2?nde:tde,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=a(t,e.map(r),Ki)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,jC),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Bm,c()},f.clamp=function(d){return arguments.length?(s=d?!0:wr,c()):s!==wr},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function OU(){return Gb()(wr,wr)}function PU(e,t,n,r){var i=Ml(e,t,n),o;switch(r=dc(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=aj(i,s))&&(r.precision=o),pT(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=lj(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=sj(i))&&(r.precision=o-(r.type==="%")*2);break}}return Eb(r)}function Wc(e){var t=e.domain;return e.ticks=function(n){var r=t();return xC(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return PU(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=bC(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function DU(){var e=OU();return e.copy=function(){return Um(e,DU())},gs.apply(e,arguments),Wc(e)}function IU(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,jC),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return IU(e).unknown(t)},e=arguments.length?Array.from(e,jC):[0,1],Wc(n)}function LU(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function AD(e){return Math.log(e)}function $D(e){return Math.exp(e)}function rde(e){return-Math.log(-e)}function ide(e){return-Math.exp(-e)}function ode(e){return isFinite(e)?+("1e"+e):e<0?0:e}function sde(e){return e===10?ode:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ade(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function TD(e){return(t,n)=>-e(-t,n)}function $N(e){const t=e(AD,$D),n=t.domain;let r=10,i,o;function s(){return i=ade(r),o=sde(r),n()[0]<0?(i=TD(i),o=TD(o),e(rde,ide)):e(AD,$D),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),g,p;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(g=1;g<r;++g)if(p=d<0?g/o(-d):g*o(d),!(p<u)){if(p>c)break;y.push(p)}}else for(;d<=h;++d)for(g=r-1;g>=1;--g)if(p=d>0?g/o(-d):g*o(d),!(p<u)){if(p>c)break;y.push(p)}y.length*2<m&&(y=xC(u,c,m))}else y=xC(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=dc(l)).precision==null&&(l.trim=!0),l=Eb(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(LU(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function zU(){const e=$N(Gb()).domain([1,10]);return e.copy=()=>Um(e,zU()).base(e.base()),gs.apply(e,arguments),e}function ND(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function MD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function TN(e){var t=1,n=e(ND(t),MD(t));return n.constant=function(r){return arguments.length?e(ND(t=+r),MD(t)):t},Wc(n)}function jU(){var e=TN(Gb());return e.copy=function(){return Um(e,jU()).constant(e.constant())},gs.apply(e,arguments)}function RD(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function lde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ude(e){return e<0?-e*e:e*e}function NN(e){var t=e(wr,wr),n=1;function r(){return n===1?e(wr,wr):n===.5?e(lde,ude):e(RD(n),RD(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Wc(t)}function MN(){var e=NN(Gb());return e.copy=function(){return Um(e,MN()).exponent(e.exponent())},gs.apply(e,arguments),e}function cde(){return MN.apply(null,arguments).exponent(.5)}function BU(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=ej(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Nl(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ks),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return BU().domain(e).range(t).unknown(r)},gs.apply(o,arguments)}function UU(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Nl(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return UU().domain([e,t]).range(i).unknown(o)},gs.apply(Wc(s),arguments)}function WU(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Nl(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return WU().domain(e).range(t).unknown(n)},gs.apply(i,arguments)}function fde(e){return new Date(e)}function dde(e){return e instanceof Date?+e:+new Date(+e)}function RN(e,t,n,r,i,o,s,a,l,u){var c=OU(),f=c.invert,d=c.domain,h=u(".%L"),g=u(":%S"),p=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),x=u("%B"),b=u("%Y");function w(S){return(l(S)<S?h:a(S)<S?g:s(S)<S?p:o(S)<S?m:r(S)<S?i(S)<S?y:v:n(S)<S?x:b)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,dde)):d().map(fde)},c.ticks=function(S){var E=d();return e(E[0],E[E.length-1],S??10)},c.tickFormat=function(S,E){return E==null?w:u(E)},c.nice=function(S){var E=d();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?d(LU(E,S)):c},c.copy=function(){return Um(c,RN(e,t,n,r,i,o,s,a,l,u))},c}function hde(){return gs.apply(RN(bae,wae,os,Gg,Sh,Qs,Cb,Sb,Hs,xT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pde(){return gs.apply(RN(vae,xae,ss,Yg,_h,wl,kb,_b,Hs,bT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yb(){var e=0,t=1,n,r,i,o,s=wr,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(d){var h,g;return arguments.length?([h,g]=d,s=f(h,g),u):[s(0),s(1)]}}return u.range=c(Ql),u.rangeRound=c(Bm),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Zl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FN(){var e=Wc(Yb()(wr));return e.copy=function(){return Zl(e,FN())},Xl.apply(e,arguments)}function qU(){var e=$N(Yb()).domain([1,10]);return e.copy=function(){return Zl(e,qU()).base(e.base())},Xl.apply(e,arguments)}function HU(){var e=TN(Yb());return e.copy=function(){return Zl(e,HU()).constant(e.constant())},Xl.apply(e,arguments)}function ON(){var e=NN(Yb());return e.copy=function(){return Zl(e,ON()).exponent(e.exponent())},Xl.apply(e,arguments)}function gde(){return ON.apply(null,arguments).exponent(.5)}function Xb(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=wr,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-o)*(r*p<r*o?a:l),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function g(p){return function(m){var y,v,x;return arguments.length?([y,v,x]=m,u=AN(p,[y,v,x]),h):[u(0),u(.5),u(1)]}}return h.range=g(Ql),h.rangeRound=g(Bm),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),o=p(t),s=p(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function VU(){var e=Wc(Xb()(wr));return e.copy=function(){return Zl(e,VU())},Xl.apply(e,arguments)}function GU(){var e=$N(Xb()).domain([.1,1,10]);return e.copy=function(){return Zl(e,GU()).base(e.base())},Xl.apply(e,arguments)}function YU(){var e=TN(Xb());return e.copy=function(){return Zl(e,YU()).constant(e.constant())},Xl.apply(e,arguments)}function PN(){var e=NN(Xb());return e.copy=function(){return Zl(e,PN()).exponent(e.exponent())},Xl.apply(e,arguments)}function mde(){return PN.apply(null,arguments).exponent(.5)}function ms(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const yde=ms("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),vde=ms("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),xde=ms("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),bde=ms("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),wde=ms("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ede=ms("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Sde=ms("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),_de=ms("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Cde=ms("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),kde=ms("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function DN(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Ade="identity",Ld="linear",fa="log",Wm="pow",qm="sqrt",Kb="symlog",pc="time",gc="utc",Jo="sequential",Th="diverging",zd="quantile",Qb="quantize",Zb="threshold",IN="ordinal",UC="point",XU="band",LN="bin-ordinal",Kt="continuous",Hm="discrete",Vm="discretizing",Ni="interpolating",zN="temporal";function $de(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Tde(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function jN(){const e=EN().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],g=DN(f,a,l);let p=r[d-0];i=(h-p)/(g||1),s&&(i=Math.floor(i)),p+=(h-p-i*(f-a))*u,o=i*(1-a),s&&(p=Math.round(p),o=Math.round(o));const m=Ur(f).map(y=>p+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),g=h.length-1;let p=+f[0],m=+f[1],y,v,x;if(!(p!==p||m!==m)&&(m<p&&(x=p,p=m,m=x),!(m<h[0]||p>r[1-d])))return y=Math.max(0,Nl(h,p)-1),v=p===m?y:Nl(h,m)-1,p-h[y]>o+1e-10&&++y,d&&(x=y,y=g-v,v=g-x),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return jN().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function KU(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return KU(t())},e}function Nde(){return KU(jN().paddingInner(1))}var Mde=Array.prototype.map;function Rde(e){return Mde.call(e,Pn)}const Fde=Array.prototype.slice;function QU(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Nl(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Rde(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Fde.call(r),n):t.slice()},n.tickFormat=function(r,i){return PU(e[0],ze(e),r??10,i)},n.copy=function(){return QU().domain(n.domain()).range(n.range())},n}const Av=new Map,ZU=Symbol("vega_scale");function JU(e){return e[ZU]=!0,e}function FD(e){return e&&e[ZU]===!0}function Ode(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?$de(o):o.invertExtent?Tde(o):void 0),o.type=e,JU(o)};return r.metadata=ho(le(n)),r}function Ge(e,t,n){return arguments.length>1?(Av.set(e,Ode(e,t,n)),this):eW(e)?Av.get(e):void 0}Ge(Ade,IU);Ge(Ld,DU,Kt);Ge(fa,zU,[Kt,fa]);Ge(Wm,MN,Kt);Ge(qm,cde,Kt);Ge(Kb,jU,Kt);Ge(pc,hde,[Kt,zN]);Ge(gc,pde,[Kt,zN]);Ge(Jo,FN,[Kt,Ni]);Ge(`${Jo}-${Ld}`,FN,[Kt,Ni]);Ge(`${Jo}-${fa}`,qU,[Kt,Ni,fa]);Ge(`${Jo}-${Wm}`,ON,[Kt,Ni]);Ge(`${Jo}-${qm}`,gde,[Kt,Ni]);Ge(`${Jo}-${Kb}`,HU,[Kt,Ni]);Ge(`${Th}-${Ld}`,VU,[Kt,Ni]);Ge(`${Th}-${fa}`,GU,[Kt,Ni,fa]);Ge(`${Th}-${Wm}`,PN,[Kt,Ni]);Ge(`${Th}-${qm}`,mde,[Kt,Ni]);Ge(`${Th}-${Kb}`,YU,[Kt,Ni]);Ge(zd,BU,[Vm,zd]);Ge(Qb,UU,Vm);Ge(Zb,WU,Vm);Ge(LN,QU,[Hm,Vm]);Ge(IN,EN,Hm);Ge(XU,jN,Hm);Ge(UC,Nde,Hm);function eW(e){return Av.has(e)}function qc(e,t){const n=Av.get(e);return n&&n.metadata[t]}function BN(e){return qc(e,Kt)}function jd(e){return qc(e,Hm)}function WC(e){return qc(e,Vm)}function tW(e){return qc(e,fa)}function Pde(e){return qc(e,zN)}function nW(e){return qc(e,Ni)}function rW(e){return qc(e,zd)}const Dde=["clamp","base","constant","exponent"];function iW(e,t){const n=t[0],r=ze(t)-n;return function(i){return e(n+i*r)}}function Jb(e,t,n){return AN(UN(t||"rgb",n),e)}function oW(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function sW(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?qn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=Ge(o)().domain([t,n]).range([0,1]),Dde.forEach(a=>e[a]?s[a](e[a]()):0),s)}function UN(e,t){const n=Zfe[Ide(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Ide(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Lde={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},zde={accent:vde,category10:yde,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:xde,observable10:bde,paired:wde,pastel1:Ede,pastel2:Sde,set1:_de,set2:Cde,set3:kde,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function aW(e){if(W(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function lW(e,t){for(const n in e)WN(n,t(e[n]))}const OD={};lW(zde,aW);lW(Lde,e=>Jb(aW(e)));function WN(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(OD[e]=t,this):OD[e]}const a1="symbol",jde="discrete",Bde="gradient",Ude=e=>W(e)?e.map(t=>String(t)):String(e),Wde=(e,t)=>e[1]-t[1],qde=(e,t)=>t[1]-e[1];function qN(e,t,n){let r;return He(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Dm(e.domain())/n||1)+1))),ae(t)&&(r=t.step,t=t.interval),se(t)&&(t=e.type===pc?Ch(t):e.type==gc?kh(t):U("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function uW(e,t,n){let r=e.range(),i=r[0],o=ze(r),s=Wde;if(i>o&&(r=o,o=i,i=r,s=qde),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],ze(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function HN(e,t){return e.bins?uW(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function cW(e,t,n,r,i,o){const s=t.type;let a=Ude;if(s===pc||i===pc)a=e.timeFormat(r);else if(s===gc||i===gc)a=e.utcFormat(r);else if(tW(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=fW(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function fW(e,t,n){const r=HN(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const qC={[zd]:"quantiles",[Qb]:"thresholds",[Zb]:"domain"},dW={[zd]:"quantiles",[Qb]:"domain"};function hW(e,t){return e.bins?Gde(e.bins):e.type===fa?fW(e,t,!0):qC[e.type]?Vde(e[qC[e.type]]()):HN(e,t)}function Hde(e,t,n){const r=t[dW[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function Vde(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Gde(e){const t=e.slice(0,-1);return t.max=ze(e),t}const Yde=e=>qC[e.type]||e.bins;function pW(e,t,n,r,i,o,s){const a=dW[t.type]&&o!==pc&&o!==gc?Hde(e,t,i):cW(e,t,n,i,o,s);return r===a1&&Yde(t)?Xde(a):r===jde?Kde(a):Qde(a)}const Xde=e=>(t,n,r)=>{const i=PD(r[n+1],PD(r.max,1/0)),o=DD(t,e),s=DD(i,e);return o&&s?o+" – "+s:s?"< "+s:"≥ "+o},PD=(e,t)=>e??t,Kde=e=>(t,n)=>n?e(t):null,Qde=e=>t=>e(t),DD=(e,t)=>Number.isFinite(e)?t(e):null;function Zde(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+ze(t),o=i-r;if(e.type===Zb){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function Jde(e,t,n,r){const i=r||t.type;return se(n)&&Pde(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===pc?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===gc?e.utcFormat("%A, %d %B %Y, %X UTC"):pW(e,t,5,null,n,r,!0)}function gW(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Jde(e,t,n.format,n.formatType);if(WC(t.type)){const o=hW(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(jd(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(ze(o))}`}}let mW=0;function ehe(){mW=0}const $v="p_";function VN(e){return e&&e.gradient}function yW(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?$v:"";return i||(i=e.id="gradient_"+mW++,r==="radial"?(e.x1=No(e.x1,.5),e.y1=No(e.y1,.5),e.r1=No(e.r1,0),e.x2=No(e.x2,.5),e.y2=No(e.y2,.5),e.r2=No(e.r2,.5),o=$v):(e.x1=No(e.x1,0),e.y1=No(e.y1,0),e.x2=No(e.x2,1),e.y2=No(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function No(e,t){return e??t}function vW(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const ID={basis:{curve:Kce},"basis-closed":{curve:Qce},"basis-open":{curve:Zce},bundle:{curve:Jce,tension:"beta",value:.85},cardinal:{curve:efe,tension:"tension",value:0},"cardinal-open":{curve:nfe,tension:"tension",value:0},"cardinal-closed":{curve:tfe,tension:"tension",value:0},"catmull-rom":{curve:rfe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ife,tension:"alpha",value:.5},"catmull-rom-open":{curve:ofe,tension:"alpha",value:.5},linear:{curve:yN},"linear-closed":{curve:sfe},monotone:{horizontal:lfe,vertical:afe},natural:{curve:ufe},step:{curve:cfe},"step-after":{curve:dfe},"step-before":{curve:ffe}};function GN(e,t,n){var r=fe(ID,e)&&ID[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const the={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},nhe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,rhe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,ihe=/^((\s+,?\s*)|(,\s*))/,ohe=/^[01]/;function Bd(e){const t=[];return(e.match(nhe)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=the[o],a=she(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function she(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?ohe:rhe,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(ihe);l!==null&&(i+=l[0].length)}return r}const Pl=Math.PI/180,ahe=1e-14,Mu=Math.PI/2,Bo=Math.PI*2,ff=Math.sqrt(3)/2;var RE={},FE={},xW=[].join;function lhe(e,t,n,r,i,o,s,a,l){const u=xW.call(arguments);if(RE[u])return RE[u];const c=s*Pl,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,g=d*(l-t)*.5-f*(a-e)*.5;let p=h*h/(n*n)+g*g/(r*r);p>1&&(p=Math.sqrt(p),n*=p,r*=p);const m=d/n,y=f/n,v=-f/r,x=d/r,b=m*a+y*l,w=v*a+x*l,S=m*e+y*t,E=v*e+x*t;let k=1/((S-b)*(S-b)+(E-w)*(E-w))-.25;k<0&&(k=0);let T=Math.sqrt(k);o==i&&(T=-T);const N=.5*(b+S)-T*(E-w),P=.5*(w+E)+T*(S-b),D=Math.atan2(w-P,b-N);let $=Math.atan2(E-P,S-N)-D;$<0&&o===1?$+=Bo:$>0&&o===0&&($-=Bo);const R=Math.ceil(Math.abs($/(Mu+.001))),I=[];for(let F=0;F<R;++F){const O=D+F*$/R,L=D+(F+1)*$/R;I[F]=[N,P,O,L,n,r,f,d]}return RE[u]=I}function uhe(e){const t=xW.call(e);if(FE[t])return FE[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,f=-l*a,d=l*s,h=u*a,g=Math.cos(i),p=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),x=Math.sin(v*.5),b=8/3*x*x/Math.sin(v),w=n+g-b*p,S=r+p+b*g,E=n+m,_=r+y,k=E+b*y,T=_-b*m;return FE[t]=[c*w+f*S,d*w+h*S,c*k+f*T,d*k+h*T,c*E+f*_,d*E+h*_]}const si=["l",0,0,0,0,0,0,0];function che(e,t,n){const r=si[0]=e[0];if(r==="a"||r==="A")si[1]=t*e[1],si[2]=n*e[2],si[3]=e[3],si[4]=e[4],si[5]=e[5],si[6]=t*e[6],si[7]=n*e[7];else if(r==="h"||r==="H")si[1]=t*e[1];else if(r==="v"||r==="V")si[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)si[i]=(i%2==1?t:n)*e[i];return si}function tm(e,t,n,r,i,o){var s,a=null,l=0,u=0,c=0,f=0,d,h,g,p,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,x=t.length;v<x;++v){switch(s=t[v],(i!==1||o!==1)&&(s=che(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+s[1]+n,u+s[2]+r,d+n,h+r),c=l+s[1],f=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"q":d=l+s[3],h=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-g,f=2*u-p):a[0]==="q"&&(c=2*l-c,f=2*u-f),g=c,p=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+s[1],f=u+s[2];break;case"T":d=s[1],h=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":LD(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":LD(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=s}}function LD(e,t,n,r){const i=lhe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=uhe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const zD=.5773502691896257,jD={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Bo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ff*n,i=r-n*zD,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ff*n,i=r-n*zD;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ff*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ff*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ff*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ff*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function bW(e){return fe(jD,e)?jD[e]:fhe(e)}var OE={};function fhe(e){if(!fe(OE,e)){const t=Bd(e);OE[e]={draw:function(n,r){tm(n,t,0,0,Math.sqrt(r)/2)}}}return OE[e]}const Fa=.448084975506;function dhe(e){return e.x}function hhe(e){return e.y}function phe(e){return e.width}function ghe(e){return e.height}function $s(e){return typeof e=="function"?e:()=>+e}function ay(e,t,n){return Math.max(t,Math.min(e,n))}function wW(){var e=dhe,t=hhe,n=phe,r=ghe,i=$s(0),o=i,s=i,a=i,l=null;function u(c,f,d){var h,g=f??+e.call(this,c),p=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,x=ay(+i.call(this,c),0,v),b=ay(+o.call(this,c),0,v),w=ay(+s.call(this,c),0,v),S=ay(+a.call(this,c),0,v);if(l||(l=h=jb()),x<=0&&b<=0&&w<=0&&S<=0)l.rect(g,p,m,y);else{var E=g+m,_=p+y;l.moveTo(g+x,p),l.lineTo(E-b,p),l.bezierCurveTo(E-Fa*b,p,E,p+Fa*b,E,p+b),l.lineTo(E,_-S),l.bezierCurveTo(E,_-Fa*S,E-Fa*S,_,E-S,_),l.lineTo(g+w,_),l.bezierCurveTo(g+Fa*w,_,g,_-Fa*w,g,_-w),l.lineTo(g,p+x),l.bezierCurveTo(g,p+Fa*x,g+Fa*x,p,g+x,p),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=$s(c),u):e},u.y=function(c){return arguments.length?(t=$s(c),u):t},u.width=function(c){return arguments.length?(n=$s(c),u):n},u.height=function(c){return arguments.length?(r=$s(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=$s(c),o=f!=null?$s(f):i,a=d!=null?$s(d):i,s=h!=null?$s(h):o,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function EW(){var e,t,n,r,i=null,o,s,a,l;function u(f,d,h){const g=h/2;if(o){var p=a-d,m=f-s;if(p||m){var y=Math.hypot(p,m),v=(p/=y)*l,x=(m/=y)*l,b=Math.atan2(m,p);i.moveTo(s-v,a-x),i.lineTo(f-p*g,d-m*g),i.arc(f,d,g,b-Math.PI,b),i.lineTo(s+v,a+x),i.arc(s,a,l,b,b+Math.PI)}else i.arc(f,d,g,0,Bo);i.closePath()}else o=1;s=f,a=d,l=g}function c(f){var d,h=f.length,g,p=!1,m;for(i==null&&(i=m=jb()),d=0;d<=h;++d)!(d<h&&r(g=f[d],d,f))===p&&(p=!p)&&(o=0),p&&u(+e(g,d,f),+t(g,d,f),+n(g,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Gm(e,t){return e??t}const Ym=e=>e.x||0,Xm=e=>e.y||0,mhe=e=>e.width||0,yhe=e=>e.height||0,vhe=e=>(e.x||0)+(e.width||0),xhe=e=>(e.y||0)+(e.height||0),bhe=e=>e.startAngle||0,whe=e=>e.endAngle||0,Ehe=e=>e.padAngle||0,She=e=>e.innerRadius||0,_he=e=>e.outerRadius||0,Che=e=>e.cornerRadius||0,khe=e=>Gm(e.cornerRadiusTopLeft,e.cornerRadius)||0,Ahe=e=>Gm(e.cornerRadiusTopRight,e.cornerRadius)||0,$he=e=>Gm(e.cornerRadiusBottomRight,e.cornerRadius)||0,The=e=>Gm(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Nhe=e=>Gm(e.size,64),Mhe=e=>e.size||1,ew=e=>e.defined!==!1,Rhe=e=>bW(e.shape||"circle"),Fhe=Gce().startAngle(bhe).endAngle(whe).padAngle(Ehe).innerRadius(She).outerRadius(_he).cornerRadius(Che),Ohe=QB().x(Ym).y1(Xm).y0(xhe).defined(ew),Phe=QB().y(Xm).x1(Ym).x0(vhe).defined(ew),Dhe=KB().x(Ym).y(Xm).defined(ew),Ihe=wW().x(Ym).y(Xm).width(mhe).height(yhe).cornerRadius(khe,Ahe,$he,The),Lhe=Xce().type(Rhe).size(Nhe),zhe=EW().x(Ym).y(Xm).defined(ew).size(Mhe);function YN(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function jhe(e,t){return Fhe.context(e)(t)}function Bhe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Phe:Ohe).curve(GN(r,n.orient,n.tension)).context(e)(t)}function Uhe(e,t){const n=t[0],r=n.interpolate||"linear";return Dhe.curve(GN(r,n.orient,n.tension)).context(e)(t)}function Nh(e,t,n,r){return Ihe.context(e)(t,n,r)}function Whe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function qhe(e,t){return Lhe.context(e)(t)}function Hhe(e,t){return zhe.context(e)(t)}var SW=1;function Vhe(){SW=1}function XN(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+SW++),s=i.clipping[o]||(i.clipping[o]={id:o});return $e(r)?s.path=r(null):YN(n)?s.path=Nh(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Bt(e){this.clear(),e&&this.union(e)}Bt.prototype={clone(){return new Bt(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function tw(e){this.mark=e,this.bounds=this.bounds||new Bt}function nw(e){tw.call(this,e),this.items=this.items||[]}te(nw,tw);class _W{constructor(t){this._pending=0,this._loader=t||$b()}pending(){return this._pending}sanitizeURL(t){const n=this;return BD(n),n._loader.sanitize(t,{context:"href"}).then(r=>(fp(n),r)).catch(()=>(fp(n),null))}loadImage(t){const n=this,r=hfe();return BD(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=fe(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>fp(n),s.onerror=()=>fp(n),s.src=o,s}).catch(i=>(fp(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function BD(e){e._pending+=1}function fp(e){e._pending-=1}function ya(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Ghe(t,r):0))}return e}function Ghe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Yhe=Bo-1e-8;let rw,l1,u1,ju,HC,c1,VC,GC;const rl=(e,t)=>rw.add(e,t),f1=(e,t)=>rl(l1=e,u1=t),UD=e=>rl(e,rw.y1),WD=e=>rl(rw.x1,e),Ru=(e,t)=>HC*e+VC*t,Fu=(e,t)=>c1*e+GC*t,PE=(e,t)=>rl(Ru(e,t),Fu(e,t)),DE=(e,t)=>f1(Ru(e,t),Fu(e,t));function Km(e,t){return rw=e,t?(ju=t*Pl,HC=GC=Math.cos(ju),c1=Math.sin(ju),VC=-c1):(HC=GC=1,ju=c1=VC=0),Xhe}const Xhe={beginPath(){},closePath(){},moveTo:DE,lineTo:DE,rect(e,t,n,r){ju?(PE(e+n,t),PE(e+n,t+r),PE(e,t+r),DE(e,t)):(rl(e+n,t+r),f1(e,t))},quadraticCurveTo(e,t,n,r){const i=Ru(e,t),o=Fu(e,t),s=Ru(n,r),a=Fu(n,r);qD(l1,i,s,UD),qD(u1,o,a,WD),f1(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=Ru(e,t),a=Fu(e,t),l=Ru(n,r),u=Fu(n,r),c=Ru(i,o),f=Fu(i,o);HD(l1,s,l,c,UD),HD(u1,a,u,f,WD),f1(c,f)},arc(e,t,n,r,i,o){if(r+=ju,i+=ju,l1=n*Math.cos(i)+e,u1=n*Math.sin(i)+t,Math.abs(i-r)>Yhe)rl(e-n,t-n),rl(e+n,t+n);else{const s=u=>rl(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%Bo,r<0&&(r+=Bo),i=i%Bo,i<0&&(i+=Bo),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Bo,a=r-r%Mu,l=0;l<4&&a>i;++l,a-=Mu)s(a);else for(a=r-r%Mu+Mu,l=0;l<4&&a<i;++l,a=a+Mu)s(a)}}};function qD(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function HD(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(o)>ahe?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&i(VD(l,e,t,n,r)),0<u&&u<1&&i(VD(u,e,t,n,r))}function VD(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var _l=(_l=Sl(1,1))?_l.getContext("2d"):null;const YC=new Bt;function KN(e){return function(t,n){if(!_l)return!0;e(_l,t),YC.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=YC;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(_l.isPointInPath(l,a))return!0;return!1}}function QN(e,t){return t.contains(e.x||0,e.y||0)}function CW(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(YC.set(n,r,n+i,r+o))}function kW(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return jf(t,n,r,i,o)}function jf(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,g,p,m;for(m=0;m<4;++m){if(m===0&&(h=-u,g=-(o-t)),m===1&&(h=u,g=a-t),m===2&&(h=-c,g=-(s-n)),m===3&&(h=c,g=l-n),Math.abs(h)<1e-10&&g<0)return!1;if(p=g/h,h<0){if(p>d)return!1;p>f&&(f=p)}else if(h>0){if(p<f)return!1;p<d&&(d=p)}}return!0}function Ud(e,t){e.globalCompositeOperation=t.blend||"source-over"}function zi(e,t){return e??t}function GD(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Khe(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+zi(t.x1,.5)*r,n.y1+zi(t.y1,.5)*i,Math.max(r,i)*zi(t.r1,0),n.x1+zi(t.x2,.5)*r,n.y1+zi(t.y2,.5)*i,Math.max(r,i)*zi(t.r2,.5));else{const s=zi(t.x1,0),a=zi(t.y1,0),l=zi(t.x2,1),u=zi(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=Sl(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=GD(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return GD(o,t.stops)}function AW(e,t,n){return VN(n)?Khe(e,n,t.bounds):n}function Tv(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=AW(e,t,t.fill),!0):!1}var Qhe=[];function Wd(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=AW(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Qhe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Zhe(e,t){return e.zindex-t.zindex||e.index-t.index}function ZN(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Zhe)}function go(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=ZN(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Nv(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=ZN(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function JN(e){return function(t,n,r){go(n,i=>{(!r||r.intersects(i.bounds))&&$W(e,t,i,i)})}}function Jhe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&$W(e,t,n.items[0],n.items)}}function $W(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Ud(t,n),n.fill&&Tv(t,n,i)&&t.fill(),n.stroke&&Wd(t,n,i)&&t.stroke()))}function iw(e){return e=e||_i,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,Nv(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function Qm(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function eM(e){return iw(Qm(e))}function Ju(e,t){return"translate("+e+","+t+")"}function tM(e){return"rotate("+e+")"}function epe(e,t){return"scale("+e+","+t+")"}function TW(e){return Ju(e.x||0,e.y||0)}function tpe(e){return Ju(e.x||0,e.y||0)+(e.angle?" "+tM(e.angle):"")}function npe(e){return Ju(e.x||0,e.y||0)+(e.angle?" "+tM(e.angle):"")+(e.scaleX||e.scaleY?" "+epe(e.scaleX||1,e.scaleY||1):"")}function nM(e,t,n){function r(s,a){s("transform",tpe(a)),s("d",t(null,a))}function i(s,a){return t(Km(s,a.angle),a),ya(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=Pl),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:JN(o),pick:eM(o),isect:n||KN(o)}}var rpe=nM("arc",jhe);function ipe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function ope(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function spe(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function rM(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(Km(l),c),ya(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=Qm(o);function a(l,u,c,f,d,h){var g=u.items,p=u.bounds;return!g||!g.length||p&&!p.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,g,c,f)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Jhe(o),pick:a,isect:QN,tip:n}}var ape=rM("area",Bhe,ipe);function lpe(e,t){var n=t.clip;e.save(),$e(n)?(e.beginPath(),n(e),e.clip()):NW(e,t.group)}function NW(e,t){e.beginPath(),YN(t)?Nh(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function MW(e){const t=zi(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function upe(e,t){e("transform",TW(t))}function RW(e,t){const n=MW(t);e("d",Nh(null,t,n,n))}function cpe(e,t){e("class","background"),e("aria-hidden",!0),RW(e,t)}function fpe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?RW(e,t):e("d","")}function dpe(e,t,n){const r=t.clip?XN(n,t,t):null;e("clip-path",r)}function hpe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ya(e,t),e.translate(t.x||0,t.y||0)}function nm(e,t,n,r){const i=MW(t);e.beginPath(),Nh(e,t,(n||0)+i,(r||0)+i)}const ppe=Qm(nm),gpe=Qm(nm,!1),mpe=Qm(nm,!0);function ype(e,t,n,r){go(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(nm(e,i,o,s),Ud(e,i),i.fill&&Tv(e,i,l)&&e.fill(),i.stroke&&!a&&Wd(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&NW(e,i),n&&n.translate(-o,-s),go(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(nm(e,i,o,s),Ud(e,i),Wd(e,i,l)&&e.stroke())})}function vpe(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return Nv(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,o))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),g=f+(l.height||0),p=l.clip;if(p&&(i<c||i>h||o<f||o>g))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,p&&YN(l)&&!mpe(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&gpe(e,l,s,a)?(e.restore(),l):(u=Nv(l,v=>xpe(v,c,f)?this.pick(v,n,r,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&ppe(e,l,s,a)&&(u=l),e.restore(),u||null)})}function xpe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var bpe={type:"group",tag:"g",nested:!1,attr:upe,bound:hpe,draw:ype,pick:vpe,isect:CW,content:dpe,background:cpe,foreground:fpe},rm={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function iM(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function oM(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function sM(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function ow(e,t){return e==="center"?t/2:e==="right"?t:0}function sw(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function wpe(e,t,n){const r=iM(t,n),i=oM(t,r),o=sM(t,r),s=(t.x||0)-ow(t.align,i),a=(t.y||0)-sw(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,rm["xmlns:xlink"],"xlink:href"),e("transform",Ju(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Epe(e,t){const n=t.image,r=oM(t,n),i=sM(t,n),o=(t.x||0)-ow(t.align,r),s=(t.y||0)-sw(t.baseline,i);return e.set(o,s,o+r,s+i)}function Spe(e,t,n){go(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=iM(r,this);let o=oM(r,i),s=sM(r,i);if(o===0||s===0)return;let a=(r.x||0)-ow(r.align,o),l=(r.y||0)-sw(r.baseline,s),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,l+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Ud(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var _pe={type:"image",tag:"image",nested:!1,attr:wpe,bound:Epe,draw:Spe,pick:iw(),isect:_i,get:iM,xOffset:ow,yOffset:sw},Cpe=rM("line",Uhe,ope);function kpe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",npe(t)),e("d",t.path)}function d1(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Pl,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Bd(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),tm(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):tm(e,l,r,i,o,s)}function Ape(e,t){return d1(Km(e,t.angle),t)?e.set(0,0,0,0):ya(e,t,!0)}var $pe={type:"path",tag:"path",nested:!1,attr:kpe,bound:Ape,draw:JN(d1),pick:eM(d1),isect:KN(d1)};function Tpe(e,t){e("d",Nh(null,t))}function Npe(e,t){var n,r;return ya(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function YD(e,t){e.beginPath(),Nh(e,t)}var Mpe={type:"rect",tag:"path",nested:!1,attr:Tpe,bound:Npe,draw:JN(YD),pick:eM(YD),isect:CW};function Rpe(e,t){e("transform",TW(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Fpe(e,t){var n,r;return ya(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function FW(e,t,n){var r,i,o,s;return t.stroke&&Wd(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function Ope(e,t,n){go(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&FW(e,r,i)&&(Ud(e,r),e.stroke())}})}function Ppe(e,t,n,r){return e.isPointInStroke?FW(e,t,1)&&e.isPointInStroke(n,r):!1}var Dpe={type:"rule",tag:"line",nested:!1,attr:Rpe,bound:Fpe,draw:Ope,pick:iw(Ppe),isect:kW},Ipe=nM("shape",Whe),Lpe=nM("symbol",qhe,QN);const XD=B7();var Gr={height:ys,measureWidth:aM,estimateWidth:Mv,width:Mv,canvas:OW};OW(!0);function OW(e){Gr.width=e&&_l?aM:Mv}function Mv(e,t){return PW(Il(e,t),ys(e))}function PW(e,t){return~~(.8*e.length*t)}function aM(e,t){return ys(e)<=0||!(t=Il(e,t))?0:DW(t,aw(e))}function DW(e,t){const n=`(${t}) ${e}`;let r=XD.get(n);return r===void 0&&(_l.font=t,r=_l.measureText(e).width,XD.set(n,r)),r}function ys(e){return e.fontSize!=null?+e.fontSize||0:11}function Dl(e){return e.lineHeight!=null?e.lineHeight:ys(e)+2}function zpe(e){return W(e)?e.length>1?e:e[0]:e}function Zm(e){return zpe(e.lineBreak&&e.text&&!W(e.text)?e.text.split(e.lineBreak):e.text)}function lM(e){const t=Zm(e);return(W(t)?t.length-1:0)*Dl(e)}function Il(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Bpe(e,n):n}function jpe(e){if(Gr.width===aM){const t=aw(e);return n=>DW(n,t)}else if(Gr.width===Mv){const t=ys(e);return n=>PW(n,t)}else return t=>Gr.width(e,t)}function Bpe(e,t){var n=+e.limit,r=jpe(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Jm(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function aw(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ys(e)+"px "+Jm(e,t)}function uM(e){var t=e.baseline,n=ys(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Dl(e):t==="line-bottom"?.29*n-.5*Dl(e):0)}const Upe={left:"start",center:"middle",right:"end"},fg=new Bt;function lw(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Mu,t+=r*Math.cos(i),n+=r*Math.sin(i)),fg.x1=t,fg.y1=n,fg}function Wpe(e,t){var n=t.dx||0,r=(t.dy||0)+uM(t),i=lw(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",Upe[t.align]||"start"),a?(l=Ju(o,s)+" "+tM(a),(n||r)&&(l+=" "+Ju(n,r))):l=Ju(o+n,s+r),e("transform",l)}function cM(e,t,n){var r=Gr.height(t),i=t.align,o=lw(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+uM(t)-Math.round(.8*r),c=Zm(t),f;if(W(c)?(r+=Dl(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Gr.width(t,h)),0)):f=Gr.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*Pl,s,a);else if(n===2)return e.rotatedPoints(t.angle*Pl,s,a);return e}function qpe(e,t,n){go(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=aw(r),e.textAlign=r.align||"left",o=lw(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*Pl),s=a=0),s+=r.dx||0,a+=(r.dy||0)+uM(r),c=Zm(r),Ud(e,r),W(c))for(u=Dl(r),l=0;l<c.length;++l)f=Il(r,c[l]),r.fill&&Tv(e,r,i)&&e.fillText(f,s,a),r.stroke&&Wd(e,r,i)&&e.strokeText(f,s,a),a+=u;else f=Il(r,c),r.fill&&Tv(e,r,i)&&e.fillText(f,s,a),r.stroke&&Wd(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function Hpe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=lw(t),a=s.x1,l=s.y1,u=cM(fg,t,1),c=-t.angle*Pl,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*l),g=d*i+f*o+(l-d*a-f*l);return u.contains(h,g)}function Vpe(e,t){const n=cM(fg,e,2);return jf(t,n[0],n[1],n[2],n[3])||jf(t,n[0],n[1],n[4],n[5])||jf(t,n[4],n[5],n[6],n[7])||jf(t,n[2],n[3],n[6],n[7])}var Gpe={type:"text",tag:"text",nested:!1,attr:Wpe,bound:cM,draw:qpe,pick:iw(Hpe),isect:Vpe},Ype=rM("trail",Hhe,spe),ei={arc:rpe,area:ape,group:bpe,image:_pe,line:Cpe,path:$pe,rect:Mpe,rule:Dpe,shape:Ipe,symbol:Lpe,text:Gpe,trail:Ype};function XC(e,t,n){var r=ei[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Bt),e,n)}var KD={mark:null};function IW(e,t,n){var r=ei[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,c;if(r.nested)return s?u=o[0]:(KD.mark=e,u=KD),c=XC(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Bt,s)for(a=0,l=o.length;a<l;++a)t.union(XC(o[a],i,n));return e.bounds=t}const Xpe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function LW(e,t){return JSON.stringify(e,Xpe,t)}function zW(e){const t=typeof e=="string"?JSON.parse(e):e;return jW(t)}function jW(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&jW(n[i]);return t&&IW(e),e}class BW{constructor(t){arguments.length?this.root=zW(t):(this.root=QD({marktype:"group",name:"root",role:"frame"}),this.root.items=[new nw(this.root)])}toJSON(t){return LW(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=QD(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function QD(e,t){const n={bounds:new Bt,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function il(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function fM(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function qt(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=il(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function fi(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function UW(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function uw(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Kpe(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=ei[i.marktype]).tip){for(s=uw(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let dM=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||$b(),this._tooltip=n||Qpe}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=il(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Kpe(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function Qpe(e,t,n,r){e.element().setAttribute("title",r||"")}class e0{constructor(t){this._el=null,this._bgcolor=null,this._loader=new _W(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Zpe="keydown",Jpe="keypress",ege="keyup",WW="dragenter",h1="dragleave",qW="dragover",KC="pointerdown",tge="pointerup",Rv="pointermove",p1="pointerout",HW="pointerover",QC="mousedown",nge="mouseup",VW="mousemove",Fv="mouseout",GW="mouseover",Ov="click",rge="dblclick",ige="wheel",YW="mousewheel",Pv="touchstart",Dv="touchmove",Iv="touchend",oge=[Zpe,Jpe,ege,WW,h1,qW,KC,tge,Rv,p1,HW,QC,nge,VW,Fv,GW,Ov,rge,ige,YW,Pv,Dv,Iv],ZC=Rv,dg=Fv,JC=Ov;class t0 extends dM{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=oge,this.pointermove=JD([Rv,VW],[HW,GW],[p1,Fv]),this.dragover=JD([qW],[WW],[h1]),this.pointerout=e5([p1,Fv]),this.dragleave=e5([h1])}initialize(t,n,r){return this._canvas=t&&fM(t,"canvas"),[Ov,QC,KC,Rv,p1,h1].forEach(i=>ZD(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(YW,t)}pointerdown(t){this._down=this._active,this.fire(KC,t)}mousedown(t){this._down=this._active,this.fire(QC,t)}click(t){this._down===this._active&&(this.fire(Ov,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Pv,t,!0)}touchmove(t){this.fire(Dv,t,!0)}touchend(t){this.fire(Iv,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===JC&&i&&i.href?this.handleHref(n,i,i.href):(t===ZC||t===dg)&&this.handleTooltip(n,i,t!==dg),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(ZD(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=uw(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return ei[t.marktype].pick.call(this,s,t,n,r,i,o)}}const sge=e=>e===Pv||e===Dv||e===Iv?[Pv,Dv,Iv]:[e];function ZD(e,t){sge(t).forEach(n=>age(e,n))}function age(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function zp(e,t,n){t.forEach(r=>e.fire(r,n))}function JD(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?zp(this,e,r):((!i||!i.exit)&&zp(this,n,r),this._active=o,zp(this,t,r),zp(this,e,r))}}function e5(e){return function(t){zp(this,e,t),this._active=null}}function lge(){return typeof window<"u"&&window.devicePixelRatio||1}function uge(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?lge():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class Lv extends e0{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Bt,this._tempb=new Bt}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Sl(1,1,this._options.type),t&&this._canvas&&(fi(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)uge(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||U("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=cge(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):fge(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=ei[n.marktype];n.clip&&lpe(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const cge=(e,t,n)=>new Bt().set(0,0,t,n).translate(-e[0],-e[1]);function fge(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class XW extends dM{constructor(t,n){super(t,n);const r=this;r._hrefHandler=IE(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=IE(r,(i,o)=>{r.handleTooltip(i,o,i.type!==dg)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(JC,this._hrefHandler),i.removeEventListener(ZC,this._tooltipHandler),i.removeEventListener(dg,this._tooltipHandler)),this._svg=i=t&&fM(t,"svg"),i&&(i.addEventListener(JC,this._hrefHandler),i.addEventListener(ZC,this._tooltipHandler),i.addEventListener(dg,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:IE(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const IE=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},KW="aria-hidden",hM="aria-label",pM="role",gM="aria-roledescription",QW="graphics-object",mM="graphics-symbol",ZW=(e,t,n)=>({[pM]:e,[gM]:t,[hM]:n||void 0}),dge=ho(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),t5={axis:{desc:"axis",caption:gge},legend:{desc:"legend",caption:mge},"title-text":{desc:"title",caption:e=>`Title text '${r5(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${r5(e)}'`}},n5={ariaRole:pM,ariaRoleDescription:gM,description:hM};function JW(e,t){const n=t.aria===!1;if(e(KW,n||void 0),n||t.description==null)for(const r in n5)e(n5[r],void 0);else{const r=t.mark.marktype;e(hM,t.description),e(pM,t.ariaRole||(r==="group"?QW:mM)),e(gM,t.ariaRoleDescription||`${r} mark`)}}function eq(e){return e.aria===!1?{[KW]:!0}:dge[e.role]?null:t5[e.role]?pge(e,t5[e.role]):hge(e)}function hge(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return ZW(n?QW:mM,`${t} mark container`,e.description)}function pge(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return ZW(t.role||mM,t.desc,n.description||r(n))}catch{return null}}function r5(e){return le(e.text).join(" ")}function gge(e){const t=e.datum,n=e.orient,r=t.title?tq(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${jd(a)?"discrete":a} scale with ${gW(s,o,e)}`}function mge(e){const t=e.datum,n=t.title?tq(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return vge(r)+(n?` titled '${n}'`:"")+` for ${yge(o)} with ${gW(l,a,e)}`}function tq(e){try{return le(ze(e.items).items[0].text).join(" ")}catch{return null}}function yge(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+ze(e)}function vge(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const nq=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),xge=e=>nq(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function yM(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${xge(u)}"`),a),a={open(l,...u){o(l),t="<"+l;for(const c of u)for(const f in c)s(f,c[f]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=nq(l),a),toString:()=>e};return a}const rq=e=>iq(yM(),e)+"";function iq(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):iq(e,r)}return e.close()}const zv={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},jv={blend:"mix-blend-mode"},oq={fill:"none","stroke-miterlimit":10},dp=0,i5="http://www.w3.org/2000/xmlns/",Wt=rm.xmlns;class vM extends e0{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=qt(t,0,"svg",Wt),this._svg.setAttributeNS(i5,"xmlns",Wt),this._svg.setAttributeNS(i5,"xmlns:xlink",rm["xmlns:xlink"]),this._svg.setAttribute("version",rm.version),this._svg.setAttribute("class","marks"),fi(t,1),this._root=qt(this._svg,dp,"g",Wt),ol(this._root,oq),fi(this._svg,dp+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(ol(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=qt(t,dp,"rect",Wt),ol(r,{width:this._width,height:this._height,fill:n}));const i=rq(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),fi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=ei[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,o5(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,o5(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=ei[s],l=n.interactive===!1?"none":null,u=a.tag==="g",c=s5(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return fi(c,0),n._svg;c.setAttribute("class",UW(n));const f=eq(n);for(const p in f)Yn(c,p,f[p]);u||Yn(c,"pointer-events",l),Yn(c,"clip-path",n.clip?XN(this,n,n.group):null);let d=null,h=0;const g=p=>{const m=this.isDirty(p),y=s5(p,c,d,a.tag,o);m&&(this._update(a,y,p),u&&Ege(this,y,p,i)),d=y,++h};return a.nested?n.items.length&&g(n.items[0]):go(n,g),fi(c,h),c}_update(t,n,r){Gs=n,Rn=n.__values__,JW(hg,r),t.attr(hg,r,this);const i=_ge[t.type];i&&i.call(this,t,n,r),Gs&&this.style(Gs,r)}style(t,n){if(n!=null){for(const r in zv){let i=r==="font"?Jm(n):n[r];if(i===Rn[r])continue;const o=zv[r];i==null?t.removeAttribute(o):(VN(i)&&(i=yW(i,this._defs.gradient,sq())),t.setAttribute(o,i+"")),Rn[r]=i}for(const r in jv)g1(t,jv[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=qt(t,dp+1,"defs",Wt)),i=bge(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=qt(t,dp+1,"defs",Wt)),i=wge(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):fi(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function o5(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function bge(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=qt(e,n++,"pattern",Wt);ol(s,{id:$v+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=qt(s,0,"rect",Wt),ol(s,{width:1,height:1,fill:`url(${sq()}#${t.id})`}),e=qt(e,n++,"radialGradient",Wt),ol(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=qt(e,n++,"linearGradient",Wt),ol(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=qt(e,r,"stop",Wt),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return fi(e,r),n}function wge(e,t,n){let r;return e=qt(e,n,"clipPath",Wt),e.setAttribute("id",t.id),t.path?(r=qt(e,0,"path",Wt),r.setAttribute("d",t.path)):(r=qt(e,0,"rect",Wt),ol(r,{x:0,y:0,width:t.width,height:t.height})),fi(e,1),n+1}function Ege(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;go(n,s=>{i=e.mark(t,s,i,r),++o}),fi(t,1+o)}function s5(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=il(s,r,Wt),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=il(s,"path",Wt);o.appendChild(a),a.__data__=e;const l=il(s,"g",Wt);o.appendChild(l),l.__data__=e;const u=il(s,"path",Wt);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Sge(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Sge(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Gs=null,Rn=null;const _ge={group(e,t,n){const r=Gs=t.childNodes[2];Rn=r.__values__,e.foreground(hg,n,this),Rn=t.__values__,Gs=t.childNodes[1],e.content(hg,n,this);const i=Gs=t.childNodes[0];e.background(hg,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Rn.events&&(Yn(r,"pointer-events",o),Yn(i,"pointer-events",o),Rn.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Yn(r,"display",null),this.style(i,n),Yn(i,"stroke",null),s&&(n.fill=null),Rn=r.__values__,this.style(r,n),s&&(n.fill=s),Gs=null}else Yn(r,"display","none")},image(e,t,n){n.smooth===!1?(g1(t,"image-rendering","optimizeSpeed"),g1(t,"image-rendering","pixelated")):g1(t,"image-rendering",null)},text(e,t,n){const r=Zm(n);let i,o,s,a;W(r)?(o=r.map(l=>Il(n,l)),i=o.join(`
`),i!==Rn.text&&(fi(t,0),s=t.ownerDocument,a=Dl(n),o.forEach((l,u)=>{const c=il(s,"tspan",Wt);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Rn.text=i)):(o=Il(n,r),o!==Rn.text&&(t.textContent=o,Rn.text=o)),Yn(t,"font-family",Jm(n)),Yn(t,"font-size",ys(n)+"px"),Yn(t,"font-style",n.fontStyle),Yn(t,"font-variant",n.fontVariant),Yn(t,"font-weight",n.fontWeight)}};function hg(e,t,n){t!==Rn[e]&&(n?Cge(Gs,e,t,n):Yn(Gs,e,t),Rn[e]=t)}function g1(e,t,n){n!==Rn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Rn[t]=n)}function ol(e,t){for(const n in t)Yn(e,n,t[n])}function Yn(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Cge(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function sq(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class aq extends e0{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=yM();n.open("svg",Ae({},rm,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",oq,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=ei[n.marktype],i=r.tag,o=[JW,r.attr];t.open("g",{class:UW(n),"clip-path":n.clip?XN(this,n,n.group):null},eq(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=Zm(a);if(W(u)){const c={x:0,dy:Dl(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(Il(a,u[f])).close()}else t.text(Il(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),go(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):go(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&kge(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:$v+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function kge(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Jm(t),e["font-size"]=ys(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in zv){let a=t[s];const l=zv[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(VN(a)&&(a=yW(a,i.gradient,"")),e[l]=a)}for(const s in jv){const a=t[s];a!=null&&(o=o||[],o.push(`${jv[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const Gi={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Age(e){Gi.svgMarkTypes=e.svgMarkTypes??["text"],Gi.svgOnTop=e.svgOnTop??!0,Gi.debug=e.debug??!1}class ek extends e0{constructor(t){super(t),this._svgRenderer=new vM(t),this._canvasRenderer=new Lv(t)}initialize(t,n,r,i,o){this._root_el=qt(t,0,"div");const s=qt(this._root_el,0,"div"),a=qt(this._root_el,1,"div");return this._root_el.style.position="relative",Gi.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Gi.svgOnTop?a:s,this._canvasEl=Gi.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return Gi.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Gi.svgMarkTypes.includes(o));this._svgRenderer.render(t,Gi.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Gi.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class lq extends t0{constructor(t,n){super(t,n)}initialize(t,n,r){const i=qt(qt(t,0,"div"),Gi.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const uq="canvas",cq="hybrid",fq="png",dq="svg",hq="none",sl={Canvas:uq,PNG:fq,SVG:dq,Hybrid:cq,None:hq},mc={};mc[uq]=mc[fq]={renderer:Lv,headless:Lv,handler:t0};mc[dq]={renderer:vM,headless:aq,handler:XW};mc[cq]={renderer:ek,headless:ek,handler:lq};mc[hq]={};function cw(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(mc[e]=t,this):mc[e]}function pq(e,t,n){const r=[],i=new Bt().union(t),o=e.marktype;return o?gq(e,i,n,r):o==="group"?mq(e,i,n,r):U("Intersect scene must be mark node or group item.")}function gq(e,t,n,r){if($ge(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)mq(i[a],t,n,r);else for(const l=ei[o].isect;a<s;++a){const u=i[a];yq(u,t,l)&&r.push(u)}}return r}function $ge(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function mq(e,t,n,r){n&&n(e.mark)&&yq(e,t,ei.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)gq(i[l],t,n,r);t.translate(s,a)}return r}function yq(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const LE=new Bt;function vq(e){const t=e.clip;if($e(t))t(Km(LE.clear()));else if(t)LE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(LE)}const Tge=1e-9;function xM(e,t,n){return e===t?!0:n==="path"?xq(e,t):e instanceof Date&&t instanceof Date?+e==+t:He(e)&&He(t)?Math.abs(e-t)<=Tge:!e||!t||!ae(e)&&!ae(t)?e==t:Nge(e,t)}function xq(e,t){return xM(Bd(e),Bd(t))}function Nge(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!xM(e[i],t[i],i))return!1;return typeof e==typeof t}function Mge(){Vhe(),ehe()}const qd="top",Ji="left",eo="right",Ll="bottom",Rge="top-left",Fge="top-right",Oge="bottom-left",Pge="bottom-right",bM="start",tk="middle",Kn="end",Dge="x",Ige="y",fw="group",wM="axis",EM="title",Lge="frame",zge="scope",SM="legend",bq="row-header",wq="row-footer",Eq="row-title",Sq="column-header",_q="column-footer",Cq="column-title",jge="padding",Bge="symbol",kq="fit",Aq="fit-x",$q="fit-y",Uge="pad",_M="none",ly="all",nk="each",CM="flush",al="column",ll="row";function Tq(e){z.call(this,null,e)}te(Tq,z,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=ei[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=uy(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===fw||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(uy(u,s))),r.role){case wM:case SM:case EM:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(uy(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(uy(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return vq(r),t.modifies("bounds")}});function uy(e,t,n){return t(e.bounds.clear(),e,n)}const a5=":vega_identifier:";function kM(e){z.call(this,0,e)}kM.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};te(kM,z,{transform(e,t){const n=Wge(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Wge(e){return e._signals[a5]||(e._signals[a5]=e.add(0))}function Nq(e){z.call(this,null,e)}te(Nq,z,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,qge(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===fw?nw:tw;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function qge(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Mq(e){z.call(this,null,e)}const l5={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Rq(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Rq=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),u5=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(Rq(i,o=e[n].bounds,t))return!0},Hge=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Vge=(e,t,n)=>{var r=e.range(),i=new Bt;return t===qd||t===Ll?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},c5=e=>(e.forEach(t=>t.opacity=1),e),f5=(e,t)=>e.reflow(t.modified()).modifies("opacity");te(Mq,z,{transform(e,t){const n=l5[e.method]||l5.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(c5(i),t=f5(t,e)),t;if(i=i.filter(Hge),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=c5(i),t=f5(t,e),o.length>=3&&u5(o,r)){do o=n(o,r);while(o.length>=3&&u5(o,r));o.length<3&&!ze(i).opacity&&(o.length>1&&(ze(o).opacity=0),ze(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Vge(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function Fq(e){z.call(this,null,e)}te(Fq,z,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Nn=new Bt;function Bf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Gge(e){var t=e.items[0].orient;return t===Ji||t===eo}function Yge(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Xge(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=Yge(o),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,g=o.title&&i.items[l[2]].items[0],p=i.titlePadding,m=i.bounds,y=g&&lM(g),v=0,x=0,b,w;switch(Nn.clear().union(m),m.clear(),(b=l[0])>-1&&m.union(i.items[b].bounds),(b=l[1])>-1&&m.union(i.items[b].bounds),a){case qd:v=f||0,x=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),g&&cy(e,g,w,p,y,0,-1,m);break;case Ji:v=-c,x=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),g&&cy(e,g,w,p,y,1,-1,m);break;case eo:v=n+c,x=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,u),g&&cy(e,g,w,p,y,1,1,m);break;case Ll:v=f||0,x=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,w),g&&cy(e,g,w,p,0,0,1,m);break;default:v=i.x,x=i.y}return ya(m.translate(v,x),i),Bf(i,"x",v+s)|Bf(i,"y",x+s)&&(i.bounds=Nn,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function cy(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const d5=(e,t)=>Math.floor(Math.min(e,t)),h5=(e,t)=>Math.ceil(Math.max(e,t));function Kge(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===fw)switch(i.role){case wM:case SM:case EM:break;case bq:s.rowheaders.push(...o);break;case wq:s.rowfooters.push(...o);break;case Sq:s.colheaders.push(...o);break;case _q:s.colfooters.push(...o);break;case Eq:s.rowtitle=o[0];break;case Cq:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Qge(e){return new Bt().set(0,0,e.width||0,e.height||0)}function Zge(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function yt(e,t,n){const r=ae(e)?e[t]:e;return r??(n!==void 0?n:0)}function p5(e){return e<0?Math.ceil(-e):0}function Oq(e,t,n){var r=!n.nodirty,i=n.bounds===CM?Qge:Zge,o=Nn.set(0,0,0,0),s=yt(n.align,al),a=yt(n.align,ll),l=yt(n.padding,al),u=yt(n.padding,ll),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),g=Array(c),p=0,m=Array(d),y=Array(f),v=0,x=Array(d),b=Array(d),w=Array(d),S,E,_,k,T,N,P,D,M,$,R;for(E=0;E<c;++E)g[E]=0;for(E=0;E<f;++E)y[E]=0;for(E=0;E<d;++E)N=t[E],T=w[E]=i(N),N.x=N.x||0,x[E]=0,N.y=N.y||0,b[E]=0,_=E%c,k=~~(E/c),p=Math.max(p,P=Math.ceil(T.x2)),v=Math.max(v,D=Math.ceil(T.y2)),g[_]=Math.max(g[_],P),y[k]=Math.max(y[k],D),h[E]=l+p5(T.x1),m[E]=u+p5(T.y1),r&&e.dirty(t[E]);for(E=0;E<d;++E)E%c===0&&(h[E]=0),E<c&&(m[E]=0);if(s===nk)for(_=1;_<c;++_){for(R=0,E=_;E<d;E+=c)R<h[E]&&(R=h[E]);for(E=_;E<d;E+=c)h[E]=R+g[_-1]}else if(s===ly){for(R=0,E=0;E<d;++E)E%c&&R<h[E]&&(R=h[E]);for(E=0;E<d;++E)E%c&&(h[E]=R+p)}else for(s=!1,_=1;_<c;++_)for(E=_;E<d;E+=c)h[E]+=g[_-1];if(a===nk)for(k=1;k<f;++k){for(R=0,E=k*c,S=E+c;E<S;++E)R<m[E]&&(R=m[E]);for(E=k*c;E<S;++E)m[E]=R+y[k-1]}else if(a===ly){for(R=0,E=c;E<d;++E)R<m[E]&&(R=m[E]);for(E=c;E<d;++E)m[E]=R+v}else for(a=!1,k=1;k<f;++k)for(E=k*c,S=E+c;E<S;++E)m[E]+=y[k-1];for(M=0,E=0;E<d;++E)M=h[E]+(E%c?M:0),x[E]+=M-t[E].x;for(_=0;_<c;++_)for($=0,E=_;E<d;E+=c)$+=m[E],b[E]+=$-t[E].y;if(s&&yt(n.center,al)&&f>1)for(E=0;E<d;++E)T=s===ly?p:g[E%c],M=T-w[E].x2-t[E].x-x[E],M>0&&(x[E]+=M/2);if(a&&yt(n.center,ll)&&c!==1)for(E=0;E<d;++E)T=a===ly?v:y[~~(E/c)],$=T-w[E].y2-t[E].y-b[E],$>0&&(b[E]+=$/2);for(E=0;E<d;++E)o.union(w[E].translate(x[E],b[E]));switch(M=yt(n.anchor,Dge),$=yt(n.anchor,Ige),yt(n.anchor,al)){case Kn:M-=o.width();break;case tk:M-=o.width()/2}switch(yt(n.anchor,ll)){case Kn:$-=o.height();break;case tk:$-=o.height()/2}for(M=Math.round(M),$=Math.round($),o.clear(),E=0;E<d;++E)t[E].mark.bounds.clear();for(E=0;E<d;++E)N=t[E],N.x+=x[E]+=M,N.y+=b[E]+=$,o.union(N.mark.bounds.union(N.bounds.translate(x[E],b[E]))),r&&e.dirty(N);return o}function Jge(e,t,n){var r=Kge(t),i=r.marks,o=n.bounds===CM?eme:tme,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,g,p,m;const y=Oq(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(p=yt(n.headerBand,ll,null),c=fy(e,r.rowheaders,i,a,l,-yt(s,"rowHeader"),d5,0,o,"x1",0,a,1,p)),r.colheaders&&(p=yt(n.headerBand,al,null),f=fy(e,r.colheaders,i,a,a,-yt(s,"columnHeader"),d5,1,o,"y1",0,1,a,p)),r.rowfooters&&(p=yt(n.footerBand,ll,null),d=fy(e,r.rowfooters,i,a,l,yt(s,"rowFooter"),h5,0,o,"x2",a-1,a,1,p)),r.colfooters&&(p=yt(n.footerBand,al,null),h=fy(e,r.colfooters,i,a,a,yt(s,"columnFooter"),h5,1,o,"y2",u-a,1,a,p)),r.rowtitle&&(g=yt(n.titleAnchor,ll),m=yt(s,"rowTitle"),m=g===Kn?d+m:c-m,p=yt(n.titleBand,ll,.5),g5(e,r.rowtitle,m,0,y,p)),r.coltitle&&(g=yt(n.titleAnchor,al),m=yt(s,"columnTitle"),m=g===Kn?h+m:f-m,p=yt(n.titleBand,al,.5),g5(e,r.coltitle,m,1,y,p))}function eme(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function tme(e,t){return e.bounds[t]}function fy(e,t,n,r,i,o,s,a,l,u,c,f,d,h){var g=n.length,p=0,m=0,y,v,x,b,w,S,E,_,k;if(!g)return p;for(y=c;y<g;y+=f)n[y]&&(p=s(p,l(n[y],u)));if(!t.length)return p;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),p+=o,v=0,b=t.length;v<b;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,b=t.length;v<b;++v,y+=f){for(S=t[v],w=S.mark.bounds,x=y;x>=0&&(E=n[x])==null;x-=d);a?(_=h==null?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),k=p):(_=p,k=h==null?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),w.union(S.bounds.translate(_-(S.x||0),k-(S.y||0))),S.x=_,S.y=k,e.dirty(S),m=s(m,w[u])}return m}function g5(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function nme(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function rme(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function ime(e,t,n,r,i,o,s){const a=nme(n,t),l=rme(e,a("offset",0)),u=a("anchor",bM),c=u===Kn?1:u===tk?.5:0,f={align:nk,bounds:a("bounds",CM),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Ji:f.anchor={x:Math.floor(r.x1)-l,column:Kn,y:c*(s||r.height()+2*r.y1),row:u};break;case eo:f.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case qd:f.anchor={y:Math.floor(i.y1)-l,row:Kn,x:c*(o||i.width()+2*i.x1),column:u};break;case Ll:f.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case Rge:f.anchor={x:l,y:l};break;case Fge:f.anchor={x:o-l,y:l,column:Kn};break;case Oge:f.anchor={x:l,y:s-l,row:Kn};break;case Pge:f.anchor={x:o-l,y:s-l,column:Kn,row:Kn};break}return f}function ome(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),ame(e,n,n.items[0].items[0]),o=sme(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===Bge&&lme(n.items[0].items[0].items[0].items),i!==_M&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,ya(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function sme(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function ame(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&hp(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case Ji:i+=Math.ceil(s.bounds.width())+l;break;case eo:case Ll:break;default:o+=s.bounds.height()+l}switch((i||o)&&hp(e,n,i,o),s.orient){case Ji:c+=df(t,n,s,a,1,1);break;case eo:u+=df(t,n,s,Kn,0,0)+l,c+=df(t,n,s,a,1,1);break;case Ll:u+=df(t,n,s,a,0,0),c+=df(t,n,s,Kn,-1,0,1)+l;break;default:u+=df(t,n,s,a,0,0)}(u||c)&&hp(e,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(hp(e,n,-u,0),hp(e,s,-u,0))}}function df(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&o?c:0,d=l&&o?0:c,h=i<=0?0:lM(n);return Math.round(r===bM?f:r===Kn?d-h:.5*(c-h))}function hp(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function lme(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function ume(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===Ji||a===eo?r:n,g=0,p=0,m=0,y=0,v=0,x;if(s!==fw?a===Ji?(g=i.y2,h=i.y1):a===eo?(g=i.y1,h=i.y2):(g=i.x1,h=i.x2):a===Ji&&(g=r,h=0),x=l===bM?g:l===Kn?h:(g+h)/2,d&&d.text){switch(a){case qd:case Ll:v=f.bounds.height()+c;break;case Ji:y=f.bounds.width()+c;break;case eo:y=-f.bounds.width()-c;break}Nn.clear().union(d.bounds),Nn.translate(y-(d.x||0),v-(d.y||0)),Bf(d,"x",y)|Bf(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Nn),d.mark.bounds.clear().union(Nn),e.dirty(d)),Nn.clear().union(d.bounds)}else Nn.clear();switch(Nn.union(f.bounds),a){case qd:p=x,m=i.y1-Nn.height()-u;break;case Ji:p=i.x1-Nn.width()-u,m=x;break;case eo:p=i.x2+Nn.width()+u,m=x;break;case Ll:p=x,m=i.y2+u;break;default:p=o.x,m=o.y}return Bf(o,"x",p)|Bf(o,"y",m)&&(Nn.translate(p,m),e.dirty(o),o.bounds.clear().union(Nn),t.bounds.clear().union(Nn),e.dirty(o)),o.bounds}function Pq(e){z.call(this,null,e)}te(Pq,z,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Jge(n,r,e.layout),fme(n,r,e)}),cme(e.mark.group)?t.reflow():t}});function cme(e){return e&&e.mark.role!=="legend-entry"}function fme(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Bt().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],c,f,d,h,g,p;for(g=0,p=r.length;g<p;++g)switch(f=r[g],f.role){case wM:h=Gge(f)?a:l,h.union(Xge(e,f,i,o));break;case EM:c=f;break;case SM:u.push(ome(e,f));break;case Lge:case zge:case bq:case wq:case Eq:case Sq:case _q:case Cq:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||eo,d!==_M&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];Oq(e,v,ime(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===kq||n.autosize.type===Aq||n.autosize.type===$q))switch(y.orient){case Ji:case eo:s.add(v.x1,0).add(v.x2,0);break;case qd:case Ll:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(ume(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),dme(e,t,s,n)}function dme(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===jge){const g=e.padding();s-=g.left+g.right,a-=g.top+g.bottom}o===_M?(u=0,f=0,l=s,c=a):o===kq?(l=Math.max(0,s-u-d),c=Math.max(0,a-f-h)):o===Aq?(l=Math.max(0,s-u-d),a=c+f+h):o===$q?(s=l+u+d,c=Math.max(0,a-f-h)):o===Uge&&(s=l+u+d,a=c+f+h),e._resizeView(s,a,l,c,[u,f],i.resize)}const hme=Object.freeze(Object.defineProperty({__proto__:null,bound:Tq,identifier:kM,mark:Nq,overlap:Mq,render:Fq,viewlayout:Pq},Symbol.toStringTag,{value:"Module"}));function Dq(e){z.call(this,null,e)}te(Dq,z,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=qN(o,s,e.minstep),l=e.format||cW(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?uW(o,e.values,a):HN(o,a);return i&&(r.rem=i),i=u.map((c,f)=>Ye({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(Ye({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Iq(e){z.call(this,null,e)}function pme(){return Ye({})}function gme(e){const t=wh().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}te(Iq,z,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||pme,o=e.key||ve,s=this.value;return W(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&U("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=gme(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function Lq(e){z.call(this,null,e)}te(Lq,z,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(W(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Pa,l=i.enter||Pa,u=i.exit||Pa,c=(o&&!s?i[o]:a)||Pa;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==Pa&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Pa&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),s||c!==Pa){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function zq(e){z.call(this,[],e)}te(zq,z,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||a1,s=e.scale,a=+e.limit,l=qN(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===a1,c=e.format||pW(n,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||hW(s,l),d,h,g,p,m;return i&&(r.rem=i),o===a1?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,$e(g=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),p=i.reduce((y,v)=>Math.max(y,g(v,e)),0)):g=qn(p=g||8),i=i.map((y,v)=>Ye({index:v,label:c(y,v,i),value:y,offset:p,size:g(y,e)})),m&&(m=f[i.length],i.push(Ye({index:i.length,label:`…${f.length-i.length} entries`,value:m,offset:p,size:g(m,e)})))):o===Bde?(d=s.domain(),h=sW(s,d[0],ze(d)),f.length<3&&!e.values&&d[0]!==ze(d)&&(f=[d[0],ze(d)]),i=f.map((y,v)=>Ye({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(g=f.length-1,h=Zde(s),i=f.map((y,v)=>Ye({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===g?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const mme=e=>e.source.x,yme=e=>e.source.y,vme=e=>e.target.x,xme=e=>e.target.y;function AM(e){z.call(this,{},e)}AM.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};te(AM,z,{transform(e,t){var n=e.sourceX||mme,r=e.sourceY||yme,i=e.targetX||vme,o=e.targetY||xme,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=m5.get(l+"-"+a)||m5.get(l);return u||U("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const jq=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,bme=(e,t,n,r)=>jq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Bq=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},wme=(e,t,n,r)=>Bq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Uq=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},Eme=(e,t,n,r)=>Uq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Sme=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,_me=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Cme=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},kme=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Ame=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},$me=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},m5=wh({line:jq,"line-radial":bme,arc:Bq,"arc-radial":wme,curve:Uq,"curve-radial":Eme,"orthogonal-horizontal":Sme,"orthogonal-vertical":_me,"orthogonal-radial":Cme,"diagonal-horizontal":kme,"diagonal-vertical":Ame,"diagonal-radial":$me});function $M(e){z.call(this,null,e)}$M.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};te($M,z,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||yh,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,d=(a-s)/rj(u),h=Ur(c),g,p,m;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),g=0;g<c;++g)m=u[h[g]],p=l[h[g]],p[r]=f,p[i]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const Tme=5;function Nme(e){const t=e.type;return!e.bins&&(t===Ld||t===Wm||t===qm)}function Wq(e){return BN(e)&&e!==Jo}const Mme=ho(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function qq(e){z.call(this,null,e),this.modified(!0)}te(qq,z,{transform(e,t){var n=t.dataflow,r=this.value,i=Rme(e);(!r||i!==r.type)&&(this.value=r=Ge(i)());for(i in e)if(!Mme[i]){if(i==="padding"&&Wq(r.type))continue;$e(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Lme(r,e,Ime(r,e,Ome(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Rme(e){var t=e.type,n="",r;return t===Jo?Jo+"-"+Ld:(Fme(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Jo+"-":r===3?Th+"-":""),(n+t||Ld).toLowerCase())}function Fme(e){const t=e.type;return BN(t)&&t!==pc&&t!==gc&&(e.scheme||e.range&&e.range.length&&e.range.every(se))}function Ome(e,t,n){const r=Pme(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&Nme(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return Wq(o)&&t.padding&&i[0]!==ze(i)&&(i=Dme(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Hq(o,i,n)),o===IN&&e.unknown(t.domainImplicit?PC:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&qN(e,t.nice)||null),i.length}function Pme(e,t,n){return t?(e.domain(Hq(e.type,t,n)),t.length):-1}function Dme(e,t,n,r,i,o){var s=Math.abs(ze(n)-n[0]),a=s/(s-2*r),l=e===fa?iT(t,null,a):e===qm?cv(t,null,a,.5):e===Wm?cv(t,null,a,i||1):e===Kb?oT(t,null,a,o||1):rT(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Hq(e,t,n){if(tW(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+J(t))}return t}function Ime(e,t,n){let r=t.bins;if(r&&!W(r)){const i=e.domain(),o=i[0],s=ze(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||U("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Ur(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===LN&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Lme(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=zme(r,t,n);else if(t.scheme&&(o=jme(r,t,n),$e(o))){if(e.interpolator)return e.interpolator(o);U(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&nW(r))return e.interpolator(Jb(rk(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(UN(t.interpolate,t.interpolateGamma)):$e(e.round)?e.round(i):$e(e.rangeRound)&&e.interpolate(i?Bm:Ql),o&&e.range(rk(o,t.reverse))}function zme(e,t,n){e!==XU&&e!==UC&&U("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===UC?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*DN(n,i,r)]}function jme(e,t,n){var r=t.schemeExtent,i,o;return W(t.scheme)?o=Jb(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=WN(i),o||U(`Unrecognized scheme name: ${t.scheme}`)),n=e===Zb?n+1:e===LN?n-1:e===zd||e===Qb?+t.schemeCount||Tme:n,nW(e)?y5(o,r,t.reverse):$e(o)?oW(y5(o,r),n):e===IN?o:o.slice(0,n)}function y5(e,t,n){return $e(e)&&(t||n)?iW(e,rk(t||[0,1],n)):e}function rk(e,t){return t?e.slice().reverse():e}function Vq(e){z.call(this,null,e)}te(Vq,z,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Bc(e.sort)),this.modified(n),t}});const v5="zero",Gq="center",Yq="normalize",Xq=["y0","y1"];function TM(e){z.call(this,null,e)}TM.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:v5,values:[v5,Gq,Yq]},{name:"as",type:"string",array:!0,length:2,default:Xq}]};te(TM,z,{transform(e,t){var n=e.as||Xq,r=n[0],i=n[1],o=Bc(e.sort),s=e.field||yh,a=e.offset===Gq?Bme:e.offset===Yq?Ume:Wme,l,u,c,f;for(l=qme(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function Bme(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function Ume(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=s,c[i]=s=o*(u+=Math.abs(n(c)))}function Wme(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=s,c[i]=s+=u):(c[r]=o,c[i]=o+=u)}function qme(e,t,n,r){var i=[],o=p=>p(c),s,a,l,u,c,f,d,h,g;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,g=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>g&&(g=h),n&&d.sort(n)}return i.max=g,i}const Hme=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Dq,datajoin:Iq,encode:Lq,legendentries:zq,linkpath:AM,pie:$M,scale:qq,sortitems:Vq,stack:TM},Symbol.toStringTag,{value:"Module"}));var be=1e-6,Bv=1e-12,Fe=Math.PI,Mt=Fe/2,Uv=Fe/4,ar=Fe*2,Ot=180/Fe,Me=Fe/180,Le=Math.abs,Mh=Math.atan,Ai=Math.atan2,we=Math.cos,dy=Math.ceil,Kq=Math.exp,ik=Math.hypot,Wv=Math.log,zE=Math.pow,xe=Math.sin,gi=Math.sign||function(e){return e>0?1:e<0?-1:0},lr=Math.sqrt,NM=Math.tan;function Qq(e){return e>1?0:e<-1?Fe:Math.acos(e)}function Tr(e){return e>1?Mt:e<-1?-Mt:Math.asin(e)}function mn(){}function qv(e,t){e&&b5.hasOwnProperty(e.type)&&b5[e.type](e,t)}var x5={Feature:function(e,t){qv(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)qv(n[r].geometry,t)}},b5={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ok(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ok(n[r],t,0)},Polygon:function(e,t){w5(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)w5(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)qv(n[r],t)}};function ok(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function w5(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ok(e[n],t,1);t.polygonEnd()}function zs(e,t){e&&x5.hasOwnProperty(e.type)?x5[e.type](e,t):qv(e,t)}var Hv=new or,Vv=new or,Zq,Jq,sk,ak,lk,ls={point:mn,lineStart:mn,lineEnd:mn,polygonStart:function(){Hv=new or,ls.lineStart=Vme,ls.lineEnd=Gme},polygonEnd:function(){var e=+Hv;Vv.add(e<0?ar+e:e),this.lineStart=this.lineEnd=this.point=mn},sphere:function(){Vv.add(ar)}};function Vme(){ls.point=Yme}function Gme(){eH(Zq,Jq)}function Yme(e,t){ls.point=eH,Zq=e,Jq=t,e*=Me,t*=Me,sk=e,ak=we(t=t/2+Uv),lk=xe(t)}function eH(e,t){e*=Me,t*=Me,t=t/2+Uv;var n=e-sk,r=n>=0?1:-1,i=r*n,o=we(t),s=xe(t),a=lk*s,l=ak*o+a*we(i),u=a*r*xe(i);Hv.add(Ai(u,l)),sk=e,ak=o,lk=s}function Xme(e){return Vv=new or,zs(e,ls),Vv*2}function Gv(e){return[Ai(e[1],e[0]),Tr(e[2])]}function yc(e){var t=e[0],n=e[1],r=we(n);return[r*we(t),r*xe(t),xe(n)]}function hy(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function jE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function py(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Yv(e){var t=lr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var wt,vr,$t,zr,Au,tH,nH,id,pg,Wa,da,Ds={point:uk,lineStart:E5,lineEnd:S5,polygonStart:function(){Ds.point=iH,Ds.lineStart=Kme,Ds.lineEnd=Qme,pg=new or,ls.polygonStart()},polygonEnd:function(){ls.polygonEnd(),Ds.point=uk,Ds.lineStart=E5,Ds.lineEnd=S5,Hv<0?(wt=-($t=180),vr=-(zr=90)):pg>be?zr=90:pg<-be&&(vr=-90),da[0]=wt,da[1]=$t},sphere:function(){wt=-($t=180),vr=-(zr=90)}};function uk(e,t){Wa.push(da=[wt=e,$t=e]),t<vr&&(vr=t),t>zr&&(zr=t)}function rH(e,t){var n=yc([e*Me,t*Me]);if(id){var r=Hd(id,n),i=[r[1],-r[0],0],o=Hd(i,r);Yv(o),o=Gv(o);var s=e-Au,a=s>0?1:-1,l=o[0]*Ot*a,u,c=Le(s)>180;c^(a*Au<l&&l<a*e)?(u=o[1]*Ot,u>zr&&(zr=u)):(l=(l+360)%360-180,c^(a*Au<l&&l<a*e)?(u=-o[1]*Ot,u<vr&&(vr=u)):(t<vr&&(vr=t),t>zr&&(zr=t))),c?e<Au?Ir(wt,e)>Ir(wt,$t)&&($t=e):Ir(e,$t)>Ir(wt,$t)&&(wt=e):$t>=wt?(e<wt&&(wt=e),e>$t&&($t=e)):e>Au?Ir(wt,e)>Ir(wt,$t)&&($t=e):Ir(e,$t)>Ir(wt,$t)&&(wt=e)}else Wa.push(da=[wt=e,$t=e]);t<vr&&(vr=t),t>zr&&(zr=t),id=n,Au=e}function E5(){Ds.point=rH}function S5(){da[0]=wt,da[1]=$t,Ds.point=uk,id=null}function iH(e,t){if(id){var n=e-Au;pg.add(Le(n)>180?n+(n>0?360:-360):n)}else tH=e,nH=t;ls.point(e,t),rH(e,t)}function Kme(){ls.lineStart()}function Qme(){iH(tH,nH),ls.lineEnd(),Le(pg)>be&&(wt=-($t=180)),da[0]=wt,da[1]=$t,id=null}function Ir(e,t){return(t-=e)<0?t+360:t}function Zme(e,t){return e[0]-t[0]}function _5(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Jme(e){var t,n,r,i,o,s,a;if(zr=$t=-(wt=vr=1/0),Wa=[],zs(e,Ds),n=Wa.length){for(Wa.sort(Zme),t=1,r=Wa[0],o=[r];t<n;++t)i=Wa[t],_5(r,i[0])||_5(r,i[1])?(Ir(r[0],i[1])>Ir(r[0],r[1])&&(r[1]=i[1]),Ir(i[0],r[1])>Ir(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Ir(r[1],i[0]))>s&&(s=a,wt=i[0],$t=r[1])}return Wa=da=null,wt===1/0||vr===1/0?[[NaN,NaN],[NaN,NaN]]:[[wt,vr],[$t,zr]]}var jp,Xv,Kv,Qv,Zv,Jv,ex,tx,ck,fk,dk,oH,sH,Zn,Jn,er,to={sphere:mn,point:MM,lineStart:C5,lineEnd:k5,polygonStart:function(){to.lineStart=n0e,to.lineEnd=r0e},polygonEnd:function(){to.lineStart=C5,to.lineEnd=k5}};function MM(e,t){e*=Me,t*=Me;var n=we(t);n0(n*we(e),n*xe(e),xe(t))}function n0(e,t,n){++jp,Kv+=(e-Kv)/jp,Qv+=(t-Qv)/jp,Zv+=(n-Zv)/jp}function C5(){to.point=e0e}function e0e(e,t){e*=Me,t*=Me;var n=we(t);Zn=n*we(e),Jn=n*xe(e),er=xe(t),to.point=t0e,n0(Zn,Jn,er)}function t0e(e,t){e*=Me,t*=Me;var n=we(t),r=n*we(e),i=n*xe(e),o=xe(t),s=Ai(lr((s=Jn*o-er*i)*s+(s=er*r-Zn*o)*s+(s=Zn*i-Jn*r)*s),Zn*r+Jn*i+er*o);Xv+=s,Jv+=s*(Zn+(Zn=r)),ex+=s*(Jn+(Jn=i)),tx+=s*(er+(er=o)),n0(Zn,Jn,er)}function k5(){to.point=MM}function n0e(){to.point=i0e}function r0e(){aH(oH,sH),to.point=MM}function i0e(e,t){oH=e,sH=t,e*=Me,t*=Me,to.point=aH;var n=we(t);Zn=n*we(e),Jn=n*xe(e),er=xe(t),n0(Zn,Jn,er)}function aH(e,t){e*=Me,t*=Me;var n=we(t),r=n*we(e),i=n*xe(e),o=xe(t),s=Jn*o-er*i,a=er*r-Zn*o,l=Zn*i-Jn*r,u=ik(s,a,l),c=Tr(u),f=u&&-c/u;ck.add(f*s),fk.add(f*a),dk.add(f*l),Xv+=c,Jv+=c*(Zn+(Zn=r)),ex+=c*(Jn+(Jn=i)),tx+=c*(er+(er=o)),n0(Zn,Jn,er)}function o0e(e){jp=Xv=Kv=Qv=Zv=Jv=ex=tx=0,ck=new or,fk=new or,dk=new or,zs(e,to);var t=+ck,n=+fk,r=+dk,i=ik(t,n,r);return i<Bv&&(t=Jv,n=ex,r=tx,Xv<be&&(t=Kv,n=Qv,r=Zv),i=ik(t,n,r),i<Bv)?[NaN,NaN]:[Ai(n,t)*Ot,Tr(r/i)*Ot]}function hk(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function pk(e,t){return Le(e)>Fe&&(e-=Math.round(e/ar)*ar),[e,t]}pk.invert=pk;function lH(e,t,n){return(e%=ar)?t||n?hk($5(e),T5(t,n)):$5(e):t||n?T5(t,n):pk}function A5(e){return function(t,n){return t+=e,Le(t)>Fe&&(t-=Math.round(t/ar)*ar),[t,n]}}function $5(e){var t=A5(e);return t.invert=A5(-e),t}function T5(e,t){var n=we(e),r=xe(e),i=we(t),o=xe(t);function s(a,l){var u=we(l),c=we(a)*u,f=xe(a)*u,d=xe(l),h=d*n+c*r;return[Ai(f*i-h*o,c*n-d*r),Tr(h*i+f*o)]}return s.invert=function(a,l){var u=we(l),c=we(a)*u,f=xe(a)*u,d=xe(l),h=d*i-f*o;return[Ai(f*i+d*o,c*n+h*r),Tr(h*n-c*r)]},s}function s0e(e){e=lH(e[0]*Me,e[1]*Me,e.length>2?e[2]*Me:0);function t(n){return n=e(n[0]*Me,n[1]*Me),n[0]*=Ot,n[1]*=Ot,n}return t.invert=function(n){return n=e.invert(n[0]*Me,n[1]*Me),n[0]*=Ot,n[1]*=Ot,n},t}function a0e(e,t,n,r,i,o){if(n){var s=we(t),a=xe(t),l=r*n;i==null?(i=t+r*ar,o=t-l/2):(i=N5(s,i),o=N5(s,o),(r>0?i<o:i>o)&&(i+=r*ar));for(var u,c=i;r>0?c>o:c<o;c-=l)u=Gv([s,-a*we(c),-a*xe(c)]),e.point(u[0],u[1])}}function N5(e,t){t=yc(t),t[0]-=e,Yv(t);var n=Qq(-t[1]);return((-t[2]<0?-n:n)+ar-be)%ar}function uH(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:mn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function m1(e,t){return Le(e[0]-t[0])<be&&Le(e[1]-t[1])<be}function gy(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function cH(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],y=g[p],v;if(m1(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<p;++a)i.point((m=g[a])[0],m[1]);i.lineEnd();return}y[0]+=2*be}o.push(v=new gy(m,g,null,!0)),s.push(v.o=new gy(m,null,v,!1)),o.push(v=new gy(y,g,null,!1)),s.push(v.o=new gy(y,null,v,!0))}}),!!o.length){for(s.sort(t),M5(o),M5(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function M5(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function BE(e){return Le(e[0])<=Fe?e[0]:gi(e[0])*((Le(e[0])+Fe)%ar-Fe)}function l0e(e,t){var n=BE(t),r=t[1],i=xe(r),o=[xe(n),-we(n),0],s=0,a=0,l=new or;i===1?r=Mt+be:i===-1&&(r=-Mt-be);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],g=BE(h),p=h[1]/2+Uv,m=xe(p),y=we(p),v=0;v<d;++v,g=b,m=S,y=E,h=x){var x=f[v],b=BE(x),w=x[1]/2+Uv,S=xe(w),E=we(w),_=b-g,k=_>=0?1:-1,T=k*_,N=T>Fe,P=m*S;if(l.add(Ai(P*k*xe(T),y*E+P*we(T))),s+=N?_+k*ar:_,N^g>=n^b>=n){var D=Hd(yc(h),yc(x));Yv(D);var M=Hd(o,D);Yv(M);var $=(N^_>=0?-1:1)*Tr(M[2]);(r>$||r===$&&(D[0]||D[1]))&&(a+=N^_>=0?1:-1)}}return(s<-be||s<be&&l<-Bv)^a&1}function fH(e,t,n,r){return function(i){var o=t(i),s=uH(),a=t(s),l=!1,u,c,f,d={point:h,lineStart:p,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=x,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=p,d.lineEnd=m,c=nj(c);var b=l0e(u,r);c.length?(l||(i.polygonStart(),l=!0),cH(c,c0e,b,n,i)):b&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,w){e(b,w)&&i.point(b,w)}function g(b,w){o.point(b,w)}function p(){d.point=g,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(b,w){f.push([b,w]),a.point(b,w)}function v(){a.lineStart(),f=[]}function x(){y(f[0][0],f[0][1]),a.lineEnd();var b=a.clean(),w=s.result(),S,E=w.length,_,k,T;if(f.pop(),u.push(f),f=null,!!E){if(b&1){if(k=w[0],(_=k.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<_;++S)i.point((T=k[S])[0],T[1]);i.lineEnd()}return}E>1&&b&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(u0e))}}return d}}function u0e(e){return e.length>1}function c0e(e,t){return((e=e.x)[0]<0?e[1]-Mt-be:Mt-e[1])-((t=t.x)[0]<0?t[1]-Mt-be:Mt-t[1])}const R5=fH(function(){return!0},f0e,h0e,[-Fe,-Mt]);function f0e(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Fe:-Fe,l=Le(o-t);Le(l-Fe)<be?(e.point(t,n=(n+s)/2>0?Mt:-Mt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Fe&&(Le(t-r)<be&&(t-=r*be),Le(o-a)<be&&(o-=a*be),n=d0e(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function d0e(e,t,n,r){var i,o,s=xe(e-n);return Le(s)>be?Mh((xe(t)*(o=we(r))*xe(n)-xe(r)*(i=we(t))*xe(e))/(i*o*s)):(t+r)/2}function h0e(e,t,n,r){var i;if(e==null)i=n*Mt,r.point(-Fe,i),r.point(0,i),r.point(Fe,i),r.point(Fe,0),r.point(Fe,-i),r.point(0,-i),r.point(-Fe,-i),r.point(-Fe,0),r.point(-Fe,i);else if(Le(e[0]-t[0])>be){var o=e[0]<t[0]?Fe:-Fe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function p0e(e){var t=we(e),n=2*Me,r=t>0,i=Le(t)>be;function o(c,f,d,h){a0e(h,e,n,d,c,f)}function s(c,f){return we(c)*we(f)>t}function a(c){var f,d,h,g,p;return{lineStart:function(){g=h=!1,p=1},point:function(m,y){var v=[m,y],x,b=s(m,y),w=r?b?0:u(m,y):b?u(m+(m<0?Fe:-Fe),y):0;if(!f&&(g=h=b)&&c.lineStart(),b!==h&&(x=l(f,v),(!x||m1(f,x)||m1(v,x))&&(v[2]=1)),b!==h)p=0,b?(c.lineStart(),x=l(v,f),c.point(x[0],x[1])):(x=l(f,v),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^b){var S;!(w&d)&&(S=l(v,f,!0))&&(p=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}b&&(!f||!m1(f,v))&&c.point(v[0],v[1]),f=v,h=b,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return p|(g&&h)<<1}}}function l(c,f,d){var h=yc(c),g=yc(f),p=[1,0,0],m=Hd(h,g),y=hy(m,m),v=m[0],x=y-v*v;if(!x)return!d&&c;var b=t*y/x,w=-t*v/x,S=Hd(p,m),E=py(p,b),_=py(m,w);jE(E,_);var k=S,T=hy(E,k),N=hy(k,k),P=T*T-N*(hy(E,E)-1);if(!(P<0)){var D=lr(P),M=py(k,(-T-D)/N);if(jE(M,E),M=Gv(M),!d)return M;var $=c[0],R=f[0],I=c[1],F=f[1],O;R<$&&(O=$,$=R,R=O);var L=R-$,X=Le(L-Fe)<be,V=X||L<be;if(!X&&F<I&&(O=I,I=F,F=O),V?X?I+F>0^M[1]<(Le(M[0]-$)<be?I:F):I<=M[1]&&M[1]<=F:L>Fe^($<=M[0]&&M[0]<=R)){var ne=py(k,(-T+D)/N);return jE(ne,E),[M,Gv(ne)]}}}function u(c,f){var d=r?e:Fe-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return fH(s,a,o,r?[0,-e]:[-Fe,e-Fe])}function g0e(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-s,h=u-a,g;if(g=n-s,!(!d&&g>0)){if(g/=d,d<0){if(g<c)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>c&&(c=g)}if(g=i-s,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>c&&(c=g)}else if(d>0){if(g<c)return;g<f&&(f=g)}if(g=r-a,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>c&&(c=g)}if(g=o-a,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<f&&(f=g)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var Bp=1e9,my=-Bp;function dH(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,f,d){var h=0,g=0;if(u==null||(h=s(u,f))!==(g=s(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==g);else d.point(c[0],c[1])}function s(u,c){return Le(u[0]-e)<be?c>0?0:3:Le(u[0]-n)<be?c>0?2:1:Le(u[1]-t)<be?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=uH(),d,h,g,p,m,y,v,x,b,w,S,E={point:_,lineStart:P,lineEnd:D,polygonStart:T,polygonEnd:N};function _($,R){i($,R)&&c.point($,R)}function k(){for(var $=0,R=0,I=h.length;R<I;++R)for(var F=h[R],O=1,L=F.length,X=F[0],V,ne,de=X[0],he=X[1];O<L;++O)V=de,ne=he,X=F[O],de=X[0],he=X[1],ne<=r?he>r&&(de-V)*(r-ne)>(he-ne)*(e-V)&&++$:he<=r&&(de-V)*(r-ne)<(he-ne)*(e-V)&&--$;return $}function T(){c=f,d=[],h=[],S=!0}function N(){var $=k(),R=S&&$,I=(d=nj(d)).length;(R||I)&&(u.polygonStart(),R&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),I&&cH(d,a,$,o,u),u.polygonEnd()),c=u,d=h=g=null}function P(){E.point=M,h&&h.push(g=[]),w=!0,b=!1,v=x=NaN}function D(){d&&(M(p,m),y&&b&&f.rejoin(),d.push(f.result())),E.point=_,b&&c.lineEnd()}function M($,R){var I=i($,R);if(h&&g.push([$,R]),w)p=$,m=R,y=I,w=!1,I&&(c.lineStart(),c.point($,R));else if(I&&b)c.point($,R);else{var F=[v=Math.max(my,Math.min(Bp,v)),x=Math.max(my,Math.min(Bp,x))],O=[$=Math.max(my,Math.min(Bp,$)),R=Math.max(my,Math.min(Bp,R))];g0e(F,O,e,t,n,r)?(b||(c.lineStart(),c.point(F[0],F[1])),c.point(O[0],O[1]),I||c.lineEnd(),S=!1):I&&(c.lineStart(),c.point($,R),S=!1)}v=$,x=R,b=I}return E}}function F5(e,t,n){var r=Ur(e,t-be,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function O5(e,t,n){var r=Ur(e,t-be,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function m0e(){var e,t,n,r,i,o,s,a,l=10,u=l,c=90,f=360,d,h,g,p,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ur(dy(r/c)*c,n,c).map(g).concat(Ur(dy(a/f)*f,s,f).map(p)).concat(Ur(dy(t/l)*l,e,l).filter(function(x){return Le(x%c)>be}).map(d)).concat(Ur(dy(o/u)*u,i,u).filter(function(x){return Le(x%f)>be}).map(h))}return y.lines=function(){return v().map(function(x){return{type:"LineString",coordinates:x}})},y.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(p(s).slice(1),g(n).reverse().slice(1),p(a).reverse().slice(1))]}},y.extent=function(x){return arguments.length?y.extentMajor(x).extentMinor(x):y.extentMinor()},y.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],s=+x[1][1],r>n&&(x=r,r=n,n=x),a>s&&(x=a,a=s,s=x),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],o=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),o>i&&(x=o,o=i,i=x),y.precision(m)):[[t,o],[e,i]]},y.step=function(x){return arguments.length?y.stepMajor(x).stepMinor(x):y.stepMinor()},y.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],y):[c,f]},y.stepMinor=function(x){return arguments.length?(l=+x[0],u=+x[1],y):[l,u]},y.precision=function(x){return arguments.length?(m=+x,d=F5(o,i,90),h=O5(t,e,m),g=F5(a,s,90),p=O5(r,n,m),y):m},y.extentMajor([[-180,-90+be],[180,90-be]]).extentMinor([[-180,-80-be],[180,80+be]])}const im=e=>e;var UE=new or,gk=new or,hH,pH,mk,yk,js={point:mn,lineStart:mn,lineEnd:mn,polygonStart:function(){js.lineStart=y0e,js.lineEnd=x0e},polygonEnd:function(){js.lineStart=js.lineEnd=js.point=mn,UE.add(Le(gk)),gk=new or},result:function(){var e=UE/2;return UE=new or,e}};function y0e(){js.point=v0e}function v0e(e,t){js.point=gH,hH=mk=e,pH=yk=t}function gH(e,t){gk.add(yk*e-mk*t),mk=e,yk=t}function x0e(){gH(hH,pH)}var Vd=1/0,nx=Vd,om=-Vd,rx=om,ix={point:b0e,lineStart:mn,lineEnd:mn,polygonStart:mn,polygonEnd:mn,result:function(){var e=[[Vd,nx],[om,rx]];return om=rx=-(nx=Vd=1/0),e}};function b0e(e,t){e<Vd&&(Vd=e),e>om&&(om=e),t<nx&&(nx=t),t>rx&&(rx=t)}var vk=0,xk=0,Up=0,ox=0,sx=0,Uf=0,bk=0,wk=0,Wp=0,mH,yH,Uo,Wo,di={point:vc,lineStart:P5,lineEnd:D5,polygonStart:function(){di.lineStart=S0e,di.lineEnd=_0e},polygonEnd:function(){di.point=vc,di.lineStart=P5,di.lineEnd=D5},result:function(){var e=Wp?[bk/Wp,wk/Wp]:Uf?[ox/Uf,sx/Uf]:Up?[vk/Up,xk/Up]:[NaN,NaN];return vk=xk=Up=ox=sx=Uf=bk=wk=Wp=0,e}};function vc(e,t){vk+=e,xk+=t,++Up}function P5(){di.point=w0e}function w0e(e,t){di.point=E0e,vc(Uo=e,Wo=t)}function E0e(e,t){var n=e-Uo,r=t-Wo,i=lr(n*n+r*r);ox+=i*(Uo+e)/2,sx+=i*(Wo+t)/2,Uf+=i,vc(Uo=e,Wo=t)}function D5(){di.point=vc}function S0e(){di.point=C0e}function _0e(){vH(mH,yH)}function C0e(e,t){di.point=vH,vc(mH=Uo=e,yH=Wo=t)}function vH(e,t){var n=e-Uo,r=t-Wo,i=lr(n*n+r*r);ox+=i*(Uo+e)/2,sx+=i*(Wo+t)/2,Uf+=i,i=Wo*e-Uo*t,bk+=i*(Uo+e),wk+=i*(Wo+t),Wp+=i*3,vc(Uo=e,Wo=t)}function xH(e){this._context=e}xH.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ar);break}}},result:mn};var Ek=new or,WE,bH,wH,qp,Hp,sm={point:mn,lineStart:function(){sm.point=k0e},lineEnd:function(){WE&&EH(bH,wH),sm.point=mn},polygonStart:function(){WE=!0},polygonEnd:function(){WE=null},result:function(){var e=+Ek;return Ek=new or,e}};function k0e(e,t){sm.point=EH,bH=qp=e,wH=Hp=t}function EH(e,t){qp-=e,Hp-=t,Ek.add(lr(qp*qp+Hp*Hp)),qp=e,Hp=t}let I5,ax,L5,z5;class j5{constructor(t){this._append=t==null?SH:A0e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==L5||this._append!==ax){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,L5=r,ax=this._append,z5=this._,this._=i}this._+=z5;break}}}result(){const t=this._;return this._="",t.length?t:null}}function SH(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function A0e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return SH;if(t!==I5){const n=10**t;I5=t,ax=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return ax}function _H(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),zs(a,i(o))),o.result()}return s.area=function(a){return zs(a,i(js)),js.result()},s.measure=function(a){return zs(a,i(sm)),sm.result()},s.bounds=function(a){return zs(a,i(ix)),ix.result()},s.centroid=function(a){return zs(a,i(di)),di.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,im):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new j5(n)):new xH(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new j5(n)),s},s.projection(e).digits(n).context(t)}function dw(e){return function(t){var n=new Sk;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Sk(){}Sk.prototype={constructor:Sk,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function RM(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),zs(n,e.stream(ix)),t(ix.result()),r!=null&&e.clipExtent(r),e}function hw(e,t,n){return RM(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function FM(e,t,n){return hw(e,[[0,0],t],n)}function OM(e,t,n){return RM(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function PM(e,t,n){return RM(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var B5=16,$0e=we(30*Me);function U5(e,t){return+t?N0e(e,t):T0e(e)}function T0e(e){return dw({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function N0e(e,t){function n(r,i,o,s,a,l,u,c,f,d,h,g,p,m){var y=u-r,v=c-i,x=y*y+v*v;if(x>4*t&&p--){var b=s+d,w=a+h,S=l+g,E=lr(b*b+w*w+S*S),_=Tr(S/=E),k=Le(Le(S)-1)<be||Le(o-f)<be?(o+f)/2:Ai(w,b),T=e(k,_),N=T[0],P=T[1],D=N-r,M=P-i,$=v*D-y*M;($*$/x>t||Le((y*D+v*M)/x-.5)>.3||s*d+a*h+l*g<$0e)&&(n(r,i,o,s,a,l,N,P,k,b/=E,w/=E,S,p,m),m.point(N,P),n(N,P,k,b,w,S,u,c,f,d,h,g,p,m))}}return function(r){var i,o,s,a,l,u,c,f,d,h,g,p,m={point:y,lineStart:v,lineEnd:b,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(_,k){_=e(_,k),r.point(_[0],_[1])}function v(){f=NaN,m.point=x,r.lineStart()}function x(_,k){var T=yc([_,k]),N=e(_,k);n(f,d,c,h,g,p,f=N[0],d=N[1],c=_,h=T[0],g=T[1],p=T[2],B5,r),r.point(f,d)}function b(){m.point=y,r.lineEnd()}function w(){v(),m.point=S,m.lineEnd=E}function S(_,k){x(i=_,k),o=f,s=d,a=h,l=g,u=p,m.point=x}function E(){n(f,d,c,h,g,p,o,s,i,a,l,u,B5,r),m.lineEnd=b,b()}return m}}var M0e=dw({point:function(e,t){this.stream.point(e*Me,t*Me)}});function R0e(e){return dw({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function F0e(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function W5(e,t,n,r,i,o){if(!o)return F0e(e,t,n,r,i);var s=we(o),a=xe(o),l=s*e,u=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function g(p,m){return p*=r,m*=i,[l*p-u*m+t,n-u*p-l*m]}return g.invert=function(p,m){return[r*(c*p-f*m+d),i*(h-f*p-c*m)]},g}function vs(e){return CH(function(){return e})()}function CH(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,c,f=0,d=1,h=1,g=null,p=R5,m=null,y,v,x,b=im,w=.5,S,E,_,k,T;function N($){return _($[0]*Me,$[1]*Me)}function P($){return $=_.invert($[0],$[1]),$&&[$[0]*Ot,$[1]*Ot]}N.stream=function($){return k&&T===$?k:k=M0e(R0e(c)(p(S(b(T=$)))))},N.preclip=function($){return arguments.length?(p=$,g=void 0,M()):p},N.postclip=function($){return arguments.length?(b=$,m=y=v=x=null,M()):b},N.clipAngle=function($){return arguments.length?(p=+$?p0e(g=$*Me):(g=null,R5),M()):g*Ot},N.clipExtent=function($){return arguments.length?(b=$==null?(m=y=v=x=null,im):dH(m=+$[0][0],y=+$[0][1],v=+$[1][0],x=+$[1][1]),M()):m==null?null:[[m,y],[v,x]]},N.scale=function($){return arguments.length?(n=+$,D()):n},N.translate=function($){return arguments.length?(r=+$[0],i=+$[1],D()):[r,i]},N.center=function($){return arguments.length?(o=$[0]%360*Me,s=$[1]%360*Me,D()):[o*Ot,s*Ot]},N.rotate=function($){return arguments.length?(a=$[0]%360*Me,l=$[1]%360*Me,u=$.length>2?$[2]%360*Me:0,D()):[a*Ot,l*Ot,u*Ot]},N.angle=function($){return arguments.length?(f=$%360*Me,D()):f*Ot},N.reflectX=function($){return arguments.length?(d=$?-1:1,D()):d<0},N.reflectY=function($){return arguments.length?(h=$?-1:1,D()):h<0},N.precision=function($){return arguments.length?(S=U5(E,w=$*$),M()):lr(w)},N.fitExtent=function($,R){return hw(N,$,R)},N.fitSize=function($,R){return FM(N,$,R)},N.fitWidth=function($,R){return OM(N,$,R)},N.fitHeight=function($,R){return PM(N,$,R)};function D(){var $=W5(n,0,0,d,h,f).apply(null,t(o,s)),R=W5(n,r-$[0],i-$[1],d,h,f);return c=lH(a,l,u),E=hk(t,R),_=hk(c,E),S=U5(E,w),M()}function M(){return k=T=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&P,D()}}function DM(e){var t=0,n=Fe/3,r=CH(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Me,n=o[1]*Me):[t*Ot,n*Ot]},i}function O0e(e){var t=we(e);function n(r,i){return[r*t,xe(i)/t]}return n.invert=function(r,i){return[r/t,Tr(i*t)]},n}function P0e(e,t){var n=xe(e),r=(n+xe(t))/2;if(Le(r)<be)return O0e(e);var i=1+n*(2*r-n),o=lr(i)/r;function s(a,l){var u=lr(i-2*r*xe(l))/r;return[u*xe(a*=r),o-u*we(a)]}return s.invert=function(a,l){var u=o-l,c=Ai(a,Le(u))*gi(u);return u*r<0&&(c-=Fe*gi(a)*gi(u)),[c/r,Tr((i-(a*a+u*u)*r*r)/(2*r))]},s}function lx(){return DM(P0e).scale(155.424).center([0,33.6442])}function kH(){return lx().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function D0e(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function I0e(){var e,t,n=kH(),r,i=lx().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=lx().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],g=d[1];return l=null,r.point(h,g),l||(o.point(h,g),l)||(a.point(h,g),l)}c.invert=function(d){var h=n.scale(),g=n.translate(),p=(d[0]-g[0])/h,m=(d[1]-g[1])/h;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?i:m>=.166&&m<.234&&p>=-.214&&p<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=D0e([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),g=+d[0],p=+d[1];return r=n.translate(d).clipExtent([[g-.455*h,p-.238*h],[g+.455*h,p+.238*h]]).stream(u),o=i.translate([g-.307*h,p+.201*h]).clipExtent([[g-.425*h+be,p+.12*h+be],[g-.214*h-be,p+.234*h-be]]).stream(u),a=s.translate([g-.205*h,p+.212*h]).clipExtent([[g-.214*h+be,p+.166*h+be],[g-.115*h-be,p+.234*h-be]]).stream(u),f()},c.fitExtent=function(d,h){return hw(c,d,h)},c.fitSize=function(d,h){return FM(c,d,h)},c.fitWidth=function(d,h){return OM(c,d,h)},c.fitHeight=function(d,h){return PM(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function AH(e){return function(t,n){var r=we(t),i=we(n),o=e(r*i);return o===1/0?[2,0]:[o*i*xe(t),o*xe(n)]}}function r0(e){return function(t,n){var r=lr(t*t+n*n),i=e(r),o=xe(i),s=we(i);return[Ai(t*o,r*s),Tr(r&&n*o/r)]}}var $H=AH(function(e){return lr(2/(1+e))});$H.invert=r0(function(e){return 2*Tr(e/2)});function L0e(){return vs($H).scale(124.75).clipAngle(180-.001)}var TH=AH(function(e){return(e=Qq(e))&&e/xe(e)});TH.invert=r0(function(e){return e});function z0e(){return vs(TH).scale(79.4188).clipAngle(180-.001)}function pw(e,t){return[e,Wv(NM((Mt+t)/2))]}pw.invert=function(e,t){return[e,2*Mh(Kq(t))-Mt]};function j0e(){return NH(pw).scale(961/ar)}function NH(e){var t=vs(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=Fe*r(),d=t(s0e(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===pw?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,l),u]]:[[s,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function yy(e){return NM((Mt+e)/2)}function B0e(e,t){var n=we(e),r=e===t?xe(e):Wv(n/we(t))/Wv(yy(t)/yy(e)),i=n*zE(yy(e),r)/r;if(!r)return pw;function o(s,a){i>0?a<-Mt+be&&(a=-Mt+be):a>Mt-be&&(a=Mt-be);var l=i/zE(yy(a),r);return[l*xe(r*s),i-l*we(r*s)]}return o.invert=function(s,a){var l=i-a,u=gi(r)*lr(s*s+l*l),c=Ai(s,Le(l))*gi(l);return l*r<0&&(c-=Fe*gi(s)*gi(l)),[c/r,2*Mh(zE(i/u,1/r))-Mt]},o}function U0e(){return DM(B0e).scale(109.5).parallels([30,30])}function ux(e,t){return[e,t]}ux.invert=ux;function W0e(){return vs(ux).scale(152.63)}function q0e(e,t){var n=we(e),r=e===t?xe(e):(n-we(t))/(t-e),i=n/r+e;if(Le(r)<be)return ux;function o(s,a){var l=i-a,u=r*s;return[l*xe(u),i-l*we(u)]}return o.invert=function(s,a){var l=i-a,u=Ai(s,Le(l))*gi(l);return l*r<0&&(u-=Fe*gi(s)*gi(l)),[u/r,i-gi(r)*lr(s*s+l*l)]},o}function H0e(){return DM(q0e).scale(131.154).center([0,13.9389])}var gg=1.340264,mg=-.081106,yg=893e-6,vg=.003796,cx=lr(3)/2,V0e=12;function MH(e,t){var n=Tr(cx*xe(t)),r=n*n,i=r*r*r;return[e*we(n)/(cx*(gg+3*mg*r+i*(7*yg+9*vg*r))),n*(gg+mg*r+i*(yg+vg*r))]}MH.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<V0e&&(a=n*(gg+mg*r+i*(yg+vg*r))-t,l=gg+3*mg*r+i*(7*yg+9*vg*r),n-=s=a/l,r=n*n,i=r*r*r,!(Le(s)<Bv));++o);return[cx*e*(gg+3*mg*r+i*(7*yg+9*vg*r))/we(n),Tr(xe(n)/cx)]};function G0e(){return vs(MH).scale(177.158)}function RH(e,t){var n=we(t),r=we(e)*n;return[n*xe(e)/r,xe(t)/r]}RH.invert=r0(Mh);function Y0e(){return vs(RH).scale(144.049).clipAngle(60)}function X0e(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,c,f,d=1,h=1,g=dw({point:function(b,w){var S=x([b,w]);this.stream.point(S[0],S[1])}}),p=im,m,y;function v(){return d=e*r,h=e*i,m=y=null,x}function x(b){var w=b[0]*d,S=b[1]*h;if(o){var E=S*s-w*a;w=w*s+S*a,S=E}return[w+t,S+n]}return x.invert=function(b){var w=b[0]-t,S=b[1]-n;if(o){var E=S*s+w*a;w=w*s-S*a,S=E}return[w/d,S/h]},x.stream=function(b){return m&&y===b?m:m=g(p(y=b))},x.postclip=function(b){return arguments.length?(p=b,l=u=c=f=null,v()):p},x.clipExtent=function(b){return arguments.length?(p=b==null?(l=u=c=f=null,im):dH(l=+b[0][0],u=+b[0][1],c=+b[1][0],f=+b[1][1]),v()):l==null?null:[[l,u],[c,f]]},x.scale=function(b){return arguments.length?(e=+b,v()):e},x.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],v()):[t,n]},x.angle=function(b){return arguments.length?(o=b%360*Me,a=xe(o),s=we(o),v()):o*Ot},x.reflectX=function(b){return arguments.length?(r=b?-1:1,v()):r<0},x.reflectY=function(b){return arguments.length?(i=b?-1:1,v()):i<0},x.fitExtent=function(b,w){return hw(x,b,w)},x.fitSize=function(b,w){return FM(x,b,w)},x.fitWidth=function(b,w){return OM(x,b,w)},x.fitHeight=function(b,w){return PM(x,b,w)},x}function FH(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}FH.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Le(i)>be&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function K0e(){return vs(FH).scale(175.295)}function OH(e,t){return[we(t)*xe(e),xe(t)]}OH.invert=r0(Tr);function Q0e(){return vs(OH).scale(249.5).clipAngle(90+be)}function PH(e,t){var n=we(t),r=1+we(e)*n;return[n*xe(e)/r,xe(t)/r]}PH.invert=r0(function(e){return 2*Mh(e)});function Z0e(){return vs(PH).scale(250).clipAngle(142)}function DH(e,t){return[Wv(NM((Mt+t)/2)),-e]}DH.invert=function(e,t){return[-t,2*Mh(Kq(e))-Mt]};function J0e(){var e=NH(DH),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var eye=Math.abs,_k=Math.cos,fx=Math.sin,tye=1e-6,IH=Math.PI,Ck=IH/2,q5=nye(2);function H5(e){return e>1?Ck:e<-1?-Ck:Math.asin(e)}function nye(e){return e>0?Math.sqrt(e):0}function rye(e,t){var n=e*fx(t),r=30,i;do t-=i=(t+fx(t)-n)/(1+_k(t));while(eye(i)>tye&&--r>0);return t/2}function iye(e,t,n){function r(i,o){return[e*i*_k(o=rye(n,o)),t*fx(o)]}return r.invert=function(i,o){return o=H5(o/t),[i/(e*_k(o)),H5((2*o+fx(2*o))/n)]},r}var oye=iye(q5/Ck,q5,IH);function sye(){return vs(oye).scale(169.529)}const aye=_H(),kk=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function lye(e,t){return function n(){const r=t();return r.type=e,r.path=_H().projection(r),r.copy=r.copy||function(){const i=n();return kk.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},JU(r)}}function IM(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(dx[e]=lye(e,t),this):dx[e]||null}function LH(e){return e&&e.path||aye}const dx={albers:kH,albersusa:I0e,azimuthalequalarea:L0e,azimuthalequidistant:z0e,conicconformal:U0e,conicequalarea:lx,conicequidistant:H0e,equalEarth:G0e,equirectangular:W0e,gnomonic:Y0e,identity:X0e,mercator:j0e,mollweide:sye,naturalEarth1:K0e,orthographic:Q0e,stereographic:Z0e,transversemercator:J0e};for(const e in dx)IM(e,dx[e]);function uye(){}const Ts=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function zH(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return o(l,u,d=>{n(d,l,u),cye(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,g=c.length,p;h<g;++h)if(fye((p=c[h])[0],d)!==-1){p.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=[],d=[],h,g,p,m,y,v;for(h=g=-1,m=l[0]>=u,Ts[m<<1].forEach(x);++h<e-1;)p=m,m=l[h+1]>=u,Ts[p|m<<1].forEach(x);for(Ts[m<<0].forEach(x);++g<t-1;){for(h=-1,m=l[g*e+e]>=u,y=l[g*e]>=u,Ts[m<<1|y<<2].forEach(x);++h<e-1;)p=m,m=l[g*e+e+h+1]>=u,v=y,y=l[g*e+h+1]>=u,Ts[p|m<<1|y<<2|v<<3].forEach(x);Ts[m|y<<3].forEach(x)}for(h=-1,y=l[g*e]>=u,Ts[y<<2].forEach(x);++h<e-1;)v=y,y=l[g*e+h+1]>=u,Ts[y<<2|v<<3].forEach(x);Ts[y<<3].forEach(x);function x(b){var w=[b[0][0]+h,b[0][1]+g],S=[b[1][0]+h,b[1][1]+g],E=s(w),_=s(S),k,T;(k=d[E])?(T=f[_])?(delete d[k.end],delete f[T.start],k===T?(k.ring.push(S),c(k.ring)):f[k.start]=d[T.end]={start:k.start,end:T.end,ring:k.ring.concat(T.ring)}):(delete d[k.end],k.ring.push(S),d[k.end=_]=k):(k=f[_])?(T=d[E])?(delete f[k.start],delete d[T.end],k===T?(k.ring.push(S),c(k.ring)):f[T.start]=d[k.end]={start:T.start,end:k.end,ring:T.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift(w),f[k.start=E]=k):f[E]=d[_]={start:E,end:_,ring:[w,S]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],g=d|0,p=h|0,m,y=u[p*e+g];d>0&&d<e&&g===d&&(m=u[p*e+g-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&p===h&&(m=u[(p-1)*e+g],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||U("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:uye,r):n===a},r}function cye(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function fye(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=dye(e,t[n]))return i;return 0}function dye(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(hye(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function hye(e,t,n){var r;return pye(e,t,n)&&gye(e[r=+(e[0]===t[0])],n[r],t[r])}function pye(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function gye(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function jH(e,t,n){return function(r){var i=is(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?Ml(o,s,e):a/(e+1);return Ur(o+l,s,l)}}function LM(e){z.call(this,null,e)}LM.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};te(LM,z,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Wn,o=zH().smooth(e.smooth!==!1),s=e.thresholds||mye(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=o.size([c.width,c.height])(c.values,W(s)?s:s(c.values));yye(f,c,u,e),f.forEach(d=>{l.push(Mb(u,Ye(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function mye(e,t,n){const r=jH(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Ku(t(i).values)))}function yye(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if($e(i)&&(i=i(n,r)),$e(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(He(i)?i:i[0])||1,a=(He(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(BH(t,s,a,l,u))}function BH(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(l),f}}function V5(e,t,n){const r=e>=0?e:NT(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function qE(e){return $e(e)?e:qn(+e)}function UH(){var e=l=>l[0],t=l=>l[1],n=yh,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const c=V5(r[0],l,e)>>s,f=V5(r[1],l,t)>>s,d=c?c+2:0,h=f?f+2:0,g=2*d+(i>>s),p=2*h+(o>>s),m=new Float32Array(g*p),y=new Float32Array(g*p);let v=m;l.forEach(b=>{const w=d+(+e(b)>>s),S=h+(+t(b)>>s);w>=0&&w<g&&S>=0&&S<p&&(m[w+S*g]+=+n(b))}),c>0&&f>0?(hf(g,p,m,y,c),pf(g,p,y,m,f),hf(g,p,m,y,c),pf(g,p,y,m,f),hf(g,p,m,y,c),pf(g,p,y,m,f)):c>0?(hf(g,p,m,y,c),hf(g,p,y,m,c),hf(g,p,m,y,c),v=y):f>0&&(pf(g,p,m,y,f),pf(g,p,y,m,f),pf(g,p,m,y,f),v=y);const x=u?Math.pow(2,-2*s):1/rj(v);for(let b=0,w=g*p;b<w;++b)v[b]*=x;return{values:v,scale:1<<s,width:g,height:p,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=qE(l),a):e},a.y=function(l){return arguments.length?(t=qE(l),a):t},a.weight=function(l){return arguments.length?(n=qE(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||U("invalid size"),i=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||U("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=le(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&U("invalid bandwidth"),r=l,a):r},a}function hf(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function pf(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function zM(e){z.call(this,null,e)}zM.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const vye=["x","y","weight","size","cellSize","bandwidth"];function WH(e,t){return vye.forEach(n=>t[n]!=null?e[n](t[n]):0),e}te(zM,z,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=xye(r,e.groupby),o=(e.groupby||[]).map(Rt),s=WH(UH(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return l=i.map(c=>Ye(u({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function xye(e,t){var n=[],r=c=>c(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function jM(e){z.call(this,null,e)}jM.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};te(jM,z,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=zH().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||jH(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=WH(UH(),e)(i,!0),l=BH(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=W(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ye),n}});const Ak="Feature",BM="FeatureCollection",bye="MultiPoint";function UM(e){z.call(this,null,e)}UM.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};te(UM,z,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Wn,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(In(a))||o&&t.modified(In(o))||s&&t.modified(In(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Ak,geometry:{type:bye,coordinates:r}})),this.value={type:BM,features:n}}});function WM(e){z.call(this,null,e)}WM.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};te(WM,z,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Wn,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=LH(e.projection),n.materialize().reflow()):s=i===Wn||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=wye(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function wye(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function qM(e){z.call(this,null,e)}qM.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};te(qM,z,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function HM(e){z.call(this,null,e)}HM.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};te(HM,z,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Eye(LH(e.projection),e.field||Si("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function Eye(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function VM(e){z.call(this,[],e),this.generator=m0e()}VM.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};te(VM,z,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)$e(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Zj(n[0],i)):t.add.push(Ye(i)),n[0]=i,t}});function GM(e){z.call(this,null,e)}GM.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};te(GM,z,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Wn,o=_ye(e.opacity,e),s=Sye(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Ku(n.map(u=>Ku(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=Ae({},u,l);r||(f.$max=Ku(c.values||[])),u[a]=Cye(c,f,s.dep?s:qn(s(f)),o.dep?o:qn(o(f)))}),t.reflow(!0).modifies(a)}});function Sye(e,t){let n;return $e(e)?(n=r=>Ol(e(r,t)),n.dep=qH(e)):n=qn(Ol(e||"#888")),n}function _ye(e,t){let n;return $e(e)?(n=r=>e(r,t),n.dep=qH(e)):e?n=qn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function qH(e){if(!$e(e))return!1;const t=ho(In(e));return t.$x||t.$y||t.$value||t.$max}function Cye(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?m=>c[m]:Ya,d=Sl(l-s,u-a),h=d.getContext("2d"),g=h.getImageData(0,0,l-s,u-a),p=g.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=s,x=m*i;v<l;++v,y+=4){t.$x=v-s,t.$value=f(v+x);const b=n(t);p[y+0]=b.r,p[y+1]=b.g,p[y+2]=b.b,p[y+3]=~~(255*r(t))}}return h.putImageData(g,0,0),d}function HH(e){z.call(this,null,e),this.modified(!0)}te(HH,z,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Aye(e.type),kk.forEach(r=>{e[r]!=null&&G5(n,r,e[r])})):kk.forEach(r=>{e.modified(r)&&G5(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&kye(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kye(e,t){const n=$ye(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Aye(e){const t=IM((e||"mercator").toLowerCase());return t||U("Unrecognized projection type: "+e),t()}function G5(e,t,n){$e(e[t])&&e[t](n)}function $ye(e){return e=le(e),e.length===1?e[0]:{type:BM,features:e.reduce((t,n)=>t.concat(Tye(n)),[])}}function Tye(e){return e.type===BM?e.features:le(e).filter(t=>t!=null).map(t=>t.type===Ak?t:{type:Ak,geometry:t})}const Nye=Object.freeze(Object.defineProperty({__proto__:null,contour:jM,geojson:UM,geopath:WM,geopoint:qM,geoshape:HM,graticule:VM,heatmap:GM,isocontour:LM,kde2d:zM,projection:HH},Symbol.toStringTag,{value:"Module"}));function Mye(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Rye(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return VH(this.cover(t,n),t,n,e)}function VH(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,g,p,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((p=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[y=m<<1|p]))return i[y]=s,e;if(h=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===h&&n===g)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(p=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|p)===(v=(g>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function Fye(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)VH(this,s[n],a[n],e[n]);return this}function Oye(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Pye(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Dye(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function tr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Iye(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,g,p;for(h&&d.push(new tr(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);g=d.pop();)if(!(!(h=g.node)||(s=g.x0)>c||(a=g.y0)>f||(l=g.x1)<i||(u=g.y1)<o))if(h.length){var m=(s+l)/2,y=(a+u)/2;d.push(new tr(h[3],m,y,l,u),new tr(h[2],s,y,m,u),new tr(h[1],m,a,l,y),new tr(h[0],s,a,m,y)),(p=(t>=y)<<1|e>=m)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=g)}else{var v=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),b=v*v+x*x;if(b<n){var w=Math.sqrt(n=b);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function Lye(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,g,p,m,y;if(!n)return this;if(n.length)for(;;){if((g=c>=(d=(s+l)/2))?s=d:l=d,(p=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=p<<1|g]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function zye(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function jye(){return this._root}function Bye(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Uye(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new tr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&t.push(new tr(i,u,c,a,l)),(i=r[2])&&t.push(new tr(i,o,c,u,l)),(i=r[1])&&t.push(new tr(i,u,s,a,c)),(i=r[0])&&t.push(new tr(i,o,s,u,c))}return this}function Wye(e){var t=[],n=[],r;for(this._root&&t.push(new tr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&t.push(new tr(o,s,a,c,f)),(o=i[1])&&t.push(new tr(o,c,a,l,f)),(o=i[2])&&t.push(new tr(o,s,f,c,u)),(o=i[3])&&t.push(new tr(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function qye(e){return e[0]}function Hye(e){return arguments.length?(this._x=e,this):this._x}function Vye(e){return e[1]}function Gye(e){return arguments.length?(this._y=e,this):this._y}function YM(e,t,n){var r=new XM(t??qye,n??Vye,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function XM(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Y5(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var dr=YM.prototype=XM.prototype;dr.copy=function(){var e=new XM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Y5(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Y5(r));return e};dr.add=Rye;dr.addAll=Fye;dr.cover=Oye;dr.data=Pye;dr.extent=Dye;dr.find=Iye;dr.remove=Lye;dr.removeAll=zye;dr.root=jye;dr.size=Bye;dr.visit=Uye;dr.visitAfter=Wye;dr.x=Hye;dr.y=Gye;function nr(e){return function(){return e}}function ul(e){return(e()-.5)*1e-6}function Yye(e){return e.x+e.vx}function Xye(e){return e.y+e.vy}function Kye(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=nr(e==null?1:+e));function s(){for(var u,c=t.length,f,d,h,g,p,m,y=0;y<o;++y)for(f=YM(t,Yye,Xye).visitAfter(a),u=0;u<c;++u)d=t[u],p=n[d.index],m=p*p,h=d.x+d.vx,g=d.y+d.vy,f.visit(v);function v(x,b,w,S,E){var _=x.data,k=x.r,T=p+k;if(_){if(_.index>d.index){var N=h-_.x-_.vx,P=g-_.y-_.vy,D=N*N+P*P;D<T*T&&(N===0&&(N=ul(r),D+=N*N),P===0&&(P=ul(r),D+=P*P),D=(T-(D=Math.sqrt(D)))/D*i,d.vx+=(N*=D)*(T=(k*=k)/(m+k)),d.vy+=(P*=D)*T,_.vx-=N*(T=1-T),_.vy-=P*T)}return}return b>h+T||S<h-T||w>g+T||E<g-T}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,r=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:nr(+u),l(),s):e},s}function Qye(e){return e.index}function X5(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Zye(e){var t=Qye,n=f,r,i=nr(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var x=0,b,w,S,E,_,k,T;x<v;++x)b=e[x],w=b.source,S=b.target,E=S.x+S.vx-w.x-w.vx||ul(u),_=S.y+S.vy-w.y-w.vy||ul(u),k=Math.sqrt(E*E+_*_),k=(k-o[x])/k*m*r[x],E*=k,_*=k,S.vx-=E*(T=l[x]),S.vy-=_*T,w.vx+=E*(T=1-T),w.vy+=_*T}function h(){if(s){var m,y=s.length,v=e.length,x=new Map(s.map((w,S)=>[t(w,S,s),w])),b;for(m=0,a=new Array(y);m<v;++m)b=e[m],b.index=m,typeof b.source!="object"&&(b.source=X5(x,b.source)),typeof b.target!="object"&&(b.target=X5(x,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)b=e[m],l[m]=a[b.source.index]/(a[b.source.index]+a[b.target.index]);r=new Array(v),g(),o=new Array(v),p()}}function g(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function p(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:nr(+m),g(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:nr(+m),p(),d):i},d}var Jye={value:()=>{}};function GH(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new y1(n)}function y1(e){this._=e}function e1e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}y1.prototype=GH.prototype={constructor:y1,on:function(e,t){var n=this._,r=e1e(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=t1e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=K5(n[i],e.name,t);else if(t==null)for(i in n)n[i]=K5(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new y1(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function t1e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function K5(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Jye,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gd=0,Vp=0,pp=0,YH=1e3,hx,Gp,px=0,xc=0,gw=0,am=typeof performance=="object"&&performance.now?performance:Date,XH=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function KM(){return xc||(XH(n1e),xc=am.now()+gw)}function n1e(){xc=0}function gx(){this._call=this._time=this._next=null}gx.prototype=KH.prototype={constructor:gx,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?KM():+n)+(t==null?0:+t),!this._next&&Gp!==this&&(Gp?Gp._next=this:hx=this,Gp=this),this._call=e,this._time=n,$k()},stop:function(){this._call&&(this._call=null,this._time=1/0,$k())}};function KH(e,t,n){var r=new gx;return r.restart(e,t,n),r}function r1e(){KM(),++Gd;for(var e=hx,t;e;)(t=xc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gd}function Q5(){xc=(px=am.now())+gw,Gd=Vp=0;try{r1e()}finally{Gd=0,o1e(),xc=0}}function i1e(){var e=am.now(),t=e-px;t>YH&&(gw-=t,px=e)}function o1e(){for(var e,t=hx,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:hx=n);Gp=e,$k(r)}function $k(e){if(!Gd){Vp&&(Vp=clearTimeout(Vp));var t=e-xc;t>24?(e<1/0&&(Vp=setTimeout(Q5,e-am.now()-gw)),pp&&(pp=clearInterval(pp))):(pp||(px=am.now(),pp=setInterval(i1e,YH)),Gd=1,XH(Q5))}}function s1e(e,t,n){var r=new gx,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?KM():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const a1e=1664525,l1e=1013904223,Z5=4294967296;function u1e(){let e=1;return()=>(e=(a1e*e+l1e)%Z5)/Z5}function c1e(e){return e.x}function f1e(e){return e.y}var d1e=10,h1e=Math.PI*(3-Math.sqrt(5));function p1e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=KH(f),u=GH("tick","end"),c=u1e();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(p){var m,y=e.length,v;p===void 0&&(p=1);for(var x=0;x<p;++x)for(n+=(o-n)*i,a.forEach(function(b){b(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var p=0,m=e.length,y;p<m;++p){if(y=e[p],y.index=p,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=d1e*Math.sqrt(.5+p),x=p*h1e;y.x=v*Math.cos(x),y.y=v*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function g(p){return p.initialize&&p.initialize(e,c),p}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(p){return arguments.length?(e=p,h(),a.forEach(g),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(r=+p,t):r},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(o=+p,t):o},velocityDecay:function(p){return arguments.length?(s=1-p,t):1-s},randomSource:function(p){return arguments.length?(c=p,a.forEach(g),t):c},force:function(p,m){return arguments.length>1?(m==null?a.delete(p):a.set(p,g(m)),t):a.get(p)},find:function(p,m,y){var v=0,x=e.length,b,w,S,E,_;for(y==null?y=1/0:y*=y,v=0;v<x;++v)E=e[v],b=p-E.x,w=m-E.y,S=b*b+w*w,S<y&&(_=E,y=S);return _},on:function(p,m){return arguments.length>1?(u.on(p,m),t):u.on(p)}}}function g1e(){var e,t,n,r,i=nr(-30),o,s=1,a=1/0,l=.81;function u(h){var g,p=e.length,m=YM(e,c1e,f1e).visitAfter(f);for(r=h,g=0;g<p;++g)t=e[g],m.visit(d)}function c(){if(e){var h,g=e.length,p;for(o=new Array(g),h=0;h<g;++h)p=e[h],o[p.index]=+i(p,h,e)}}function f(h){var g=0,p,m,y=0,v,x,b;if(h.length){for(v=x=b=0;b<4;++b)(p=h[b])&&(m=Math.abs(p.value))&&(g+=p.value,y+=m,v+=m*p.x,x+=m*p.y);h.x=v/y,h.y=x/y}else{p=h,p.x=p.data.x,p.y=p.data.y;do g+=o[p.data.index];while(p=p.next)}h.value=g}function d(h,g,p,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,x=m-g,b=y*y+v*v;if(x*x/l<b)return b<a&&(y===0&&(y=ul(n),b+=y*y),v===0&&(v=ul(n),b+=v*v),b<s&&(b=Math.sqrt(s*b)),t.vx+=y*h.value*r/b,t.vy+=v*h.value*r/b),!0;if(h.length||b>=a)return;(h.data!==t||h.next)&&(y===0&&(y=ul(n),b+=y*y),v===0&&(v=ul(n),b+=v*v),b<s&&(b=Math.sqrt(s*b)));do h.data!==t&&(x=o[h.data.index]*r/b,t.vx+=y*x,t.vy+=v*x);while(h=h.next)}return u.initialize=function(h,g){e=h,n=g,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:nr(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function m1e(e){var t=nr(.1),n,r,i;typeof e!="function"&&(e=nr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:nr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:nr(+a),s(),o):e},o}function y1e(e){var t=nr(.1),n,r,i;typeof e!="function"&&(e=nr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:nr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:nr(+a),s(),o):e},o}const J5={center:Mye,collide:Kye,nbody:g1e,link:Zye,x:m1e,y:y1e},Yp="forces",Tk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],v1e=["static","iterations"],QH=["x","y","vx","vy"];function QM(e){z.call(this,null,e)}QM.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:QH}]};te(QM,z,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Tk),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&ZH(n,e,0,t)):(this.value=n=b1e(t.source,e),n.on("tick",x1e(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(v1e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==Yp||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(QH)}});function x1e(e,t){return()=>e.touch(t).run()}function b1e(e,t){const n=p1e(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),ZH(n,t,!0).on("end",()=>o=!0)}function ZH(e,t,n,r){var i=le(t.forces),o,s,a,l;for(o=0,s=Tk.length;o<s;++o)a=Tk[o],a!==Yp&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=Yp+o,a=n||t.modified(Yp,o)?E1e(i[o]):r&&w1e(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(Yp+o,null);return e.numForces=i.length,e}function w1e(e,t){var n,r;for(n in e)if($e(r=e[n])&&t.modified(In(r)))return 1;return 0}function E1e(e){var t,n;fe(J5,e.force)||U("Unrecognized force: "+e.force),t=J5[e.force]();for(n in e)$e(t[n])&&S1e(t[n],e[n],e);return t}function S1e(e,t,n){e($e(t)?r=>t(r,n):t)}const _1e=Object.freeze(Object.defineProperty({__proto__:null,force:QM},Symbol.toStringTag,{value:"Module"}));function C1e(e,t){return e.parent===t.parent?1:2}function k1e(e){return e.reduce(A1e,0)/e.length}function A1e(e,t){return e+t.x}function $1e(e){return 1+e.reduce(T1e,0)}function T1e(e,t){return Math.max(e,t.y)}function N1e(e){for(var t;t=e.children;)e=t[0];return e}function M1e(e){for(var t;t=e.children;)e=t[t.length-1];return e}function R1e(){var e=C1e,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=k1e(h),d.y=$1e(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=N1e(o),u=M1e(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function F1e(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function O1e(){return this.eachAfter(F1e)}function P1e(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function D1e(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function I1e(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function L1e(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function z1e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function j1e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function B1e(e){for(var t=this,n=U1e(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function U1e(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function W1e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function q1e(){return Array.from(this)}function H1e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function V1e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*G1e(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function ZM(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=K1e)):t===void 0&&(t=X1e);for(var n=new Yd(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new Yd(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(JH)}function Y1e(){return ZM(this).eachBefore(Q1e)}function X1e(e){return e.children}function K1e(e){return Array.isArray(e)?e[1]:null}function Q1e(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function JH(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Yd(e){this.data=e,this.depth=this.height=0,this.parent=null}Yd.prototype=ZM.prototype={constructor:Yd,count:O1e,each:P1e,eachAfter:I1e,eachBefore:D1e,find:L1e,sum:z1e,sort:j1e,path:B1e,ancestors:W1e,descendants:q1e,leaves:H1e,links:V1e,copy:Y1e,[Symbol.iterator]:G1e};function v1(e){return e==null?null:eV(e)}function eV(e){if(typeof e!="function")throw new Error;return e}function Ou(){return 0}function _f(e){return function(){return e}}const Z1e=1664525,J1e=1013904223,eI=4294967296;function eve(){let e=1;return()=>(e=(Z1e*e+J1e)%eI)/eI}function tve(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nve(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function rve(e,t){for(var n=0,r=(e=nve(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&tV(s,o)?++n:(s=ove(i=ive(i,o)),n=0);return s}function ive(e,t){var n,r;if(HE(t,e))return[t];for(n=0;n<e.length;++n)if(vy(t,e[n])&&HE(Xp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(vy(Xp(e[n],e[r]),t)&&vy(Xp(e[n],t),e[r])&&vy(Xp(e[r],t),e[n])&&HE(nV(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function vy(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function tV(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function HE(e,t){for(var n=0;n<t.length;++n)if(!tV(e,t[n]))return!1;return!0}function ove(e){switch(e.length){case 1:return sve(e[0]);case 2:return Xp(e[0],e[1]);case 3:return nV(e[0],e[1],e[2])}}function sve(e){return{x:e.x,y:e.y,r:e.r}}function Xp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+s+u/f*c)/2,r:(f+i+a)/2}}function nV(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-s,h=r-u,g=i-a,p=i-c,m=l-o,y=f-o,v=r*r+i*i-o*o,x=v-s*s-a*a+l*l,b=v-u*u-c*c+f*f,w=h*g-d*p,S=(g*b-p*x)/(w*2)-r,E=(p*m-g*y)/w,_=(h*x-d*b)/(w*2)-i,k=(d*y-h*m)/w,T=E*E+k*k-1,N=2*(o+S*E+_*k),P=S*S+_*_-o*o,D=-(Math.abs(T)>1e-6?(N+Math.sqrt(N*N-4*T*P))/(2*T):P/N);return{x:r+S+E*D,y:i+_+k*D,r:D}}function tI(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function nI(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rI(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function xy(e){this._=e,this.next=null,this.previous=null}function ave(e,t){if(!(o=(e=tve(e)).length))return 0;var n,r,i,o,s,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;tI(r,n,i=e[2]),n=new xy(n),r=new xy(r),i=new xy(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){tI(n._,r._,i=e[l]),i=new xy(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(nI(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(nI(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=rI(n);(i=i.next)!==r;)(a=rI(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=rve(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function lve(e){return Math.sqrt(e.value)}function uve(){var e=null,t=1,n=1,r=Ou;function i(o){const s=eve();return o.x=t/2,o.y=n/2,e?o.eachBefore(iI(e)).eachAfter(VE(r,.5,s)).eachBefore(oI(1)):o.eachBefore(iI(lve)).eachAfter(VE(Ou,1,s)).eachAfter(VE(r,o.r/Math.min(t,n),s)).eachBefore(oI(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=v1(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:_f(+o),i):r},i}function iI(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function VE(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=ave(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function oI(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function rV(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function i0(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function cve(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(rV),s}function o(s,a){return function(l){l.children&&i0(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var fve={depth:-1},sI={},GE={};function dve(e){return e.id}function hve(e){return e.parentId}function aI(){var e=dve,t=hve,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,c,f,d,h,g,p,m=new Map;if(n!=null){const y=o.map((b,w)=>pve(n(b,w,i))),v=y.map(lI),x=new Set(y).add("");for(const b of v)x.has(b)||(x.add(b),y.push(b),v.push(lI(b)),o.push(GE));s=(b,w)=>y[w],a=(b,w)=>v[w]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new Yd(u),(g=s(u,c,i))!=null&&(g+="")&&(p=h.id=g,m.set(p,m.has(p)?sI:h)),(g=a(u,c,i))!=null&&(g+="")&&(h.parent=g);for(c=0;c<l;++c)if(h=o[c],g=h.parent){if(d=m.get(g),!d)throw new Error("missing: "+g);if(d===sI)throw new Error("ambiguous: "+g);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===GE&&f.children.length===1;)f=f.children[0],--l;for(let y=o.length-1;y>=0&&(h=o[y],h.data===GE);--y)h.data=null}if(f.parent=fve,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(JH),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=v1(i),r):e},r.parentId=function(i){return arguments.length?(t=v1(i),r):t},r.path=function(i){return arguments.length?(n=v1(i),r):n},r}function pve(e){e=`${e}`;let t=e.length;return Nk(e,t-1)&&!Nk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function lI(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Nk(e,t););return e.slice(0,t)}function Nk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function gve(e,t){return e.parent===t.parent?1:2}function YE(e){var t=e.children;return t?t[0]:e.t}function XE(e){var t=e.children;return t?t[t.length-1]:e.t}function mve(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function yve(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function vve(e,t,n){return e.a.parent===t.parent?e.a:n}function x1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}x1.prototype=Object.create(Yd.prototype);function xve(e){for(var t=new x1(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new x1(o[s],s)),i.parent=n;return(t.parent=new x1(null,0)).children=[t],t}function bve(){var e=gve,t=1,n=1,r=null;function i(u){var c=xve(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var g=f===d?1:e(f,d)/2,p=g-f.x,m=t/(d.x+g+p),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+p)*m,v.y=v.depth*y})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){yve(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,g=c,p=d.parent.children[0],m=d.m,y=h.m,v=g.m,x=p.m,b;g=XE(g),d=YE(d),g&&d;)p=YE(p),h=XE(h),h.a=u,b=g.z+v-d.z-m+e(g._,d._),b>0&&(mve(vve(g,u,f),u,b),m+=b,y+=b),v+=g.m,m+=d.m,x+=p.m,y+=h.m;g&&!XE(h)&&(h.t=g,h.m+=v-y),d&&!YE(p)&&(p.t=d,p.m+=m-x,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function mw(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var iV=(1+Math.sqrt(5))/2;function oV(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,c=0,f=0,d=a.length,h,g,p=t.value,m,y,v,x,b,w,S;c<d;){h=i-n,g=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(g/h,h/g)/(p*e),S=m*m*w,b=Math.max(v/S,S/y);f<d;++f){if(m+=u=a[f].value,u<y&&(y=u),u>v&&(v=u),S=m*m*w,x=Math.max(v/S,S/y),x>b){m-=u;break}b=x}s.push(l={value:m,dice:h<g,children:a.slice(c,f)}),l.dice?i0(l,n,r,i,p?r+=g*m/p:o):mw(l,n,r,p?n+=h*m/p:i,o),p-=m,c=f}return s}const sV=function e(t){function n(r,i,o,s,a){oV(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iV);function wve(){var e=sV,t=!1,n=1,r=1,i=[0],o=Ou,s=Ou,a=Ou,l=Ou,u=Ou;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(rV),d}function f(d){var h=i[d.depth],g=d.x0+h,p=d.y0+h,m=d.x1-h,y=d.y1-h;m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),d.x0=g,d.y0=p,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,g+=u(d)-h,p+=s(d)-h,m-=a(d)-h,y-=l(d)-h,m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),e(d,g,p,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=eV(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:_f(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:_f(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:_f(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:_f(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:_f(+d),c):u},c}function Eve(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,g,p,m,y){if(f>=d-1){var v=o[f];v.x0=g,v.y0=p,v.x1=m,v.y1=y;return}for(var x=u[f],b=h/2+x,w=f+1,S=d-1;w<S;){var E=w+S>>>1;u[E]<b?w=E+1:S=E}b-u[w-1]<u[w]-b&&f+1<w&&--w;var _=u[w]-x,k=h-_;if(m-g>y-p){var T=h?(g*k+m*_)/h:m;c(f,w,_,g,p,T,y),c(w,d,k,T,p,m,y)}else{var N=h?(p*k+y*_)/h:y;c(f,w,_,g,p,m,N),c(w,d,k,g,N,m,y)}}}function Sve(e,t,n,r,i){(e.depth&1?mw:i0)(e,t,n,r,i)}const _ve=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,g=l.length,p=r.value;++d<g;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?i0(u,i,o,s,p?o+=(a-o)*u.value/p:a):mw(u,i,o,p?i+=(s-i)*u.value/p:s,a),p-=u.value}else r._squarify=l=oV(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iV);function Mk(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function JM(e){z.call(this,null,e)}JM.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Cve=e=>e.values;te(JM,z,{transform(e,t){t.source||U("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&Nb(s.data)&&i.rem.push(s.data)}),this.value=o=ZM({values:le(e.keys).reduce((s,a)=>(s.key(a),s),kve()).entries(i.source)},Cve),n&&o.each(s=>{s.children&&(s=Ye(s.data),i.add.push(s),i.source.push(s))}),Mk(o,ve,ve)),i.source.root=o,i}});function kve(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function va(e){z.call(this,null,e)}const Ave=(e,t)=>e.parent===t.parent?1:2;te(va,z,{transform(e,t){(!t.source||!t.source.root)&&U(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Bc(e.sort,s=>s.data)),$ve(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Ave:yh);try{this.value=n(i)}catch(s){U(s)}return i.each(s=>Tve(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function $ve(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function Tve(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const Rk=["x","y","r","depth","children"];function eR(e){va.call(this,e)}eR.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Rk.length,default:Rk}]};te(eR,va,{layout:uve,params:["radius","size","padding"],fields:Rk});const Fk=["x0","y0","x1","y1","depth","children"];function tR(e){va.call(this,e)}tR.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Fk.length,default:Fk}]};te(tR,va,{layout:cve,params:["size","round","padding"],fields:Fk});function nR(e){z.call(this,null,e)}nR.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};te(nR,z,{transform(e,t){t.source||U("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Mk(aI().id(e.key).parentId(e.parentKey)(i.source),e.key,_i):Mk(aI()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const uI={tidy:bve,cluster:R1e},Ok=["x","y","depth","children"];function rR(e){va.call(this,e)}rR.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Ok.length,default:Ok}]};te(rR,va,{layout(e){const t=e||"tidy";if(fe(uI,t))return uI[t]();U("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Ok});function iR(e){z.call(this,[],e)}iR.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};te(iR,z,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||U("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[ve(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[ve(a)]&&o[ve(l)]&&i.add.push(Ye({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[ve(s)]=1),n.forEach(s=>{(o[ve(s.source)]||o[ve(s.target)])&&i.mod.push(s)})),i}});const cI={binary:Eve,dice:i0,slice:mw,slicedice:Sve,squarify:sV,resquarify:_ve},Pk=["x0","y0","x1","y1","depth","children"];function oR(e){va.call(this,e)}oR.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Pk.length,default:Pk}]};te(oR,va,{layout(){const e=wve();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{fe(cI,t)?e.tile(cI[t]):U("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Pk});const Nve=Object.freeze(Object.defineProperty({__proto__:null,nest:JM,pack:eR,partition:tR,stratify:nR,tree:rR,treelinks:iR,treemap:oR},Symbol.toStringTag,{value:"Module"})),KE=4278190080;function Mve(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Rve(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=Sl(o,s).getContext("2d"),u=Sl(o,s).getContext("2d"),c=a&&Sl(o,s).getContext("2d");n.forEach(_=>b1(l,_,!1)),b1(u,t,!1),a&&b1(c,t,!0);const f=QE(l,o,s),d=QE(u,o,s),h=a&&QE(c,o,s),g=e.bitmap(),p=a&&e.bitmap();let m,y,v,x,b,w,S,E;for(y=0;y<s;++y)for(m=0;m<o;++m)b=y*o+m,w=f[b]&KE,E=d[b]&KE,S=a&&h[b]&KE,(w||S||E)&&(v=e(m),x=e(y),!i&&(w||E)&&g.set(v,x),a&&(w||S)&&p.set(v,x));return[g,p]}function QE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function b1(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>b1(e,o.items,n))}):ei[r].draw(e,{items:n?t.map(Fve):t})}function Fve(e){const t=Mb(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ns=5,Hn=31,lm=32,qa=new Uint32Array(lm+1),Qi=new Uint32Array(lm+1);Qi[0]=0;qa[0]=~Qi[0];for(let e=1;e<=lm;++e)Qi[e]=Qi[e-1]<<1|1,qa[e]=~Qi[e];function Ove(e,t){const n=new Uint32Array(~~((e*t+lm)/lm));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Ns]&1<<(a&Hn)},set:(o,s)=>{const a=s*e+o;r(a>>>Ns,1<<(a&Hn))},clear:(o,s)=>{const a=s*e+o;i(a>>>Ns,~(1<<(a&Hn)))},getRange:(o,s,a,l)=>{let u=l,c,f,d,h;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,d=c>>>Ns,h=f>>>Ns,d===h){if(n[d]&qa[c&Hn]&Qi[(f&Hn)+1])return!0}else{if(n[d]&qa[c&Hn]||n[h]&Qi[(f&Hn)+1])return!0;for(let g=d+1;g<h;++g)if(n[g])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ns,d=c>>>Ns,f===d)r(f,qa[u&Hn]&Qi[(c&Hn)+1]);else for(r(f,qa[u&Hn]),r(d,Qi[(c&Hn)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ns,d=c>>>Ns,f===d)i(f,Qi[u&Hn]|qa[(c&Hn)+1]);else for(i(f,Qi[u&Hn]),i(d,qa[(c&Hn)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function Pve(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>Ove(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function Dve(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,c=Gr.width(s.datum,s.datum.text);let f=0,d,h,g,p,m,y,v;for(let x=0;x<l;++x)d=a[x].x,g=a[x].y,h=a[x].x2===void 0?d:a[x].x2,p=a[x].y2===void 0?g:a[x].y2,m=(d+h)/2,y=(g+p)/2,v=Math.abs(h-d+p-g),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=u/2,d=s.x-m,h=s.x+m,g=s.y-y,p=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",g<0&&p<=o?s.baseline="top":0<=g&&o<p&&(s.baseline="bottom"),!0}}function mx(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function cl(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),c=e(t+l),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,f,c,d)||s.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function Ive(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,d,h){const g=e.invert(u),p=e.invert(c);let m=f,y=o,v;if(!mx(g,p,d,h,i,o)&&!cl(e,g,p,h,d,m,s,a)&&!cl(e,g,p,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,cl(e,g,p,h,d,v,s,a)?y=v:m=v;if(m>f)return[g,p,m,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Gr.width(u.datum,u.datum.text);let g=n?d:0,p=!1,m=!1,y=0,v,x,b,w,S,E,_,k,T,N,P,D,M,$,R,I,F;for(let O=0;O<f;++O){for(v=c[O].x,b=c[O].y,x=c[O].x2===void 0?v:c[O].x2,w=c[O].y2===void 0?b:c[O].y2,v>x&&(F=v,v=x,x=F),b>w&&(F=b,b=w,w=F),T=e(v),P=e(x),N=~~((T+P)/2),D=e(b),$=e(w),M=~~((D+$)/2),_=N;_>=T;--_)for(k=M;k>=D;--k)I=l(_,k,g,h,d),I&&([u.x,u.y,g,p]=I);for(_=N;_<=P;++_)for(k=M;k<=$;++k)I=l(_,k,g,h,d),I&&([u.x,u.y,g,p]=I);!p&&!n&&(R=Math.abs(x-v+w-b),S=(v+x)/2,E=(b+w)/2,R>=y&&!mx(S,E,h,d,i,o)&&!cl(e,S,E,d,h,d,s,null)&&(y=R,u.x=S,u.y=E,m=!0))}return p||m?(S=h/2,E=d/2,s.setRange(e(u.x-S),e(u.y-E),e(u.x+S),e(u.y+E)),u.align="center",u.baseline="middle",!0):!1}}const Lve=[-1,-1,1,1],zve=[-1,1,-1,1];function jve(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Gr.width(u.datum,u.datum.text),g=[];let p=n?d:0,m=!1,y=!1,v=0,x,b,w,S,E,_,k,T,N,P,D,M;for(let $=0;$<f;++$){for(x=c[$].x,w=c[$].y,b=c[$].x2===void 0?x:c[$].x2,S=c[$].y2===void 0?w:c[$].y2,g.push([e((x+b)/2),e((w+S)/2)]);g.length;)if([k,T]=g.pop(),!(s.get(k,T)||a.get(k,T)||l.get(k,T))){l.set(k,T);for(let R=0;R<4;++R)E=k+Lve[R],_=T+zve[R],l.outOfBounds(E,_,E,_)||g.push([E,_]);if(E=e.invert(k),_=e.invert(T),N=p,P=o,!mx(E,_,h,d,i,o)&&!cl(e,E,_,d,h,N,s,a)&&!cl(e,E,_,d,h,d,s,null)){for(;P-N>=1;)D=(N+P)/2,cl(e,E,_,d,h,D,s,a)?P=D:N=D;N>p&&(u.x=E,u.y=_,p=N,m=!0)}}!m&&!n&&(M=Math.abs(b-x+S-w),E=(x+b)/2,_=(w+S)/2,M>=v&&!mx(E,_,h,d,i,o)&&!cl(e,E,_,d,h,d,s,null)&&(v=M,u.x=E,u.y=_,y=!0))}return m||y?(E=h/2,_=d/2,s.setRange(e(u.x-E),e(u.y-_),e(u.x+E),e(u.y+_)),u.align="center",u.baseline="middle",!0):!1}}const Bve=["right","center","left"],Uve=["bottom","middle","top"];function Wve(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=u.textWidth??0,h,g,p,m,y,v,x,b,w,S,E,_,k,T,N;for(let P=0;P<l;++P){if(h=(n[P]&3)-1,g=(n[P]>>>2&3)-1,p=h===0&&g===0||r[P]<0,m=h&&g?Math.SQRT1_2:1,y=r[P]<0?-1:1,v=c[1+h]+r[P]*h*m,E=c[4+g]+y*f*g/2+r[P]*g*m,b=E-f/2,w=E+f/2,_=e(v),T=e(b),N=e(w),!d)if(fI(_,_,T,N,s,a,v,v,b,w,c,p))d=Gr.width(u.datum,u.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,x=S+d/2,_=e(v),k=e(x),fI(_,k,T,N,s,a,v,x,b,w,c,p))return u.x=h?h*y<0?x:v:S,u.y=g?g*y<0?w:b:E,u.align=Bve[h*y+1],u.baseline=Uve[g*y+1],s.setRange(_,T,k,N),!0}return!1}}function fI(e,t,n,r,i,o,s,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const ZE=0,JE=4,eS=8,tS=0,nS=1,rS=2,qve={"top-left":ZE+tS,top:ZE+nS,"top-right":ZE+rS,left:JE+tS,middle:JE+nS,right:JE+rS,"bottom-left":eS+tS,bottom:eS+nS,"bottom-right":eS+rS},Hve={naive:Dve,"reduced-search":Ive,floodfill:jve};function Vve(e,t,n,r,i,o,s,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Gve(r,f),h=Yve(i,f),g=Xve(e[0].datum),p=g==="group"&&e[0].datum.items[l].marktype,m=p==="area",y=Kve(g,p,a,l),v=u===null||u===1/0,x=m&&c==="naive";let b=-1,w=-1;const S=e.map(T=>{const N=v?Gr.width(T,T.text):void 0;return b=Math.max(b,N),w=Math.max(w,T.fontSize),{datum:T,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(T),textWidth:N}});u=u===null||u===1/0?Math.max(b,w)+Math.max(...r):u;const E=Pve(t[0],t[1],u);let _;if(!x){n&&S.sort((P,D)=>n(P.datum,D.datum));let T=!1;for(let P=0;P<h.length&&!T;++P)T=h[P]===5||d[P]<0;const N=(g&&s||m)&&e.map(P=>P.datum);_=o.length||N?Rve(E,N||[],o,T,m):Mve(E,s&&S)}const k=m?Hve[c](E,_,s,l):Wve(E,_,h,d);return S.forEach(T=>T.opacity=+k(T)),S}function Gve(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Yve(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=qve[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Xve(e){return e&&e.mark&&e.mark.marktype}function Kve(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const Dk=["x","y","opacity","align","baseline"],aV=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function sR(e){z.call(this,null,e)}sR.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:aV},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Dk.length,default:Dk}]};te(sR,z,{transform(e,t){function n(o){const s=e[o];return $e(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&U("Size parameter should be specified as a [width, height] array.");const i=e.as||Dk;return Vve(t.materialize(t.SOURCE).source||[],e.size,e.sort,le(e.offset==null?1:e.offset),le(e.anchor||aV),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Qve=Object.freeze(Object.defineProperty({__proto__:null,label:sR},Symbol.toStringTag,{value:"Module"}));function lV(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function aR(e){z.call(this,null,e)}aR.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};te(aR,z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=lV(r,e.groupby),o=(e.groupby||[]).map(Rt),s=o.length,a=e.as||[Rt(e.x),Rt(e.y)],l=[];i.forEach(u=>{mB(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(Ye(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const Ik={constant:UT,linear:WT,log:dB,exp:hB,pow:pB,quad:qT,poly:gB},Zve=(e,t)=>e==="poly"?t:e==="quad"?2:1;function lR(e){z.call(this,null,e)}lR.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Ik)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};te(lR,z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=lV(r,e.groupby),o=(e.groupby||[]).map(Rt),s=e.method||"linear",a=e.order==null?3:e.order,l=Zve(s,a),u=e.as||[Rt(e.x),Rt(e.y)],c=Ik[s],f=[];let d=e.extent;fe(Ik,s)||U("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const p=c(h,e.x,e.y,a);if(e.params){f.push(Ye({keys:h.dims,coef:p.coef,rSquared:p.rSquared}));return}const m=d||is(h,e.x),y=v=>{const x={};for(let b=0;b<o.length;++b)x[o[b]]=h.dims[b];x[u[0]]=v[0],x[u[1]]=v[1],f.push(Ye(x))};s==="linear"||s==="constant"?m.forEach(v=>y([v,p.predict(v)])):Lb(p.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Jve=Object.freeze(Object.defineProperty({__proto__:null,loess:aR,regression:lR},Symbol.toStringTag,{value:"Module"})),Zs=11102230246251565e-32,$n=134217729,exe=(3+8*Zs)*Zs;function iS(e,t,n,r,i){let o,s,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function txe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function o0(e){return new Float64Array(e)}const nxe=(3+16*Zs)*Zs,rxe=(2+12*Zs)*Zs,ixe=(9+64*Zs)*Zs*Zs,gf=o0(4),dI=o0(8),hI=o0(12),pI=o0(16),Vn=o0(4);function oxe(e,t,n,r,i,o,s){let a,l,u,c,f,d,h,g,p,m,y,v,x,b,w,S,E,_;const k=e-i,T=n-i,N=t-o,P=r-o;b=k*P,d=$n*k,h=d-(d-k),g=k-h,d=$n*P,p=d-(d-P),m=P-p,w=g*m-(b-h*p-g*p-h*m),S=N*T,d=$n*N,h=d-(d-N),g=N-h,d=$n*T,p=d-(d-T),m=T-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,gf[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,gf[1]=x-(y+f)+(f-S),_=v+y,f=_-v,gf[2]=v-(_-f)+(y-f),gf[3]=_;let D=txe(4,gf),M=rxe*s;if(D>=M||-D>=M||(f=e-k,a=e-(k+f)+(f-i),f=n-T,u=n-(T+f)+(f-i),f=t-N,l=t-(N+f)+(f-o),f=r-P,c=r-(P+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(M=ixe*s+exe*Math.abs(D),D+=k*c+P*a-(N*u+T*l),D>=M||-D>=M))return D;b=a*P,d=$n*a,h=d-(d-a),g=a-h,d=$n*P,p=d-(d-P),m=P-p,w=g*m-(b-h*p-g*p-h*m),S=l*T,d=$n*l,h=d-(d-l),g=l-h,d=$n*T,p=d-(d-T),m=T-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,Vn[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,Vn[1]=x-(y+f)+(f-S),_=v+y,f=_-v,Vn[2]=v-(_-f)+(y-f),Vn[3]=_;const $=iS(4,gf,4,Vn,dI);b=k*c,d=$n*k,h=d-(d-k),g=k-h,d=$n*c,p=d-(d-c),m=c-p,w=g*m-(b-h*p-g*p-h*m),S=N*u,d=$n*N,h=d-(d-N),g=N-h,d=$n*u,p=d-(d-u),m=u-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,Vn[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,Vn[1]=x-(y+f)+(f-S),_=v+y,f=_-v,Vn[2]=v-(_-f)+(y-f),Vn[3]=_;const R=iS($,dI,4,Vn,hI);b=a*c,d=$n*a,h=d-(d-a),g=a-h,d=$n*c,p=d-(d-c),m=c-p,w=g*m-(b-h*p-g*p-h*m),S=l*u,d=$n*l,h=d-(d-l),g=l-h,d=$n*u,p=d-(d-u),m=u-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,Vn[0]=w-(y+f)+(f-E),v=b+y,f=v-b,x=b-(v-f)+(y-f),y=x-S,f=x-y,Vn[1]=x-(y+f)+(f-S),_=v+y,f=_-v,Vn[2]=v-(_-f)+(y-f),Vn[3]=_;const I=iS(R,hI,4,Vn,pI);return pI[I-1]}function by(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=nxe*u?l:-oxe(e,t,n,r,i,o,u)}const gI=Math.pow(2,-52),wy=new Uint32Array(512);class yx{static from(t,n=cxe,r=fxe){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new yx(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let k=0;k<s;k++){const T=t[2*k],N=t[2*k+1];T<a&&(a=T),N<l&&(l=N),T>u&&(u=T),N>c&&(c=N),this._ids[k]=k}const f=(a+u)/2,d=(l+c)/2;let h,g,p;for(let k=0,T=1/0;k<s;k++){const N=oS(f,d,t[2*k],t[2*k+1]);N<T&&(h=k,T=N)}const m=t[2*h],y=t[2*h+1];for(let k=0,T=1/0;k<s;k++){if(k===h)continue;const N=oS(m,y,t[2*k],t[2*k+1]);N<T&&N>0&&(g=k,T=N)}let v=t[2*g],x=t[2*g+1],b=1/0;for(let k=0;k<s;k++){if(k===h||k===g)continue;const T=lxe(m,y,v,x,t[2*k],t[2*k+1]);T<b&&(p=k,b=T)}let w=t[2*p],S=t[2*p+1];if(b===1/0){for(let N=0;N<s;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Wf(this._ids,this._dists,0,s-1);const k=new Uint32Array(s);let T=0;for(let N=0,P=-1/0;N<s;N++){const D=this._ids[N],M=this._dists[D];M>P&&(k[T++]=D,P=M)}this.hull=k.subarray(0,T),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(by(m,y,v,x,w,S)<0){const k=g,T=v,N=x;g=p,v=w,x=S,p=k,w=T,S=N}const E=uxe(m,y,v,x,w,S);this._cx=E.x,this._cy=E.y;for(let k=0;k<s;k++)this._dists[k]=oS(t[2*k],t[2*k+1],E.x,E.y);Wf(this._ids,this._dists,0,s-1),this._hullStart=h;let _=3;r[h]=n[p]=g,r[g]=n[h]=p,r[p]=n[g]=h,i[h]=0,i[g]=1,i[p]=2,o.fill(-1),o[this._hashKey(m,y)]=h,o[this._hashKey(v,x)]=g,o[this._hashKey(w,S)]=p,this.trianglesLen=0,this._addTriangle(h,g,p,-1,-1,-1);for(let k=0,T,N;k<this._ids.length;k++){const P=this._ids[k],D=t[2*P],M=t[2*P+1];if(k>0&&Math.abs(D-T)<=gI&&Math.abs(M-N)<=gI||(T=D,N=M,P===h||P===g||P===p))continue;let $=0;for(let L=0,X=this._hashKey(D,M);L<this._hashSize&&($=o[(X+L)%this._hashSize],!($!==-1&&$!==r[$]));L++);$=n[$];let R=$,I;for(;I=r[R],by(D,M,t[2*R],t[2*R+1],t[2*I],t[2*I+1])>=0;)if(R=I,R===$){R=-1;break}if(R===-1)continue;let F=this._addTriangle(R,P,r[R],-1,-1,i[R]);i[P]=this._legalize(F+2),i[R]=F,_++;let O=r[R];for(;I=r[O],by(D,M,t[2*O],t[2*O+1],t[2*I],t[2*I+1])<0;)F=this._addTriangle(O,P,I,i[P],-1,i[O]),i[P]=this._legalize(F+2),r[O]=O,_--,O=I;if(R===$)for(;I=n[R],by(D,M,t[2*I],t[2*I+1],t[2*R],t[2*R+1])<0;)F=this._addTriangle(I,P,R,-1,i[R],i[I]),this._legalize(F+2),i[I]=F,r[R]=R,_--,R=I;this._hullStart=n[P]=R,r[R]=n[O]=P,r[P]=O,o[this._hashKey(D,M)]=P,o[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(_);for(let k=0,T=this._hullStart;k<_;k++)this.hull[k]=T,T=r[T];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(sxe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=wy[--o];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[s],h=n[t],g=n[c],p=n[f];if(axe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*g],i[2*g+1],i[2*p],i[2*p+1])){n[t]=p,n[a]=d;const y=r[f];if(y===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=u+(a+1)%3;o<wy.length&&(wy[o++]=v)}else{if(o===0)break;t=wy[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function sxe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function oS(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function axe(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,c=n-s,f=r-a,d=i-s,h=o-a,g=l*l+u*u,p=c*c+f*f,m=d*d+h*h;return l*(f*m-p*h)-u*(c*m-p*d)+g*(c*h-f*d)<0}function lxe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=(u*c-a*f)*d,g=(s*f-l*c)*d;return h*h+g*g}function uxe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*c-a*f)*d,g=t+(s*f-l*c)*d;return{x:h,y:g}}function Wf(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;gp(e,i,o),t[e[n]]>t[e[r]]&&gp(e,n,r),t[e[o]]>t[e[r]]&&gp(e,o,r),t[e[n]]>t[e[o]]&&gp(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;gp(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Wf(e,t,o,r),Wf(e,t,n,s-1)):(Wf(e,t,n,s-1),Wf(e,t,o,r))}}function gp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function cxe(e){return e[0]}function fxe(e){return e[1]}const mI=1e-6;class Bu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>mI||Math.abs(this._y1-o)>mI)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Lk{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let dxe=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let p=0,m=0,y=r.length,v,x;p<y;p+=3,m+=2){const b=r[p]*2,w=r[p+1]*2,S=r[p+2]*2,E=t[b],_=t[b+1],k=t[w],T=t[w+1],N=t[S],P=t[S+1],D=k-E,M=T-_,$=N-E,R=P-_,I=(D*R-M*$)*2;if(Math.abs(I)<1e-9){if(o===void 0){o=s=0;for(const O of n)o+=t[O*2],s+=t[O*2+1];o/=n.length,s/=n.length}const F=1e9*Math.sign((o-E)*R-(s-_)*$);v=(E+N)/2-F*R,x=(_+P)/2+F*$}else{const F=1/I,O=D*D+M*M,L=$*$+R*R;v=E+(R*O-M*L)*F,x=_+(D*L-$*O)*F}a[m]=v,a[m+1]=x}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,g=t[2*l+1];i.fill(0);for(let p=0;p<n.length;++p)l=n[p],u=c,f=d,h=g,c=l*4,d=t[2*l],g=t[2*l+1],i[u+2]=i[c]=h-g,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Bu:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,g=Math.floor(d/3)*2,p=s[h],m=s[h+1],y=s[g],v=s[g+1];this._renderSegment(p,m,y,v,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const f=Math.floor(i[u]/3)*2,d=s[f],h=s[f+1],g=l*4,p=this._project(d,h,a[g+2],a[g+3]);p&&this._renderSegment(d,h,p[0],p[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Bu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Bu:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Lk;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let g,p,m,y,v;if(u===0){if((g=this._clipSegment(o,s,a,l,u,c))===null)continue;[p,m,y,v]=g}else{if((g=this._clipSegment(a,l,o,s,c,u))===null)continue;[y,v,p,m]=g,f=d,d=this._edgecode(p,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(p,m):i=[p,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,c=o||s;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const hxe=2*Math.PI,mf=Math.pow;function pxe(e){return e[0]}function gxe(e){return e[1]}function mxe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function yxe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class uR{static from(t,n=pxe,r=gxe,i){return new uR("length"in t?vxe(t,n,r,i):Float64Array.from(xxe(t,n,r,i)))}constructor(t){this._delaunator=new yx(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&mxe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const g=yxe(n[2*d],n[2*d+1],f);n[2*d]=g[0],n[2*d+1]=g[1]}this._delaunator=new yx(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new dxe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=mf(n-u[t*2],2)+mf(r-u[t*2+1],2);const d=i[t];let h=d;do{let g=l[h];const p=mf(n-u[g*2],2)+mf(r-u[g*2+1],2);if(p<f&&(f=p,c=g),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==g&&mf(n-u[h*2],2)+mf(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Bu:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Bu:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,hxe)}return r&&r.value()}renderHull(t){const n=t==null?t=new Bu:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Lk;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Bu:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Lk;return this.renderTriangle(t,n),n.value()}}function vxe(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*xxe(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function cR(e){z.call(this,null,e)}cR.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const bxe=[-1e5,-1e5,1e5,1e5];te(cR,z,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:bxe;const o=this.value=uR.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!Exe(l)?wxe(l):null}return t.reflow(e.modified()).modifies(n)}});function wxe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Exe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Sxe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:cR},Symbol.toStringTag,{value:"Module"}));var sS=Math.PI/180,Kp=64,w1=2048;function _xe(){var e=[256,256],t,n,r,i,o,s,a,l=uV,u=[],c=Math.random,f={};f.layout=function(){for(var g=d(Sl()),p=Nxe((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,x=[],b=u.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:s(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,E)=>E.size-S.size);++v<y;){var w=b[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,Cxe(g,w,b,v),w.hasText&&h(p,w,m)&&(x.push(w),m?Axe(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return x};function d(g){g.width=g.height=1;var p=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(Kp<<5)/p,g.height=w1/p;var m=g.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:p}}function h(g,p,m){for(var y=p.x,v=p.y,x=Math.hypot(e[0],e[1]),b=l(e),w=c()<.5?1:-1,S=-w,E,_,k;(E=b(S+=w))&&(_=~~E[0],k=~~E[1],!(Math.min(Math.abs(_),Math.abs(k))>=x));)if(p.x=y+_,p.y=v+k,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>e[0]||p.y+p.y1>e[1])&&(!m||!kxe(p,g,e[0]))&&(!m||$xe(p,m))){for(var T=p.sprite,N=p.width>>5,P=e[0]>>5,D=p.x-(N<<4),M=D&127,$=32-M,R=p.y1-p.y0,I=(p.y+p.y0)*P+(D>>5),F,O=0;O<R;O++){F=0;for(var L=0;L<=N;L++)g[I+L]|=F<<$|(L<N?(F=T[O*N+L])>>>M:0);I+=P}return p.sprite=null,!0}return!1}return f.words=function(g){return arguments.length?(u=g,f):u},f.size=function(g){return arguments.length?(e=[+g[0],+g[1]],f):e},f.font=function(g){return arguments.length?(n=pu(g),f):n},f.fontStyle=function(g){return arguments.length?(i=pu(g),f):i},f.fontWeight=function(g){return arguments.length?(o=pu(g),f):o},f.rotate=function(g){return arguments.length?(s=pu(g),f):s},f.text=function(g){return arguments.length?(t=pu(g),f):t},f.spiral=function(g){return arguments.length?(l=Mxe[g]||g,f):l},f.fontSize=function(g){return arguments.length?(r=pu(g),f):r},f.padding=function(g){return arguments.length?(a=pu(g),f):a},f.random=function(g){return arguments.length?(c=g,f):c},f}function Cxe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Kp<<5)/o,w1/o);var s=0,a=0,l=0,u=n.length,c,f,d,h,g;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var p=Math.sin(t.rotate*sS),m=Math.cos(t.rotate*sS),y=c*m,v=c*p,x=d*m,b=d*p;c=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,d=~~Math.max(Math.abs(v+x),Math.abs(v-x))}else c=c+31>>5<<5;if(d>l&&(l=d),s+c>=Kp<<5&&(s=0,a+=l,l=0),a+d>=w1)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*sS),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=i.getImageData(0,0,(Kp<<5)/o,w1/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var E=0,_=-1;for(g=0;g<d;g++){for(h=0;h<c;h++){var k=f*g+(h>>5),T=w[(a+g)*(Kp<<5)+(s+h)<<2]?1<<31-h%32:0;S[k]|=T,E|=T}E?_=g:(t.y0++,d--,g--,a++)}t.y1=t.y0+_,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function kxe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function Axe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function $xe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function uV(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Txe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Nxe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function pu(e){return typeof e=="function"?e:function(){return e}}var Mxe={archimedean:uV,rectangular:Txe};const cV=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Rxe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function fR(e){z.call(this,_xe(),e)}fR.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:cV}]};te(fR,z,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&U("Wordcloud size dimensions must be non-zero.");function n(g){const p=e[g];return $e(p)&&t.modified(p.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Rxe.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||cV;let a=e.fontSize||14,l;if($e(a)?l=e.fontSizeRange:a=qn(a),l){const g=a,p=Ge("sqrt")().domain(is(i,g)).range(l);a=m=>p(g(m))}i.forEach(g=>{g[s[0]]=NaN,g[s[1]]=NaN,g[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ki).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let g=0,p,m;g<h;++g)p=u[g],m=p.datum,m[s[0]]=p.x+f,m[s[1]]=p.y+d,m[s[2]]=p.font,m[s[3]]=p.size,m[s[4]]=p.style,m[s[5]]=p.weight,m[s[6]]=p.rotate;return t.reflow(r).modifies(s)}});const Fxe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:fR},Symbol.toStringTag,{value:"Module"})),Oxe=e=>new Uint8Array(e),Pxe=e=>new Uint16Array(e),xg=e=>new Uint32Array(e);function Dxe(){let e=8,t=[],n=xg(0),r=Ey(0,e),i=Ey(0,e);return{data:()=>t,seen:()=>n=Ixe(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=Ey(o,e,r),i=Ey(o,e))}}}function Ixe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Ey(e,t,n){const r=(t<257?Oxe:t<65537?Pxe:xg)(e);return n&&r.set(n),r}function yI(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=c;d<f;++d)o[l[d]]|=r;return s}}}function vI(){let e=xg(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=xg(f);let h=Array(f),g,p,m;for(m=0;m<f;++m)h[m]=a(l[m]),d[m]=m;if(h=Lxe(h,d),c)g=t,p=e,t=Array(c+f),e=xg(c+f),zxe(u,g,p,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[qse(l,a[0],0,u),Nl(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function Lxe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),Gse(e,t)}function zxe(e,t,n,r,i,o,s,a,l){let u=0,c=0,f;for(f=0;u<r&&c<s;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=o[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<s;++c,++f)a[f]=i[c],l[f]=o[c]+e}function dR(e){z.call(this,Dxe(),e),this._indices=null,this._dims=null}dR.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};te(dR,z,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=vI()),o.push(yI(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,g={};let p,m,y,v,x,b,w,S,E;if(u.set(l),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},v=t.mod,w=0,S=v.length;w<S;++w)b[v[w]._index]=1;for(w=0;w<h;++w)E=r[w],(!s[w]||e.modified("fields",w)||t.modified(E.fields))&&(y=E.fname,(p=g[y])||(o[y]=m=vI(),g[y]=p=m.insert(E,t.source,0)),s[w]=yI(m,w,i[w]).onAdd(p,l));for(w=0,S=a.data().length;w<S;++w)x[w]||(u[w]!==l[w]?f.push(w):b[w]&&l[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,g,p;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)g=a[h].fname,p=l[g]||(l[g]=s[g].insert(a[h],r,d)),o[h].onAdd(p,m);for(;d<c;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,g;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,s[h]=g=o[h],o[h]=a,g!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],g=u[1],p=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;else if(f>h)for(m=h,y=Math.min(f,g);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;if(d>g)for(m=Math.max(f,g),y=d;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;else if(d<g)for(m=Math.max(h,d),y=g;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let g,p,m;if(u<f)for(g=u,p=Math.min(f,c);g<p;++g)m=s[g],o[m]^=h,n.push(m);else if(u>f)for(g=f,p=Math.min(u,d);g<p;++g)m=s[g],o[m]^=h,r.push(m);if(c>d)for(g=Math.max(u,d),p=c;g<p;++g)m=s[g],o[m]^=h,n.push(m);else if(c<d)for(g=Math.max(f,c),p=d;g<p;++g)m=s[g],o[m]^=h,r.push(m);e.range=t.slice()}});function hR(e){z.call(this,null,e)}hR.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};te(hR,z,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const jxe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:dR,resolvefilter:hR},Symbol.toStringTag,{value:"Module"})),Bxe="RawCode",bc="Literal",Uxe="Property",Wxe="Identifier",qxe="ArrayExpression",Hxe="BinaryExpression",fV="CallExpression",Vxe="ConditionalExpression",Gxe="LogicalExpression",Yxe="MemberExpression",Xxe="ObjectExpression",Kxe="UnaryExpression";function bo(e){this.type=e}bo.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Qxe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Qxe(e){switch(e.type){case qxe:return e.elements;case Hxe:case Gxe:return[e.left,e.right];case fV:return[e.callee].concat(e.arguments);case Vxe:return[e.test,e.consequent,e.alternate];case Yxe:return[e.object,e.property];case Xxe:return e.properties;case Uxe:return[e.key,e.value];case Kxe:return[e.argument];case Wxe:case bc:case Bxe:default:return[]}}var xs,ge,B,zn,Je,yw=1,s0=2,wc=3,Jl=4,vw=5,Hc=6,mr=7,a0=8,Zxe=9;xs={};xs[yw]="Boolean";xs[s0]="<end>";xs[wc]="Identifier";xs[Jl]="Keyword";xs[vw]="Null";xs[Hc]="Numeric";xs[mr]="Punctuator";xs[a0]="String";xs[Zxe]="RegularExpression";var Jxe="ArrayExpression",ebe="BinaryExpression",tbe="CallExpression",nbe="ConditionalExpression",dV="Identifier",rbe="Literal",ibe="LogicalExpression",obe="MemberExpression",sbe="ObjectExpression",abe="Property",lbe="UnaryExpression",tn="Unexpected token %0",ube="Unexpected number",cbe="Unexpected string",fbe="Unexpected identifier",dbe="Unexpected reserved word",hbe="Unexpected end of input",zk="Invalid regular expression",aS="Invalid regular expression: missing /",hV="Octal literals are not allowed in strict mode.",pbe="Duplicate data property in object literal not allowed in strict mode",yn="ILLEGAL",um="Disabled.",gbe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),mbe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function xw(e,t){if(!e)throw new Error("ASSERT: "+t)}function Is(e){return e>=48&&e<=57}function pR(e){return"0123456789abcdefABCDEF".includes(e)}function bg(e){return"01234567".includes(e)}function ybe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function cm(e){return e===10||e===13||e===8232||e===8233}function l0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&gbe.test(String.fromCharCode(e))}function vx(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&mbe.test(String.fromCharCode(e))}const vbe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function pV(){for(;B<zn;){const e=ge.charCodeAt(B);if(ybe(e)||cm(e))++B;else break}}function jk(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)B<zn&&pR(ge[B])?(r=ge[B++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):qe({},tn,yn);return String.fromCharCode(i)}function xbe(){var e,t,n,r;for(e=ge[B],t=0,e==="}"&&qe({},tn,yn);B<zn&&(e=ge[B++],!!pR(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&qe({},tn,yn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function gV(){var e,t;for(e=ge.charCodeAt(B++),t=String.fromCharCode(e),e===92&&(ge.charCodeAt(B)!==117&&qe({},tn,yn),++B,e=jk("u"),(!e||e==="\\"||!l0(e.charCodeAt(0)))&&qe({},tn,yn),t=e);B<zn&&(e=ge.charCodeAt(B),!!vx(e));)++B,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ge.charCodeAt(B)!==117&&qe({},tn,yn),++B,e=jk("u"),(!e||e==="\\"||!vx(e.charCodeAt(0)))&&qe({},tn,yn),t+=e);return t}function bbe(){var e,t;for(e=B++;B<zn;){if(t=ge.charCodeAt(B),t===92)return B=e,gV();if(vx(t))++B;else break}return ge.slice(e,B)}function wbe(){var e,t,n;return e=B,t=ge.charCodeAt(B)===92?gV():bbe(),t.length===1?n=wc:vbe.hasOwnProperty(t)?n=Jl:t==="null"?n=vw:t==="true"||t==="false"?n=yw:n=wc,{type:n,value:t,start:e,end:B}}function lS(){var e=B,t=ge.charCodeAt(B),n,r=ge[B],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++B,{type:mr,value:String.fromCharCode(t),start:e,end:B};default:if(n=ge.charCodeAt(B+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return B+=2,{type:mr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:B};case 33:case 61:return B+=2,ge.charCodeAt(B)===61&&++B,{type:mr,value:ge.slice(e,B),start:e,end:B}}}if(s=ge.substr(B,4),s===">>>=")return B+=4,{type:mr,value:s,start:e,end:B};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return B+=3,{type:mr,value:o,start:e,end:B};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return B+=2,{type:mr,value:i,start:e,end:B};if(i==="//"&&qe({},tn,yn),"<>=!+-*%&|^/".includes(r))return++B,{type:mr,value:r,start:e,end:B};qe({},tn,yn)}function Ebe(e){let t="";for(;B<zn&&pR(ge[B]);)t+=ge[B++];return t.length===0&&qe({},tn,yn),l0(ge.charCodeAt(B))&&qe({},tn,yn),{type:Hc,value:parseInt("0x"+t,16),start:e,end:B}}function Sbe(e){let t="0"+ge[B++];for(;B<zn&&bg(ge[B]);)t+=ge[B++];return(l0(ge.charCodeAt(B))||Is(ge.charCodeAt(B)))&&qe({},tn,yn),{type:Hc,value:parseInt(t,8),octal:!0,start:e,end:B}}function xI(){var e,t,n;if(n=ge[B],xw(Is(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=B,e="",n!=="."){if(e=ge[B++],n=ge[B],e==="0"){if(n==="x"||n==="X")return++B,Ebe(t);if(bg(n))return Sbe(t);n&&Is(n.charCodeAt(0))&&qe({},tn,yn)}for(;Is(ge.charCodeAt(B));)e+=ge[B++];n=ge[B]}if(n==="."){for(e+=ge[B++];Is(ge.charCodeAt(B));)e+=ge[B++];n=ge[B]}if(n==="e"||n==="E")if(e+=ge[B++],n=ge[B],(n==="+"||n==="-")&&(e+=ge[B++]),Is(ge.charCodeAt(B)))for(;Is(ge.charCodeAt(B));)e+=ge[B++];else qe({},tn,yn);return l0(ge.charCodeAt(B))&&qe({},tn,yn),{type:Hc,value:parseFloat(e),start:t,end:B}}function _be(){var e="",t,n,r,i,o=!1;for(t=ge[B],xw(t==="'"||t==='"',"String literal must starts with a quote"),n=B,++B;B<zn;)if(r=ge[B++],r===t){t="";break}else if(r==="\\")if(r=ge[B++],!r||!cm(r.charCodeAt(0)))switch(r){case"u":case"x":ge[B]==="{"?(++B,e+=xbe()):e+=jk(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:bg(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),B<zn&&bg(ge[B])&&(o=!0,i=i*8+"01234567".indexOf(ge[B++]),"0123".includes(r)&&B<zn&&bg(ge[B])&&(i=i*8+"01234567".indexOf(ge[B++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ge[B]===`
`&&++B;else{if(cm(r.charCodeAt(0)))break;e+=r}return t!==""&&qe({},tn,yn),{type:a0,value:e,octal:o,start:n,end:B}}function Cbe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";qe({},zk)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{qe({},zk)}try{return new RegExp(e,t)}catch{return null}}function kbe(){var e,t,n,r,i;for(e=ge[B],xw(e==="/","Regular expression literal must start with a slash"),t=ge[B++],n=!1,r=!1;B<zn;)if(e=ge[B++],t+=e,e==="\\")e=ge[B++],cm(e.charCodeAt(0))&&qe({},aS),t+=e;else if(cm(e.charCodeAt(0)))qe({},aS);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||qe({},aS),i=t.substr(1,t.length-2),{value:i,literal:t}}function Abe(){var e,t,n;for(t="",n="";B<zn&&(e=ge[B],!!vx(e.charCodeAt(0)));)++B,e==="\\"&&B<zn?qe({},tn,yn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&qe({},zk,n),{value:n,literal:t}}function $be(){var e,t,n,r;return Je=null,pV(),e=B,t=kbe(),n=Abe(),r=Cbe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:B}}function Tbe(e){return e.type===wc||e.type===Jl||e.type===yw||e.type===vw}function mV(){if(pV(),B>=zn)return{type:s0,start:B,end:B};const e=ge.charCodeAt(B);return l0(e)?wbe():e===40||e===41||e===59?lS():e===39||e===34?_be():e===46?Is(ge.charCodeAt(B+1))?xI():lS():Is(e)?xI():lS()}function xr(){const e=Je;return B=e.end,Je=mV(),B=e.end,e}function yV(){const e=B;Je=mV(),B=e}function Nbe(e){const t=new bo(Jxe);return t.elements=e,t}function bI(e,t,n){const r=new bo(e==="||"||e==="&&"?ibe:ebe);return r.operator=e,r.left=t,r.right=n,r}function Mbe(e,t){const n=new bo(tbe);return n.callee=e,n.arguments=t,n}function Rbe(e,t,n){const r=new bo(nbe);return r.test=e,r.consequent=t,r.alternate=n,r}function gR(e){const t=new bo(dV);return t.name=e,t}function Qp(e){const t=new bo(rbe);return t.value=e.value,t.raw=ge.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function wI(e,t,n){const r=new bo(obe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Fbe(e){const t=new bo(sbe);return t.properties=e,t}function EI(e,t,n){const r=new bo(abe);return r.key=t,r.value=n,r.kind=e,r}function Obe(e,t){const n=new bo(lbe);return n.operator=e,n.argument=t,n.prefix=!0,n}function qe(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(xw(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=B,n.description=i,n}function bw(e){e.type===s0&&qe(e,hbe),e.type===Hc&&qe(e,ube),e.type===a0&&qe(e,cbe),e.type===wc&&qe(e,fbe),e.type===Jl&&qe(e,dbe),qe(e,tn,e.value)}function jn(e){const t=xr();(t.type!==mr||t.value!==e)&&bw(t)}function ht(e){return Je.type===mr&&Je.value===e}function uS(e){return Je.type===Jl&&Je.value===e}function Pbe(){const e=[];for(B=Je.start,jn("[");!ht("]");)ht(",")?(xr(),e.push(null)):(e.push(Ec()),ht("]")||jn(","));return xr(),Nbe(e)}function SI(){B=Je.start;const e=xr();return e.type===a0||e.type===Hc?(e.octal&&qe(e,hV),Qp(e)):gR(e.value)}function Dbe(){var e,t,n,r;if(B=Je.start,e=Je,e.type===wc)return n=SI(),jn(":"),r=Ec(),EI("init",n,r);if(e.type===s0||e.type===mr)bw(e);else return t=SI(),jn(":"),r=Ec(),EI("init",t,r)}function Ibe(){var e=[],t,n,r,i={},o=String;for(B=Je.start,jn("{");!ht("}");)t=Dbe(),t.key.type===dV?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?qe({},pbe):i[r]=!0,e.push(t),ht("}")||jn(",");return jn("}"),Fbe(e)}function Lbe(){jn("(");const e=mR();return jn(")"),e}const zbe={if:1};function jbe(){var e,t,n;if(ht("("))return Lbe();if(ht("["))return Pbe();if(ht("{"))return Ibe();if(e=Je.type,B=Je.start,e===wc||zbe[Je.value])n=gR(xr().value);else if(e===a0||e===Hc)Je.octal&&qe(Je,hV),n=Qp(xr());else{if(e===Jl)throw new Error(um);e===yw?(t=xr(),t.value=t.value==="true",n=Qp(t)):e===vw?(t=xr(),t.value=null,n=Qp(t)):ht("/")||ht("/=")?(n=Qp($be()),yV()):bw(xr())}return n}function Bbe(){const e=[];if(jn("("),!ht(")"))for(;B<zn&&(e.push(Ec()),!ht(")"));)jn(",");return jn(")"),e}function Ube(){B=Je.start;const e=xr();return Tbe(e)||bw(e),gR(e.value)}function Wbe(){return jn("."),Ube()}function qbe(){jn("[");const e=mR();return jn("]"),e}function Hbe(){var e,t,n;for(e=jbe();;)if(ht("."))n=Wbe(),e=wI(".",e,n);else if(ht("("))t=Bbe(),e=Mbe(e,t);else if(ht("["))n=qbe(),e=wI("[",e,n);else break;return e}function _I(){const e=Hbe();if(Je.type===mr&&(ht("++")||ht("--")))throw new Error(um);return e}function E1(){var e,t;if(Je.type!==mr&&Je.type!==Jl)t=_I();else{if(ht("++")||ht("--"))throw new Error(um);if(ht("+")||ht("-")||ht("~")||ht("!"))e=xr(),t=E1(),t=Obe(e.value,t);else{if(uS("delete")||uS("void")||uS("typeof"))throw new Error(um);t=_I()}}return t}function CI(e){let t=0;if(e.type!==mr&&e.type!==Jl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Vbe(){var e,t,n,r,i,o,s,a,l,u;if(e=Je,l=E1(),r=Je,i=CI(r),i===0)return l;for(r.prec=i,xr(),t=[e,Je],s=E1(),o=[l,r,s];(i=CI(Je))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=bI(a,l,s),o.push(n);r=xr(),r.prec=i,o.push(r),t.push(Je),n=E1(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=bI(o[u-1].value,o[u-2],n),u-=2;return n}function Ec(){var e,t,n;return e=Vbe(),ht("?")&&(xr(),t=Ec(),jn(":"),n=Ec(),e=Rbe(e,t,n)),e}function mR(){const e=Ec();if(ht(","))throw new Error(um);return e}function yR(e){ge=e,B=0,zn=ge.length,Je=null,yV();const t=mR();if(Je.type!==s0)throw new Error("Unexpect token after expression.");return t}var vV={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function xV(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&U("Missing arguments to clamp function."),s.length>3&&U("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(s){s.length<3&&U("Missing arguments to if function."),s.length>3&&U("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Gbe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function bV(e){e=e||{};const t=e.allowed?ho(e.allowed):{},n=e.forbidden?ho(e.forbidden):{},r=e.constants||vV,i=(e.functions||xV)(f),o=e.globalvar,s=e.fieldvar,a=$e(o)?o:g=>`${o}["${g}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(g=>typeof Object.prototype[g]=="function")];let l={},u={},c=0;function f(g){if(se(g))return g;const p=d[g.type];return p==null&&U("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return c>0?p:fe(n,p)?U("Illegal identifier: "+p):fe(r,p)?r[p]:fe(t,p)?p:(l[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,m=f(g.object);p&&(c+=1);const y=f(g.property);return m===s&&(u[Gbe(y)]=1),p&&(c-=1),m+(p?"."+y:"["+y+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&U("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,y=fe(i,p)&&i[p];return y||U("Unrecognized function: "+p),$e(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(f).join(",")+"]",BinaryExpression:g=>"("+f(g.left)+" "+g.operator+" "+f(g.right)+")",UnaryExpression:g=>"("+g.operator+f(g.argument)+")",ConditionalExpression:g=>"("+f(g.test)+"?"+f(g.consequent)+":"+f(g.alternate)+")",LogicalExpression:g=>"("+f(g.left)+g.operator+f(g.right)+")",ObjectExpression:g=>{for(const p of g.properties){const m=p.key.name;eT.has(m)&&U("Illegal property: "+m)}return"{"+g.properties.map(f).join(",")+"}"},Property:g=>{c+=1;const p=f(g.key);return c-=1,p+":"+f(g.value)}};function h(g){const p={code:f(g),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},p}return h.functions=i,h.constants=r,h}const kI=Symbol("vega_selection_getter");function wV(e){return(!e.getter||!e.getter[kI])&&(e.getter=Si(e.field),e.getter[kI]=!0),e.getter}const vR="intersect",AI="union",Ybe="vlMulti",Xbe="vlPoint",$I="or",Kbe="and",zo="_vgsid_",fm=Si(zo),Qbe="E",Zbe="R",Jbe="R-E",ewe="R-LE",twe="R-RE",nwe="E-LT",rwe="E-LTE",iwe="E-GT",owe="E-GTE",swe="E-VALID",awe="E-ONE",xx="index:unit";function TI(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=wV(a)(e),bl(s)&&(s=Pn(s)),bl(r[o])&&(r[o]=Pn(r[o])),W(r[o])&&bl(r[o][0])&&(r[o]=r[o].map(Pn)),a.type===Qbe){if(W(r[o])?!r[o].includes(s):s!==r[o])return!1}else if(a.type===Zbe){if(!zf(s,r[o]))return!1}else if(a.type===twe){if(!zf(s,r[o],!0,!1))return!1}else if(a.type===Jbe){if(!zf(s,r[o],!1,!1))return!1}else if(a.type===ewe){if(!zf(s,r[o],!1,!0))return!1}else if(a.type===nwe){if(s>=r[o])return!1}else if(a.type===rwe){if(s>r[o])return!1}else if(a.type===iwe){if(s<=r[o])return!1}else if(a.type===owe){if(s<r[o])return!1}else if(a.type===swe){if(s===null||isNaN(s))return!1}else if(a.type===awe&&r[o].indexOf(s)===-1)return!1;return!0}function lwe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[xx]&&r[xx].value:void 0,s=n===vR,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],o&&s){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=TI(t,u),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=TI(t,u),s^h)return h;return a&&s}const EV=Eh(fm),uwe=EV.left,cwe=EV.right;function fwe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[xx]&&r[xx].value:void 0,s=n===vR,a=fm(t),l=uwe(i,a);if(l===i.length||fm(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(cwe(i,a)-l<o.size)return!1}return!0}function dwe(e,t){return e.map(n=>Ae(t.fields?{values:t.fields.map(r=>wV(r)(n.datum))}:{[zo]:fm(n.datum)},t))}function hwe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,c,f,d,h,g,p,m,y,v,x=o.length,b=0,w,S;b<x;++b)if(u=o[b],d=u.unit,c=u.fields,f=u.values,c&&f){for(w=0,S=c.length;w<S;++w)h=c[w],p=s[h.field]||(s[h.field]={}),m=p[d]||(p[d]=[]),l[h.field]=y=h.type.charAt(0),v=cS[`${y}_union`],p[d]=v(m,le(f[w]));n&&(m=a[d]||(a[d]=[]),m.push(le(f).reduce((E,_,k)=>(E[c[k].field]=_,E),{})))}else h=zo,g=fm(u),p=s[h]||(s[h]={}),m=p[d]||(p[d]=[]),m.push(g),n&&(m=a[d]||(a[d]=[]),m.push({[zo]:g}));if(t=t||AI,s[zo]?s[zo]=cS[`${zo}_${t}`](...Object.values(s[zo])):Object.keys(s).forEach(E=>{s[E]=Object.keys(s[E]).map(_=>s[E][_]).reduce((_,k)=>_===void 0?k:cS[`${l[E]}_${t}`](_,k))}),o=Object.keys(a),n&&o.length){const E=r?Xbe:Ybe;s[E]=t===AI?{[$I]:o.reduce((_,k)=>(_.push(...a[k]),_),[])}:{[Kbe]:o.map(_=>({[$I]:a[_]}))}}return s}var cS={[`${zo}_union`]:nae,[`${zo}_intersect`]:eae,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Pn(t[0]),r=Pn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Pn(t[0]),r=Pn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const pwe=":",gwe="@";function xR(e,t,n,r){t[0].type!==bc&&U("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&ze(t).value,s="unit",a=gwe+s,l=pwe+i;o===vR&&!fe(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),fe(r,l)||(r[l]=n.getData(i).tuplesRef())}function SV(e){const t=this.context.data[e];return t?t.values.value:[]}function mwe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function ywe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(_i).insert(t)),1}function vwe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const u0=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},xwe=u0("format"),_V=u0("timeFormat"),bwe=u0("utcFormat"),wwe=u0("timeParse"),Ewe=u0("utcParse"),Sy=new Date(2e3,0,1);function ww(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Sy.setYear(2e3),Sy.setMonth(e),Sy.setDate(t),_V.call(this,Sy,n))}function Swe(e){return ww.call(this,e,1,"%B")}function _we(e){return ww.call(this,e,1,"%b")}function Cwe(e){return ww.call(this,0,2+e,"%A")}function kwe(e){return ww.call(this,0,2+e,"%a")}const Awe=":",$we="@",Bk="%",CV="$";function bR(e,t,n,r){t[0].type!==bc&&U("First argument to data functions must be a string literal.");const i=t[0].value,o=Awe+i;if(!fe(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function Twe(e,t,n,r){t[0].type!==bc&&U("First argument to indata must be a string literal."),t[1].type!==bc&&U("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=$we+o;fe(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function sr(e,t,n,r){if(t[0].type===bc)NI(n,r,t[0].value);else for(e in n.scales)NI(n,r,e)}function NI(e,t,n){const r=Bk+n;if(!fe(t,r))try{t[r]=e.scaleRef(n)}catch{}}function bs(e,t){if(se(e)){const n=t.scales[e];return n&&FD(n.value)?n.value:void 0}else if($e(e))return FD(e)?e:void 0}function Nwe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=sr,n._range=sr,n._scale=sr;const r=i=>"_["+(i.type===bc?J(Bk+i.value):J(Bk)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function wR(e,t){return function(n,r,i){if(n){const o=bs(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const Mwe=wR("area",Xme),Rwe=wR("bounds",Jme),Fwe=wR("centroid",o0e);function Owe(e,t){const n=bs(e,(t||this).context);return n&&n.scale()}function Pwe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function ER(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Dwe(){return ER(this.context.dataflow,"warn",arguments)}function Iwe(){return ER(this.context.dataflow,"info",arguments)}function Lwe(){return ER(this.context.dataflow,"debug",arguments)}function fS(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Uk(e){const t=Ol(e),n=fS(t.r),r=fS(t.g),i=fS(t.b);return .2126*n+.7152*r+.0722*i}function zwe(e,t){const n=Uk(e),r=Uk(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function jwe(){const e=[].slice.call(arguments);return e.unshift({}),Ae(...e)}function kV(e,t){return e===t||e!==e&&t!==t?!0:W(e)?W(t)&&e.length===t.length?Bwe(e,t):!1:ae(e)&&ae(t)?AV(e,t):!1}function Bwe(e,t){for(let n=0,r=e.length;n<r;++n)if(!kV(e[n],t[n]))return!1;return!0}function AV(e,t){for(const n in e)if(!kV(e[n],t[n]))return!1;return!0}function MI(e){return t=>AV(e,t)}function Uwe(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(f=n===!0?_i:W(n)||Nb(n)?n:MI(n),c.remove(f)),t&&c.insert(t),r&&(f=MI(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function Wwe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function qwe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const RI={};function Hwe(e,t){const n=RI[t]||(RI[t]=Si(t));return W(e)?e.map(n):n(e)}function Ew(e){return W(e)||ArrayBuffer.isView(e)?e:null}function SR(e){return Ew(e)||(se(e)?e:null)}function Vwe(e,...t){return Ew(e).join(...t)}function Gwe(e,...t){return SR(e).indexOf(...t)}function Ywe(e,...t){return SR(e).lastIndexOf(...t)}function Xwe(e,...t){return SR(e).slice(...t)}function Kwe(e,t,n){return $e(n)&&U("Function argument passed to replace."),!se(t)&&!lT(t)&&U("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Qwe(e){return Ew(e).slice().reverse()}function Zwe(e){return Ew(e).slice().sort(bh)}function Jwe(e,t,n){return DN(e||0,t||0,n||0)}function e2e(e,t){const n=bs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function t2e(e,t){const n=bs(e,(t||this).context);return n?n.copy():void 0}function n2e(e,t){const n=bs(e,(t||this).context);return n?n.domain():[]}function r2e(e,t,n){const r=bs(e,(n||this).context);return r?W(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function i2e(e,t){const n=bs(e,(t||this).context);return n&&n.range?n.range():[]}function o2e(e,t,n){const r=bs(e,(n||this).context);return r?r(t):void 0}function s2e(e,t,n,r,i){e=bs(e,(i||this).context);const o=vW(t,n);let s=e.domain(),a=s[0],l=ze(s),u=Wn;return l-a?u=sW(e,a,l):e=(e.interpolator?Ge("sequential")().interpolator(e.interpolator()):Ge("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==ze(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function a2e(e,t,n){const r=bs(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function l2e(e){let t=null;return function(n){return n?tm(n,t=t||Bd(e)):e}}const $V=e=>e.data;function TV(e,t){const n=SV.call(t,e);return n.root&&n.root.lookup||{}}function u2e(e,t,n){const r=TV(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map($V):void 0}function c2e(e,t){const n=TV(e,this)[t];return n?n.ancestors().map($V):void 0}const NV=()=>typeof window<"u"&&window||null;function f2e(){const e=NV();return e?e.screen:{}}function d2e(){const e=NV();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function h2e(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function MV(e,t,n){if(!e)return[];const[r,i]=e,o=new Bt().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return pq(s,o,p2e(t))}function p2e(e){let t=null;if(e){const n=le(e.marktype),r=le(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function g2e(e,t,n,r=5){e=le(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function m2e(e){return le(e).reduce((t,[n,r],i)=>t+=i==0?`M ${n},${r} `:i===e.length-1?" Z":`L ${n},${r} `,"")}function y2e(e,t,n){const{x:r,y:i,mark:o}=n,s=new Bt().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),MV([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>v2e(l.x,l.y,t))}function v2e(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const dm={random(){return ki()},cumulativeNormal:Pb,cumulativeLogNormal:DT,cumulativeUniform:jT,densityNormal:MT,densityLogNormal:PT,densityUniform:zT,quantileNormal:Db,quantileLogNormal:IT,quantileUniform:BT,sampleNormal:Ob,sampleLogNormal:OT,sampleUniform:LT,isArray:W,isBoolean:Yl,isDate:bl,isDefined(e){return e!==void 0},isNumber:He,isObject:ae,isRegExp:lT,isString:se,isTuple:Nb,isValid(e){return e!=null&&e===e},toBoolean:cT,toDate(e){return fT(e)},toNumber:Pn,toString:dT,indexof:Gwe,join:Vwe,lastindexof:Ywe,replace:Kwe,reverse:Qwe,sort:Zwe,slice:Xwe,flush:L7,lerp:j7,merge:jwe,pad:W7,peek:ze,pluck:Hwe,span:Dm,inrange:zf,truncate:q7,rgb:Ol,lab:Cv,hcl:kv,hsl:Sv,luminance:Uk,contrast:zwe,sequence:Ur,format:xwe,utcFormat:bwe,utcParse:Ewe,utcOffset:Sj,utcSequence:kj,timeFormat:_V,timeParse:wwe,timeOffset:Ej,timeSequence:Cj,timeUnitSpecifier:fj,monthFormat:Swe,monthAbbrevFormat:_we,dayFormat:Cwe,dayAbbrevFormat:kwe,quarter:O7,utcquarter:P7,week:hj,utcweek:mj,dayofyear:dj,utcdayofyear:gj,warn:Dwe,info:Iwe,debug:Lwe,extent(e){return is(e)},inScope:Pwe,intersect:MV,clampRange:D7,pinchDistance:Wwe,pinchAngle:qwe,screen:f2e,containerSize:h2e,windowSize:d2e,bandspace:Jwe,setdata:ywe,pathShape:l2e,panLinear:N7,panLog:M7,panPow:R7,panSymlog:F7,zoomLinear:rT,zoomLog:iT,zoomPow:cv,zoomSymlog:oT,encode:vwe,modify:Uwe,lassoAppend:g2e,lassoPath:m2e,intersectLasso:y2e},x2e=["view","item","group","xy","x","y"],b2e="event.vega.",RV="this.",_R={},FV={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${J(CV+e)}]`,functions:w2e,constants:vV,visitors:_R},Wk=bV(FV);function w2e(e){const t=xV(e);x2e.forEach(n=>t[n]=b2e+n);for(const n in dm)t[n]=RV+n;return Ae(t,Nwe(e,dm,_R)),t}function Lt(e,t,n){return arguments.length===1?dm[e]:(dm[e]=t,n&&(_R[e]=n),Wk&&(Wk.functions[e]=RV+e),this)}Lt("bandwidth",e2e,sr);Lt("copy",t2e,sr);Lt("domain",n2e,sr);Lt("range",i2e,sr);Lt("invert",r2e,sr);Lt("scale",o2e,sr);Lt("gradient",s2e,sr);Lt("geoArea",Mwe,sr);Lt("geoBounds",Rwe,sr);Lt("geoCentroid",Fwe,sr);Lt("geoShape",a2e,sr);Lt("geoScale",Owe,sr);Lt("indata",mwe,Twe);Lt("data",SV,bR);Lt("treePath",u2e,bR);Lt("treeAncestors",c2e,bR);Lt("vlSelectionTest",lwe,xR);Lt("vlSelectionIdTest",fwe,xR);Lt("vlSelectionResolve",hwe,xR);Lt("vlSelectionTuples",dwe);function us(e,t){const n={};let r;try{e=se(e)?e:J(e)+"",r=yR(e)}catch{U("Expression parse error: "+e)}r.visit(o=>{if(o.type!==fV)return;const s=o.callee.name,a=FV.visitors[s];a&&a(s,o.arguments,t,n)});const i=Wk(r);return i.globals.forEach(o=>{const s=CV+o;!fe(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Ae({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function E2e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const S2e=ho(["rule"]),FI=ho(["group","image","rect"]);function _2e(e,t){let n="";return S2e[t]||(e.x2&&(e.x?(FI[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(FI[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function CR(e){return(e+"").toLowerCase()}function C2e(e){return CR(e)==="operator"}function k2e(e){return CR(e)==="collect"}function mp(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function A2e(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var $2e={operator:(e,t)=>mp(e,["_"],t.code),parameter:(e,t)=>mp(e,["datum","_"],t.code),event:(e,t)=>mp(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return mp(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+J(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=_2e(r,n),i+="return m;",mp(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(J).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),A2e(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function T2e(e){const t=this;C2e(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function N2e(e){const t=this;if(e.params){const n=t.get(e.id);n||U("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function M2e(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=W(i)?i.map(o=>OI(o,n,t)):OI(i,n,t)}return t}function OI(e,t,n){if(!e||!ae(e))return e;for(let r=0,i=PI.length,o;r<i;++r)if(o=PI[r],fe(e,o.key))return o.parse(e,t,n);return e}var PI=[{key:"$ref",parse:R2e},{key:"$key",parse:O2e},{key:"$expr",parse:F2e},{key:"$field",parse:P2e},{key:"$encode",parse:I2e},{key:"$compare",parse:D2e},{key:"$context",parse:L2e},{key:"$subflow",parse:z2e},{key:"$tupleid",parse:j2e}];function R2e(e,t){return t.get(e.$ref)||U("Operator not defined: "+e.$ref)}function F2e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Fr(t.parameterExpression(e.$expr),e.$fields))}function O2e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=uT(e.$key,e.$flat,t.expr.codegen))}function P2e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Si(e.$field,e.$name,t.expr.codegen))}function D2e(e,t){const n="c:"+e.$compare+"_"+e.$order,r=le(e.$compare).map(i=>i&&i.$tupleid?ve:i);return t.fn[n]||(t.fn[n]=sT(r,e.$order,t.expr.codegen))}function I2e(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Fr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function L2e(e,t){return t}function z2e(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function j2e(){return ve}function B2e(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&U("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function U2e(e){var t=this,n=ae(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||U("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const W2e={skip:!0};function q2e(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function H2e(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],W2e)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(_i).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function OV(e,t,n,r){return new PV(e,t,n,r)}function PV(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||$2e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function DI(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}PV.prototype=DI.prototype={fork(){const e=new DI(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),k2e(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[CR(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:E2e,parseOperator:T2e,parseOperatorParameters:N2e,parseParameters:M2e,parseStream:B2e,parseUpdate:U2e,getState:q2e,setState:H2e};function V2e(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),DV(t,e.description()))}function DV(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function G2e(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const dS="default";function Y2e(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:dS,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?se(i)?i:i.user:dS,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return se(r)||(i=r.item,r=r.user),qk(e,r&&r!==dS?r:i||r),i},{cursor:t})}function qk(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function bx(e,t){var n=e._runtime.data;return fe(n,t)||U("Unrecognized data set: "+t),n[t]}function X2e(e,t){return arguments.length<2?bx(this,e).values.value:Sw.call(this,e,Uc().remove(_i).insert(t))}function Sw(e,t){Jj(t)||U("Second argument to changes must be a changeset.");const n=bx(this,e);return n.modified=!0,this.pulse(n.input,t)}function K2e(e,t){return Sw.call(this,e,Uc().insert(t))}function Q2e(e,t){return Sw.call(this,e,Uc().remove(t))}function IV(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function LV(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function _w(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Z2e(e){var t=_w(e),n=IV(e),r=LV(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function J2e(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=_w(e),s=t.changedTouches?t.changedTouches[0]:t,o=uw(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=eEe(e,n,o),t}function eEe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;se(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:qn(e),item:qn(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const II="view",tEe="timer",nEe="window",rEe={trap:!1};function iEe(e){const t=Ae({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{W(r[o])&&(r[o]=ho(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function zV(e,t,n,r){e._eventListeners.push({type:n,sources:le(t),handler:r})}function oEe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function _y(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ae(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function sEe(e,t,n){var r=this,i=new Fb(n),o=function(u,c){r.runAsync(null,()=>{e===II&&oEe(r,t)&&u.preventDefault(),i.receive(J2e(r,u,c))})},s;if(e===tEe)_y(r,"timer",t)&&r.timer(o,t);else if(e===II)_y(r,"view",t)&&r.addEventListener(t,o,rEe);else if(e===nEe?_y(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&_y(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);zV(r,s,t,o)}return i}function LI(e){return e.item}function zI(e){return e.item.mark.source}function jI(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function aEe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",LI),zI,jI(e)),this.on(this.events("view","pointerout",LI),zI,jI(t)),this}function lEe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Yr(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const uEe="vega-bind",cEe="vega-bind-name",fEe="vega-bind-radio";function dEe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=aT(r.debounce,i.update))),(r.input==null&&r.element?hEe:gEe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function hEe(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),zV(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(pEe(i))}}function pEe(e){return typeof Event<"u"?new Event(e):{type:e}}function gEe(e,t,n,r){const i=r.signal(n.signal),o=Yr("div",{class:uEe}),s=n.input==="radio"?o:o.appendChild(Yr("label"));s.appendChild(Yr("span",{class:cEe},n.name||n.signal)),t.appendChild(o);let a=mEe;switch(n.input){case"checkbox":a=yEe;break;case"select":a=vEe;break;case"radio":a=xEe;break;case"range":a=bEe;break}a(e,s,n,i)}function mEe(e,t,n,r){const i=Yr("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function yEe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Yr("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function vEe(e,t,n,r){const i=Yr("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};wx(s,r)&&(l.selected=!0),i.appendChild(Yr("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(wx(n.options[a],s)){i.selectedIndex=a;return}}}function xEe(e,t,n,r){const i=Yr("span",{class:fEe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};wx(s,r)&&(l.checked=!0);const u=Yr("input",l);u.addEventListener("change",()=>e.update(s));const c=Yr("label",{},(o[a]||s)+"");return c.prepend(u),i.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)wx(a[u].value,s)&&(a[u].checked=!0)}}function bEe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||Ml(o,i,100),a=Yr("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=Yr("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function wx(e,t){return e===t||e+""==t+""}function jV(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,IV(e),LV(e),_w(e),i,o).background(e.background())}function kR(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function wEe(e,t,n,r){const i=new r(e.loader(),kR(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,_w(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function EEe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=cw(r);e=n._el=e?hS(n,e,!0):null,V2e(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||t0,a=e?o.renderer:o.headless;return n._renderer=a?jV(n,n._renderer,e,a):null,n._handler=wEe(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=hS(n,t,!0):e.appendChild(Yr("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=hS(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{dEe(n,l.element||t,l)})),n}function hS(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const yp=e=>+e||0,SEe=e=>({top:e,bottom:e,left:e,right:e});function BI(e){return ae(e)?{top:yp(e.top),bottom:yp(e.bottom),left:yp(e.left),right:yp(e.right)}:SEe(yp(e))}async function AR(e,t,n,r){const i=cw(t),o=i&&i.headless;return o||U("Unrecognized renderer type: "+t),await e.runAsync(),jV(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function _Ee(e,t){e!==sl.Canvas&&e!==sl.SVG&&e!==sl.PNG&&U("Unrecognized image type: "+e);const n=await AR(this,e,t);return e===sl.SVG?CEe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function CEe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function kEe(e,t){return(await AR(this,sl.Canvas,e,t)).canvas()}async function AEe(e){return(await AR(this,sl.SVG,e)).svg()}function $Ee(e,t,n){return OV(e,Pd,dm,n).parse(t)}function TEe(e){var t=this._runtime.scales;return fe(t,e)||U("Unrecognized scale or projection: "+e),t[e].value}var BV="width",UV="height",$R="padding",UI={skip:!0};function WV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$R?r.left+r.right:0)}function qV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$R?r.top+r.bottom:0)}function NEe(e){var t=e._signals,n=t[BV],r=t[UV],i=t[$R];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=WV(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=qV(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function MEe(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(BV,n,UI),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(UV,r,UI),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function REe(e){return this._runtime.getState(e||{data:FEe,signals:OEe,recurse:!0})}function FEe(e,t){return t.modified&&W(t.input.value)&&!e.startsWith("_:vega:_")}function OEe(e,t){return!(e==="parent"||t instanceof Pd.proxy)}function PEe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function DEe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(s1e(n,t))}function IEe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",LEe(r))}function LEe(e){return e==null?"":W(e)?HV(e):ae(e)&&!bl(e)?zEe(e):e+""}function zEe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(W(n)?HV(n):VV(n))}).join(`
`)}function HV(e){return"["+e.map(VV).join(", ")+"]"}function VV(e){return W(e)?"[…]":ae(e)&&!bl(e)?"{…}":e}function jEe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function GV(e,t){const n=this;if(t=t||{},td.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Ae({},e.locale,t.locale);n.locale(Wj(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||sl.Canvas,n._scenegraph=new BW;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||IEe,n._redraw=!0,n._handler=new t0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=iEe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=$Ee(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Ae({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=WV(n,n._width),n._viewHeight=qV(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,NEe(n),G2e(n),Y2e(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Cy(e,t){return fe(e._signals,t)?e._signals[t]:U("Unrecognized signal name: "+J(t))}function YV(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function WI(e,t,n,r){let i=YV(n,r);return i||(i=kR(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function qI(e,t,n){const r=YV(t,n);return r&&t._targets.remove(r),e}te(GV,td,{async evaluate(e,t,n){if(await td.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Z2e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&o1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&DV(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Cy(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",BI(e)):BI(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(cw(e)||U("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(td.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Cy(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:MEe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=kR(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return WI(this,e,Cy(this,e),t)},removeSignalListener(e,t){return qI(this,Cy(this,e),t)},addDataListener(e,t){return WI(this,e,bx(this,e).values,t)},removeDataListener(e,t){return qI(this,bx(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=qk(this,null);this._globalCursor=!!e,t&&qk(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:DEe,events:sEe,finalize:lEe,hover:aEe,data:X2e,change:Sw,insert:K2e,remove:Q2e,scale:TEe,initialize:EEe,toImageURL:_Ee,toCanvas:kEe,toSVG:AEe,getState:REe,setState:PEe,_watchPixelRatio:jEe});const BEe="view",Ex="[",Sx="]",XV="{",KV="}",UEe=":",QV=",",WEe="@",qEe=">",HEe=/[[\]{}]/,VEe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let ZV,JV;function eu(e,t,n){return ZV=t||BEe,JV=n||VEe,eG(e.trim()).map(Hk)}function GEe(e){return JV[e]}function wg(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.includes(a)?--s:r&&r.includes(a)&&++s}return t}function eG(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=wg(e,i,QV,Ex+XV,Sx+KV),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function Hk(e){return e[0]==="["?YEe(e):XEe(e)}function YEe(e){const t=e.length;let n=1,r;if(n=wg(e,n,Sx,Ex,Sx),n===t)throw"Empty between selector: "+e;if(r=eG(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==qEe)throw"Expected '>' after between selector: "+e;r=r.map(Hk);const i=Hk(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function XEe(e){const t={source:ZV},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===KV){if(a=e.lastIndexOf(XV),a>=0){try{r=KEe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===WEe&&(i=++a),l=wg(e,a,UEe),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=wg(e,a,Ex),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=wg(e,a,Sx),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==Ex)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||HEe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):GEe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function KEe(e){const t=e.split(QV);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function QEe(e){return ae(e)?e:{type:e||"pad"}}const vp=e=>+e||0,ZEe=e=>({top:e,bottom:e,left:e,right:e});function JEe(e){return ae(e)?e.signal?e:{top:vp(e.top),bottom:vp(e.bottom),left:vp(e.left),right:vp(e.right)}:ZEe(vp(e))}const nn=e=>ae(e)&&!W(e)?Ae({},e):{value:e};function HI(e,t,n,r){return n!=null?(ae(n)&&!W(n)||W(n)&&n.length&&ae(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function En(e,t,n){for(const r in t)HI(e,r,t[r]);for(const r in n)HI(e,r,n[r],"update")}function Rh(e,t,n){for(const r in t)n&&fe(n,r)||(e[r]=Ae(e[r]||{},t[r]));return e}function Cf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const TR="mark",NR="frame",MR="scope",eSe="axis",tSe="axis-domain",nSe="axis-grid",rSe="axis-label",iSe="axis-tick",oSe="axis-title",sSe="legend",aSe="legend-band",lSe="legend-entry",uSe="legend-gradient",tG="legend-label",cSe="legend-symbol",fSe="legend-title",dSe="title",hSe="title-text",pSe="title-subtitle";function gSe(e,t,n,r,i){const o={},s={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!Cf(l,e)&&pS(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===NR?i.group:n===TR?Ae({},i.mark,i[t]):null;for(l in c)u=Cf(l,e)||(l==="fill"||l==="stroke")&&(Cf("fill",e)||Cf("stroke",e)),u||pS(o,l,c[l]);le(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Cf(h,e)||pS(o,h,d[h])}),e=Ae({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=Ae(s,e.enter),a&&(e.update=Ae(a,e.update)),e}function pS(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const nG=e=>se(e)?J(e):e.signal?`(${e.signal})`:rG(e);function Cw(e){if(e.gradient!=null)return ySe(e);let t=e.signal?`(${e.signal})`:e.color?mSe(e.color):e.field!=null?rG(e.field):e.value!==void 0?J(e.value):void 0;return e.scale!=null&&(t=vSe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${S1(e.exponent)})`),e.mult!=null&&(t+=`*${S1(e.mult)}`),e.offset!=null&&(t+=`+${S1(e.offset)}`),e.round&&(t=`round(${t})`),t}const ky=(e,t,n,r)=>`(${e}(${[t,n,r].map(Cw).join(",")})+'')`;function mSe(e){return e.c?ky("hcl",e.h,e.c,e.l):e.h||e.s?ky("hsl",e.h,e.s,e.l):e.l||e.a?ky("lab",e.l,e.a,e.b):e.r||e.g||e.b?ky("rgb",e.r,e.g,e.b):null}function ySe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:J(n));for(;t.length&&ze(t)==null;)t.pop();return t.unshift(nG(e.gradient)),`gradient(${t.join(",")})`}function S1(e){return ae(e)?"("+Cw(e)+")":e}function rG(e){return iG(ae(e)?e:{datum:e})}function iG(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):U("Invalid field reference: "+J(e));return e.signal||(r=se(r)?ps(r).map(J).join("]["):iG(r)),t+"["+r+"]"}function vSe(e,t){const n=nG(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+S1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function xSe(e){let t="";return e.forEach(n=>{const r=Cw(n);t+=n.test?`(${n.test})?${r}:`:r}),ze(t)===":"&&(t+="null"),t}function oG(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=gSe(e,t,n,r,i.config);for(const a in e)s[a]=bSe(e[a],t,o,i);return o}function bSe(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=ESe(wSe(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function wSe(e){return W(e)?xSe(e):Cw(e)}function ESe(e,t,n,r){const i=us(e,t);return i.$fields.forEach(o=>r[o]=1),Ae(n,i.$params),i.$expr}const SSe="outer",_Se=["value","update","init","react","bind"];function VI(e,t){U(e+' for "outer" push: '+J(t))}function sG(e,t){const n=e.name;if(e.push===SSe)t.signals[n]||VI("No prior signal definition",n),_Se.forEach(r=>{e[r]!==void 0&&VI("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Vk(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function kw(e,t,n,r){return new Vk(e,t,n,r)}function _x(e,t){return kw("operator",e,t)}function ye(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function hm(e,t){return t?{$field:e,$name:t}:{$field:e}}const Gk=hm("key");function GI(e,t){return{$compare:e,$order:t}}function CSe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const kSe="ascending",ASe="descending";function $Se(e){return ae(e)?(e.order===ASe?"-":"+")+Aw(e.op,e.field):""}function Aw(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const RR="scope",Yk="view";function Yt(e){return e&&e.signal}function TSe(e){return e&&e.expr}function _1(e){if(Yt(e))return!0;if(ae(e)){for(const t in e)if(_1(e[t]))return!0}return!1}function Yi(e,t){return e??t}function ec(e){return e&&e.signal||e}const YI="timer";function pm(e,t){return(e.merge?MSe:e.stream?RSe:e.type?FSe:U("Invalid stream specification: "+J(e)))(e,t)}function NSe(e){return e===RR?Yk:e||Yk}function MSe(e,t){const n=e.merge.map(i=>pm(i,t)),r=FR({merge:n},e,t);return t.addStream(r).id}function RSe(e,t){const n=pm(e.stream,t),r=FR({stream:n},e,t);return t.addStream(r).id}function FSe(e,t){let n;e.type===YI?(n=t.event(YI,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(NSe(e.source),e.type);const r=FR({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function FR(e,t,n){let r=t.between;return r&&(r.length!==2&&U('Stream "between" parameter must have 2 entries: '+J(t)),e.between=[pm(r[0],n),pm(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(OSe(t.marktype,t.markname,t.markrole)),t.source===RR&&r.push("inScope(event.item)"),r.length&&(e.filter=us("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function OSe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const PSe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function DSe(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||U("Signal update missing events specification."),se(o)&&(o=eu(o,t.isSubscope()?RR:Yk)),o=le(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[LSe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&U("Signal encode and update are mutually exclusive."),s="encode(item(),"+J(r)+")"),i.update=se(s)?us(s,t):s.expr!=null?us(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:PSe,$params:{$value:t.signalRef(s.signal)}}:U("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Ae(ISe(l,t),i)))}function ISe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):pm(e,t)}}function LSe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function zSe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?U("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=us(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>DSe(i,t,n.id))}const it=e=>(t,n,r)=>kw(e,n,t||void 0,r),aG=it("aggregate"),jSe=it("axisticks"),lG=it("bound"),wo=it("collect"),XI=it("compare"),BSe=it("datajoin"),uG=it("encode"),USe=it("expression"),WSe=it("facet"),qSe=it("field"),HSe=it("key"),VSe=it("legendentries"),GSe=it("load"),YSe=it("mark"),XSe=it("multiextent"),KSe=it("multivalues"),QSe=it("overlap"),ZSe=it("params"),cG=it("prefacet"),JSe=it("projection"),e_e=it("proxy"),t_e=it("relay"),fG=it("render"),n_e=it("scale"),Vc=it("sieve"),r_e=it("sortitems"),dG=it("viewlayout"),i_e=it("values");let o_e=0;const hG={min:"min",max:"max",count:"sum"};function s_e(e,t){const n=e.type||"linear";eW(n)||U("Unrecognized scale type: "+J(n)),t.addScale(e.name,{type:n,domain:void 0})}function a_e(e,t){const n=t.getScale(e.name).params;let r;n.domain=pG(e.domain,e,t),e.range!=null&&(n.range=mG(e,t,n)),e.interpolate!=null&&y_e(e.interpolate,n),e.nice!=null&&(n.nice=m_e(e.nice,t)),e.bins!=null&&(n.bins=g_e(e.bins,t));for(r in e)fe(n,r)||r==="name"||(n[r]=mi(e[r],t))}function mi(e,t){return ae(e)?e.signal?t.signalRef(e.signal):U("Unsupported object: "+J(e)):e}function C1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>mi(n,t))}function $w(e){U("Can not find data set: "+J(e))}function pG(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&U("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(W(e)?l_e:e.fields?c_e:u_e)(e,t,n)}function l_e(e,t,n){return e.map(r=>mi(r,n))}function u_e(e,t,n){const r=n.getData(e.data);return r||$w(e.data),jd(t.type)?r.valuesRef(n,e.field,gG(e.sort,!1)):rW(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function c_e(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=se(s)?{data:r,field:s}:W(s)||s.signal?f_e(s,n):s,o.push(s),o),[]);return(jd(t.type)?d_e:rW(t.type)?h_e:p_e)(e,n,i)}function f_e(e,t){const n="_:vega:_"+o_e++,r=wo({});if(W(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+J(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Vc({})]),{data:n,field:"data"}}function d_e(e,t,n){const r=gG(e.sort,!0);let i,o;const s=n.map(u=>{const c=t.getData(u.data);return c||$w(u.data),c.countsRef(t,u.field,r)}),a={groupby:Gk,pulse:s};r&&(i=r.op||"count",o=r.field?Aw(i,r.field):"count",a.ops=[hG[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(aG(a));const l=t.add(wo({pulse:ye(i)}));return o=t.add(i_e({field:Gk,sort:t.sortRef(r),pulse:ye(l)})),ye(o)}function gG(e,t){return e&&(!e.field&&!e.op?ae(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?U("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!hG[e.op]&&U("Multiple domain scales can not be sorted using "+e.op)),e}function h_e(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||$w(i.data),o.domainRef(t,i.field)});return ye(t.add(KSe({values:r})))}function p_e(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||$w(i.data),o.extentRef(t,i.field)});return ye(t.add(XSe({extents:r})))}function g_e(e,t){return e.signal||W(e)?C1(e,t):t.objectProperty(e)}function m_e(e,t){return e.signal?t.signalRef(e.signal):ae(e)?{interval:mi(e.interval),step:mi(e.step)}:mi(e)}function y_e(e,t){t.interpolate=mi(e.type||e),e.gamma!=null&&(t.interpolateGamma=mi(e.gamma))}function mG(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(se(i)){if(r&&fe(r,i))return e=Ae({},e,{range:r[i]}),mG(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=jd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:U("Unrecognized scale range value: "+J(i))}else if(i.scheme){n.scheme=W(i.scheme)?C1(i.scheme,t):mi(i.scheme,t),i.extent&&(n.schemeExtent=C1(i.extent,t)),i.count&&(n.schemeCount=mi(i.count,t));return}else if(i.step){n.rangeStep=mi(i.step,t);return}else{if(jd(e.type)&&!W(i))return pG(i,e,t);W(i)||U("Unsupported range type: "+J(i))}return i.map(o=>(W(o)?C1:mi)(o,t))}function v_e(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=Xk(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=Xk(n[i],i,t));t.addProjection(e.name,r)}function Xk(e,t,n){return W(e)?e.map(r=>Xk(r,t,n)):ae(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:U("Unsupported parameter object: "+J(e)):e}const Eo="top",Fh="left",Oh="right",zl="bottom",yG="center",x_e="vertical",b_e="start",w_e="middle",E_e="end",Kk="index",OR="label",S_e="offset",Xd="perc",__e="perc2",xi="value",c0="guide-label",PR="guide-title",C_e="group-title",k_e="group-subtitle",KI="symbol",k1="gradient",Qk="discrete",Zk="size",A_e="shape",$_e="fill",T_e="stroke",N_e="strokeWidth",M_e="strokeDash",R_e="opacity",DR=[Zk,A_e,$_e,T_e,N_e,M_e,R_e],f0={name:1,style:1,interactive:1},Be={value:0},bi={value:1},Tw="group",vG="rect",IR="rule",F_e="symbol",Gc="text";function gm(e){return e.type=Tw,e.interactive=e.interactive||!1,e}function Or(e,t){const n=(r,i)=>Yi(e[r],Yi(t[r],i));return n.isVertical=r=>x_e===Yi(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Yi(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Yi(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Yi(e.columns,Yi(t.columns,+n.isVertical(!0))),n}function xG(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function O_e(e,t,n){const r=t.config.style[n];return r&&r[e]}function Nw(e,t,n){return`item.anchor === '${b_e}' ? ${e} : item.anchor === '${E_e}' ? ${t} : ${n}`}const LR=Nw(J(Fh),J(Oh),J(yG));function P_e(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ae(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function bG(e,t){return t?e?ae(e)?Object.assign({},e,{offset:bG(e.offset,t)}):{value:e,offset:t}:t:e}function ti(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Rh(e.encode,t,f0)):e.interactive=!1,e}function D_e(e,t,n,r){const i=Or(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;o?(u=[0,1],c=[0,0],f=s,d=a):(u=[0,0],c=[1,0],f=a,d=s);const h={enter:l={opacity:Be,x:Be,y:Be,width:nn(f),height:nn(d)},update:Ae({},l,{opacity:bi,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Be}};return En(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),ti({type:vG,role:uSe,encode:h},r)}function I_e(e,t,n,r,i){const o=Or(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,f,d,h="";s?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const g={opacity:Be,fill:{scale:t,field:xi}};g[u]={signal:h+"datum."+Xd,mult:l},g[c]=Be,g[f]={signal:h+"datum."+__e,mult:l},g[d]=nn(a);const p={enter:g,update:Ae({},g,{opacity:bi}),exit:{opacity:Be}};return En(p,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),ti({type:vG,role:aSe,key:xi,from:i,encode:p},r)}const L_e=`datum.${Xd}<=0?"${Fh}":datum.${Xd}>=1?"${Oh}":"${yG}"`,z_e=`datum.${Xd}<=0?"${zl}":datum.${Xd}>=1?"${Eo}":"${w_e}"`;function QI(e,t,n,r){const i=Or(e,t),o=i.isVertical(),s=nn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const g={enter:u={opacity:Be},update:c={opacity:bi,text:{field:OR}},exit:{opacity:Be}};return En(g,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Yi(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:z_e},f="y",d="x",h="1-"):(u.align=c.align={signal:L_e},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+Xd,mult:a},u[d]=c[d]=s,s.offset=Yi(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+Kk}:void 0,ti({type:Gc,role:tG,style:c0,key:xi,from:r,encode:g,overlap:l},n)}function j_e(e,t,n,r,i){const o=Or(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${S_e} : datum.${Zk}`,h=u?nn(u):{field:Zk},g=`datum.${Kk}`,p=`max(1, ${i})`;let m,y,v,x,b;h.mult=.5,m={enter:y={opacity:Be,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:bi,x:y.x,y:y.y},exit:{opacity:Be}};let w=null,S=null;e.fill||(w=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),En(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),DR.forEach(T=>{e[T]&&(v[T]=y[T]={scale:e[T],field:xi})});const E=ti({type:F_e,role:cSe,key:xi,from:f,clip:u?!0:void 0,encode:m},n.symbols),_=nn(c);_.offset=o("labelOffset"),m={enter:y={opacity:Be,x:{signal:d,offset:_},y:h},update:v={opacity:bi,text:{field:OR},x:y.x,y:y.y},exit:{opacity:Be}},En(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const k=ti({type:Gc,role:tG,style:c0,key:xi,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Be,height:u?nn(u):Be,opacity:Be},exit:{opacity:Be},update:v={opacity:bi,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(x=`ceil(item.mark.items.length / ${p})`,v.row.signal=`${g}%${x}`,v.column.signal=`floor(${g} / ${x})`,b={field:["row",g]}):(v.row.signal=`floor(${g} / ${p})`,v.column.signal=`${g} % ${p}`,b={field:g}),v.column.signal=`(${i})?${v.column.signal}:${g}`,r={facet:{data:r,name:"value",groupby:Kk}},gm({role:MR,from:r,encode:Rh(m,s,f0),marks:[E,k],name:l,interactive:a,sort:b})}function B_e(e,t){const n=Or(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const zR='item.orient === "left"',jR='item.orient === "right"',Mw=`(${zR} || ${jR})`,U_e=`datum.vgrad && ${Mw}`,W_e=Nw('"top"','"bottom"','"middle"'),q_e=Nw('"right"','"left"','"center"'),H_e=`datum.vgrad && ${jR} ? (${q_e}) : (${Mw} && !(datum.vgrad && ${zR})) ? "left" : ${LR}`,V_e=`item._anchor || (${Mw} ? "middle" : "start")`,G_e=`${U_e} ? (${zR} ? -90 : 90) : 0`,Y_e=`${Mw} ? (datum.vgrad ? (${jR} ? "bottom" : "top") : ${W_e}) : "top"`;function X_e(e,t,n,r){const i=Or(e,t),o={enter:{opacity:Be},update:{opacity:bi,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Be}};return En(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:V_e},angle:{signal:G_e},align:{signal:H_e},baseline:{signal:Y_e},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ti({type:Gc,role:fSe,style:PR,from:r,encode:o},n)}function K_e(e,t){let n;return ae(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ZI(e.path)+")":e.sphere&&(n="geoShape("+ZI(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ZI(e){return ae(e)&&e.signal?e.signal:J(e)}function wG(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Tw?MR:t||TR}function Q_e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||wG(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Z_e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function BR(e,t){const n=nB(e.type);n||U("Unrecognized transform type: "+J(e.type));const r=kw(n.type.toLowerCase(),null,EG(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function EG(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=J_e(s,t,n)}return r}function J_e(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return eCe(e,t,n);if(i===void 0){e.required&&U("Missing required "+J(t.type)+" parameter: "+J(e.name));return}else{if(r==="param")return tCe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Yt(i)?i.map(o=>JI(e,o,n)):JI(e,i,n)}function JI(e,t,n){const r=e.type;if(Yt(t))return tL(r)?U("Expression references can not be signals."):gS(r)?n.fieldRef(t):nL(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||gS(r);return i&&nCe(t)?n.exprRef(t.expr,t.as):i&&rCe(t)?hm(t.field,t.as):tL(r)?us(t,n):iCe(r)?ye(n.getData(t).values):gS(r)?hm(t):nL(r)?n.compareRef(t):t}}function eCe(e,t,n){return se(t.from)||U('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function tCe(e,t,n){const r=t[e.name];return e.array?(W(r)||U("Expected an array of sub-parameters. Instead: "+J(r)),r.map(i=>eL(e,i,n))):eL(e,r,n)}function eL(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||U("Unsupported parameter: "+J(t));const o=Ae(EG(i,t,n),i.key);return ye(n.add(ZSe(o)))}const nCe=e=>e&&e.expr,rCe=e=>e&&e.field,iCe=e=>e==="data",tL=e=>e==="expr",gS=e=>e==="field",nL=e=>e==="compare";function oCe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||U("Only group marks can be faceted."),r.field!=null?s=a=A1(r,n):(e.data?a=ye(n.getData(e.data).aggregate):(o=BR(Ae({type:"aggregate",groupby:le(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=A1(r,n),s=a=ye(n.add(o))),i=n.keyRef(r.groupby,!0))):s=ye(n.add(wo(null,[{}]))),s||(s=A1(e,n)),{key:i,pulse:s,parent:a}}function A1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ye(t.getData(e.data).output)}function Sc(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Sc.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=ye(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new Sc(e,o,i,r,s)};function SG(e){return se(e)?e:null}function rL(e,t,n){const r=Aw(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function xp(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=$Se(o);let u=SG(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=o?{field:Gk,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ye(t.output)};l&&(d.sort=e.sortRef(o)),f=e.add(kw(r,void 0,d)),s&&(t.index[i]=f),c=ye(f),u!=null&&(a[u]=c)}return c}Sc.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=SG(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&rL(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:ye(r.output)},n&&n.field&&rL(e,l,n),a=e.add(aG(l)),s=e.add(wo({pulse:ye(a)})),s={agg:a,ref:ye(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return ye(this.values)},extentRef(e,t){return xp(e,this,"extent","extent",t,!1)},domainRef(e,t){return xp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return xp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return xp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return xp(e,this,"indata","tupleindex",t,!0,!0)}};function sCe(e,t,n){const r=e.from.facet,i=r.name,o=A1(r,t);let s;r.name||U("Facet must have a name: "+J(r)),r.data||U("Facet must reference a data set: "+J(r)),r.field?s=t.add(cG({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(WSe({key:t.keyRef(r.groupby),group:ye(t.proxy(n.parent)),pulse:o})):U("Facet must specify groupby or field: "+J(r));const a=t.fork(),l=a.add(wo()),u=a.add(Vc({pulse:ye(l)}));a.addData(i,new Sc(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function aCe(e,t,n){const r=t.add(cG({pulse:n.pulse})),i=t.fork();i.add(Vc()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function _G(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(_x()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=us(u,t);l.update=c.$expr,l.params=c.$params}function Rw(e,t){const n=wG(e),r=e.type===Tw,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===MR||n===NR,a,l,u,c,f,d,h;const g=n===TR||s||i,p=oCe(e.from,r,t);l=t.add(BSe({key:p.key||(e.key?hm(e.key):void 0),pulse:p.pulse,clean:!r}));const m=ye(l);l=u=t.add(wo({pulse:m})),l=t.add(YSe({markdef:Q_e(e),interactive:Z_e(e.interactive,t),clip:K_e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ye(l)}));const y=ye(l);l=c=t.add(uG(oG(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const E=BR(S,t),_=E.metadata;(_.generates||_.changes)&&U("Mark transforms should not generate new data."),_.nomod||(c.params.mod=!0),E.params.pulse=ye(l),t.add(l=E)}),e.sort&&(l=t.add(r_e({sort:t.compareRef(e.sort),pulse:ye(l)})));const v=ye(l);(i||s)&&(s=t.add(dG({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=ye(s));const x=t.add(lG({mark:y,pulse:d||v}));h=ye(x),r&&(g&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,m),i?sCe(e,t,p):g?aCe(e,t,p):t.parse(e),t.popState(),g&&(s&&a.push(s),a.push(x))),o&&(h=lCe(o,h,t));const b=t.add(fG({pulse:h})),w=t.add(Vc({pulse:ye(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Sc(t,u,b,w)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&U("Marks only support modify triggers."),_G(S,t,f)}))}function lCe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:Yt(o)?n.signalRef(o.signal):o,method:Yt(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=Yt(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return ye(n.add(QSe(s)))}function uCe(e,t){const n=t.config.legend,r=e.encode||{},i=Or(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c=0,f,d,h;DR.forEach(x=>e[x]?(u[x]=e[x],c=c||e[x]):0),c||U("Missing valid scale for legend.");const g=cCe(e,t.scaleType(c)),p={title:e.title!=null,scales:u,type:g,vgrad:g!=="symbol"&&i.isVertical()},m=ye(t.add(wo(null,[p]))),y={enter:{x:{value:0},y:{value:0}}},v=ye(t.add(VSe(d={type:g,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===k1?(h=[D_e(e,c,n,r.gradient),QI(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${ec(i.gradientLength())})/100))`)):g===Qk?h=[I_e(e,c,n,r.gradient,v),QI(e,n,r.labels,v)]:(f=B_e(e,n),h=[j_e(e,n,r,v,ec(f.columns))],d.size=hCe(e,t,h[0].marks)),h=[gm({role:lSe,from:m,encode:y,marks:h,layout:f,interactive:a})],p.title&&h.push(X_e(e,n,r.title,m)),Rw(gm({role:sSe,from:m,encode:Rh(dCe(i,e,n),o,f0),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function cCe(e,t){let n=e.type||KI;return!e.type&&fCe(e)===1&&(e.fill||e.stroke)&&(n=BN(t)?k1:WC(t)?Qk:KI),n!==k1?n:WC(t)?Qk:k1}function fCe(e){return DR.reduce((t,n)=>t+(e[n]?1:0),0)}function dCe(e,t,n){const r={enter:{},update:{}};return En(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function hCe(e,t,n){const r=ec(iL("size",e,n)),i=ec(iL("strokeWidth",e,n)),o=ec(pCe(n[1].encode,t,c0));return us(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function iL(e,t,n){return t[e]?`scale("${t[e]}",datum)`:xG(e,n[0].encode)}function pCe(e,t,n){return xG("fontSize",e)||O_e("fontSize",t,n)}const gCe=`item.orient==="${Fh}"?-90:item.orient==="${Oh}"?90:0`;function mCe(e,t){e=se(e)?{text:e}:e;const n=Or(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},c=ye(t.add(wo(null,[u])));return l.push(xCe(e,n,yCe(e),c)),e.subtitle&&l.push(bCe(e,n,r.subtitle,c)),Rw(gm({role:dSe,from:c,encode:vCe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function yCe(e){const t=e.encode;return t&&t.title||Ae({name:e.name,interactive:e.interactive,style:e.style},t)}function vCe(e,t){const n={enter:{},update:{}};return En(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:LR},angle:{signal:gCe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Rh(n,t,f0)}function xCe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return En(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ti({type:Gc,role:hSe,style:C_e,from:r,encode:s},n)}function bCe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return En(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ti({type:Gc,role:pSe,style:k_e,from:r,encode:s},n)}function wCe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(BR(r,t))}),e.on&&e.on.forEach(r=>{_G(r,t,e.name)}),t.addDataPipeline(e.name,ECe(e,t,n))}function ECe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,c,f;for(e.values?Yt(e.values)||_1(e.format)?(r.push(oL(t,e)),r.push(i=gu())):r.push(i=gu({$ingest:e.values,$format:e.format})):e.url?_1(e.url)||_1(e.format)?(r.push(oL(t,e)),r.push(i=gu())):r.push(i=gu({$request:e.url,$format:e.format})):e.source&&(i=a=le(e.source).map(d=>ye(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=gu()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=t_e({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,gu())),i||r.push(gu()),r.push(Vc({})),r}function gu(e){const t=wo({},e);return t.metadata={source:!0},t}function oL(e,t){return GSe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const CG=e=>e===zl||e===Eo,Fw=(e,t,n)=>Yt(e)?kCe(e.signal,t,n):e===Fh||e===Eo?t:n,rn=(e,t,n)=>Yt(e)?_Ce(e.signal,t,n):CG(e)?t:n,so=(e,t,n)=>Yt(e)?CCe(e.signal,t,n):CG(e)?n:t,kG=(e,t,n)=>Yt(e)?ACe(e.signal,t,n):e===Eo?{value:t}:{value:n},SCe=(e,t,n)=>Yt(e)?$Ce(e.signal,t,n):e===Oh?{value:t}:{value:n},_Ce=(e,t,n)=>AG(`${e} === '${Eo}' || ${e} === '${zl}'`,t,n),CCe=(e,t,n)=>AG(`${e} !== '${Eo}' && ${e} !== '${zl}'`,t,n),kCe=(e,t,n)=>UR(`${e} === '${Fh}' || ${e} === '${Eo}'`,t,n),ACe=(e,t,n)=>UR(`${e} === '${Eo}'`,t,n),$Ce=(e,t,n)=>UR(`${e} === '${Oh}'`,t,n),AG=(e,t,n)=>(t=t!=null?nn(t):t,n=n!=null?nn(n):n,sL(t)&&sL(n)?(t=t?t.signal||J(t.value):null,n=n?n.signal||J(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ae({test:e},t)].concat(n||[])),sL=e=>e==null||Object.keys(e).length===1,UR=(e,t,n)=>({signal:`${e} ? (${qf(t)}) : (${qf(n)})`}),TCe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Fh}' ? (${qf(r)}) : `:"")+(n!=null?`${e} === '${zl}' ? (${qf(n)}) : `:"")+(i!=null?`${e} === '${Oh}' ? (${qf(i)}) : `:"")+(t!=null?`${e} === '${Eo}' ? (${qf(t)}) : `:"")+"(null)"}),qf=e=>Yt(e)?e.signal:e==null?null:J(e),NCe=(e,t)=>t===0?0:Yt(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},od=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function yf(e,t,n,r){let i;if(t&&fe(t,e))return t[e];if(fe(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[PR][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[c0][i]}return null}function aL(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function MCe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(Yt(s)){const f=aL([n.axisX,n.axisY]),d=aL([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=rn(s,yf(u,n.axisX,i,r),yf(u,n.axisY,i,r));l={};for(u of d)l[u]=TCe(s.signal,yf(u,n.axisTop,i,r),yf(u,n.axisBottom,i,r),yf(u,n.axisLeft,i,r),yf(u,n.axisRight,i,r))}else a=s===Eo||s===zl?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Ae({},i,a,l,o):i}function RCe(e,t,n,r){const i=Or(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Be},update:a={opacity:bi},exit:{opacity:Be}};En(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=lL(e,0),c=lL(e,1);return s.x=a.x=rn(o,u,Be),s.x2=a.x2=rn(o,c),s.y=a.y=so(o,u,Be),s.y2=a.y2=so(o,c),ti({type:IR,role:tSe,from:r,encode:l},n)}function lL(e,t){return{scale:e.scale,range:t}}function FCe(e,t,n,r,i){const o=Or(e,t),s=e.orient,a=e.gridScale,l=Fw(s,1,-1),u=OCe(e.offset,l);let c,f,d;const h={enter:c={opacity:Be},update:d={opacity:bi},exit:f={opacity:Be}};En(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const g={scale:e.scale,field:xi,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},p=rn(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:Ae(p,{mult:l,offset:u});return c.x=d.x=rn(s,g,m),c.y=d.y=so(s,g,m),c.x2=d.x2=so(s,y),c.y2=d.y2=rn(s,y),f.x=rn(s,g),f.y=so(s,g),ti({type:IR,role:nSe,key:xi,from:r,encode:h},n)}function OCe(e,t){if(t!==1)if(!ae(e))e=Yt(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ae({},e);for(;n.mult!=null;)if(ae(n.mult))n=n.mult=Ae({},n.mult);else return n.mult=Yt(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function PCe(e,t,n,r,i,o){const s=Or(e,t),a=e.orient,l=Fw(a,-1,1);let u,c,f;const d={enter:u={opacity:Be},update:f={opacity:bi},exit:c={opacity:Be}};En(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=nn(i);h.mult=l;const g={scale:e.scale,field:xi,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=rn(a,Be,g),f.y2=u.y2=rn(a,h),c.x=rn(a,g),f.x=u.x=so(a,Be,g),f.x2=u.x2=so(a,h),c.y=so(a,g),ti({type:IR,role:iSe,key:xi,from:r,encode:d},n)}function mS(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function DCe(e,t,n,r,i,o){const s=Or(e,t),a=e.orient,l=e.scale,u=Fw(a,-1,1),c=ec(s("labelFlush")),f=ec(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let g=c===0||!!c,p;const m=nn(i);m.mult=u,m.offset=nn(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:xi,band:.5,offset:bG(o.offset,s("labelOffset"))},v=rn(a,g?mS(l,c,'"left"','"right"','"center"'):{value:"center"},SCe(a,"left","right")),x=rn(a,kG(a,"bottom","top"),g?mS(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=mS(l,c,`-(${f})`,f,0);g=g&&f;const w={opacity:Be,x:rn(a,y,m),y:so(a,y,m)},S={enter:w,update:p={opacity:bi,text:{field:OR},x:w.x,y:w.y,align:v,baseline:x},exit:{opacity:Be,x:w.x,y:w.y}};En(S,{dx:!d&&g?rn(a,b):null,dy:!h&&g?so(a,b):null}),En(S,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const E=s("labelBound");let _=s("labelOverlap");return _=_||E?{separation:s("labelSeparation"),method:_,order:"datum.index",bound:E?{scale:l,orient:a,tolerance:E}:null}:void 0,p.align!==v&&(p.align=od(p.align,v)),p.baseline!==x&&(p.baseline=od(p.baseline,x)),ti({type:Gc,role:rSe,style:c0,key:xi,from:r,encode:S,overlap:_},n)}function ICe(e,t,n,r){const i=Or(e,t),o=e.orient,s=Fw(o,-1,1);let a,l;const u={enter:a={opacity:Be,anchor:nn(i("titleAnchor",null)),align:{signal:LR}},update:l=Ae({},a,{opacity:bi,text:nn(e.title)}),exit:{opacity:Be}},c={signal:`lerp(range("${e.scale}"), ${Nw(0,1,.5)})`};return l.x=rn(o,c),l.y=so(o,c),a.angle=rn(o,Be,NCe(s,90)),a.baseline=rn(o,kG(o,zl,Eo),{value:zl}),l.angle=a.angle,l.baseline=a.baseline,En(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),LCe(i,o,u,n),u.update.align=od(u.update.align,a.align),u.update.angle=od(u.update.angle,a.angle),u.update.baseline=od(u.update.baseline,a.baseline),ti({type:Gc,role:oSe,style:PR,from:r,encode:u},n)}function LCe(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=od(nn(a),n.update[l]),!1):!Cf(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?nn(s):rn(t,nn(s),nn(o))}function zCe(e,t){const n=MCe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Or(e,n),u=P_e(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=ye(t.add(wo({},[c]))),d=ye(t.add(jSe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let g;return c.grid&&h.push(FCe(e,n,r.grid,d,u)),c.ticks&&(g=l("tickSize"),h.push(PCe(e,n,r.ticks,d,g,u))),c.labels&&(g=c.ticks?g:0,h.push(DCe(e,n,r.labels,d,g,u))),c.domain&&h.push(RCe(e,n,r.domain,f)),c.title&&h.push(ICe(e,n,r.title,f)),Rw(gm({role:eSe,from:f,encode:Rh(jCe(l,e),i,f0),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function jCe(e,t){const n={enter:{},update:{}};return En(n,{orient:e("orient"),offset:e("offset")||0,position:Yi(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function $G(e,t,n){const r=le(e.signals),i=le(e.scales);return n||r.forEach(o=>sG(o,t)),le(e.projections).forEach(o=>v_e(o,t)),i.forEach(o=>s_e(o,t)),le(e.data).forEach(o=>wCe(o,t)),i.forEach(o=>a_e(o,t)),(n||r).forEach(o=>zSe(o,t)),le(e.axes).forEach(o=>zCe(o,t)),le(e.marks).forEach(o=>Rw(o,t)),le(e.legends).forEach(o=>uCe(o,t)),e.title&&mCe(e.title,t),t.parseLambdas(),t}const BCe=e=>Rh({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function UCe(e,t){const n=t.config,r=ye(t.root=t.add(_x())),i=WCe(e,n);i.forEach(u=>sG(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(wo()),s=t.add(uG(oG(BCe(e.encode),Tw,NR,e.style,t,{pulse:ye(o)}))),a=t.add(dG({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ye(s)}));t.operators.pop(),t.pushState(ye(s),ye(a),null),$G(e,t,i),t.operators.push(a);let l=t.add(lG({mark:r,pulse:ye(a)}));return l=t.add(fG({pulse:ye(l)})),l=t.add(Vc({pulse:ye(l)})),t.addData("root",new Sc(t,o,o,l)),t}function bp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function WCe(e,t){const n=s=>Yi(e[s],t[s]),r=[bp("background",n("background")),bp("autosize",QEe(n("autosize"))),bp("padding",JEe(n("padding"))),bp("width",n("width")||0),bp("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return le(e.signals).forEach(s=>{fe(i,s.name)?s=Ae(i[s.name],s):r.push(s),o[s.name]=s}),le(t.signals).forEach(s=>{!fe(o,s.name)&&!fe(i,s.name)&&r.push(s)}),r}function TG(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function uL(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}TG.prototype=uL.prototype={parse(e){return $G(e,this)},fork(){return new uL(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof Vk?ye(e):e;return this.add(e_e({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ye(this.add(Vc({pulse:e})))),this._parent.push(t),this._lookup.push(n?ye(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return ze(this._parent)},encode(){return ze(this._encode)},lookup(){return ze(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(se(e))return hm(e,t);e.signal||U("Unsupported field reference: "+J(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ye(this.add(qSe(i)))}return r},compareRef(e){let t=!1;const n=o=>Yt(o)?(t=!0,this.signalRef(o.signal)):TSe(o)?(t=!0,this.exprRef(o.expr)):o,r=le(e.field).map(n),i=le(e.order).map(n);return t?ye(this.add(XI({fields:r,orders:i}))):GI(r,i)},keyRef(e,t){let n=!1;const r=o=>Yt(o)?(n=!0,ye(i[o.signal])):o,i=this.signals;return e=le(e).map(r),n?ye(this.add(HSe({fields:e,flat:t}))):CSe(e,t)},sortRef(e){if(!e)return e;const t=Aw(e.op,e.field),n=e.order||kSe;return n.signal?ye(this.add(XI({fields:t,orders:this.signalRef(n.signal)}))):GI(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return fe(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&U("Duplicate signal name: "+J(e));const n=t instanceof Vk?t:this.add(_x(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||U("Unrecognized signal name: "+J(e)),this.signals[e]},signalRef(e){return this.signals[e]?ye(this.signals[e]):(fe(this.lambdas,e)||(this.lambdas[e]=this.add(_x(null))),ye(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=us(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ae(e)?e:this.signalRef(e.signal||WR(e))},exprRef(e,t){const n={expr:us(e,this)};return t&&(n.expr.$name=t),ye(this.add(USe(n)))},addBinding(e,t){this.bindings||U("Nested signals do not support binding: "+J(e)),this.bindings.push(Ae({signal:e},t))},addScaleProj(e,t){fe(this.scales,e)&&U("Duplicate scale or projection name: "+J(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,n_e(t))},addProjection(e,t){this.addScaleProj(e,JSe(t))},getScale(e){return this.scales[e]||U("Unrecognized scale name: "+J(e)),this.scales[e]},scaleRef(e){return ye(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return fe(this.data,e)&&U("Duplicate data set name: "+J(e)),this.data[e]=t},getData(e){return this.data[e]||U("Undefined data set name: "+J(e)),this.data[e]},addDataPipeline(e,t){return fe(this.data,e)&&U("Duplicate data set name: "+J(e)),this.addData(e,Sc.fromEntries(this,t))}};function WR(e){return(W(e)?qCe:HCe)(e)}function qCe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ae(i)?i.signal||WR(i):J(i))}return n+"]"}function HCe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+J(r)+":"+(ae(i)?i.signal||WR(i):J(i));return t+"}"}function VCe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function GCe(e,t,n){return ae(e)||U("Input Vega specification must be an object."),t=vh(VCe(),t,e.config),UCe(e,new TG(t,n)).toRuntime()}var YCe="6.2.0";Ae(Pd,Dce,hme,Hme,Nye,_1e,Qve,Nve,Jve,Sxe,Fxe,jxe);const XCe=YCe,KCe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Bt,CanvasHandler:t0,CanvasRenderer:Lv,DATE:$r,DAY:On,DAYOFYEAR:as,Dataflow:td,Debug:C7,DisallowedObjectProperties:eT,Error:tT,EventStream:Fb,Gradient:vW,GroupItem:nw,HOURS:Zr,Handler:dM,HybridHandler:lq,HybridRenderer:ek,Info:_7,Item:tw,MILLISECONDS:po,MINUTES:Jr,MONTH:Ln,Marks:ei,MultiPulse:kT,None:S7,Operator:ot,Parameters:Rb,Pulse:El,QUARTER:Ar,RenderType:sl,Renderer:e0,ResourceLoader:_W,SECONDS:Ci,SVGHandler:XW,SVGRenderer:vM,SVGStringRenderer:aq,Scenegraph:BW,TIME_UNITS:mT,Transform:z,View:GV,WEEK:Vt,Warn:nT,YEAR:xn,accessor:Fr,accessorFields:In,accessorName:Rt,array:le,ascending:bh,bandwidthNRD:NT,bin:oB,bootstrapCI:sB,boundClip:vq,boundContext:Km,boundItem:XC,boundMark:IW,boundStroke:ya,changeset:Uc,clampRange:D7,codegenExpression:bV,compare:sT,constant:qn,cumulativeLogNormal:DT,cumulativeNormal:Pb,cumulativeUniform:jT,dayofyear:dj,debounce:aT,defaultLocale:wT,definition:nB,densityLogNormal:PT,densityNormal:MT,densityUniform:zT,domChild:qt,domClear:fi,domCreate:il,domFind:fM,dotbin:aB,error:U,expressionFunction:Lt,extend:Ae,extent:is,extentIndex:I7,falsy:Pa,fastmap:wh,field:Si,flush:L7,font:aw,fontFamily:Jm,fontSize:ys,format:i1,formatLocale:mv,formats:_T,hasOwnProperty:fe,id:Pm,identity:Wn,inferType:Hj,inferTypes:Vj,ingest:Ye,inherits:te,inrange:zf,interpolate:UN,interpolateColors:Jb,interpolateRange:iW,intersect:pq,intersectBoxLine:jf,intersectPath:KN,intersectPoint:QN,intersectRule:kW,isArray:W,isBoolean:Yl,isDate:bl,isFunction:$e,isIterable:z7,isNumber:He,isObject:ae,isRegExp:lT,isString:se,isTuple:Nb,key:uT,lerp:j7,lineHeight:Dl,loader:$b,locale:Wj,logger:xb,lruCache:B7,markup:yM,merge:U7,mergeConfig:vh,multiLineOffset:lM,one:yh,pad:W7,panLinear:N7,panLog:M7,panPow:R7,panSymlog:F7,parse:GCe,parseExpression:yR,parseSelector:eu,path:jb,pathCurves:GN,pathEqual:xq,pathParse:Bd,pathRectangle:wW,pathRender:tm,pathSymbols:bW,pathTrail:EW,peek:ze,point:uw,projection:IM,quantileLogNormal:IT,quantileNormal:Db,quantileUniform:BT,quantiles:$T,quantizeInterpolator:oW,quarter:O7,quartiles:TT,get random(){return ki},randomInteger:jue,randomKDE:FT,randomLCG:zue,randomLogNormal:uB,randomMixture:cB,randomNormal:RT,randomUniform:fB,read:Xj,regressionConstant:UT,regressionExp:hB,regressionLinear:WT,regressionLoess:mB,regressionLog:dB,regressionPoly:gB,regressionPow:pB,regressionQuad:qT,renderModule:cw,repeat:Mp,resetDefaultLocale:Ile,resetSVGDefIds:Mge,responseType:Yj,runtimeContext:OV,sampleCurve:Lb,sampleLogNormal:OT,sampleNormal:Ob,sampleUniform:LT,scale:Ge,sceneEqual:xM,sceneFromJSON:zW,scenePickVisit:Nv,sceneToJSON:LW,sceneVisit:go,sceneZOrder:ZN,scheme:WN,serializeXML:rq,setHybridRendererOptions:Age,setRandom:Iue,span:Dm,splitAccessPath:ps,stringValue:J,textMetrics:Gr,timeBin:Tj,timeFloor:xj,timeFormatLocale:Xg,timeInterval:Ch,timeOffset:Ej,timeSequence:Cj,timeUnitSpecifier:fj,timeUnits:yT,toBoolean:cT,toDate:fT,toNumber:Pn,toSet:ho,toString:dT,transform:rB,transforms:Pd,truncate:q7,truthy:_i,tupleid:ve,typeParsers:MC,utcFloor:bj,utcInterval:kh,utcOffset:Sj,utcSequence:kj,utcdayofyear:gj,utcquarter:P7,utcweek:mj,version:XCe,visitArray:Ba,week:hj,writeConfig:xh,zero:Ya,zoomLinear:rT,zoomLog:iT,zoomPow:cv,zoomSymlog:oT},Symbol.toStringTag,{value:"Module"}));function QCe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var ZCe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},JCe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},eke={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const tke=Array.prototype.slice,mu=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,tke.call(t,1))},nke=(e,t=0,n=1,r=0,i=0,o=0,s=0)=>se(e)?new Date(e):new Date(e,t,n,r,i,o,s);var rke={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:nke,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return mu("join",arguments)},indexof:function(){return mu("indexOf",arguments)},lastindexof:function(){return mu("lastIndexOf",arguments)},slice:function(){return mu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(bh),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return mu("substring",arguments,String)},split:function(){return mu("split",arguments,String)},replace:function(){return mu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const ike=["view","item","group","xy","x","y"],Jk=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Jk.add(setImmediate);const oke={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:ZCe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),Jk.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||rke[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>JCe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>eke[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);e.memberDepth-=1;const o=e(r.value);return eT.has(i)?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):Jk.has(o)?console.error(`Prevented interpretation of method "${i}" which could lead to insecure code execution`):n[i]=o,n},{})};function wp(e,t,n,r,i,o){const s=a=>oke[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,ike.forEach(a=>s.fn[a]=(...l)=>i.vega[a](...l)),s(e)}var ske={operator(e,t){const n=t.ast,r=e.functions;return i=>wp(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>wp(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>wp(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return wp(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,c;for(const f in r)c=wp(r[f].ast,i,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return n!=="rule"&&QCe(s,r,o),u}}},ake="6.4.1",lke={version:ake};function qR(e){return Y(e,"or")}function HR(e){return Y(e,"and")}function VR(e){return Y(e,"not")}function $1(e,t){if(VR(e))$1(e.not,t);else if(HR(e))for(const n of e.and)$1(n,t);else if(qR(e))for(const n of e.or)$1(n,t);else t(e)}function sd(e,t){return VR(e)?{not:sd(e.not,t)}:HR(e)?{and:e.and.map(n=>sd(n,t))}:qR(e)?{or:e.or.map(n=>sd(n,t))}:t(e)}const Ee=structuredClone;function NG(e){throw new Error(e)}function Kd(e,t){const n={};for(const r of t)fe(e,r)&&(n[r]=e[r]);return n}function Xr(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Qe(e)).join(",")})`};function Ie(e){if(He(e))return e;const t=se(e)?e:Qe(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function eA(e){return e===!1||e===null}function Oe(e,t){return e.includes(t)}function Qd(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function GR(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function MG(e,...t){for(const n of t)uke(e,n??{});return e}function uke(e,t){for(const n of G(t))xh(e,n,t[n],!0)}function Vo(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function cke(e,t){const n=G(e),r=G(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function RG(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function YR(e,t){for(const n of e)if(t.has(n))return!0;return!1}function tA(e){const t=new Set;for(const n of e){const i=ps(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function XR(e,t){return e===void 0||t===void 0?!0:YR(tA(e),tA(t))}function st(e){return G(e).length===0}const G=Object.keys,jt=Object.values,jl=Object.entries;function mm(e){return e===!0||e===!1}function xt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Eg(e,t){return VR(e)?`!(${Eg(e.not,t)})`:HR(e)?`(${e.and.map(n=>Eg(n,t)).join(") && (")})`:qR(e)?`(${e.or.map(n=>Eg(n,t)).join(") || (")})`:t(e)}function Cx(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Cx(e[n],t)&&delete e[n],st(e)}function d0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function KR(e,t="datum"){const n=ps(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(J).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function FG(e,t="datum"){return`${t}[${J(ps(e).join("."))}]`}function Ze(e){return`datum['${e.replaceAll("'","\\'")}']`}function OG(e){return e.replaceAll("\\'","'").replaceAll("\\.",".")}function fke(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function $i(e){return`${ps(e).map(fke).join("\\.")}`}function _c(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Ph(e){return`${ps(e).join(".")}`}function Zd(e){return e?ps(e).length:0}function Dt(...e){return e.find(t=>t!==void 0)}let PG=42;function DG(e){const t=++PG;return e?String(e)+t:t}function dke(){PG=42}function IG(e){return LG(e)?e:`__${e}`}function LG(e){return e.startsWith("__")}function ym(e){if(e!==void 0)return(e%360+360)%360}function Ow(e){return He(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const cL=Object.getPrototypeOf(structuredClone({}));function Wr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Wr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Wr(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==cL.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==cL.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Wr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Qe(e){const t=[];return function n(r){if(r!=null&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?`${r}`:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return`${o}]`}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=`${JSON.stringify(l)}:${u}`)}return t.splice(s,1),`{${o}}`}(e)}function Y(e,t){return ae(e)&&fe(e,t)&&e[t]!==void 0}const Js="row",ea="column",Pw="facet",bt="x",un="y",So="x2",ws="y2",tu="xOffset",Dh="yOffset",_o="radius",xa="radius2",Mi="theta",ba="theta2",Co="latitude",ko="longitude",Ao="latitude2",Ti="longitude2",nu="time",Nr="color",Es="fill",Ss="stroke",Mr="shape",wa="size",Yc="angle",Ea="opacity",ru="fillOpacity",iu="strokeOpacity",ou="strokeWidth",su="strokeDash",h0="text",Jd="order",p0="detail",Dw="key",Cc="tooltip",Iw="href",Lw="url",zw="description",hke={x:1,y:1,x2:1,y2:1},zG={theta:1,theta2:1,radius:1,radius2:1};function jG(e){return fe(zG,e)}const QR={longitude:1,longitude2:1,latitude:1,latitude2:1};function BG(e){switch(e){case Co:return"y";case Ao:return"y2";case ko:return"x";case Ti:return"x2"}}function UG(e){return fe(QR,e)}const pke=G(QR),ZR={...hke,...zG,...QR,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function ad(e){return e===Nr||e===Es||e===Ss}const WG={row:1,column:1,facet:1},yi=G(WG),JR={...ZR,...WG},gke=G(JR),{order:p5e,detail:g5e,tooltip:m5e,...mke}=JR,{row:y5e,column:v5e,facet:x5e,...yke}=mke;function vke(e){return fe(yke,e)}function qG(e){return fe(JR,e)}const xke=[So,ws,Ao,Ti,ba,xa];function HG(e){return Xc(e)!==e}function Xc(e){switch(e){case So:return bt;case ws:return un;case Ao:return Co;case Ti:return ko;case ba:return Mi;case xa:return _o}return e}function Bl(e){if(jG(e))switch(e){case Mi:return"startAngle";case ba:return"endAngle";case _o:return"outerRadius";case xa:return"innerRadius"}return e}function _s(e){switch(e){case bt:return So;case un:return ws;case Co:return Ao;case ko:return Ti;case Mi:return ba;case _o:return xa}}function Rr(e){switch(e){case bt:case So:return"width";case un:case ws:return"height"}}function VG(e){switch(e){case bt:return"xOffset";case un:return"yOffset";case So:return"x2Offset";case ws:return"y2Offset";case Mi:return"thetaOffset";case _o:return"radiusOffset";case ba:return"theta2Offset";case xa:return"radius2Offset"}}function eF(e){switch(e){case bt:return"xOffset";case un:return"yOffset"}}function bke(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const wke=G(ZR),{x:b5e,y:w5e,x2:E5e,y2:S5e,xOffset:_5e,yOffset:C5e,latitude:k5e,longitude:A5e,latitude2:$5e,longitude2:T5e,theta:N5e,theta2:M5e,radius:R5e,radius2:F5e,...tF}=ZR,Eke=G(tF),nF={x:1,y:1},Sa=G(nF);function It(e){return fe(nF,e)}const rF={theta:1,radius:1},Ske=G(rF);function jw(e){return e==="width"?bt:un}const GG={xOffset:1,yOffset:1};function g0(e){return fe(GG,e)}const _ke={time:1};function yS(e){return e in _ke}const{text:O5e,tooltip:P5e,href:D5e,url:I5e,description:L5e,detail:z5e,key:j5e,order:B5e,...YG}=tF,Cke=G(YG);function kke(e){return fe(tF,e)}function Ake(e){switch(e){case Nr:case Es:case Ss:case wa:case Mr:case Ea:case ou:case su:return!0;case ru:case iu:case Yc:case nu:return!1}}const XG={...nF,...rF,...GG,...YG},iF=G(XG);function Cs(e){return fe(XG,e)}function $ke(e,t){return Nke(e)[t]}const KG={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:U5e,...Tke}=KG;function Nke(e){switch(e){case Nr:case Es:case Ss:case zw:case p0:case Dw:case Cc:case Iw:case Jd:case Ea:case ru:case iu:case ou:case Pw:case Js:case ea:return KG;case bt:case un:case tu:case Dh:case Co:case ko:case nu:return Tke;case So:case ws:case Ao:case Ti:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case wa:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case su:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Mr:return{point:"always",geoshape:"always"};case h0:return{text:"always"};case Yc:return{point:"always",square:"always",text:"always"};case Lw:return{image:"always"};case Mi:return{text:"always",arc:"always"};case _o:return{text:"always",arc:"always"};case ba:case xa:return{arc:"always"}}}function vS(e){switch(e){case bt:case un:case Mi:case _o:case tu:case Dh:case wa:case Yc:case ou:case Ea:case ru:case iu:case nu:case So:case ws:case ba:case xa:return;case Pw:case Js:case ea:case Mr:case su:case h0:case Cc:case Iw:case Lw:case zw:return"discrete";case Nr:case Es:case Ss:return"flexible";case Co:case ko:case Ao:case Ti:case p0:case Dw:case Jd:return}}const Mke={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Rke={count:1,min:1,max:1};function ha(e){return Y(e,"argmin")}function au(e){return Y(e,"argmax")}function oF(e){return se(e)&&fe(Mke,e)}const Fke=new Set(["count","valid","missing","distinct"]);function Bw(e){return se(e)&&Fke.has(e)}function Oke(e){return se(e)&&Oe(["min","max"],e)}const Pke=new Set(["count","sum","distinct","valid","missing"]),Dke=new Set(["mean","average","median","q1","q3","min","max"]);function QG(e){return Yl(e)&&(e=Jw(e,void 0)),`bin${G(e).map(t=>Uw(e[t])?xt(`_${t}_${jl(e[t])}`):xt(`_${t}_${e[t]}`)).join("")}`}function ut(e){return e===!0||Kc(e)&&!e.binned}function dn(e){return e==="binned"||Kc(e)&&e.binned===!0}function Kc(e){return ae(e)}function Uw(e){return Y(e,"param")}function fL(e){switch(e){case Js:case ea:case wa:case Nr:case Es:case Ss:case ou:case Ea:case ru:case iu:case Mr:return 6;case su:return 4;default:return 10}}function m0(e){return Y(e,"expr")}function hn(e,{level:t}={level:0}){const n=G(e||{}),r={};for(const i of n)r[i]=t===0?jr(e[i]):hn(e[i],{level:t-1});return r}function ZG(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:g,...p}=e,m={...p,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...g?{subtitlePadding:g}:{}},x=Kd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:x,nonMarkTitleProperties:y,subtitle:v}}function Ha(e){return se(e)||W(e)&&se(e[0])}function me(e){return Y(e,"signal")}function Qc(e){return Y(e,"step")}function Ike(e){return W(e)?!1:Y(e,"fields")&&!Y(e,"data")}function Lke(e){return W(e)?!1:Y(e,"fields")&&Y(e,"data")}function Ys(e){return W(e)?!1:Y(e,"field")&&Y(e,"data")}const zke={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},jke=G(zke),Bke={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},nA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],Uke=" – ";function JG(e){const t=W(e.condition)?e.condition.map(dL):dL(e.condition);return{...jr(e),condition:t}}function jr(e){if(m0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function dL(e){if(m0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function pt(e){if(m0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return me(e)?e:e!==void 0?{value:e}:void 0}function Wke(e){return me(e)?e.signal:J(e)}function hL(e){return me(e)?e.signal:J(e.value)}function no(e){return me(e)?e.signal:e==null?null:J(e)}function qke(e,t,n){for(const r of n){const i=cs(r,t.markDef,t.config);i!==void 0&&(e[r]=pt(i))}return e}function eY(e){return[].concat(e.type,e.style??[])}function Ke(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&Y(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:cs(e,t,n,r)}function cs(e,t,n,{vgChannel:r}={}){const i=rA(e,t,n.style);return Dt(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function rA(e,t,n){return tY(e,eY(t),n)}function tY(e,t,n){t=le(t);let r;for(const i of t){const o=n[i];Y(o,e)&&(r=o[e])}return r}function nY(e,t){return le(e).reduce((n,r)=>(n.field.push(ie(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function rY(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Wr(i,r))return;n.push(r)}),n}function iY(e,t){return Wr(e,t)||!t?e:e?[...le(e),...le(t)].join(", "):t}function oY(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Ha(n)||me(n))&&(Ha(r)||me(r)))return{explicit:e.explicit,value:iY(n,r)};if(Ha(n)||me(n))return{explicit:e.explicit,value:n};if(Ha(r)||me(r))return{explicit:e.explicit,value:r};if(!Ha(n)&&!me(n)&&!Ha(r)&&!me(r))return{explicit:e.explicit,value:rY(n,r)};throw new Error("It should never reach here")}function sF(e){return`Invalid specification ${Qe(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Hke='Autosize "fit" only works for single views and layered views.';function pL(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function gL(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function mL(e){return e?`Dropping "fit-${e}" because spec has discrete ${Rr(e)}.`:'Dropping "fit" because spec has discrete size.'}function aF(e){return`Unknown field for ${e}. Cannot calculate view size.`}function yL(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Vke(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Gke(e){return`The "nearest" transform is not supported for ${e} marks.`}function sY(e){return`Selection not supported for ${e} yet.`}function Yke(e){return`Cannot find a selection named "${e}".`}const Xke="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Kke="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Qke="Legend bindings are only supported for selections over an individual field or encoding channel.";function Zke(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Jke(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const eAe="The same selection must be used to override scale domains in a layered view.",tAe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function nAe(e){return`Unknown repeated value "${e}".`}function vL(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const rAe="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",lF="Animation involving facet, layer, or concat is currently unsupported.";function iAe(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${J(e)}.`}function oAe(e,t,n,r){return`${e.length?"Multiple ":"No "}matching ${J(t)} encoding found for selection ${J(n.param)}. Using "field": ${J(r)}.`}const sAe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function aAe(e){return`Unrecognized parse "${e}".`}function xL(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const lAe="Attempt to add the same child twice.";function uAe(e){return`Ignoring an invalid transform: ${Qe(e)}.`}const cAe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function bL(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function fAe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Qe(t)} is overridden by a child projection ${Qe(n)}.`}const dAe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function hAe(e){return`${e}Offset dropped because ${e} is continuous`}function pAe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Qe(n)}}.`}function aY(e){return`Invalid field type "${e}".`}function gAe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function mAe(e){return`Invalid aggregation operator "${e}".`}function lY(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function yAe(e){return`Position range does not support relative band size for ${e}.`}function iA(e,t){return`Dropping ${Qe(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const vAe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ww(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function xAe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function bAe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function wAe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function EAe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function xS(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function SAe(e){return`The ${e} for range marks cannot be an expression`}function _Ae(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function CAe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function kAe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function AAe(e){return`Cannot use the relative band size with ${e} scale.`}function $Ae(e){return`Using unaggregated domain with raw field has no effect (${Qe(e)}).`}function TAe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function NAe(e){return`Unaggregated domain is currently unsupported for log scale (${Qe(e)}).`}function MAe(e){return`Cannot apply size to non-oriented mark "${e}".`}function RAe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function FAe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function uY(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function cY(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function OAe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Qe(n)} and ${Qe(r)}). Using ${Qe(n)}.`}function PAe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Qe(n)} and ${Qe(r)}). Using the union of the two domains.`}function DAe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function IAe(e){return`Dropping sort property ${Qe(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const wL="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",LAe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",zAe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",jAe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function BAe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function UAe(e){return`Stack is applied to a non-linear scale (${e}).`}function WAe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function kx(e,t){return`Invalid ${e}: ${Qe(t)}.`}function qAe(e){return`Dropping day from datetime ${Qe(e)} as day cannot be combined with other units.`}function HAe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function VAe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function GAe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function EL(e){return`1D error band does not support ${e}.`}function fY(e){return`Channel ${e} is required for "binned" bin.`}function YAe(e){return`Channel ${e} should not be used with "binned" bin.`}function XAe(e){return`Domain for ${e} is required for threshold scale.`}const dY=xb(nT);let kc=dY;function KAe(e){return kc=e,kc}function QAe(){return kc=dY,kc}function uF(...e){kc.error(...e)}function Q(...e){kc.warn(...e)}function ZAe(...e){kc.debug(...e)}function Zc(e){if(e&&ae(e)){for(const t of fF)if(Y(e,t))return!0}return!1}const hY=["january","february","march","april","may","june","july","august","september","october","november","december"],JAe=hY.map(e=>e.substr(0,3)),pY=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],e$e=pY.map(e=>e.substr(0,3));function t$e(e){if(Ow(e)&&(e=+e),He(e))return e>4&&Q(kx("quarter",e)),e-1;throw new Error(kx("quarter",e))}function n$e(e){if(Ow(e)&&(e=+e),He(e))return e-1;{const t=e.toLowerCase(),n=hY.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=JAe.indexOf(r);if(i!==-1)return i;throw new Error(kx("month",e))}}function r$e(e){if(Ow(e)&&(e=+e),He(e))return e%7;{const t=e.toLowerCase(),n=pY.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=e$e.indexOf(r);if(i!==-1)return i;throw new Error(kx("day",e))}}function cF(e,t){const n=[];if(t&&e.day!==void 0&&G(e).length>1&&(Q(qAe(e)),e=Ee(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?n$e(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?t$e(e.quarter):e.quarter;n.push(He(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?r$e(e.day):e.day;n.push(He(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Ac(e){const n=cF(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function i$e(e){const n=cF(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function o$e(e){const t=cF(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const gY={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},fF=G(gY);function s$e(e){return fe(gY,e)}function Jc(e){return ae(e)?e.binned:mY(e)}function mY(e){return e==null?void 0:e.startsWith("binned")}function dF(e){return e.startsWith("utc")}function a$e(e){return e.substring(3)}const l$e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function qw(e){return fF.filter(t=>vY(e,t))}function yY(e){const t=qw(e);return t[t.length-1]}function vY(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function u$e(e,t,{end:n}={end:!1}){const r=KR(t),i=dF(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of fF)vY(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),i$e(a)}function xY(e){if(!e)return;const t=qw(e);return`timeUnitSpecifier(${Qe(t)}, ${Qe(l$e)})`}function c$e(e,t,n){if(!e)return;const r=xY(e);return`${n||dF(e)?"utc":"time"}Format(${t}, ${r})`}function sn(e){if(!e)return;let t;return se(e)?mY(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ae(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),dF(t.unit)&&(t.utc=!0,t.unit=a$e(t.unit)),t}function f$e(e){const{utc:t,...n}=sn(e);return n.unit?(t?"utc":"")+G(n).map(r=>xt(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):`${t?"utc":""}timeunit${G(n).map(r=>xt(`_${r}_${n[r]}`)).join("")}`}function bY(e,t=n=>n){const n=sn(e),r=yY(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=wY(r,n.step),a={...i,[s]:+i[s]+o};return`${t(Ac(a))} - ${t(Ac(i))}`}}const d$e={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function h$e(e){return fe(d$e,e)}function wY(e,t=1){if(h$e(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function p$e(e){return Y(e,"param")}function hF(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function pF(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function gF(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function mF(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function yF(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function vF(e){if(e!=null&&e.field){if(W(e.range)&&e.range.length===2)return!0;if(me(e.range))return!0}return!1}function xF(e){return!!(e!=null&&e.field)&&(W(e.oneOf)||W(e.in))}function g$e(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function EY(e){return xF(e)||hF(e)||vF(e)||pF(e)||mF(e)||gF(e)||yF(e)}function Mo(e,t){return e2(e,{timeUnit:t,wrapTime:!0})}function m$e(e,t){return e.map(n=>Mo(n,t))}function SY(e,t=!0){const{field:n}=e,r=sn(e.timeUnit),{unit:i,binned:o}=r||{},s=ie(e,{expr:"datum"}),a=i?`time(${o?s:u$e(i,n)})`:s;if(hF(e))return`${a}===${Mo(e.equal,i)}`;if(pF(e)){const l=e.lt;return`${a}<${Mo(l,i)}`}else if(mF(e)){const l=e.gt;return`${a}>${Mo(l,i)}`}else if(gF(e)){const l=e.lte;return`${a}<=${Mo(l,i)}`}else if(yF(e)){const l=e.gte;return`${a}>=${Mo(l,i)}`}else{if(xF(e))return`indexof([${m$e(e.oneOf,i).join(",")}], ${a}) !== -1`;if(g$e(e))return Hw(a,e.valid);if(vF(e)){const{range:l}=hn(e),u=me(l)?{signal:`${l.signal}[0]`}:l[0],c=me(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return`inrange(${a}, [${Mo(u,i)}, ${Mo(c,i)}])`;const f=[];return u!==null&&f.push(`${a} >= ${Mo(u,i)}`),c!==null&&f.push(`${a} <= ${Mo(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Qe(e)}`)}function Hw(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function y$e(e){return EY(e)&&e.timeUnit?{...e,timeUnit:sn(e.timeUnit)}:e}const y0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function v$e(e){return e==="quantitative"||e==="temporal"}function bF(e){return e==="ordinal"||e==="nominal"}const $c=y0.quantitative,wF=y0.ordinal,eh=y0.temporal,EF=y0.nominal,Ih=y0.geojson;function x$e(e){if(e)switch(e=e.toLowerCase(),e){case"q":case $c:return"quantitative";case"t":case eh:return"temporal";case"o":case wF:return"ordinal";case"n":case EF:return"nominal";case Ih:return"geojson"}}const pn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},oA={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function b$e(e,t){const n=oA[e],r=oA[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const w$e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function SL(e){return w$e[e]}const _Y=new Set(["linear","log","pow","sqrt","symlog"]),CY=new Set([..._Y,"time","utc"]);function kY(e){return _Y.has(e)}const AY=new Set(["quantile","quantize","threshold"]),E$e=new Set([...CY,...AY,"sequential","identity"]),S$e=new Set(["ordinal","bin-ordinal","point","band"]);function an(e){return S$e.has(e)}function mo(e){return E$e.has(e)}function Go(e){return CY.has(e)}function th(e){return AY.has(e)}const _$e={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function C$e(e){return!se(e)&&Y(e,"name")}function $Y(e){return Y(e,"param")}function k$e(e){return Y(e,"unionWith")}function A$e(e){return ae(e)&&"field"in e}const $$e={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:W5e,domain:q5e,range:H5e,rangeMax:V5e,rangeMin:G5e,scheme:Y5e,...T$e}=$$e,N$e=G(T$e);function sA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Go(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Go(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Go(e);case"nice":return Go(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return mo(e)&&!Oe(["log","time","utc","threshold","quantile"],e)}}function TY(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return ad(e)?void 0:kAe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function M$e(e,t){return Oe([wF,EF],t)?e===void 0||an(e):t===eh?Oe([pn.TIME,pn.UTC,void 0],e):t===$c?kY(e)||th(e)||e===void 0:!0}function R$e(e,t,n=!1){if(!Cs(e))return!1;switch(e){case bt:case un:case tu:case Dh:case Mi:case _o:return Go(t)||t==="band"?!0:t==="point"?!n:!1;case nu:return Oe(["linear","band"],t);case wa:case ou:case Ea:case ru:case iu:case Yc:return Go(t)||th(t)||Oe(["band","point","ordinal"],t);case Nr:case Es:case Ss:return t!=="band";case su:case Mr:return t==="ordinal"||th(t)}}function F$e(e){return ae(e)&&"value"in e}const hr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},NY=hr.arc,Vw=hr.area,Gw=hr.bar,O$e=hr.image,Yw=hr.line,Xw=hr.point,P$e=hr.rect,Ax=hr.rule,MY=hr.text,SF=hr.tick,D$e=hr.trail,_F=hr.circle,CF=hr.square,RY=hr.geoshape;function lu(e){return["line","area","trail"].includes(e)}function vm(e){return["rect","bar","image","arc","tick"].includes(e)}const I$e=new Set(G(hr));function fs(e){return Y(e,"type")}const L$e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],z$e=["fill","fillOpacity"],j$e=[...L$e,...z$e],B$e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},_L=G(B$e),bS=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],U$e={area:["line","point"],bar:bS,rect:bS,line:["point"],tick:["bandSize","thickness",...bS]},W$e={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},q$e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},FY=G(q$e);function Tc(e){return Y(e,"band")}const H$e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},V$e=5,kF={binSpacing:0,continuousBandSize:V$e,minBandSize:.25,timeUnitBandPosition:.5},G$e={...kF,binSpacing:1},Y$e={...kF,thickness:1};function X$e(e){return fs(e)?e.type:e}function OY(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function AF({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!mo(r)||i)return"always-valid";const o=OY(Ke("invalid",e,t),{isPath:lu(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function K$e(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function PY({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function DY({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=vo(t),l=Bw(a==null?void 0:a.aggregate),u=AF({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:Hw(ie(a,{expr:"datum"}),!1),...Q$e(f,n,r)}}}function Q$e(e,t,n){if(F$e(e)){const{value:r}=e;return me(r)?{signal:r.signal}:{value:r}}return PY({scale:t,scaleName:n,mode:"zeroOrMin"})}function $F(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=Xc(t),l=TF(e),u=DY({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function Z$e(e){const{datum:t}=e;return Zc(t)?Ac(t):`${Qe(t)}`}function tc(e,t,n,r){const i={};if(t&&(i.scale=t),ks(e)){const{datum:o}=e;Zc(o)?i.signal=Ac(o):me(o)?i.signal=o.signal:m0(o)?i.signal=o.expr:i.value=o}else i.field=ie(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function $x({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!me(s)&&0<s&&s<1?"datum":void 0,l=ie(t,{expr:a,suffix:i}),u=n!==void 0?ie(n,{expr:a}):ie(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?l:u;c.field=f}else{const f=me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function J$e({scaleName:e,fieldDef:t}){const n=ie(t,{expr:"datum"}),r=ie(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function TF({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(_e(t)){const f=s==null?void 0:s.get("type");if(ur(t)){c??(c=Ul({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:g}=t;if(ut(d)||c&&h&&g===eh)return a!=null&&a.impute?tc(t,o,{binSuffix:"mid"},{offset:l}):c&&!an(f)?$x({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):tc(t,o,E0(t,e)?{binSuffix:"range"}:{},{offset:l});if(dn(d)){if(K(n))return $x({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Q(fY(e===bt?So:ws))}}return tc(t,o,an(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(yo(t)){const f=t.value,d=l?{offset:l}:{};return{...Sg(e,f),...d}}}return $e(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function Sg(e,t){return Oe(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Oe(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:pt(t)}function Nc(e){return e&&e!=="number"&&e!=="time"}function IY(e,t,n){return`${e}(${t}${n?`, ${Qe(n)}`:""})`}function NF({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var u;if(Nc(n))return ro({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=LY(e,r,i),a=nh(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return ro({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return ro({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&K(e)&&e.timeUnit===void 0)return ro({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}function l(c){return K(c)?sn(c.timeUnit)||{}:{unit:void 0,utc:void 0}}if(ih(e)){const{unit:c,utc:f}=l(e),d=tTe({field:s,timeUnit:c,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:f||ef(e)&&((u=e.scale)==null?void 0:u.type)===pn.UTC});return d?{signal:d}:void 0}if(t=aA({type:a,specifiedFormat:t,config:o,normalizeStack:i}),K(e)&&ut(e.bin)){const c=ie(e,{expr:r,binSuffix:"end"});return{signal:v0(s,c,t,n,o)}}else return t||nh(e)==="quantitative"?{signal:`${BY(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function LY(e,t,n){return K(e)?n?`${ie(e,{expr:t,suffix:"end"})}-${ie(e,{expr:t,suffix:"start"})}`:ie(e,{expr:t}):Z$e(e)}function ro({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=LY(e,r,i)),s!=="datum.value"&&K(e)&&ut(e.bin)){const a=ie(e,{expr:r,binSuffix:"end"});return{signal:v0(s,a,t,n,o)}}return{signal:IY(n,s,t)}}function zY(e,t,n,r,i,o){var s;if(!(se(r)&&Nc(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&nh(e)==="quantitative"&&(i.normalizedNumberFormatType&&rh(e)&&e.stack==="normalize"||i.numberFormatType))){if(rh(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return aA({type:"quantitative",config:i,normalizeStack:!0});if(ih(e)){const a=K(e)?(s=sn(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:eTe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return aA({type:t,specifiedFormat:n,config:i})}}function jY(e,t,n){var r;if(e&&(me(e)||e==="number"||e==="time"))return e;if(ih(t)&&n!=="time"&&n!=="utc")return K(t)&&((r=sn(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function aA({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(se(t))return t;if(e===$c)return r?n.normalizedNumberFormat:n.numberFormat}function eTe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:xY(t)}:r?void 0:n.timeFormat)}function BY(e,t){return`format(${e}, "${t||""}")`}function CL(e,t,n,r){return Nc(n)?IY(n,e,t):BY(e,(se(t)?t:void 0)??r.numberFormat)}function v0(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return v0(e,t,i.numberFormat,i.numberFormatType,i);const o=CL(e,n,r,i),s=CL(t,n,r,i);return`${Hw(e,!1)} ? "null" : ${o} + "${Uke}" + ${s}`}function tTe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, ${Qe(n)})`:(n=se(n)?n:i,`${o?"utc":"time"}Format(${e}, ${Qe(n)})`):c$e(t,e,o)}const Kw="min",nTe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function kL(e){return fe(nTe,e)}function rTe(e){return Y(e,"encoding")}function ta(e){return e&&(e.op==="count"||Y(e,"field"))}function UY(e){return e&&W(e)}function x0(e){return Y(e,"row")||Y(e,"column")}function MF(e){return Y(e,"header")}function Qw(e){return Y(e,"facet")}function iTe(e){return Y(e,"param")}function oTe(e){return!se(e)&&Y(e,"repeat")}function AL(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function RF(e){return Y(e,"sort")}function Ul({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(_e(e)&&e.bandPosition!==void 0)return e.bandPosition;if(K(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return cs("timeUnitBandPosition",n,r);if(ut(o))return .5}}function WY({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,c,f;const a=Rr(e),l=Ke(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(K(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:cs("timeUnitBandSize",r,i)};if(ut(h)&&!an(o))return{band:1}}if(vm(r.type))return o?an(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function qY(e,t,n,r){return ut(e.bin)||e.timeUnit&&ur(e)&&e.type==="temporal"?Ul({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function HY(e){return Y(e,"sort")&&!Y(e,"field")}function b0(e){return Y(e,"condition")}function Zw(e){const t=e==null?void 0:e.condition;return!!t&&!W(t)&&K(t)}function w0(e){const t=e==null?void 0:e.condition;return!!t&&!W(t)&&_e(t)}function sTe(e){const t=e==null?void 0:e.condition;return!!t&&(W(t)||yo(t))}function K(e){return Y(e,"field")||(e==null?void 0:e.aggregate)==="count"}function nh(e){return e==null?void 0:e.type}function ks(e){return Y(e,"datum")}function fl(e){return ur(e)&&!Nx(e)||Tx(e)}function $L(e){return ur(e)&&e.type==="quantitative"&&!e.bin||Tx(e)}function Tx(e){return ks(e)&&He(e.datum)}function _e(e){return K(e)||ks(e)}function ur(e){return e&&(Y(e,"field")||e.aggregate==="count")&&Y(e,"type")}function yo(e){return Y(e,"value")}function ef(e){return Y(e,"scale")||Y(e,"sort")}function rh(e){return Y(e,"axis")||Y(e,"stack")||Y(e,"impute")}function VY(e){return Y(e,"legend")}function GY(e){return Y(e,"format")||Y(e,"formatType")}function aTe(e){return Xr(e,["legend","axis","header","scale"])}function lTe(e){return Y(e,"op")}function ie(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(cTe(e))n=IG("count");else{let s;if(!t.nofn)if(lTe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;ut(a)?(s=QG(a),i=(t.binSuffix??"")+(t.suffix??"")):l?au(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):ha(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!Jc(u)&&(s=f$e(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Ph(n):t.expr?FG(n,t.expr)+o:$i(n)+o}function Nx(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return K(e)&&!!e.bin;case"temporal":return!1}throw new Error(aY(e.type))}function uTe(e){var t;return ef(e)&&th((t=e.scale)==null?void 0:t.type)}function cTe(e){return e.aggregate==="count"}function fTe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(ut(r))return`${n} (binned)`;if(i&&!Jc(i)){const a=(s=sn(i))==null?void 0:s.unit;if(a)return`${n} (${qw(a).join("-")})`}else if(o)return au(o)?`${n} for max ${o.argmax}`:ha(o)?`${n} for min ${o.argmin}`:`${d0(o)} of ${n}`;return n}function dTe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(au(t))return`${i} for argmax(${t.argmax})`;if(ha(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Jc(r)?sn(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||ut(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const YY=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return dTe(e);default:return fTe(e,t)}};let XY=YY;function KY(e){XY=e}function hTe(){KY(YY)}function ld(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=FF(e))==null?void 0:a.title;if(!K(e))return i??e.title;const o=e,s=r?OF(o,t):void 0;return n?Dt(i,o.title,s):i??o.title??s}function FF(e){if(rh(e)&&e.axis)return e.axis;if(VY(e)&&e.legend)return e.legend;if(MF(e)&&e.header)return e.header}function OF(e,t){return XY(e,t)}function Mx(e){if(GY(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=FF(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function pTe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(RF(e)&&W(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!au(n)&&!ha(n))return"quantitative";if(ef(e)&&((o=e.scale)!=null&&o.type))switch(oA[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function vo(e){if(K(e))return e;if(Zw(e))return e.condition}function Gt(e){if(_e(e))return e;if(w0(e))return e.condition}function QY(e,t,n,r={}){if(se(e)||He(e)||Yl(e)){const i=se(e)?"string":He(e)?"number":"boolean";return Q(pAe(t,i,e)),{value:e}}return _e(e)?Rx(e,t,n,r):w0(e)?{...e,condition:Rx(e.condition,t,n,r)}:e}function Rx(e,t,n,r){if(GY(e)){const{format:i,formatType:o,...s}=e;if(Nc(o)&&!n.customFormatTypes)return Q(bL(t)),Rx(s,t,n,r)}else{const i=rh(e)?"axis":VY(e)?"legend":MF(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(Nc(s)&&!n.customFormatTypes)return Q(bL(t)),Rx({...e,[i]:a},t,n,r)}}return K(e)?PF(e,t,r):gTe(e)}function gTe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=He(n)?"quantitative":se(n)?"nominal":Zc(n)?"temporal":void 0,{...e,type:t}}function PF(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!oF(r)&&!au(r)&&!ha(r)&&(Q(mAe(r)),delete a.aggregate),i&&(a.timeUnit=sn(i)),s&&(a.field=`${s}`),ut(o)&&(a.bin=Jw(o,t)),dn(o)&&!It(t)&&Q(YAe(t)),ur(a)){const{type:l}=a,u=x$e(l);l!==u&&(a.type=u),l!=="quantitative"&&Bw(r)&&(Q(gAe(l,r)),a.type="quantitative")}else if(!HG(t)){const l=pTe(a,t);a.type=l}if(ur(a)){const{compatible:l,warning:u}=mTe(a,t)||{};l===!1&&Q(u)}if(RF(a)&&se(a.sort)){const{sort:l}=a;if(kL(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&kL(u))return{...a,sort:{encoding:u,order:"descending"}}}if(MF(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function Jw(e,t){return Yl(e)?{maxbins:fL(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:fL(t)}:e}const vf={compatible:!0};function mTe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Js:case ea:case Pw:return Nx(e)?vf:{compatible:!1,warning:bAe(t)};case bt:case un:case tu:case Dh:case Nr:case Es:case Ss:case h0:case p0:case Dw:case Cc:case Iw:case Lw:case Yc:case Mi:case _o:case zw:return vf;case ko:case Ti:case Co:case Ao:return n!==$c?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:vf;case Ea:case ru:case iu:case ou:case wa:case ba:case xa:case So:case ws:case nu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:vf;case Mr:case su:return!Nx(e)&&!uTe(e)?{compatible:!1,warning:wAe(t)}:vf;case Jd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:vf}}function ih(e){const{formatType:t}=Mx(e);return t==="time"||!t&&yTe(e)}function yTe(e){return e&&(e.type==="temporal"||K(e)&&!!e.timeUnit)}function e2(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=sn(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return m0(e)?a=e.expr:me(e)?a=e.signal:Zc(e)?(s=!0,a=Ac(e)):(se(e)||He(e))&&s&&(a=`datetime(${Qe(e)})`,s$e(o)&&(He(e)&&e<1e4||se(e)&&isNaN(Date.parse(e)))&&(a=Ac({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:Qe(e)}function ZY(e,t){const{type:n}=e;return t.map(r=>{const i=K(e)&&!Jc(e.timeUnit)?e.timeUnit:void 0,o=e2(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function E0(e,t){return ut(e.bin)?Cs(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const TL={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function S0(e){return e==null?void 0:e.condition}const JY=["domain","grid","labels","ticks","title"],vTe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},eX={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},xTe={...eX,style:1,labelExpr:1,encoding:1};function NL(e){return fe(xTe,e)}const bTe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},tX=G(bTe);function _a(e){return Y(e,"mark")}class t2{constructor(t,n){H(this,"name");H(this,"run");this.name=t,this.run=n}hasMatchingType(t){return _a(t)?X$e(t.mark)===this.name:!1}}function nc(e,t){const n=e==null?void 0:e[t];return n?W(n)?Qd(n,r=>!!r.field):K(n)||Zw(n):!1}function nX(e,t){const n=e==null?void 0:e[t];return n?W(n)?Qd(n,r=>!!r.field):K(n)||ks(n)||w0(n):!1}function rX(e,t){if(It(t)){const n=e[t];if((K(n)||ks(n))&&(bF(n.type)||K(n)&&n.timeUnit)){const r=eF(t);return nX(e,r)}}return!1}function iX(e){return Qd(gke,t=>{if(nc(e,t)){const n=e[t];if(W(n))return Qd(n,r=>!!r.aggregate);{const r=vo(n);return r&&!!r.aggregate}}return!1})}function oX(e,t){const n=[],r=[],i=[],o=[],s={};return DF(e,(a,l)=>{if(K(a)){const{field:u,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const g=FF(a),p=g==null?void 0:g.title;let m=ie(a,{forAs:!0});const y={...p?[]:{title:ld(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(au(c)?(v="argmax",m=ie({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):ha(c)?(v="argmin",m=ie({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const x={op:v,as:m};u&&(x.field=u),o.push(x)}}else if(n.push(m),ur(a)&&ut(f)){if(r.push({bin:f,field:u,as:m}),n.push(ie(a,{binSuffix:"end"})),E0(a,l)&&n.push(ie(a,{binSuffix:"range"})),It(l)){const v={field:`${m}_end`};s[`${l}2`]=v}y.bin="binned",HG(l)||(y.type=$c)}else if(d&&!Jc(d)){i.push({timeUnit:d,field:u,as:m});const v=ur(a)&&a.type!==eh&&"time";v&&(l===h0||l===Cc?y.formatType=v:kke(l)?y.legend={formatType:v,...y.legend}:It(l)&&(y.axis={formatType:v,...y.axis}))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function wTe(e,t,n){const r=$ke(t,n);if(r){if(r==="binned"){const i=e[t===So?bt:un];return!!(K(i)&&K(e[t])&&dn(i.bin))}}else return!1;return!0}function ETe(e,t,n,r){const i={};for(const o of G(e))qG(o)||Q(xAe(o));for(let o of wke){if(!e[o])continue;const s=e[o];if(g0(o)){const a=bke(o),l=i[a];if(K(l)&&v$e(l.type)&&K(s)&&!l.timeUnit){Q(hAe(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Q(dAe),o=Mi),!wTe(e,o,t)){Q(Ww(o,t));continue}if(o===wa&&t==="line"){const a=vo(e[o]);if(a!=null&&a.aggregate){Q(vAe);continue}}if(o===Nr&&(n?"fill"in e:"stroke"in e)){Q(lY("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===p0||o===Jd&&!W(s)&&!yo(s)||o===Cc&&W(s)){if(s){if(o===Jd){const a=e[o];if(HY(a)){i[o]=a;continue}}i[o]=le(s).reduce((a,l)=>(K(l)?a.push(PF(l,o)):Q(iA(l,o)),a),[])}}else{if(o===Cc&&s===null)i[o]=null;else if(!K(s)&&!ks(s)&&!yo(s)&&!b0(s)&&!me(s)){Q(iA(s,o));continue}i[o]=QY(s,o,r)}}return i}function n2(e,t){const n={};for(const r of G(e)){const i=QY(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function STe(e){const t=[];for(const n of G(e))if(nc(e,n)){const r=e[n],i=le(r);for(const o of i)K(o)?t.push(o):Zw(o)&&t.push(o.condition)}return t}function DF(e,t,n){if(e)for(const r of G(e)){const i=e[r];if(W(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function _Te(e,t,n,r){return e?G(e).reduce((i,o)=>{const s=e[o];return W(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function sX(e,t){return G(t).reduce((n,r)=>{switch(r){case bt:case un:case Iw:case zw:case Lw:case So:case ws:case tu:case Dh:case Mi:case ba:case _o:case xa:case nu:case Co:case ko:case Ao:case Ti:case h0:case Mr:case Yc:case Cc:return n;case Jd:if(e==="line"||e==="trail")return n;case p0:case Dw:{const i=t[r];if(W(i)||K(i))for(const o of le(i))o.aggregate||n.push(ie(o,{}));return n}case wa:if(e==="trail")return n;case Nr:case Es:case Ss:case Ea:case ru:case iu:case su:case ou:{const i=vo(t[r]);return i&&!i.aggregate&&n.push(ie(i,{})),n}}},[])}function CTe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(W(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return W(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function lA(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${IF(t)}`:"";return{field:s+t.field,type:t.type,title:me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=STe(n).map(aTe);return{tooltip:[...i,...Vo(o,Ie)]}}function IF(e){const{title:t,field:n}=e;return Dt(t,n)}function LF(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=IF(n);return aX(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...se(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function aX(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...fs(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Yl(e[t])?{}:e[t]}}]:[]}function lX(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:Ay(o,n),continuousAxisChannelDef2:Ay(s,n),continuousAxisChannelDefError:Ay(a,n),continuousAxisChannelDefError2:Ay(l,n),continuousAxis:i}}function Ay(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Q(GAe(n,t)),r}else return e}function uX(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(fs(n)&&n.orient)return n.orient;if(fl(i)){if(fl(o)){const s=K(i)&&i.aggregate,a=K(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ih(o)&&!ih(i)?"horizontal":"vertical"}return"horizontal"}else{if(fl(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Fx="boxplot",kTe=["box","median","outliers","rule","ticks"],ATe=new t2(Fx,fX);function cX(e){return He(e)?"tukey":e}function fX(e,{config:t}){e={...e,encoding:n2(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=fs(n)?n:{type:n};i&&Q(sY("boxplot"));const l=a.extent??t.boxplot.extent,u=Ke("size",a,t),c=a.invalid,f=cX(l),{bins:d,timeUnits:h,transform:g,continuousAxisChannelDef:p,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:x,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:S}=$Te(e,l,t),E=Ph(p.field),{color:_,size:k,...T}=x,N=cn=>LF(a,m,p,cn,t.boxplot),P=N(T),D=N(x),M=(ae(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",$=N({...T,...k?{size:k}:{},color:{condition:{test:`${Ze(`lower_box_${p.field}`)} >= ${Ze(`upper_box_${p.field}`)}`,..._||{value:M}}}}),R=lA([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],p,x),I={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},F=f==="min-max"?R:lA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,x),O=[...P({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:F}),...P({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:F}),...P({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:F}),...P({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:F})],L=[...f!=="tukey"?O:[],...D({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...$({partName:"median",mark:{type:"tick",invalid:c,...ae(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(g),layer:L};const X=Ze(`lower_box_${p.field}`),V=Ze(`upper_box_${p.field}`),ne=`(${V} - ${X})`,de=`${X} - ${l} * ${ne}`,he=`${V} + ${l} * ${ne}`,Ne=Ze(p.field),oe={joinaggregate:dX(p.field),groupby:y},Re={transform:[{filter:`(${de} <= ${Ne}) && (${Ne} <= ${he})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${E}`},{op:"max",field:p.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${E}`},...v],groupby:y}],layer:O},{tooltip:ee,...ue}=T,{scale:ce,axis:j}=p,je=IF(p),ke=aX(a,"outliers",t.boxplot,{transform:[{filter:`(${Ne} < ${de}) || (${Ne} > ${he})`}],mark:"point",encoding:{[m]:{field:p.field,type:p.type,...je!==void 0?{title:je}:{},...ce!==void 0?{scale:ce}:{},...j!==void 0?{axis:j}:{}},...ue,..._?{color:_}:{},...S?{tooltip:S}:{}}})[0];let at;const ct=[...d,...h,oe];return ke?at={transform:ct,layer:[ke,Re]}:(at=Re,at.transform.unshift(...ct)),{...s,layer:[at,{transform:g,layer:L}]}}function dX(e){const t=Ph(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function $Te(e,t,n){const r=uX(e,Fx),{continuousAxisChannelDef:i,continuousAxis:o}=lX(e,r,Fx),s=i.field,a=Ph(s),l=cX(t),u=[...dX(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`${Ze(`upper_box_${a}`)} - ${Ze(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Ze(`upper_box_${a}`)} + ${Ze(`iqr_${a}`)} * ${t}, ${Ze(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Ze(`lower_box_${a}`)} - ${Ze(`iqr_${a}`)} * ${t}, ${Ze(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:g}=CTe(d),{bins:p,timeUnits:m,aggregate:y,groupby:v,encoding:x}=oX(g,n),b=r==="vertical"?"horizontal":"vertical",w=r,S=[...p,...m,{aggregate:[...y,...u],groupby:v},...c];return{bins:p,timeUnits:m,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:h}}const zF="errorbar",TTe=["ticks","rule"],NTe=new t2(zF,hX);function hX(e,{config:t}){e={...e,encoding:n2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=pX(e,zF,t);delete o.size;const c=LF(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},g=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...g.length>1?{layer:g}:{...g[0]}}}function MTe(e,t){const{encoding:n}=e;if(RTe(n))return{orient:uX(e,t),inputType:"raw"};const r=FTe(n),i=OTe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(_e(a)&&_e(l))throw new Error(`${t} cannot have both x2 and y2`);if(_e(a)){if(fl(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(_e(l)){if(fl(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(_e(l)&&!_e(a))throw new Error(`${t} cannot have xError2 without xError`);if(_e(c)&&!_e(u))throw new Error(`${t} cannot have yError2 without yError`);if(_e(a)&&_e(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(_e(a)){if(fl(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(_e(u)){if(fl(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function RTe(e){return(_e(e.x)||_e(e.y))&&!_e(e.x2)&&!_e(e.y2)&&!_e(e.xError)&&!_e(e.xError2)&&!_e(e.yError)&&!_e(e.yError2)}function FTe(e){return _e(e.x2)||_e(e.y2)}function OTe(e){return _e(e.xError)||_e(e.xError2)||_e(e.yError)||_e(e.yError2)}function pX(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=fs(r)?r:{type:r};o&&Q(sY(t));const{orient:u,inputType:c}=MTe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:g,continuousAxis:p}=lX(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:x}=PTe(l,f,d,h,g,c,t,n),{[p]:b,[p==="x"?"x2":"y2"]:w,[p==="x"?"xError":"yError"]:S,[p==="x"?"xError2":"yError2"]:E,..._}=i,{bins:k,timeUnits:T,aggregate:N,groupby:P,encoding:D}=oX(_,n),M=[...N,...m],$=c!=="raw"?[]:P,R=lA(v,f,D,x);return{transform:[...a.transform??[],...k,...T,...M.length===0?[]:[{aggregate:M,groupby:$}],...y],groupby:$,continuousAxisChannelDef:f,continuousAxis:p,encodingWithoutContinuousAxis:D,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:R}}function PTe(e,t,n,r,i,o,s,a){let l=[],u=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,g=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(g==="iqr")&&Q(VAe(h,g,s)),g==="stderr"||g==="stdev")l=[{op:g,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`${Ze(`center_${c}`)} + ${Ze(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Ze(`center_${c}`)} - ${Ze(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:d0(h)},{fieldPrefix:"upper_",titlePrefix:ML(h,g,"+")},{fieldPrefix:"lower_",titlePrefix:ML(h,g,"-")}],d=!0;else{let p,m,y;g==="ci"?(p="mean",m="ci0",y="ci1"):(p="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:p,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:ld({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ld({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ld({field:c,aggregate:p,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Q(HAe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:Ze(n.field),as:`upper_${c}`},{calculate:Ze(c),as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`${Ze(c)} + ${Ze(r.field)}`,as:`upper_${c}`}],i?u.push({calculate:`${Ze(c)} + ${Ze(i.field)}`,as:`lower_${c}`}):u.push({calculate:`${Ze(c)} - ${Ze(r.field)}`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:_c(_c(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function ML(e,t,n){return`${d0(e)} ${n} ${t}`}const jF="errorband",DTe=["band","borders"],ITe=new t2(jF,gX);function gX(e,{config:t}){e={...e,encoding:n2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=pX(e,jF,t),u=s,c=LF(u,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const g={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...g,ariaRoleDescription:"errorband"},h={...h,...g,aria:!1}):u.interpolate?Q(EL("interpolate")):u.tension&&Q(EL("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const mX={};function BF(e,t,n){const r=new t2(e,t);mX[e]={normalizer:r,parts:n}}function LTe(){return G(mX)}BF(Fx,fX,kTe);BF(zF,hX,TTe);BF(jF,gX,DTe);const zTe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],yX={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},vX={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},jTe=G(yX),BTe=G(vX),UTe={header:1,headerRow:1,headerColumn:1,headerFacet:1},xX=G(UTe),bX=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],WTe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},qTe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},xo="_vgsid_",HTe={point:{on:"click",fields:[xo],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function UF(e){return e==="legend"||!!(e!=null&&e.legend)}function wS(e){return UF(e)&&ae(e)}function WF(e){return!!(e!=null&&e.select)}function wX(e){const t=[];for(const n of e||[]){if(WF(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function VTe(e){return r2(e)||HF(e)||qF(e)}function qF(e){return Y(e,"concat")}function r2(e){return Y(e,"vconcat")}function HF(e){return Y(e,"hconcat")}function EX({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ds(e){return Y(e,"step")}function RL(e){return Y(e,"view")||Y(e,"width")||Y(e,"height")}const FL=20,GTe={align:1,bounds:1,center:1,columns:1,spacing:1},YTe=G(GTe);function XTe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(Qw(e)&&!x0(e.facet)||qF(e))&&(i.columns=s),r2(e)&&(i.columns=1);for(const a of YTe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=He(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function uA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function cA(e,t){const n=Ox(e,t);return ds(n)?n.step:SX}function Ox(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Dt(n,{step:e.step})}const SX=20,KTe={continuousWidth:300,continuousHeight:300,step:SX},QTe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:KTe,mark:W$e,arc:{},area:{},bar:G$e,circle:{},geoshape:{},image:{},line:{},point:{},rect:kF,rule:{color:"black"},square:{},text:{color:"black"},tick:Y$e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:_$e,projection:{},legend:WTe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:HTe,style:{},title:{},facet:{spacing:FL},concat:{spacing:FL},normalizedNumberFormat:".0%"},Ms=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],OL={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},PL={blue:Ms[0],orange:Ms[1],red:Ms[2],teal:Ms[3],green:Ms[4],yellow:Ms[5],purple:Ms[6],pink:Ms[7],brown:Ms[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function ZTe(e={}){return{signals:[{name:"color",value:ae(e)?{...PL,...e}:PL}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function JTe(e){return{signals:[{name:"fontSize",value:ae(e)?{...OL,...e}:OL}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function eNe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function _X(e){const t=G(e||{}),n={};for(const r of t){const i=e[r];n[r]=S0(i)?JG(i):jr(i)}return n}function tNe(e){const t=G(e),n={};for(const r of t)n[r]=_X(e[r]);return n}const nNe=[...FY,...tX,...xX,"background","padding","legend","lineBreak","scale","style","title","view"];function CX(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=vh({},Ee(QTe),n?eNe(n):{},t?ZTe(t):{},r?JTe(r):{},o||{});i&&xh(s,"selection",i,!0);const a=Xr(s,nNe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=jr(s[l]));for(const l of FY)s[l]&&(a[l]=hn(s[l]));for(const l of tX)s[l]&&(a[l]=_X(s[l]));for(const l of xX)s[l]&&(a[l]=hn(s[l]));if(s.legend&&(a.legend=hn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=hn(l,{level:1});a.scale={...hn(u),...G(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=tNe(s.style)),s.title&&(a.title=hn(s.title)),s.view&&(a.view=hn(s.view)),a}const rNe=new Set(["view",...I$e]),iNe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],oNe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...U$e};function sNe(e){e=Ee(e);for(const t of iNe)delete e[t];if(e.axis)for(const t in e.axis)S0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of zTe)delete e.legend[t];if(e.mark){for(const t of _L)delete e.mark[t];e.mark.tooltip&&ae(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(wX(e.params)),delete e.params);for(const t of rNe){for(const r of _L)delete e[t][r];const n=oNe[t];if(n)for(const r of n)delete e[t][r];lNe(e,t)}for(const t of LTe())delete e[t];aNe(e);for(const t in e)ae(e[t])&&st(e[t])&&delete e[t];return st(e)?void 0:e}function aNe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=ZG(e.title);st(t)||(e.style["group-title"]={...e.style["group-title"],...t}),st(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),st(r)?delete e.title:e.title=r}function lNe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};st(o)||(e.style[n??t]=o),delete e[t]}function i2(e){return Y(e,"layer")}function uNe(e){return Y(e,"repeat")}function cNe(e){return!W(e.repeat)&&Y(e.repeat,"layer")}class VF{map(t,n){return Qw(t)?this.mapFacet(t,n):uNe(t)?this.mapRepeat(t,n):HF(t)?this.mapHConcat(t,n):r2(t)?this.mapVConcat(t,n):qF(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(i2(t))return this.mapLayer(t,n);if(_a(t))return this.mapUnit(t,n);throw new Error(sF(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const fNe={zero:1,center:1,normalize:1};function dNe(e){return fe(fNe,e)}const hNe=new Set([NY,Gw,Vw,Ax,Xw,_F,CF,Yw,MY,SF]),pNe=new Set([Gw,Vw,NY]);function xf(e){return K(e)&&nh(e)==="quantitative"&&!e.bin}function DL(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(K(s)&&K(a))if(xf(s)&&xf(a)){if(s.stack)return t;if(a.stack)return i;const l=K(s)&&!!s.aggregate,u=K(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(xf(s))return t;if(xf(a))return i}else{if(xf(s))return o&&n==="vertical"?void 0:t;if(xf(a))return o&&n==="horizontal"?void 0:i}}function gNe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function kX(e,t){var p,m;const n=fs(e)?e:{type:e},r=n.type;if(!hNe.has(r))return null;const i=DL(t,"x",n)||DL(t,"theta",n);if(!i)return null;const o=t[i],s=K(o)?ie(o,{}):void 0,a=gNe(i),l=[],u=new Set;if(t[a]){const y=t[a],v=K(y)?ie(y,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=K(f)?ie(f,{}):void 0;d&&d!==s&&(l.push(c),u.add(d));const h=Eke.reduce((y,v)=>{if(v!=="tooltip"&&nc(t,v)){const x=t[v];for(const b of le(x)){const w=vo(b);if(w.aggregate)continue;const S=ie(w,{});(!S||!u.has(S))&&y.push({channel:v,fieldDef:w})}}return y},[]);let g;return o.stack!==void 0?Yl(o.stack)?g=o.stack?"zero":null:g=o.stack:pNe.has(r)&&(g="zero"),!g||!dNe(g)||iX(t)&&h.length===0?null:((p=o==null?void 0:o.scale)!=null&&p.type&&((m=o==null?void 0:o.scale)==null?void 0:m.type)!==pn.LINEAR&&o!=null&&o.stack&&Q(UAe(o.scale.type)),_e(t[_s(i)])?(o.stack!==void 0&&Q(BAe(i)),null):(K(o)&&o.aggregate&&!Pke.has(o.aggregate)&&Q(WAe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:lu(r),stackBy:h,offset:g}))}function AX(e,t,n){const r=hn(e),i=Ke("orient",r,n);if(r.orient=xNe(r.type,t,i),i!==void 0&&i!==r.orient&&Q(CAe(r.orient,i)),r.type==="bar"&&r.orient){const l=Ke("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:H$e[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=Ke("opacity",r,n),s=Ke("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=yNe(r.type,t)),Ke("cursor",r,n)===void 0&&(r.cursor=mNe(r,t,n)),r}function mNe(e,t,n){return t.href||e.href||Ke("href",e,n)?"pointer":e.cursor}const $X=.7;function yNe(e,t){if(Oe([Xw,SF,_F,CF],e)&&!iX(t))return $X}function vNe(e,t,{graticule:n}){if(n)return!1;const r=cs("filled",e,t),i=e.type;return Dt(r,i!==Xw&&i!==Yw&&i!==Ax)}function xNe(e,t,n){switch(e){case Xw:case _F:case CF:case P$e:case O$e:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case MY:case Gw:if(K(r)&&(dn(r.bin)||K(i)&&i.aggregate&&!r.aggregate))return"vertical";if(K(i)&&(dn(i.bin)||K(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(K(r)&&r.type===$c&&!ut(r.bin)||Tx(r))&&K(i)&&dn(i.bin)?"horizontal":"vertical";if(!s)return(K(i)&&i.type===$c&&!ut(i.bin)||Tx(i))&&K(r)&&dn(r.bin)?"vertical":"horizontal"}case Ax:if(o&&!(K(r)&&dn(r.bin))&&s&&!(K(i)&&dn(i.bin)))return;case Vw:if(s)return K(i)&&dn(i.bin)?"horizontal":"vertical";if(o)return K(r)&&dn(r.bin)?"vertical":"horizontal";if(e===Ax){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Yw:case SF:{const a=$L(r),l=$L(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=ur(r)&&r.type===eh,c=ur(i)&&i.type===eh;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function bNe(e){const{point:t,line:n,...r}=e;return G(r).length>1?r:r.type}function wNe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Xr(e[t],["point","line"])});return e}function ES(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ae(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ae(t.point)?t.point:{}:void 0}function IL(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class ENe{constructor(){H(this,"name","path-overlay")}hasMatchingType(t,n){if(_a(t)){const{mark:r,encoding:i}=t,o=fs(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!ES(o,n[o.type],i);case"area":return!!ES(o,n[o.type],i)||!!IL(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,f=n2(u,i),d=fs(a)?a:{type:a},h=ES(d,i[d.type],f),g=d.type==="area"&&IL(d,i[d.type]),p=[{name:l,...o?{params:o}:{},mark:bNe({...d.type==="area"&&Ke("opacity",d,i)==null&&Ke("fillOpacity",d,i)==null?{opacity:$X}:{},...d}),encoding:Xr(f,["shape"])}],m=kX(AX(d,f,i),f);let y=f;if(m){const{fieldChannel:v,offset:x}=m;y={...f,[v]:{...f[v],...x?{stack:x}:{}}}}return y=Xr(y,["y2","x2"]),g&&p.push({...s?{projection:s}:{},mark:{type:"line",...Kd(d,["clip","interpolate","tension","tooltip"]),...g},encoding:y}),h&&p.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Kd(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:p},{...n,config:wNe(i)})}}function SNe(e,t){return t?x0(e)?NX(e,t):TX(e,t):e}function SS(e,t){return t?NX(e,t):e}function fA(e,t,n){const r=t[e];if(oTe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Q(nAe(r.repeat));return}return t}function TX(e,t){if(e=fA("field",e,t),e!==void 0){if(e===null)return null;if(RF(e)&&ta(e.sort)){const n=fA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function LL(e,t){if(K(e))return TX(e,t);{const n=fA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function zL(e,t){if(_e(e)){const n=LL(e,t);if(n)return n;if(b0(e))return{condition:e.condition}}else{if(w0(e)){const n=LL(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function NX(e,t){const n={};for(const r in e)if(Y(e,r)){const i=e[r];if(W(i))n[r]=i.map(o=>zL(o,t)).filter(o=>o);else{const o=zL(i,t);o!==void 0&&(n[r]=o)}}return n}class _Ne{constructor(){H(this,"name","RuleForRangedLine")}hasMatchingType(t){if(_a(t)){const{encoding:n,mark:r}=t;if(r==="line"||fs(r)&&r.type==="line")for(const i of xke){const o=Xc(i),s=n[o];if(n[i]&&(K(s)&&!dn(s.bin)||ks(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Q(_Ae(!!i.x2,!!i.y2)),r({...t,mark:ae(o)?{...o,type:"rule"}:"rule"},n)}}class CNe extends VF{constructor(){super(...arguments);H(this,"nonFacetUnitNormalizers",[ATe,NTe,ITe,new ENe,new _Ne])}map(n,r){if(_a(n)){const i=nc(n.encoding,Js),o=nc(n.encoding,ea),s=nc(n.encoding,Pw);if(i||o||s)return this.mapFacetedUnit(n,r)}return super.map(n,r)}mapUnit(n,r){const{parentEncoding:i,parentProjection:o}=r,s=SS(n.encoding,r.repeater),a={...n,...n.name?{name:[r.repeaterPrefix,n.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(i||o)return this.mapUnitWithParentEncodingOrProjection(a,r);const l=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(a,r.config))return u.run(a,r,l);return a}mapRepeat(n,r){return cNe(n)?this.mapLayerRepeat(n,r):this.mapNonLayerRepeat(n,r)}mapLayerRepeat(n,r){const{repeat:i,spec:o,...s}=n,{row:a,column:l,layer:u}=i,{repeater:c={},repeaterPrefix:f=""}=r;return a||l?this.mapRepeat({...n,repeat:{...a?{row:a}:{},...l?{column:l}:{}},spec:{repeat:{layer:u},spec:o}},r):{...s,layer:u.map(d=>{const h={...c,layer:d},g=`${(o.name?`${o.name}_`:"")+f}child__layer_${xt(d)}`,p=this.mapLayerOrUnit(o,{...r,repeater:h,repeaterPrefix:g});return p.name=g,p})}}mapNonLayerRepeat(n,r){const{repeat:i,spec:o,data:s,...a}=n;!W(i)&&n.columns&&(n=Xr(n,["columns"]),Q(vL("repeat")));const l=[],{repeater:u={},repeaterPrefix:c=""}=r,f=!W(i)&&i.row||[u?u.row:null],d=!W(i)&&i.column||[u?u.column:null],h=W(i)&&i||[u?u.repeat:null];for(const p of h)for(const m of f)for(const y of d){const v={repeat:p,row:m,column:y,layer:u.layer},x=`${(o.name?`${o.name}_`:"")+c}child__${W(i)?`${xt(p)}`:(i.row?`row_${xt(m)}`:"")+(i.column?`column_${xt(y)}`:"")}`,b=this.map(o,{...r,repeater:v,repeaterPrefix:x});b.name=x,l.push(Xr(b,["data"]))}const g=W(i)?n.columns:i.column?i.column.length:1;return{data:o.data??s,align:"all",...a,columns:g,concat:l}}mapFacet(n,r){const{facet:i}=n;return x0(i)&&n.columns&&(n=Xr(n,["columns"]),Q(vL("facet"))),super.mapFacet(n,r)}mapUnitWithParentEncodingOrProjection(n,r){const{encoding:i,projection:o}=n,{parentEncoding:s,parentProjection:a,config:l}=r,u=BL({parentProjection:a,projection:o}),c=jL({parentEncoding:s,encoding:SS(i,r.repeater)});return this.mapUnit({...n,...u?{projection:u}:{},...c?{encoding:c}:{}},{config:l})}mapFacetedUnit(n,r){const{row:i,column:o,facet:s,...a}=n.encoding,{mark:l,width:u,projection:c,height:f,view:d,params:h,encoding:g,...p}=n,{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:i,column:o,facet:s},r),v=SS(a,r.repeater);return this.mapFacet({...p,...y,facet:m,spec:{...u?{width:u}:{},...f?{height:f}:{},...d?{view:d}:{},...c?{projection:c}:{},mark:l,encoding:v,...h?{params:h}:{}}},r)}getFacetMappingAndLayout(n,r){const{row:i,column:o,facet:s}=n;if(i||o){s&&Q(EAe([...i?[Js]:[],...o?[ea]:[]]));const a={},l={};for(const u of[Js,ea]){const c=n[u];if(c){const{align:f,center:d,spacing:h,columns:g,...p}=c;a[u]=p;for(const m of["align","center","spacing"])c[m]!==void 0&&(l[m]??(l[m]={}),l[m][u]=c[m])}}return{facetMapping:a,layout:l}}else{const{align:a,center:l,spacing:u,columns:c,...f}=s;return{facetMapping:SNe(f,r.repeater),layout:{...a?{align:a}:{},...l?{center:l}:{},...u?{spacing:u}:{},...c?{columns:c}:{}}}}}mapLayer(n,{parentEncoding:r,parentProjection:i,...o}){const{encoding:s,projection:a,...l}=n,u={...o,parentEncoding:jL({parentEncoding:r,encoding:s,layer:!0}),parentProjection:BL({parentProjection:i,projection:a})};return super.mapLayer({...l,...n.name?{name:[u.repeaterPrefix,n.name].filter(c=>c).join("_")}:{}},u)}}function jL({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...G(e),...G(t)]);for(const o of i){const s=t[o],a=e[o];if(_e(s)){const l={...a,...s};r[o]=l}else w0(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||yo(a)||me(a)||_e(a)||W(a))&&(r[o]=a)}}else r=t;return!r||st(r)?void 0:r}function BL(e){const{parentProjection:t,projection:n}=e;return t&&n&&Q(fAe({parentProjection:t,projection:n})),n??t}function GF(e){return Y(e,"filter")}function kNe(e){return Y(e,"stop")}function MX(e){return Y(e,"lookup")}function ANe(e){return Y(e,"data")}function $Ne(e){return Y(e,"param")}function TNe(e){return Y(e,"pivot")}function NNe(e){return Y(e,"density")}function MNe(e){return Y(e,"quantile")}function RNe(e){return Y(e,"regression")}function FNe(e){return Y(e,"loess")}function ONe(e){return Y(e,"sample")}function PNe(e){return Y(e,"window")}function DNe(e){return Y(e,"joinaggregate")}function INe(e){return Y(e,"flatten")}function LNe(e){return Y(e,"calculate")}function RX(e){return Y(e,"bin")}function zNe(e){return Y(e,"impute")}function jNe(e){return Y(e,"timeUnit")}function BNe(e){return Y(e,"aggregate")}function UNe(e){return Y(e,"stack")}function WNe(e){return Y(e,"fold")}function qNe(e){return Y(e,"extent")&&!Y(e,"density")&&!Y(e,"regression")}function HNe(e){return e.map(t=>GF(t)?{filter:sd(t.filter,y$e)}:t)}class VNe extends VF{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=UL(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=UL(t,n),t.encoding){const r={};for(const[i,o]of jl(t.encoding))r[i]=FX(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:jl(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const f of jt(n.selectionPredicates[o]??{}))f.empty=u!=="none";return{name:o,value:a,select:c,bind:l}})}:t}}function UL(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(GF(o))return{filter:dA(o,t)};if(RX(o)&&Kc(o.bin))return{...o,bin:OX(o.bin)};if(MX(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function FX(e,t){var r,i;const n=Ee(e);if(K(n)&&Kc(n.bin)&&(n.bin=OX(n.bin)),ef(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(b0(n))if(W(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:dA(o,t)}});else{const{selection:o,param:s,test:a,...l}=FX(n.condition,t);n.condition=s?n.condition:{...l,test:dA(n.condition,t)}}return n}function OX(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function dA(e,t){const n=r=>sd(r,i=>{var a;const o=t.emptySelections[i]??!0,s={param:i,empty:o};return(a=t.selectionPredicates)[i]??(a[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):sd(e.test||e.filter,r=>r.selection?n(r.selection):r)}class hA extends VF{map(t,n){const r=n.selections??[];if(t.params&&!_a(t)){const i=[];for(const o of t.params)WF(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(se(a)&&(a===t.name||i.includes(a))||W(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=hA.prototype[e];hA.prototype[e]=function(n,r){return t.call(this,n,GNe(n,r))}}function GNe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function PX(e,t){t===void 0&&(t=CX(e.config));const n=QNe(e,t),{width:r,height:i}=e,o=ZNe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const YNe=new CNe,XNe=new VNe,KNe=new hA;function QNe(e,t={}){const n={config:t};return KNe.map(YNe.map(XNe.map(e,n),n),n)}function WL(e){return se(e)?{type:e}:e??{}}function ZNe(e,t,n){let{width:r,height:i}=t;const o=_a(e)||i2(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Q(pL("width")),r=void 0),i=="container"&&(Q(pL("height")),i=void 0));const a={type:"pad",...s,...n?WL(n.autosize):{},...WL(e.autosize)};if(a.type==="fit"&&!o&&(Q(Hke),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Q(gL("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Q(gL("height")),!Wr(a,{type:"pad"}))return a}function JNe(e){return["fit","fit-x","fit-y"].includes(e)}function eMe(e){return e?`fit-${jw(e)}`:"fit"}const tMe=["background","padding"];function qL(e,t){const n={};for(const r of tMe)e&&e[r]!==void 0&&(n[r]=jr(e[r]));return t&&(n.params=e.params),n}class Ca{constructor(t={},n={}){H(this,"explicit");H(this,"implicit");this.explicit=t,this.implicit=n}clone(){return new Ca(Ee(this.explicit),Ee(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Dt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of G(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Po(e){return{explicit:!0,value:e}}function Pr(e){return{explicit:!1,value:e}}function DX(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:o2(t,n,r,i)}}function o2(e,t,n,r){return e.explicit&&t.explicit&&Q(OAe(n,r,e.value,t.value)),e}function Wl(e,t,n,r,i=o2){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Wr(e.value,t.value)?e:i(e,t,n,r)}class nMe extends Ca{constructor(n={},r={},i=!1){super(n,r);H(this,"explicit");H(this,"implicit");H(this,"parseNothing");this.explicit=n,this.implicit=r,this.parseNothing=i}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function oh(e){return Y(e,"url")}function xm(e){return Y(e,"values")}function IX(e){return Y(e,"name")&&!oh(e)&&!xm(e)&&!Cl(e)}function Cl(e){return e&&(LX(e)||zX(e)||YF(e))}function LX(e){return Y(e,"sequence")}function zX(e){return Y(e,"sphere")}function YF(e){return Y(e,"graticule")}var _t;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(_t||(_t={}));function jX({invalid:e,isPath:t}){switch(OY(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function rMe(e){const{marks:t,scales:n}=jX(e);return t===n?_t.Main:n==="include-invalid-values"?_t.PreFilterInvalid:_t.PostFilterInvalid}class tt{constructor(t,n){H(this,"debugName");H(this,"_children",[]);H(this,"_parent",null);H(this,"_hash");this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Q(lAe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Cr extends tt{constructor(n,r,i,o){super(n,r);H(this,"type");H(this,"refCounts");H(this,"_source");H(this,"_name");this.type=i,this.refCounts=o,this._source=this._name=r,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${DG()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function _S(e){return e.as!==void 0}function HL(e){return`${e}_end`}class es extends tt{constructor(n,r){super(n);H(this,"timeUnits");this.timeUnits=r}clone(){return new es(null,Ee(this.timeUnits))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{const{field:l,timeUnit:u}=s;if(u){let c;if(Jc(u)){if(St(r)){const{mark:f,markDef:d,config:h}=r,g=Ul({fieldDef:s,markDef:d,config:h});(vm(f)||g)&&(c={timeUnit:sn(u),field:l})}}else c={as:ie(s,{forAs:!0}),field:l,timeUnit:u};if(St(r)){const{mark:f,markDef:d,config:h}=r,g=Ul({fieldDef:s,markDef:d,config:h});vm(f)&&It(a)&&g!==.5&&(c.rectBandPosition=g)}c&&(o[Ie(c)]=c)}return o},{});return st(i)?null:new es(n,i)}static makeFromTransform(n,r){const{timeUnit:i,...o}={...r},s=sn(i),a={...o,timeUnit:s};return new es(n,{[Ie(a)]:a})}merge(n){this.timeUnits={...this.timeUnits};for(const r in n.timeUnits)this.timeUnits[r]||(this.timeUnits[r]=n.timeUnits[r]);for(const r of n.children)n.removeChild(r),r.parent=this;n.remove()}removeFormulas(n){const r={};for(const[i,o]of jl(this.timeUnits)){const s=_S(o)?o.as:`${o.field}_end`;n.has(s)||(r[i]=o)}this.timeUnits=r}producedFields(){return new Set(jt(this.timeUnits).map(n=>_S(n)?n.as:HL(n.field)))}dependentFields(){return new Set(jt(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${Ie(this.timeUnits)}`}assemble(){const n=[];for(const r of jt(this.timeUnits)){const{rectBandPosition:i}=r,o=sn(r.timeUnit);if(_S(r)){const{field:s,as:a}=r,{unit:l,utc:u,...c}=o,f=[a,`${a}_end`];n.push({field:$i(s),type:"timeunit",...l?{units:qw(l)}:{},...u?{timezone:"utc"}:{},...c,as:f}),n.push(...VL(f,i,o))}else if(r){const{field:s}=r,a=OG(s),l=BX({timeUnit:o,field:a}),u=HL(a);n.push({type:"formula",expr:l,as:u}),n.push(...VL([a,u],i,o))}}return n}}const s2="offsetted_rect_start",a2="offsetted_rect_end";function BX({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=yY(r),{part:s,step:a}=wY(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${Ze(t)}, ${n?-a:a})`}function VL([e,t],n,r){if(n!==void 0&&n!==.5){const i=Ze(e),o=Ze(t);return[{type:"formula",expr:GL([BX({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${s2}`},{type:"formula",expr:GL([i,o],n+.5),as:`${e}_${a2}`}]}return[]}function GL([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const _0="_tuple_fields";class iMe{constructor(...t){H(this,"hasChannel");H(this,"hasField");H(this,"hasSelectionId");H(this,"timeUnit");H(this,"items");this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const oMe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new iMe),o={},s={},a=new Set,l=(g,p)=>{const m=p==="visual"?g.channel:g.field;let y=xt(`${r}_${m}`);for(let v=1;a.has(y);v++)y=xt(`${r}_${m}_${v}`);return a.add(y),{[p]:y}},u=t.type,c=e.config.selection[u],f=n.value!==void 0?le(n.value):null;let{fields:d,encodings:h}=ae(n.select)?n.select:{};if(!d&&!h&&f){for(const g of f)if(ae(g))for(const p of G(g))vke(p)?(h||(h=[])).push(p):u==="interval"?(Q(tAe),h=c.encodings):(d??(d=[])).push(p)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const g of h??[]){const p=e.fieldDef(g);if(p){let m=p.field;if(p.aggregate){Q(Vke(g,p.aggregate));continue}else if(!m){Q(yL(g));continue}if(p.timeUnit&&!Jc(p.timeUnit)){m=e.vgField(g);const y={timeUnit:p.timeUnit,as:m,field:p.field};s[Ie(y)]=y}if(!o[m]){const y=u==="interval"&&Cs(g)&&mo(e.getScaleComponent(g).get("type"))?"R":p.bin?"R-RE":"E",v={field:m,channel:g,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===xo,UG(g)?(v.geoChannel=g,v.channel=BG(g),i.hasChannel[v.channel]=o[m]):i.hasChannel[g]=o[m]}}else Q(yL(g))}for(const g of d??[]){if(i.hasField[g])continue;const p={type:"E",field:g,index:i.items.length};p.signals={...l(p,"data")},i.items.push(p),i.hasField[g]=p,i.hasSelectionId=i.hasSelectionId||g===xo}f&&(t.init=f.map(g=>i.items.map(p=>ae(g)?g[p.geoChannel||p.channel]!==void 0?g[p.geoChannel||p.channel]:g[p.field]:g))),st(s)||(i.timeUnit=new es(null,s))},signals:(e,t,n)=>{const r=t.name+_0;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(HX)})}},UX="_curr",T1="anim_value",kf="anim_clock",pA="eased_anim_clock",WX="min_extent",qX="max_range_extent",CS="last_tick_at",kS="is_playing",sMe=1/60*1e3,aMe=(e,t)=>[{name:pA,update:kf},{name:`${e}_domain`,init:`domain('${t}')`},{name:WX,init:`extent(${e}_domain)[0]`},{name:qX,init:`extent(range('${t}'))[1]`},{name:T1,update:`invert('${t}', ${pA})`}],lMe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(ts(t)&&(n=n.concat([{name:kf,init:"0",on:[{events:{type:"timer",throttle:sMe},update:`${kS} ? (${kf} + (now() - ${CS}) > ${qX} ? 0 : ${kf} + (now() - ${CS})) : ${kf}`}]},{name:CS,init:"now()",on:[{events:[{signal:kf},{signal:kS}],update:"now()"}]},{name:kS,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+_0,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=jt(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+ud):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${rc(e)}, `;if(t.project.hasSelectionId)u+=`${xo}: ${s}[${J(xo)}]`;else if(ts(t))u+=`fields: ${i}, values: [${T1} ? ${T1} : ${WX}]`;else{const c=o.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${s}[${J(e.vgField(f.channel,{}))}], ${s}[${J(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${J(f.field)}]`}).join(", ");u+=`fields: ${i}, values: [${c}]`}if(ts(t))return n.concat(aMe(t.name,e.scaleName(nu)),[{name:r+ga,on:[{events:[{signal:pA},{signal:T1}],update:`{${u}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+ga,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function HX(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=$i(i.field),i}function Mc(e,t=!0,n=Wn){if(W(e)){const r=e.map(i=>Mc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Zc(e))return n(t?Ac(e):o$e(e));return t?n(Qe(e)):e}function uMe(e,t){for(const n of jt(e.component.selection??{})){const r=n.name;let i=`${r}${ga}, ${n.resolve==="global"?"true":`{unit: ${rc(e)}}`}`;for(const o of l2)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+DMe,on:[{events:{signal:n.name+ga},update:`modify(${J(n.name+Rc)}, ${i})`}]})}return XF(t)}function cMe(e,t){if(e.component.selection&&G(e.component.selection).length){const n=J(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:eu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return XF(t)}function fMe(e,t){let n=!1;for(const r of jt(e.component.selection??{})){const i=r.name,o=J(i+Rc);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${uK}(${o}, ${J(a)}${l}`})}n=!0;for(const a of l2)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),XF(t)}function dMe(e,t){const n=[],r=[],i=rc(e,{escape:!1});for(const o of jt(e.component.selection??{})){const s={name:o.name+Rc};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:xo}}]),o.init){const l=o.project.items.map(HX);s.values=o.project.hasSelectionId?o.init.map(u=>({unit:i,[xo]:Mc(u,!1)[0]})):o.init.map(u=>({unit:i,fields:l,values:Mc(u,!1)}))}if([...n,...t].filter(l=>l.name===o.name+Rc).length||n.push(s),ts(o)&&t.length){const l=e.lookupDataSource(e.getDataName(_t.Main)),u=t.find(f=>f.name===l),c=u.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){u.transform=u.transform.filter(d=>d!==c);const f={name:u.name+UX,source:u.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function VX(e,t){for(const n of jt(e.component.selection??{}))for(const r of l2)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function hMe(e,t){for(const n of e.children)St(n)&&(t=VX(n,t));return t}function pMe(e,t,n,r){const i=pK(e,t.param,t);return{signal:mo(n.get("type"))&&W(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function XF(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const na={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Cs(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Q(Kke),!o||!mo(s)){Q(Xke);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||mA(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(uK))i.update=`{${r.map(s=>`${J($i(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${J($i(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!mA(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function gA(e,t){return`domain(${J(e.scaleName(t))})`}function mA(e){return e.parent&&Uh(e.parent)&&(!e.parent.parent||mA(e.parent.parent))}const ud="_brush",GX="_scale_trigger",Ep="geo_interval_init_tick",YX="_init",gMe="_center",mMe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ae(n.select)?n.select:{}};i.fields=[xo],i.encodings||(i.encodings=n.value?G(n.value):[ko,Co]),n.select={type:"interval",...i}}if(t.translate&&!na.defined(t)){const i=`!event.item || event.item.mark.name !== ${J(t.name+ud)}`;for(const o of t.events){if(!o.between){Q(`${o} is not an ordered event stream for interval selections.`);continue}const s=le((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ga,o=jt(t.project.hasChannel).filter(a=>a.channel===bt||a.channel===un),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(yMe(e,t,l,s==null?void 0:s[l.index])),[])),e.hasProjection){const a=J(e.projectionName()),l=e.projectionName()+gMe,{x:u,y:c}=t.project.hasChannel,f=u==null?void 0:u.signals.visual,d=c==null?void 0:c.signals.visual,h=u?s==null?void 0:s[u.index]:`${l}[0]`,g=c?s==null?void 0:s[c.index]:`${l}[1]`,p=w=>e.getSizeSignalRef(w).signal,m=`[[${f?`${f}[0]`:"0"}, ${d?`${d}[0]`:"0"}],[${f?`${f}[1]`:p("width")}, ${d?`${d}[1]`:p("height")}]]`;s&&(n.unshift({name:r+YX,init:`[scale(${a}, [${u?h[0]:h}, ${c?g[0]:g}]), scale(${a}, [${u?h[1]:h}, ${c?g[1]:g}])]`}),(!u||!c)&&(n.find(S=>S.name===l)||n.unshift({name:l,update:`invert(${a}, [${p("width")}/2, ${p("height")}/2])`})));const y=`intersect(${m}, {markname: ${J(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${rc(e)}}`,x=`vlSelectionTuples(${y}, ${v})`,b=o.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...s?[{signal:Ep}]:[]],update:x}]})}else{if(!na.defined(t)){const u=r+GX,c=o.map(f=>{const d=f.channel,{data:h,visual:g}=f.signals,p=J(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=mo(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${p}, ${g})[0] === ${y}${h}[0] && ${y}invert(${p}, ${g})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:`${c.join(" && ")} ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${rc(e)}, fields: ${r+_0}, values`;return n.concat({name:i,...s?{init:`{${l}: ${Mc(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(St(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Ep).length||n.unshift({name:Ep,value:null,on:[{events:"timer{1}",update:`${Ep} === null ? {} : ${Ep}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${J(t.name+Rc)})`;if(na.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of G(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${rc(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,g=G(h).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],m),{}),p=d??(t.translate?"move":null);return[{name:`${r+ud}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...n,{name:r+ud,type:"rect",clip:!0,encode:{enter:{...p?{cursor:{value:p}}:{},fill:{value:"transparent"}},update:{...u,...g}}}]}};function yMe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=J(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===bt?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=na.defined(t),g=e.getScaleComponent(o),p=g?g.get("type"):void 0,m=r?{init:Mc(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+GX},update:mo(p)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...m,on:f},{name:d,...r?{init:Mc(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===bt?0:1,h=t.name+YX,g=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...g,on:f}]}}function Lh({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=b0(t)&&t.condition;let s=[];o&&(s=le(o).map(u=>{const c=i(u);if(iTe(u)){const{param:f,empty:d}=u;return{test:hK(e,{param:f,empty:d}),...c}}else return{test:Ix(e,u.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function KF(e,t="text"){const n=e.encoding[t];return Lh({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>QF(r,e.config),invalidValueRef:void 0})}function QF(e,t,n="datum"){if(e){if(yo(e))return pt(e.value);if(_e(e)){const{format:r,formatType:i}=Mx(e);return NF({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function XX(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(W(s))return{tooltip:YL({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return Lh({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=QX(u,i,a);if(c)return c;if(u===null)return;let f=Ke("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),se(f))return{value:f};if(ae(f))return me(f)?f:f.content==="encoding"?YL(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function KX(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(c,f){const d=Xc(f),h=ur(c)?c:{...c,type:e[d].type},g=h.title||OF(h,i),p=le(g).join(", ").replaceAll(/"/g,'\\"');let m;if(It(f)){const y=f==="x"?"x2":"y2",v=vo(e[y]);if(dn(h.bin)&&v){const x=ie(h,{expr:s}),b=ie(v,{expr:s}),{format:w,formatType:S}=Mx(h);m=v0(x,b,w,S,i),o.add(y)}}if((It(f)||f===Mi||f===_o)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=Mx(h);m=NF({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=QX(h,i,s).signal),a.push({channel:f,key:p,value:m})}DF(e,(c,f)=>{K(c)?l(c,f):Zw(c)&&l(c.condition,f)});const u={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!u[f]&&(u[f]=d);return u}function YL(e,t,n,{reactiveGeom:r}={}){const i=KX(e,t,n,{reactiveGeom:r}),o=jl(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function QX(e,t,n="datum"){if(K(e)&&bF(e.type)&&!Y(e,"format")){const r=`datum["${e.field}"]`;return{signal:`isValid(${r}) ? isArray(${r}) ? join(${r}, '\\n') : ${r} : ""+${r}`}}return QF(e,t,n)}function vMe(e){const{markDef:t,config:n}=e,r=Ke("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...xMe(e),...bMe(e)}}function xMe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Ke("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:fe(Bke,t)?{}:{ariaRoleDescription:{value:t}}}function bMe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Lh({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>QF(l,e.config),invalidValueRef:void 0});const s=Ke("description",n,r);if(s!=null)return{description:pt(s)};if(r.aria===!1)return{};const a=KX(t,i,r);if(!st(a))return{description:{signal:jl(a).filter(([l])=>!l.startsWith("_")).map(([l,u])=>[l,u.replaceAll("\\n"," ")]).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function gn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Ke(e,r,o,{vgChannel:s,ignoreVgConfig:!b0(u)})),l!==void 0&&(a=pt(l)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=DY({...c,scaleChannel:e,channelDef:u});return Lh({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>TF({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function ZX(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??Ke("filled",n,i),a=Oe(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Ke(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=Ke(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...l?{fill:pt(l)}:{},...u?{stroke:pt(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Q(lY("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...gn("color",e,{vgChannel:c,defaultValue:s?l:u}),...gn("fill",e,{defaultValue:r.fill?l:void 0}),...gn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function wMe(e){const{encoding:t,mark:n}=e,r=t.order;return!lu(n)&&yo(r)?Lh({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>pt(i.value),invalidValueRef:void 0}):{}}function sh({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:TF({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:pt(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function rr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[_s(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=sh({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),g=ZF({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!l&&It(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:EMe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:g,bandPosition:h==="encoding"?0:void 0});return p?{[r||e]:p}:void 0}function EMe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(_e(n)&&i&&t===i.fieldChannel){if(K(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return $x({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return tc(n,r,{suffix:"end"},{offset:o})}return $F(e)}function ZF({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Xc(n),l=Bl(n),u=Ke(n,o,s,{vgChannel:l});if(u!==void 0)return Sg(n,u);switch(t){case"zeroOrMin":return XL({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return XL({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[Rr(n)],mult:.5}}}}function XL({mainChannel:e,config:t,...n}){const r=PY(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const SMe={left:"x",center:"xc",right:"x2"},_Me={top:"y",middle:"yc",bottom:"y2"};function JX(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Bl(e);const i=e==="x"?"align":"baseline",o=Ke(i,t,n);let s;return me(o)?(Q(SAe(i)),s=void 0):s=o,e==="x"?SMe[s||(r==="top"?"left":"center")]:_Me[s||r]}function Px(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?eK(e,t,{defaultPos:n,defaultPos2:r}):rr(e,t,{defaultPos:n})}function eK(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=_s(e),a=Rr(e),l=CMe(t,r,s),u=l[a]?JX(e,i,o):Bl(e);return{...rr(e,t,{defaultPos:n,vgChannel:u}),...l}}function CMe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=Xc(n),u=Rr(n),c=Bl(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:g}=n in r||n in o?sh({channel:n,markDef:o,encoding:r,model:e}):sh({channel:l,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=Rr(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const p=kMe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:g,defaultRef:void 0});return p!==void 0?{[c]:p}:$y(n,o)||$y(n,{[n]:rA(n,o,a.style),[u]:rA(u,o,a.style)})||$y(n,a[i])||$y(n,a.mark)||{[c]:ZF({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function kMe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return _e(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?tc(t,o,{suffix:"start"},{offset:l}):$F({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function $y(e,t){const n=Rr(e),r=Bl(e);if(t[r]!==void 0)return{[r]:Sg(e,t[r])};if(t[e]!==void 0)return{[r]:Sg(e,t[e])};if(t[n]){const i=t[n];if(Tc(i))Q(yAe(n));else return{[n]:Sg(e,i)}}}function pa(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=_s(t),a=Rr(t),l=r[t],u=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Ke("size",i,n,{vgChannel:a}),g=VG(t),p=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return K(l)&&(ut(l.bin)||dn(l.bin)||l.timeUnit&&!u)&&!(h&&!Tc(h))&&!r[g]&&!an(f)?TMe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(_e(l)&&an(f)||p)&&!u?$Me(l,t,e):eK(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function AMe(e,t,n,r,i,o,s){if(Tc(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=cs("minBandSize",{type:s},r);return{signal:c?`max(${no(c)}, ${u})`:u}}else i.band!==1&&(Q(AAe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(me(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(Qc(l)&&He(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=Dt(l,s==="tick"?f:s==="bar"?u:c);if(me(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(He(d))return{signal:`${1-d} * ${e}`}}return{value:cA(r.view,e)-2}}function $Me(e,t,n){var k,T;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=Rr(t),f=_s(t),d=VG(t),h=n.scaleName(d),g=n.getScaleComponent(eF(t)),p=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(p?m=gn("size",n,{vgChannel:c,defaultRef:pt(r.size)}):Q(MAe(r.type)));const y=!!m,v=WY({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(k=u||g)==null?void 0:k.get("type"),useVlSizeChannel:p});m=m||{[c]:AMe(c,h||l,g||u,o,v,!!e,r.type)};const x=((T=u||g)==null?void 0:T.get("type"))==="band"&&Tc(v)&&!y?"top":"middle",b=JX(t,r,o,x),w=b==="xc"||b==="yc",{offset:S,offsetType:E}=sh({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),_=$F({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:S,defaultRef:ZF({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?E==="encoding"?0:.5:me(v)?{signal:`(1-${v})/2`}:Tc(v)?(1-v.band)/2:0});if(c)return{[b]:_,...m};{const N=Bl(f),P=m[c],D=S?{...P,offset:S}:P;return{[b]:_,[N]:W(_)?[_[0],{..._[1],offset:D}]:{..._,offset:D}}}}function KL(e,t,n,r,i,o,s){if(jG(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(me(n)||me(i)||me(r)||o){const u=no(n),c=no(i),f=no(r),d=no(o),g=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,p=f?`${f} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${g})`:g;return{signal:p+m+y}}else return i=i||0,r+(n?-i-l:+i+l)}function TMe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var T;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),f=WY({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=(T=r.component.axes[n])==null?void 0:T[0],h=(d==null?void 0:d.get("translate"))??.5,g=It(n)?Ke("binSpacing",o,i)??0:0,p=_s(n),m=Bl(n),y=Bl(p),v=cs("minBandSize",o,i),{offset:x}=sh({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:b}=sh({channel:p,markDef:o,encoding:s,model:r,bandPosition:0}),w=J$e({fieldDef:e,scaleName:l}),S=KL(n,g,c,h,x,v,w),E=KL(p,g,c,h,b??x,v,w),_=me(f)?{signal:`(1-${f.signal})/2`}:Tc(f)?(1-f.band)/2:.5,k=Ul({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(ut(e.bin)||e.timeUnit){const N=e.timeUnit&&k!==.5;return{[y]:QL({fieldDef:e,scaleName:l,bandPosition:_,offset:E,useRectOffsetField:N}),[m]:QL({fieldDef:e,scaleName:l,bandPosition:me(_)?{signal:`1-${_.signal}`}:1-_,offset:S,useRectOffsetField:N})}}else if(dn(e.bin)){const N=tc(e,l,{},{offset:E});if(K(t))return{[y]:N,[m]:tc(t,l,{},{offset:S})};if(Kc(e.bin)&&e.bin.step)return{[y]:N,[m]:{signal:`scale("${l}", ${ie(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Q(fY(p))}function QL({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return $x({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:s2,endSuffix:a2}:{}})}const NMe=new Set(["aria","width","height"]);function Ri(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?ZX(e):{};return{...MMe(e.markDef,t),...ZL("fill",n),...ZL("stroke",r),...gn("opacity",e),...gn("fillOpacity",e),...gn("strokeOpacity",e),...gn("strokeWidth",e),...gn("strokeDash",e),...wMe(e),...XX(e),...KF(e,"href"),...vMe(e)}}function ZL(e,t){return t?{[e]:t}:{}}function MMe(e,t){return jke.reduce((n,r)=>(!NMe.has(r)&&Y(e,r)&&t[r]!=="ignore"&&(n[r]=pt(e[r])),n),{})}function JF(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!Cs(o)||!(s=e.getScaleType(o)))return;const a=Bw(i.aggregate),l=AF({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(K$e(l)){const c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>Hw(o,!0)).join(" && ")}}}function JL(e,t){if(t!==void 0)return{[e]:pt(t)}}const AS="voronoi",tK={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(AS)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(lu(o))return Q(Gke(o)),n;const s={name:e.getName(AS),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...XX(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(AS)&&(l=!0)}),l||n.splice(a+1,0,s),n}},nK={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!UF(e.bind),parse:(e,t,n)=>cK(t,n),topLevelSignals:(e,t,n)=>{var l;const r=t.name,i=t.project,o=t.bind,s=(l=t.init)==null?void 0:l[0],a=tK.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,c)=>{const f=xt(`${r}_${u.field}`);n.filter(h=>h.name===f).length||n.unshift({name:f,...s?{init:Mc(s[c])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${J(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+ga),s=r+_0,a=i.items.map(u=>xt(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},Dx="_toggle",rK={defined:e=>e.type==="point"&&!ts(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Dx,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ga,r=t.name+Dx;return`${r} ? null : ${n}, ${t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${rc(e)}}, `}${r} ? ${n} : null`}},RMe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!ts(e),parse:(e,t)=>{t.clear&&(t.clear=se(t.clear)?eu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(nK.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===xt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+ga);r(i,"null"),rK.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Dx),r(i,"false"))}return n}},iK={defined:e=>{const t=e.resolve==="global"&&e.bind&&UF(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==xo;return t&&!n&&Q(Qke),t&&n},parse:(e,t,n)=>{const r=Ee(n);if(r.select=se(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},cK(t,r),ae(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=le(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=wS(t.bind)?t.bind.legend:"click",o=se(i)?eu(i,"view"):le(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=wS(t.bind)&&t.bind.legend,o=s=>a=>{const l=Ee(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${xt(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+ga),s=r+_0,a=i.items.filter(d=>d.hasLegend).map(d=>xt(`${r}_${xt(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(d=>d.name===r+Dx),f=wS(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function FMe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of jt(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&iK.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const oK="_translate_anchor",sK="_translate_delta",OMe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=na.defined(t),o=r+oK,{x:s,y:a}=t.project.hasChannel;let l=eu(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+ud,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${i?gA(e,bt):`slice(${s.signals.visual})`}`:""}${a!==void 0?`, extent_y: ${i?gA(e,un):`slice(${a.signals.visual})`}`:""}}`}]},{name:r+sK,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&e4(e,t,s,"width",n),a!==void 0&&e4(e,t,a,"height",n),n}};function e4(e,t,n,r,i){const o=t.name,s=o+oK,a=o+sK,l=n.channel,u=na.defined(t),c=i.find(w=>w.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d==null?void 0:d.get("type"),g=d==null?void 0:d.get("reverse"),p=u?l===bt?g?"":"-":g?"-":"":"",m=`${s}.extent_${l}`,y=`${p}${a}.${l} / ${u?`${f}`:`span(${m})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${v}(${m}, ${y}${x})`;c.on.push({events:{signal:a},update:u?b:`clampRange(${b}, 0, ${f})`})}const aK="_zoom_anchor",lK="_zoom_delta",PMe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=na.defined(t),o=r+lK,{x:s,y:a}=t.project.hasChannel,l=J(e.scaleName(bt)),u=J(e.scaleName(un));let c=eu(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+ud,f))),n.push({name:r+aK,on:[{events:c,update:i?`{${[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&t4(e,t,s,"width",n),a!==void 0&&t4(e,t,a,"height",n),n}};function t4(e,t,n,r,i){const o=t.name,s=n.channel,a=na.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c==null?void 0:c.get("type"),d=a?gA(e,s):l.name,h=o+lK,g=`${o}${aK}.${s}`,p=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${p}(${d}, ${g}, ${h}${m})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const Rc="_store",ga="_tuple",DMe="_modify",uK="vlSelectionResolve",l2=[lMe,mMe,oMe,rK,nK,na,iK,RMe,OMe,PMe,tK];function IMe(e){let t=e.parent;for(;t&&!Kr(t);)t=t.parent;return t}function rc(e,{escape:t}={escape:!0}){let n=t?J(e.name):e.name;const r=IMe(e);if(r){const{facet:i}=r;for(const o of yi)i[o]&&(n+=` + '__facet_${o}_' + (facet[${J(r.vgField(o))}])`)}return n}function eO(e){return jt(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function cK(e,t){(se(t.select)||!t.select.on)&&delete e.events,(se(t.select)||!t.select.clear)&&delete e.clear,(se(t.select)||!t.select.toggle)&&delete e.toggle}function ts(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function yA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...yA(e.object)),t.push(...yA(e.property))),t)}function fK(e){return e.object.type==="MemberExpression"?fK(e.object):e.object.name==="datum"}function dK(e){const t=yR(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&fK(r)&&n.add(yA(r).slice(1).join("."))}),n}class zh extends tt{constructor(n,r,i){super(n);H(this,"model");H(this,"filter");H(this,"expr");H(this,"_dependentFields");this.model=r,this.filter=i,this.expr=Ix(this.model,this.filter,this),this._dependentFields=dK(this.expr)}clone(){return new zh(null,this.model,Ee(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function LMe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=xt(o.name),a=o.select,l=se(a)?a:a.type,u=ae(a)?Ee(a):{type:l},c=r[l];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(u.mark={...c.mark,...u.mark}),(u[h]===void 0||u[h]===!0)&&(u[h]=Ee(c[h]??u[h])));const f=n[s]={...u,name:s,type:l,init:o.value,bind:o.bind,events:se(u.on)?eu(u.on,"scope"):le(Ee(u.on))};if(ts(f)&&(i++,i>1)){delete n[s];continue}const d=Ee(o);for(const h of l2)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&Q(rAe),n}function hK(e,t,n,r="datum"){const i=se(t)?t:t.param,o=xt(i),s=J(o+Rc);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${J(a.resolve)})`,c=`${l}${s}, ${r}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function pK(e,t,n){const r=xt(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Q(iAe(o));else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Q(oAe(a,i,n,o))):o=a[0].field}return`${s.name}[${J($i(o))}]`}function zMe(e,t){for(const[n,r]of jl(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Cr(new zh(t,e,{param:n}),i,_t.Lookup,e.component.data.outputNodeRefCounts)}}function Ix(e,t,n){return Eg(t,r=>se(r)?r:p$e(r)?hK(e,r,n):SY(r))}function jMe(e,t){if(e)return W(e)&&!Ha(e)?e.map(n=>OF(n,t)).join(", "):e}function $S(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Zp(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const g=h,p=vTe[g],m=c[g];if(p&&p!==t&&p!=="both")delete c[g];else if(S0(m)){const{condition:y,...v}=m,x=le(y),b=TL[g];if(b){const{vgProp:w,part:S}=b,E=[...x.map(_=>{const{test:k,...T}=_;return{test:Ix(null,k),...T}}),v];$S(c,S,w,E),delete c[g]}else if(b===null){const w={signal:x.map(S=>{const{test:E,..._}=S;return`${Ix(null,E)} ? ${hL(_)} : `}).join("")+hL(v)};c[g]=w}}else if(me(m)){const y=TL[g];if(y){const{vgProp:v,part:x}=y;$S(c,x,v,m),delete c[g]}}Oe(["labelAlign","labelBaseline"],g)&&c[g]===null&&delete c[g]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},st(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Dt(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let g=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&me(c.encode.labels.update.text)&&(g=_c(a,"datum.label",c.encode.labels.update.text.signal)),$S(c,"labels","text",{signal:g})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const g of JY)e.hasAxisPart(g)||delete c.encode[g];st(c.encode)&&delete c.encode}const h=jMe(l,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Dt(u,0)}}}}function gK(e){const{axes:t}=e.component,n=[];for(const r of Sa)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function BMe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Zp(i,"grid",t)),...r.map(i=>Zp(i,"grid",t)),...n.map(i=>Zp(i,"main",t)),...r.map(i=>Zp(i,"main",t))].filter(i=>i)}function n4(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...G(s),...G(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${no(s[c])} : ${no(a[c])}`};return u}return t[i]})])}function UMe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:kY(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=me(n)?"axisOrient":`axis${d0(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:n4(a,r,e,n),vgAxisConfig:n4(l,r,e,n),axisConfigStyle:WMe([...l,...a],r)}}function WMe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=le(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function vA(e,t,n,r={}){var o;const i=tY(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const r4={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??qMe(n,e),gridScale:({model:e,channel:t})=>HMe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||yK(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||mK(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??GMe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??YMe(t.type,n,K(t)&&!!t.timeUnit,K(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??KMe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??QMe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=vK(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return rY(i?[AL(i)]:[],K(s)?[AL(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>ZMe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??JMe(n,t)};function qMe(e,t){return!an(e)&&K(t)&&!ut(t==null?void 0:t.bin)&&!dn(t==null?void 0:t.bin)}function HMe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function VMe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return me(o)?o:ym(o);{const{configValue:s}=vA("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?ym(s):n===bt&&Oe([EF,wF],e.type)&&!(K(e)&&e.timeUnit)?270:void 0}}function xA(e){return`(((${e.signal} % 360) + 360) % 360)`}function mK(e,t,n,r){if(e!==void 0)if(n==="x"){if(me(e)){const i=xA(e),o=me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(me(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(me(e)){const i=xA(e),o=me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(me(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function yK(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(me(e)){const s=xA(e),a=me(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(me(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function GMe(e,t){if(t==="x"&&Oe(["quantitative","temporal"],e))return!0}function YMe(e,t,n,r){if(n&&!ae(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function XMe(e){return e==="x"?"bottom":"left"}function KMe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!an(t)&&t!=="log"){if(K(e)){if(ut(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Oe(["month","hours","day","quarter"],(i=sn(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function QMe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(K(t)){const{timeUnit:n}=t;if(n){const r=bY(n);if(r)return{signal:r}}}}function vK(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return iY(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function ZMe(e,t){const n=e.values;if(W(n))return ZY(t,n);if(me(n))return n}function JMe(e,t){return e==="rect"&&Nx(t)?1:0}class ah extends tt{constructor(n,r){super(n);H(this,"transform");H(this,"_dependentFields");this.transform=r,this._dependentFields=dK(this.transform.calculate)}clone(){return new ah(null,Ee(this.transform))}static parseAllForSortIndex(n,r){return r.forEachFieldDef((i,o)=>{if(ef(i)&&UY(i.sort)){const{field:s,timeUnit:a}=i,l=i.sort,u=l.map((c,f)=>`${SY({field:s,timeUnit:a,equal:c})} ? ${f} : `).join("")+l.length;n=new ah(n,{calculate:u,as:lh(i,o,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ie(this.transform)}`}}function lh(e,t,n){return ie(e,{prefix:t,suffix:"sort_index",...n})}function u2(e,t){return Oe(["top","bottom"],t)?"column":Oe(["left","right"],t)||e==="row"?"row":"column"}function uh(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Dt((t||{})[e],i[e],n.header[e])}function c2(e,t,n,r){const i={};for(const o of e){const s=uh(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const tO=["row","column"],nO=["header","footer"];function eRe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=c2(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=u2(t,a),u=ym(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...bK(u,l),...xK(l,u,o),...wK(r,i,t,jTe,yX)}}}function xK(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=yK(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function bK(e,t){const n=mK(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function tRe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of nO)if(n[i])for(const o of n[i]){const s=rRe(e,t,i,n,o);s!=null&&r.push(s)}return r}function nRe(e,t){const{sort:n}=e;return ta(n)?{field:ie(n,{expr:"datum"}),order:n.order??"ascending"}:W(n)?{field:lh(e,t,{expr:"datum"}),order:"ascending"}:{field:ie(e,{expr:"datum"}),order:n??"ascending"}}function bA(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=c2(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=NF({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=u2(t,a);return{text:{signal:l?_c(_c(l,"datum.label",u),"datum.value",ie(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...bK(o,c),...xK(c,o,s),...wK(n,e,t,BTe,vX)}}function rRe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=c2(["labelOrient"],s.header,a,t);(t==="row"&&!Oe(["top","bottom"],f)||t==="column"&&!Oe(["left","right"],f))&&(o=bA(s,t,a))}const l=Kr(e)&&!x0(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:nRe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const iRe={column:{start:0,end:1},row:{start:1,end:0}};function oRe(e,t){return iRe[t][e]}function sRe(e,t){const n={};for(const r of yi){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=c2(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=u2(r,s),l=oRe(o,a);l!==void 0&&(n[a]=l)}}return st(n)?void 0:n}function wK(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=uh(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function rO(e){return[...Ty(e,"width"),...Ty(e,"height"),...Ty(e,"childWidth"),...Ty(e,"childHeight")]}function Ty(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(r==null||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(an(s)&&Qc(a)){const l=e.scaleName(n);return Kr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[i4(l,a)]:[i4(l,a),{name:i,update:EK(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=uA(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function i4(e,t){const n=`${e}_step`;return me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function EK(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Dt(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${no(s)}, ${no(o)}) * ${e}_step`}function SK(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function _K(e,t){return G(e).reduce((n,r)=>({...n,...Lh({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>pt(i.value),invalidValueRef:void 0})}),{})}function CK(e,t){if(Kr(t))return e==="theta"?"independent":"shared";if(Uh(t))return"shared";if(cO(t))return It(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function iO(e,t){const n=e.scale[t],r=It(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Q(DAe(t)),"independent"):e[r][t]||"shared"}const aRe={...qTe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},kK=G(aRe);class lRe extends Ca{}const o4={symbols:uRe,gradient:cRe,labels:fRe,entries:dRe};function uRe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&u!=="trail";let f={...qke({},n,j$e),...ZX(n,{filled:c})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,g=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,p=d===void 0?AK(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Nr)delete f.fill;else if(Y(f.fill,"field"))h?delete f.fill:(f.fill=pt(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=pt(p??1));else if(W(f.fill)){const m=wA(a.fill??a.color)??s.fill??(c&&s.color);m&&(f.fill=pt(m))}}if(f.stroke){if(r==="stroke"||!c&&r===Nr)delete f.stroke;else if(Y(f.stroke,"field")||g)delete f.stroke;else if(W(f.stroke)){const m=Dt(wA(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(f.stroke={value:m})}}if(r!==Ea){const m=K(t)&&TK(n,i,t);m?f.opacity=[{test:m,...pt(p??1)},pt(l.legend.unselectedOpacity)]:p&&(f.opacity=pt(p))}return f={...f,...e},st(f)?void 0:f}function cRe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?AK(s.opacity)||o.opacity:void 0;return u&&(a.opacity=pt(u)),a={...a,...e},st(a)?void 0:a}function fRe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=K(t)?TK(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let f;Nc(c)?f=ro({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=ro({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&K(t)&&t.timeUnit===void 0&&(f=ro({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return st(d)?void 0:d}function dRe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function AK(e){return $K(e,(t,n)=>Math.max(t,n.value))}function wA(e){return $K(e,(t,n)=>Dt(t,n.value))}function $K(e,t){if(sTe(e))return le(e.condition).reduce(t,e.value);if(yo(e))return e.value}function TK(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=J(n.field);return r.map(o=>`(!length(data(${J(xt(o)+Rc)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const s4={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return zY(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return jY(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??xRe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??bRe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??pRe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>ld(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(ad(n)&&Go(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>hRe(t,e)};function hRe(e,t){const n=e.values;if(W(n))return ZY(t,n);if(me(n))return n}function pRe(e,t,n,r){if(t!=="shape"){const i=wA(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function gRe(e){const{legend:t}=e;return Dt(t.type,mRe(e))}function mRe({channel:e,timeUnit:t,scaleType:n}){if(ad(e)){if(Oe(["quarter","month","day"],t))return"symbol";if(Go(n))return"gradient"}return"symbol"}function yRe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??vRe(n,t)}function vRe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function xRe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Go(i))return n==="horizontal"?r==="top"||r==="bottom"?a4(t,"width",s,o):s:a4(t,"height",l,a)}function a4(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function bRe(e){if(Oe(["quantile","threshold","log","symlog"],e))return"greedy"}function NK(e){const t=St(e)?wRe(e):CRe(e);return e.component.legends=t,t}function wRe(e){const{encoding:t}=e,n={};for(const r of[Nr,...bX]){const i=Gt(t[r]);!i||!e.getScaleComponent(r)||r===Mr&&K(i)&&i.type===Ih||(n[r]=_Re(e,r))}return n}function ERe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function SRe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function _Re(e,t){var b;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new lRe({},ERe(e,t));FMe(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Gt(i[t]),f=K(c)?(b=sn(c.timeUnit))==null?void 0:b.unit:void 0,d=n.orient||o.legend.orient||"right",h=gRe({legend:n,channel:t,timeUnit:f,scaleType:u}),g=yRe({legend:n,legendType:h,orient:d,legendConfig:s}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:d,legendType:h,direction:g};for(const w of kK){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const S=w in s4?s4[w](p):n[w];if(S!==void 0){const E=SRe(S,w,n,e.fieldDef(t));(E||o.legend[w]===void 0)&&a.set(w,S,E)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const S=_K(m[w]??{},e),E=w in o4?o4[w](S,x):S;E!==void 0&&!st(E)&&(v[w]={...y!=null&&y.length&&K(c)?{name:`${xt(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!0}:{},update:y!=null&&y.length?{...E,cursor:{value:"pointer"}}:E})}return st(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function CRe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){NK(r);for(const i of G(r.component.legends))n.legend[i]=iO(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=MK(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of G(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function MK(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of kK){const c=Wl(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return kRe(f,d);case"title":return oY(f,d);case"type":return i=!0,Pr("symbol")}return o2(f,d,u,"legend")});e.setWithExplicit(u,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&Cx(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Cx(e.explicit,["encode","gradient"])),e}function kRe(e,t){return t.value==="circle"?t:e}function ARe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function RK(e){const t=e.component.legends,n={};for(const i of G(t)){const o=e.getScaleComponent(i),s=Qe(o.get("domains"));if(n[s])for(const a of n[s])MK(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return jt(n).flat().map(i=>$Re(i,e.config)).filter(i=>i!==void 0)}function $Re(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of bX)o[c]&&delete u[c]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&me(o.encode.labels.update.text)&&(u=_c(r,"datum.label",o.encode.labels.update.text.signal)),ARe(o,"labels","text",{signal:u})}return o}}function TRe(e){return Uh(e)||cO(e)?NRe(e):FK(e)}function NRe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),FK(e))}function FK(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Oe(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const MRe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class OK extends Ca{constructor(n,r,i,o){super({...r},{name:n});H(this,"specifiedProjection");H(this,"size");H(this,"data");H(this,"merged",!1);this.specifiedProjection=r,this.size=i,this.data=o}get isFit(){return!!this.data}}function PK(e){e.component.projection=St(e)?RRe(e):PRe(e)}function RRe(e){if(e.hasProjection){const t=hn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?FRe(e):void 0,o=new OK(e.projectionName(!0),{...hn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function FRe(e){const t=[],{encoding:n}=e;for(const r of[[ko,Co],[Ti,Ao]])(Gt(n[r[0]])||Gt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Mr)&&e.typedFieldDef(Mr).type===Ih&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(_t.Main)),t}function ORe(e,t){const n=GR(MRe,i=>!!(!fe(e.explicit,i)&&!fe(t.explicit,i)||fe(e.explicit,i)&&fe(t.explicit,i)&&Wr(e.get(i),t.get(i))));if(Wr(e.size,t.size)){if(n)return e;if(Wr(e.explicit,{}))return t;if(Wr(t.explicit,{}))return e}return null}function PRe(e){if(e.children.length===0)return;let t;for(const r of e.children)PK(r);const n=GR(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=ORe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new OK(r,t.specifiedProjection,t.size,Ee(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function DRe(e,t,n,r){if(E0(t,n)){const i=St(e)?e.axis(n)??e.legend(n)??{}:{},o=ie(t,{expr:"datum"}),s=ie(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ie(t,{binSuffix:"range",forAs:!0}),formula:v0(o,s,i.format,i.formatType,r)}}return{}}function DK(e,t){return`${QG(e)}_${t}`}function IRe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function oO(e,t,n){const r=Jw(n,void 0)??{},i=DK(r,t);return e.getName(`${i}_bins`)}function LRe(e){return"as"in e}function l4(e,t,n){let r,i;LRe(e)?r=se(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ie(e,{forAs:!0}),ie(e,{binSuffix:"end",forAs:!0})];const o={...Jw(t,void 0)},s=DK(o,e.field),{signal:a,extentSignal:l}=IRe(n,s);if(Uw(o.extent)){const c=o.extent;i=pK(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class ns extends tt{constructor(n,r){super(n);H(this,"bins");this.bins=r}clone(){return new ns(null,Ee(this.bins))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{if(ur(s)&&ut(s.bin)){const{key:l,binComponent:u}=l4(s,s.bin,r);o[l]={...u,...o[l],...DRe(r,s,a,r.config)}}return o},{});return st(i)?null:new ns(n,i)}static makeFromTransform(n,r,i){const{key:o,binComponent:s}=l4(r,r.bin,i);return new ns(n,{[o]:s})}merge(n,r){for(const i of G(n.bins))i in this.bins?(r(n.bins[i].signal,this.bins[i].signal),this.bins[i].as=Vo([...this.bins[i].as,...n.bins[i].as],Ie)):this.bins[i]=n.bins[i];for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}producedFields(){return new Set(jt(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(jt(this.bins).map(n=>n.field))}hash(){return`Bin ${Ie(this.bins)}`}assemble(){return jt(this.bins).flatMap(n=>{const r=[],[i,...o]=n.as,{extent:s,...a}=n.bin,l={type:"bin",field:$i(n.field),as:i,signal:n.signal,...Uw(s)?{extent:null}:{extent:s},...n.span?{span:{signal:`span(${n.span})`}}:{},...a};!s&&n.extentSignal&&(r.push({type:"extent",field:$i(n.field),signal:n.extentSignal}),l.extent={signal:n.extentSignal}),r.push(l);for(const u of o)for(let c=0;c<2;c++)r.push({type:"formula",expr:ie({field:i[c]},{expr:"datum"}),as:u[c]});return n.formula&&r.push({type:"formula",expr:n.formula,as:n.formulaAs}),r})}}function zRe(e,t,n,r){var o;const i=St(r)?r.encoding[_s(t)]:void 0;if(ur(n)&&St(r)&&qY(n,i,r.markDef,r.config)){e.add(ie(n,{})),e.add(ie(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=Ul({fieldDef:n,markDef:a,config:l});vm(s)&&u!==.5&&It(t)&&(e.add(ie(n,{suffix:s2})),e.add(ie(n,{suffix:a2}))),n.bin&&E0(n,t)&&e.add(ie(n,{binSuffix:"range"}))}else if(UG(t)){const s=BG(t);e.add(r.getName(s))}else e.add(ie(n));return ef(n)&&A$e((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function jRe(e,t){for(const n of G(t)){const r=t[n];for(const i of G(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ao extends tt{constructor(n,r,i){super(n);H(this,"dimensions");H(this,"measures");this.dimensions=r,this.measures=i}clone(){return new ao(null,new Set(this.dimensions),Ee(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(n,r){let i=!1;r.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const o={},s=new Set;return!i||(r.forEachFieldDef((a,l)=>{const{aggregate:u,field:c}=a;if(u)if(u==="count")o["*"]??(o["*"]={}),o["*"].count=new Set([ie(a,{forAs:!0})]);else{if(ha(u)||au(u)){const f=ha(u)?"argmin":"argmax",d=u[f];o[d]??(o[d]={}),o[d][f]=new Set([ie({op:f,field:d},{forAs:!0})])}else o[c]??(o[c]={}),o[c][u]=new Set([ie(a,{forAs:!0})]);Cs(l)&&r.scaleDomain(l)==="unaggregated"&&(o[c]??(o[c]={}),o[c].min=new Set([ie({field:c,aggregate:"min"},{forAs:!0})]),o[c].max=new Set([ie({field:c,aggregate:"max"},{forAs:!0})]))}else zRe(s,l,a,r)}),s.size+G(o).length===0)?null:new ao(n,s,o)}static makeFromTransform(n,r){var s;const i=new Set,o={};for(const a of r.aggregate){const{op:l,field:u,as:c}=a;l&&(l==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([c||ie(a,{forAs:!0})])):(o[u]??(o[u]={}),(s=o[u])[l]??(s[l]=new Set),o[u][l].add(c||ie(a,{forAs:!0}))))}for(const a of r.groupby??[])i.add(a);return i.size+G(o).length===0?null:new ao(n,i,o)}merge(n){return RG(this.dimensions,n.dimensions)?(jRe(this.measures,n.measures),!0):(ZAe("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...G(this.measures)])}producedFields(){const n=new Set;for(const r of G(this.measures))for(const i of G(this.measures[r])){const o=this.measures[r][i];o.size===0?n.add(`${i}_${r}`):o.forEach(n.add,n)}return n}hash(){return`Aggregate ${Ie({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],r=[],i=[];for(const s of G(this.measures))for(const a of G(this.measures[s]))for(const l of this.measures[s][a])i.push(l),n.push(a),r.push(s==="*"?null:$i(s));return{type:"aggregate",groupby:[...this.dimensions].map($i),ops:n,fields:r,as:i}}}class jh extends tt{constructor(n,r,i,o){super(n);H(this,"model");H(this,"name");H(this,"data");H(this,"column");H(this,"row");H(this,"facet");H(this,"childModel");this.model=r,this.name=i,this.data=o;for(const s of yi){const a=r.facet[s];if(a){const{bin:l,sort:u}=a;this[s]={name:r.getName(`${s}_domain`),fields:[ie(a),...ut(l)?[ie(a,{binSuffix:"end"})]:[]],...ta(u)?{sortField:u}:W(u)?{sortIndexField:lh(a,s)}:{}}}}this.childModel=r.child}hash(){let n="Facet";for(const r of yi)this[r]&&(n+=` ${r.charAt(0)}:${Ie(this[r])}`);return n}get fields(){var r;const n=[];for(const i of yi)(r=this[i])!=null&&r.fields&&n.push(...this[i].fields);return n}dependentFields(){const n=new Set(this.fields);for(const r of yi)this[r]&&(this[r].sortField&&n.add(this[r].sortField.field),this[r].sortIndexField&&n.add(this[r].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const r of Sa){const i=this.childModel.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(an(o)&&Qc(s)){const a=f2(this.childModel,r),l=uO(a);l?n[r]=l:Q(aF(r))}}}return n}assembleRowColumnHeaderData(n,r,i){const o={row:"y",column:"x",facet:void 0}[n],s=[],a=[],l=[];o&&i&&i[o]&&(r?(s.push(`distinct_${i[o]}`),a.push("max")):(s.push(i[o]),a.push("distinct")),l.push(`distinct_${i[o]}`));const{sortField:u,sortIndexField:c}=this[n];if(u){const{op:f=Kw,field:d}=u;s.push(d),a.push(f),l.push(ie(u,{forAs:!0}))}else c&&(s.push(c),a.push("max"),l.push(c));return{name:this[n].name,source:r??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...s.length?{fields:s,ops:a,as:l}:{}}]}}assembleFacetHeaderData(n){var u,c;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],s={};for(const f of tO){for(const d of nO){const h=((u=i[f])==null?void 0:u[d])??[];for(const g of h)if(((c=g.axes)==null?void 0:c.length)>0){s[f]=!0;break}}if(s[f]){const d=`length(data("${this.facet.name}"))`,h=f==="row"?r?{signal:`ceil(${d} / ${r})`}:1:r?{signal:`min(${d}, ${r})`}:{signal:d};o.push({name:`${this.facet.name}_${f}`,transform:[{type:"sequence",start:0,stop:h}]})}}const{row:a,column:l}=s;return(a||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,n)),o}assemble(){const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:s,facet:a}=this;if(o&&s&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(i.x??[],i.y??[]),u=l.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:u}]})}for(const l of[ea,Js])this[l]&&n.push(this.assembleRowColumnHeaderData(l,r,i));if(a){const l=this.assembleFacetHeaderData(i);l&&n.push(...l)}return n}}function u4(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function BRe(e,t){const n=KR(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=u4(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=u4(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Q(aAe(t)),null}function URe(e){const t={};return $1(e.filter,n=>{if(EY(n)){let r=null;hF(n)?r=jr(n.equal):gF(n)?r=jr(n.lte):pF(n)?r=jr(n.lt):mF(n)?r=jr(n.gt):yF(n)?r=jr(n.gte):vF(n)?r=n.range[0]:xF(n)&&(r=(n.oneOf??n.in)[0]),r&&(Zc(r)?t[n.field]="date":He(r)?t[n.field]="number":se(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function WRe(e){const t={};function n(r){ih(r)?t[r.field]="date":r.type==="quantitative"&&Oke(r.aggregate)?t[r.field]="number":Zd(r.field)>1?r.field in t||(t[r.field]="flatten"):ef(r)&&ta(r.sort)&&Zd(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((St(e)||Kr(e))&&e.forEachFieldDef((r,i)=>{if(ur(r))n(r);else{const o=Xc(i),s=e.fieldDef(o);n({...r,type:s.type})}}),St(e)){const{mark:r,markDef:i,encoding:o}=e;if(lu(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];K(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function qRe(e){const t={};if(St(e)&&e.component.selection)for(const n of G(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Zd(i.field)>1&&(t[i.field]="flatten")}return t}class Dn extends tt{constructor(n,r){super(n);H(this,"_parse");this._parse=r}clone(){return new Dn(null,Ee(this._parse))}hash(){return`Parse ${Ie(this._parse)}`}static makeExplicit(n,r,i){var a;let o={};const s=r.data;return!Cl(s)&&((a=s==null?void 0:s.format)!=null&&a.parse)&&(o=s.format.parse),this.makeWithAncestors(n,o,{},i)}static makeWithAncestors(n,r,i,o){for(const l of G(i)){const u=o.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===i[l]||u.value==="derived"||i[l]==="flatten"?delete i[l]:Q(xL(l,i[l],u.value)))}for(const l of G(r)){const u=o.get(l);u!==void 0&&(u===r[l]?delete r[l]:Q(xL(l,r[l],u)))}const s=new Ca(r,i);o.copyAll(s);const a={};for(const l of G(s.combine())){const u=s.get(l);u!==null&&(a[l]=u)}return G(a).length===0||o.parseNothing?null:new Dn(n,a)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const r of G(this._parse)){const i=this._parse[r];Zd(r)===1&&(n[r]=i)}return n}producedFields(){return new Set(G(this._parse))}dependentFields(){return new Set(G(this._parse))}assembleTransforms(n=!1){return G(this._parse).filter(r=>n?Zd(r)>1:!0).map(r=>{const i=BRe(r,this._parse[r]);return i?{type:"formula",expr:i,as:Ph(r)}:null}).filter(r=>r!==null)}}class ql extends tt{clone(){return new ql(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([xo])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:xo}}}class C0 extends tt{constructor(n,r){super(n);H(this,"params");this.params=r}clone(){return new C0(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ie(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class k0 extends tt{constructor(n,r){super(n);H(this,"params");this.params=r}clone(){return new k0(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ie(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Fc extends tt{constructor(n){super(null);H(this,"_data");H(this,"_name");H(this,"_generator");n??(n={name:"source"});let r;if(Cl(n)||(r=n.format?{...Xr(n.format,["parse"])}:{}),xm(n))this._data={values:n.values};else if(oh(n)){if(this._data={url:n.url},!r.type){let i=/(?:\.([^.]+))?$/.exec(n.url)[1];Oe(["json","csv","tsv","dsv","topojson"],i)||(i="json"),r.type=i}}else zX(n)?this._data={values:[{type:"Sphere"}]}:(IX(n)||Cl(n))&&(this._data={});this._generator=Cl(n),n.name&&(this._name=n.name),r&&!st(r)&&(this._data.format=r)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function sO(e){return e instanceof Fc||e instanceof C0||e instanceof k0}var bd;class aO{constructor(){Ue(this,bd);Se(this,bd,!1)}setModified(){Se(this,bd,!0)}get modifiedFlag(){return q(this,bd)}}bd=new WeakMap;class tf extends aO{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class lO extends aO{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class HRe extends lO{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of G(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class VRe extends lO{constructor(n){super();H(this,"requiresSelectionId");this.requiresSelectionId=n&&eO(n)}run(n){n instanceof ql&&(this.requiresSelectionId&&(sO(n.parent)||n.parent instanceof ao||n.parent instanceof Dn)||(this.setModified(),n.remove()))}}class GRe extends aO{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof es&&(r=t.producedFields(),YR(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class YRe extends lO{constructor(){super()}run(t){t instanceof Cr&&!t.isRequired()&&(this.setModified(),t.remove())}}class XRe extends tf{run(t){if(!sO(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Dn)if(t instanceof Dn)this.setModified(),t.merge(n);else{if(XR(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class KRe extends tf{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Dn);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of G(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!st(i)){this.setModified();const s=new Dn(t,i);for(const a of n){if(a instanceof Dn)for(const l of G(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Dn&&G(a.parse).length===0&&a.remove()}}}}}class QRe extends tf{run(t){t instanceof Cr||t.numChildren()>0||t instanceof jh||t instanceof Fc||(this.setModified(),t.remove())}}class ZRe extends tf{run(t){const n=t.children.filter(i=>i instanceof es),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class JRe extends tf{run(t){const n=t.children.filter(i=>i instanceof ao),r={};for(const i of n){const o=Ie(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of G(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class eFe extends tf{constructor(n){super();H(this,"model");this.model=n}run(n){const r=!(sO(n)||n instanceof zh||n instanceof Dn||n instanceof ql),i=[],o=[];for(const s of n.children)s instanceof ns&&(r&&!XR(n.producedFields(),s.dependentFields())?i.push(s):o.push(s));if(i.length>0){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof ns?n.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(o.length>1){const s=o.pop();for(const a of o)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class tFe extends tf{run(t){const n=[...t.children];if(!Qd(n,s=>s instanceof Cr)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Cr){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Cr)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class nf extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r}clone(){return new nf(null,Ee(this.transform))}addDimensions(n){this.transform.groupby=Vo(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??ie(n)}hash(){return`JoinAggregateTransform ${Ie(this.transform)}`}assemble(){const n=[],r=[],i=[];for(const s of this.transform.joinaggregate)r.push(s.op),i.push(this.getDefaultName(s)),n.push(s.field===void 0?null:s.field);const o=this.transform.groupby;return{type:"joinaggregate",as:i,ops:r,fields:n,...o!==void 0?{groupby:o}:{}}}}class ch extends tt{constructor(n,r){super(n);H(this,"filter");this.filter=r}clone(){return new ch(null,{...this.filter})}static make(n,r,i){const{config:o,markDef:s}=r,{marks:a,scales:l}=i;if(a==="include-invalid-values"&&l==="include-invalid-values")return null;const u=r.reduceFieldDef((c,f,d)=>{const h=Cs(d)&&r.getScaleComponent(d);if(h){const g=h.get("type"),{aggregate:p}=f,m=AF({scaleChannel:d,markDef:s,config:o,scaleType:g,isCountAggregate:Bw(p)});m!=="show"&&m!=="always-valid"&&(c[f.field]=f)}return c},{});return G(u).length?new ch(n,u):null}dependentFields(){return new Set(G(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ie(this.filter)}`}assemble(){const n=G(this.filter).reduce((r,i)=>{const o=this.filter[i],s=ie(o,{expr:"datum"});return o!==null&&(o.type==="temporal"?r.push(`(isDate(${s}) || (${EA(s)}))`):o.type==="quantitative"&&r.push(EA(s))),r},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}function EA(e){return`isValid(${e}) && isFinite(+${e})`}function nFe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ie(r);return i&&t.push(i),t},[])}function rFe(e){return W(e)&&e.every(t=>se(t))&&e.length>1}class ra extends tt{constructor(n,r){super(n);H(this,"_stack");this._stack=r}clone(){return new ra(null,Ee(this._stack))}static makeFromTransform(n,r){const{stack:i,groupby:o,as:s,offset:a="zero"}=r,l=[],u=[];if(r.sort!==void 0)for(const d of r.sort)l.push(d.field),u.push(Dt(d.order,"ascending"));const c={field:l,order:u};let f;return rFe(s)?f=s:se(s)?f=[s,`${s}_end`]:f=[`${r.stack}_start`,`${r.stack}_end`],new ra(n,{dimensionFieldDefs:[],stackField:i,groupby:o,offset:a,sort:c,facetby:[],as:f})}static makeFromEncoding(n,r){const i=r.stack,{encoding:o}=r;if(!i)return null;const{groupbyChannels:s,fieldChannel:a,offset:l,impute:u}=i,c=s.map(g=>{const p=o[g];return vo(p)}).filter(g=>!!g),f=nFe(r),d=r.encoding.order;let h;if(W(d)||K(d))h=nY(d);else{const g=HY(d)?d.sort:a==="y"?"descending":"ascending";h=f.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(g)),p),{field:[],order:[]})}return new ra(n,{dimensionFieldDefs:c,stackField:r.vgField(a),facetby:[],stackby:f,sort:h,offset:l,impute:u,as:[r.vgField(a,{suffix:"start",forAs:!0}),r.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ie(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:r,groupby:i}=this._stack;return n.length>0?n.map(o=>o.bin?r?[ie(o,{binSuffix:"mid"})]:[ie(o,{}),ie(o,{binSuffix:"end"})]:[ie(o)]).flat():i??[]}assemble(){const n=[],{facetby:r,dimensionFieldDefs:i,stackField:o,stackby:s,sort:a,offset:l,impute:u,as:c}=this._stack;if(u)for(const f of i){const{bandPosition:d=.5,bin:h}=f;if(h){const g=ie(f,{expr:"datum"}),p=ie(f,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${EA(g)} ? ${d}*${g}+${1-d}*${p} : ${g}`,as:ie(f,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:o,groupby:[...s,...r],key:ie(f,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...r],field:o,sort:a,as:c,offset:l}),n}}class Bh extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r}clone(){return new Bh(null,Ee(this.transform))}addDimensions(n){this.transform.groupby=Vo(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(r=>n.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??ie(n)}hash(){return`WindowTransform ${Ie(this.transform)}`}assemble(){const n=[],r=[],i=[],o=[];for(const d of this.transform.window)r.push(d.op),i.push(this.getDefaultName(d)),o.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&r.every(d=>oF(d)))return{type:"joinaggregate",as:i,ops:r,fields:n,...a!==void 0?{groupby:a}:{}};const l=[],u=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)l.push(d.field),u.push(d.order??"ascending");const c={field:l,order:u},f=this.transform.ignorePeers;return{type:"window",params:o,as:i,ops:r,fields:n,sort:c,...f!==void 0?{ignorePeers:f}:{},...a!==void 0?{groupby:a}:{},...s!==void 0?{frame:s}:{}}}}function iFe(e){function t(n){if(!(n instanceof jh)){const r=n.clone();if(r instanceof Cr){const i=_A+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ao||r instanceof ra||r instanceof Bh||r instanceof nf)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function SA(e){if(e instanceof jh)if(e.numChildren()===1&&!(e.children[0]instanceof Cr)){const t=e.children[0];(t instanceof ao||t instanceof ra||t instanceof Bh||t instanceof nf)&&t.addDimensions(e.fields),t.swapWithParent(),SA(e)}else{const t=e.model.component.data.main;IK(t);const n=iFe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(SA)}function IK(e){if(e instanceof Cr&&e.type===_t.Main&&e.numChildren()===1){const t=e.children[0];t instanceof jh||(t.swapWithParent(),IK(e))}}const _A="scale_",Ny=5;function CA(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!CA(t.children))return!1}return!0}function Li(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function c4(e,t,n){let r=e.sources,i=!1;return i=Li(new YRe,r)||i,i=Li(new VRe(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Li(new QRe,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Li(new XRe,r)||i,i=Li(new eFe(t),r)||i,i=Li(new GRe,r)||i,i=Li(new KRe,r)||i,i=Li(new JRe,r)||i,i=Li(new ZRe,r)||i,i=Li(new HRe,r)||i,i=Li(new tFe,r)||i),e.sources=r,i}function oFe(e,t){CA(e.sources);let n=0,r=0;for(let i=0;i<Ny&&c4(e,t,!0);i++)n++;e.sources.map(SA);for(let i=0;i<Ny&&c4(e,t,!1);i++)r++;CA(e.sources),Math.max(n,r)===Ny&&Q(`Maximum optimization runs(${Ny}) reached.`)}class Zt{constructor(t){H(this,"signal");Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Zt(()=>t(n))}}function LK(e){St(e)?sFe(e):aFe(e)}function sFe(e){const t=e.component.scales;for(const n of G(t)){const r=uFe(e,n);if(t[n].setWithExplicit("domains",r),fFe(e,n),e.component.data.isFaceted){let o=e;for(;!Kr(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)Ys(a)&&(a.data=_A+a.data.replace(_A,""))}}}function aFe(e){for(const n of e.children)LK(n);const t=e.component.scales;for(const n of G(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Wl(r,s.getWithExplicit("domains"),"domains","scale",kA);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Q(eAe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function lFe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=f4(t,n);if(!i){Q(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=f4(t,n);if(i)return"unaggregated"}return e}function uFe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=lFe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Gt(r.x2)?Gt(r.x)?Wl(Ia(n,i,e,"x"),Ia(n,i,e,"x2"),"domain","scale",kA):Ia(n,i,e,"x2"):t==="y"&&Gt(r.y2)?Gt(r.y)?Wl(Ia(n,i,e,"y"),Ia(n,i,e,"y2"),"domain","scale",kA):Ia(n,i,e,"y2"):Ia(n,i,e,t)}function cFe(e,t,n){return e.map(r=>({signal:`{data: ${e2(r,{timeUnit:n,type:t})}}`}))}function TS(e,t,n){var i;const r=(i=sn(n))==null?void 0:i.unit;return t==="temporal"||r?cFe(e,t,r):[e]}function Ia(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=Gt(i[r]),{type:c}=u,f=u.timeUnit,d=rMe({invalid:cs("invalid",o,a),isPath:lu(s)});if(k$e(t)){const p=Ia(e,void 0,n,r),m=TS(t.unionWith,c,f);return Po([...m,...p.value])}else{if(me(t))return Po([t]);if(t&&t!=="unaggregated"&&!$Y(t))return Po(TS(t,c,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Pr([[0,1]]);const p=n.requestDataName(d);return Pr([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const h=Cs(r)&&K(u)?dFe(n,r,e):void 0;if(ks(u)){const p=TS([u.datum],c,f);return Pr(p)}const g=u;if(t==="unaggregated"){const{field:p}=u;return Pr([{data:n.requestDataName(d),field:ie({field:p,aggregate:"min"})},{data:n.requestDataName(d),field:ie({field:p,aggregate:"max"})}])}else if(ut(g.bin)){if(an(e))return Pr(e==="bin-ordinal"?[]:[{data:mm(h)?n.requestDataName(d):n.requestDataName(_t.Raw),field:n.vgField(r,E0(g,r)?{binSuffix:"range"}:{}),sort:h===!0||!ae(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:p}=g;if(ut(p)){const m=oO(n,g.field,p);return Pr([new Zt(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return Pr([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(g.timeUnit&&Oe(["time","utc"],e)){const p=i[_s(r)];if(qY(g,p,o,a)){const m=n.requestDataName(d),y=Ul({fieldDef:g,fieldDef2:p,markDef:o,config:a}),v=vm(s)&&y!==.5&&It(r);return Pr([{data:m,field:n.vgField(r,v?{suffix:s2}:{})},{data:m,field:n.vgField(r,{suffix:v?a2:"end"})}])}}return Pr(h?[{data:mm(h)?n.requestDataName(d):n.requestDataName(_t.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function NS(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Kw),...r?{field:$i(r)}:{},...i?{order:i}:{}}}function fFe(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=$Y(r)?r:void 0,s=Kc(i)&&Uw(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function dFe(e,t,n){if(!an(n))return;const r=e.fieldDef(t),i=r.sort;if(UY(i))return{op:"min",field:lh(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(ta(i)){const a=o&&!s.has(i.field);return NS(i,a)}else if(rTe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=o&&!s.has(f);if(ha(c)||au(c))return NS({field:ie(u),order:l},d);if(oF(c)||!c)return NS({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Oe(["ascending",void 0],i))return!0}}function f4(e,t){const{aggregate:n,type:r}=e;return n?se(n)&&!Dke.has(n)?{valid:!1,reason:TAe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:NAe(e)}:{valid:!0}:{valid:!1,reason:$Ae(e)}}function kA(e,t,n,r){return e.explicit&&t.explicit&&Q(PAe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function hFe(e){const t=Vo(e.map(s=>{if(Ys(s)){const{sort:a,...l}=s;return l}return s}),Ie),n=Vo(e.map(s=>{if(Ys(s)){const a=s.sort;return a!==void 0&&!mm(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Ie);if(t.length===0)return;if(t.length===1){const s=e[0];if(Ys(s)&&n.length>0){let a=n[0];if(n.length>1){Q(wL);const l=n.filter(u=>ae(u)&&"op"in u&&u.op!=="min");n.every(u=>ae(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(ae(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=Vo(n.map(s=>mm(s)||!("op"in s)||se(s.op)&&fe(Rke,s.op)?s:(Q(IAe(s)),!0)),Ie);let i;r.length===1?i=r[0]:r.length>1&&(Q(wL),i=!0);const o=Vo(e.map(s=>Ys(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function uO(e){if(Ys(e)&&se(e.field))return e.field;if(Ike(e)){let t;for(const n of e.fields)if(Ys(n)&&se(n.field)){if(!t)t=n.field;else if(t!==n.field)return Q(LAe),t}return Q(zAe),t}else if(Lke(e)){Q(jAe);const t=e.fields[0];return se(t)?t:void 0}}function f2(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ys(i)&&(i.data=e.lookupDataSource(i.data)),i));return hFe(r)}function zK(e){return Uh(e)||cO(e)?e.children.reduce((t,n)=>t.concat(zK(n)),d4(e)):d4(e)}function d4(e){return G(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...f}=i,d=pFe(i.range,o,n,e),h=f2(e,n),g=a?pMe(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...g?{domainRaw:g}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function pFe(e,t,n,r){if(It(n)){if(Qc(e))return{step:{signal:`${t}_step`}}}else if(ae(e)&&Ys(e))return{...e,data:r.lookupDataSource(e.data)};return e}class jK extends Ca{constructor(n,r){super({},{name:n});H(this,"merged",!1);this.setWithExplicit("type",r)}domainHasZero(){const n=this.get("type");if(Oe([pn.LOG,pn.TIME,pn.UTC],n))return"definitely-not";const r=this.get("zero");if(r===!0||r===void 0&&Oe([pn.LINEAR,pn.SQRT,pn.POW],n))return"definitely";const i=this.get("domains");if(i.length>0){let o=!1,s=!1,a=!1;for(const l of i){if(W(l)){const u=l[0],c=l[l.length-1];if(He(u)&&He(c))if(u<=0&&c>=0){o=!0;continue}else{s=!0;continue}}a=!0}if(o)return"definitely";if(s&&!a)return"definitely-not"}return"maybe"}}const gFe=["range","scheme"];function mFe(e){const t=e.component.scales;for(const n of iF){const r=t[n];if(!r)continue;const i=yFe(n,e);r.setWithExplicit("range",i)}}function h4(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=Rr(t),s=e.getName(o);if(ae(r)&&r.binned&&r.step!==void 0)return new Zt(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(ut(r)){const a=oO(e,i,r);return new Zt(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function yFe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of gFe)if(n[f]!==void 0){const d=sA(o,f),h=TY(e,f);if(!d)Q(uY(o,f,e));else if(h)Q(h);else switch(f){case"range":{const g=n.range;if(W(g)){if(It(e))return Po(g.map(p=>{if(p==="width"||p==="height"){const m=t.getName(p),y=t.getSignalName.bind(t);return Zt.fromName(y,m)}return p}))}else if(ae(g))return Po({data:t.requestDataName(_t.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return Po(g)}case"scheme":return Po(vFe(n[f]))}}const s=e===bt||e==="xOffset"?"width":"height",a=r[s];if(ds(a)){if(It(e))if(an(o)){const f=UK(a,t,e);if(f)return Po({step:f})}else Q(cY(s));else if(g0(e)){const f=e===tu?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const g=WK(a,o);if(g)return Po(g)}}}const{rangeMin:l,rangeMax:u}=n,c=xFe(e,t);return(l!==void 0||u!==void 0)&&sA(o,"rangeMin")&&W(c)&&c.length===2?Po([l??c[0],u??c[1]]):Pr(c)}function vFe(e){return C$e(e)?{scheme:e.name,...Xr(e,["name"])}:{scheme:e}}function BK(e,t,n,{center:r}={}){const i=Rr(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===un&&mo(n)?r?[Zt.fromName(a=>`${s(a)}/2`,o),Zt.fromName(a=>`-${s(a)}/2`,o)]:[Zt.fromName(s,o),0]:r?[Zt.fromName(a=>`-${s(a)}/2`,o),Zt.fromName(a=>`${s(a)}/2`,o)]:[0,Zt.fromName(s,o)]}function xFe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=Gt(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case bt:case un:{if(Oe(["point","band"],l)){const f=qK(e,n,r.view);if(ds(f))return{step:UK(f,t,e)}}return BK(e,t,l)}case tu:case Dh:return bFe(e,t,l);case wa:{const f=SFe(i,r),d=_Fe(i,n,t,r);return th(l)?EFe(f,d,wFe(l,r,u,e)):[f,d]}case Mi:return[0,Math.PI*2];case Yc:return[0,360];case _o:return[0,new Zt(()=>{const f=t.getSignalName(Kr(t.parent)?"child_width":"width"),d=t.getSignalName(Kr(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case nu:return{step:1e3/r.scale.framesPerSecond};case ou:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case su:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Mr:return"symbol";case Nr:case Es:case Ss:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ea:case ru:case iu:return[r.scale.minOpacity,r.scale.maxOpacity]}}function UK(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=eF(n),s=r[o];if(EX({step:e,offsetIsDiscrete:_e(s)&&bF(s.type)})==="offset"&&nX(r,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Wke(f)})`}}else return e.step}function WK(e,t){if(EX({step:e,offsetIsDiscrete:an(t)})==="offset")return{step:e.step}}function bFe(e,t,n){const r=e===tu?"x":"y",i=t.getScaleComponent(r);if(!i)return BK(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=qK(r,t.size,t.config.view);if(ds(u)){const c=WK(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(K(u)&&u.timeUnit){const c=bY(u.timeUnit,g=>`scale('${s}', ${g})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Ul({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(f){const g=me(f)?`${f.signal}/2${h}`:`${f/2+d}`,p=me(f)?`(1 - ${f.signal}/2)${h}`:`${1-f/2+d}`;return[{signal:`${g} * (${c})`},{signal:`${p} * (${c})`}]}return[0,{signal:c}]}return NG(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function qK(e,t,n){const r=e===bt?"width":"height",i=t[r];return i!==void 0?i:Ox(n,r)}function wFe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&W(n)?n.length+1:(Q(XAe(r)),3)}}function EFe(e,t,n){const r=()=>{const i=no(t),o=no(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return me(t)?new Zt(r):{signal:r()}}function SFe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Ww("size",e))}const p4=.95;function _Fe(e,t,n,r){const i={x:h4(n,"x"),y:h4(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=g4(t,i,r.view);return He(o)?o-1:new Zt(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=g4(t,i,r.view);return He(o)?Math.pow(p4*o,2):new Zt(()=>`pow(${p4} * ${o.signal}, 2)`)}}throw new Error(Ww("size",e))}function g4(e,t,n){const r=ds(e.width)?e.width.step:cA(n,"width"),i=ds(e.height)?e.height.step:cA(n,"height");return t.x||t.y?new Zt(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function HK(e,t){St(e)?CFe(e,t):GK(e,t)}function CFe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of G(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),f=Gt(i[a]),d=l[t],h=c.get("type"),g=c.get("padding"),p=c.get("paddingInner"),m=sA(h,t),y=TY(a,t);if(d!==void 0&&(m?y&&Q(y):Q(uY(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,x=f.type;switch(t){case"domainMax":case"domainMin":Zc(l[t])||x==="temporal"||v?u.set(t,{signal:e2(l[t],{type:x,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=Y(m4,t)?m4[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:g,scalePaddingInner:p,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:rX(i,a),hasSecondaryRangeChannel:!!i[_s(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const m4={bins:({model:e,fieldOrDatumDef:t})=>K(t)?kFe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>AFe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>$Fe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>TFe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>NFe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>MFe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=K(e)?e.sort:void 0;return RFe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>FFe(e,t,n,r,i,o.scale,s)};function VK(e){St(e)?mFe(e):GK(e,"range")}function GK(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?VK(r):HK(r,t);for(const r of G(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Wl(i,a,t,"scale",DX((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function kFe(e,t){const n=t.bin;if(ut(n)){const r=oO(e,t.field,n);return new Zt(()=>e.getSignalName(r))}else if(dn(n)&&Kc(n)&&n.step!==void 0)return{step:n.step}}function AFe(e,t){if(Oe([Nr,Es,Ss],e)&&t!=="nominal")return"hcl"}function $Fe(e,t,n,r,i,o){var s;if(!((s=vo(o))!=null&&s.bin||W(n)||i!=null||r!=null||Oe([pn.TIME,pn.UTC],e)))return It(t)?!0:void 0}function TFe(e,t,n,r,i,o){if(It(e)){if(Go(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(K(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===pn.POINT)return n.pointPadding}}function NFe(e,t,n,r,i,o=!1){if(e===void 0){if(It(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return o?c:Dt(s,n==="bar"?a:n==="tick"?u:l)}else if(g0(t)&&r===pn.BAND)return i.offsetBandPaddingInner}}function MFe(e,t,n,r,i,o=!1){if(e===void 0){if(It(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===pn.BAND)return Dt(s,me(r)?{signal:`${r.signal}/2`}:r/2)}else if(g0(t)){if(n===pn.POINT)return .5;if(n===pn.BAND)return i.offsetBandPaddingOuter}}}function RFe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return mo(e)&&t==="descending"?me(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(mo(e)&&t==="descending")return!0}function FFe(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&mo(i)){if(W(n)){const l=n[0],u=n[n.length-1];if(He(l)&&l<=0&&He(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!th(i))return!0;if(!(K(t)&&t.bin)&&Oe([...Sa,...Ske],e)){const{orient:l,type:u}=r;return Oe(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Oe(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function OFe(e,t,n,r,i=!1){const o=PFe(t,n,r,i),{type:s}=e;return Cs(t)?s!==void 0?R$e(t,s)?K(n)&&!M$e(s,n.type)?(Q(FAe(s,o)),o):s:(Q(RAe(t,s,o)),o):o:null}function PFe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(ad(e)||vS(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Q(xS(e,"ordinal")),"ordinal";if(yS(e))return"band";if(It(e)||g0(e)){if(Oe(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in rF)return"band";const o=n[Rr(e)];return Tc(o)||rh(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return ad(e)?"time":vS(e)==="discrete"?(Q(xS(e,"temporal")),"ordinal"):K(t)&&t.timeUnit&&sn(t.timeUnit).utc?"utc":yS(e)?"band":"time";case"quantitative":return ad(e)?K(t)&&ut(t.bin)?"bin-ordinal":"linear":vS(e)==="discrete"?(Q(xS(e,"quantitative")),"ordinal"):yS(e)?"band":"linear";case"geojson":return}throw new Error(aY(t.type))}function DFe(e,{ignoreRange:t}={}){YK(e),LK(e);for(const n of N$e)HK(e,n);t||VK(e)}function YK(e){St(e)?e.component.scales=IFe(e):e.component.scales=zFe(e)}function IFe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of iF){const s=Gt(t[o]);if(s&&n===RY&&o===Mr&&s.type===Ih)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=rX(t,o),u=OFe(a,o,s,r,l);i[o]=new jK(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const LFe=DX((e,t)=>SL(e)-SL(t));function zFe(e){var i;const t=e.component.scales={},n={},r=e.component.resolve;for(const o of e.children){YK(o);for(const s of G(o.component.scales))if((i=r.scale)[s]??(i[s]=CK(s,e)),r.scale[s]==="shared"){const a=n[s],l=o.component.scales[s].getWithExplicit("type");a?b$e(a.value,l.value)?n[s]=Wl(a,l,"type","scale",LFe):(r.scale[s]="independent",delete n[s]):n[s]=l}}for(const o of G(n)){const s=e.scaleName(o,!0),a=n[o];t[o]=new jK(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return t}class MS{constructor(){H(this,"nameMap");this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function St(e){return(e==null?void 0:e.type)==="unit"}function Kr(e){return(e==null?void 0:e.type)==="facet"}function cO(e){return(e==null?void 0:e.type)==="concat"}function Uh(e){return(e==null?void 0:e.type)==="layer"}class fO{constructor(t,n,r,i,o,s,a){H(this,"type");H(this,"parent");H(this,"config");H(this,"name");H(this,"size");H(this,"title");H(this,"description");H(this,"data");H(this,"transforms");H(this,"layout");H(this,"scaleNameMap");H(this,"projectionNameMap");H(this,"signalNameMap");H(this,"component");H(this,"view");this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=hn(a),this.name=t.name??i,this.title=Ha(t.title)?{text:t.title}:t.title?hn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new MS,this.projectionNameMap=r?r.projectionNameMap:new MS,this.signalNameMap=r?r.signalNameMap:new MS,this.data=t.data,this.description=t.description,this.transforms=HNe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:XTe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Qw(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ca,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Ee(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){DFe(this)}parseProjection(){PK(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){NK(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of G(r)){const s=r[o];s!==void 0&&(i[o]=pt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=pt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:st(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=sRe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of yi)t[r].title&&n.push(eRe(this,r));for(const r of tO)n=n.concat(tRe(this,r));return n}assembleAxes(){return BMe(this.component.axes,this.config)}assembleLegends(){return RK(this)}assembleProjections(){return TRe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...ZG(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Oe(["unit","layer"],this.type)?Oe(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),st(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Kr(this.parent)?zK(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return xt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(_t[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Kr(this.parent)){const n=SK(t),r=jw(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(an(o)&&Qc(s)){const a=i.get("name"),l=f2(this,r),u=uO(l);if(u){const c=ie({aggregate:"distinct",field:u},{expr:"datum"});return{signal:EK(a,i,c)}}else return Q(aF(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(qG(t)&&Cs(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Yke(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class XK extends fO{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ie(r,n)}reduceFieldDef(t,n){return _Te(this.getMapping(),(r,i,o)=>{const s=vo(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){DF(this.getMapping(),(r,i)=>{const o=vo(r);o&&t(o,i)},n)}}class d2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r,this.transform=Ee(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const o=this.transform.resolve??"shared";this.transform.resolve=o}clone(){return new d2(null,Ee(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ie(this.transform)}`}assemble(){const{density:n,...r}=this.transform,i={type:"kde",field:n,...r};return i.resolve=this.transform.resolve,i}}class h2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r,this.transform=Ee(r)}clone(){return new h2(null,Ee(this.transform))}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ie(this.transform)}`}assemble(){const{extent:n,param:r}=this.transform;return{type:"extent",field:n,signal:r}}}class p2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r,this.transform=Ee(r);const{flatten:i,as:o=[]}=this.transform;this.transform.as=i.map((s,a)=>o[a]??s)}clone(){return new p2(this.parent,Ee(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ie(this.transform)}`}assemble(){const{flatten:n,as:r}=this.transform;return{type:"flatten",fields:n,as:r}}}class g2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r,this.transform=Ee(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}clone(){return new g2(null,Ee(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ie(this.transform)}`}assemble(){const{fold:n,as:r}=this.transform;return{type:"fold",fields:n,as:r}}}class cd extends tt{constructor(n,r,i,o){super(n);H(this,"fields");H(this,"geojson");H(this,"signal");this.fields=r,this.geojson=i,this.signal=o}clone(){return new cd(null,Ee(this.fields),this.geojson,this.signal)}static parseAll(n,r){if(r.component.projection&&!r.component.projection.isFit)return n;let i=0;for(const o of[[ko,Co],[Ti,Ao]]){const s=o.map(a=>{const l=Gt(r.encoding[a]);return K(l)?l.field:ks(l)?{expr:`${l.datum}`}:yo(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(n=new cd(n,s,null,r.getName(`geojson_${i++}`)))}if(r.channelHasField(Mr)){const o=r.typedFieldDef(Mr);o.type===Ih&&(n=new cd(n,null,o.field,r.getName(`geojson_${i++}`)))}return n}dependentFields(){const n=(this.fields??[]).filter(se);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ie(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class bm extends tt{constructor(n,r,i,o){super(n);H(this,"projection");H(this,"fields");H(this,"as");this.projection=r,this.fields=i,this.as=o}clone(){return new bm(null,this.projection,Ee(this.fields),Ee(this.as))}static parseAll(n,r){if(!r.projectionName())return n;for(const i of[[ko,Co],[Ti,Ao]]){const o=i.map(a=>{const l=Gt(r.encoding[a]);return K(l)?l.field:ks(l)?{expr:`${l.datum}`}:yo(l)?{expr:`${l.value}`}:void 0}),s=i[0]===Ti?"2":"";(o[0]||o[1])&&(n=new bm(n,r.projectionName(),o,[r.getName(`x${s}`),r.getName(`y${s}`)]))}return n}dependentFields(){return new Set(this.fields.filter(se))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ie(this.fields)} ${Ie(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ic extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r}clone(){return new ic(null,Ee(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:r=0,stop:i,step:o}=n;return{signal:`sequence(${[r,i,...o?[o]:[]].join(",")})`}}static makeFromTransform(n,r){return new ic(n,r)}static makeFromEncoding(n,r){const i=r.encoding,o=i.x,s=i.y;if(K(o)&&K(s)){const a=o.impute?o:s.impute?s:void 0;if(a===void 0)return;const l=o.impute?s:s.impute?o:void 0,{method:u,value:c,frame:f,keyvals:d}=a.impute,h=sX(r.mark,i);return new ic(n,{impute:a.field,key:l.field,...u?{method:u}:{},...c!==void 0?{value:c}:{},...f?{frame:f}:{},...d!==void 0?{keyvals:d}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${Ie(this.transform)}`}assemble(){const{impute:n,key:r,keyvals:i,method:o,groupby:s,value:a,frame:l=[null,null]}=this.transform,u={type:"impute",field:n,key:r,...i?{keyvals:kNe(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!o||o==="value"?a:null};if(o&&o!=="value"){const c={type:"window",as:[`imputed_${n}_value`],ops:[o],fields:[n],frame:l,ignorePeers:!1,...s?{groupby:s}:{}},f={type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n};return[u,c,f]}else return[u]}}class m2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r,this.transform=Ee(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.loess]}clone(){return new m2(null,Ee(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ie(this.transform)}`}assemble(){const{loess:n,on:r,...i}=this.transform;return{type:"loess",x:r,y:n,...i}}}class wm extends tt{constructor(n,r,i){super(n);H(this,"transform");H(this,"secondary");this.transform=r,this.secondary=i}clone(){return new wm(null,Ee(this.transform),this.secondary)}static make(n,r,i,o){const s=r.component.data.sources,{from:a}=i;let l=null;if(ANe(a)){let u=ZK(a.data,s);u||(u=new Fc(a.data),s.push(u));const c=r.getName(`lookup_${o}`);l=new Cr(u,c,_t.Lookup,r.component.data.outputNodeRefCounts),r.component.data.outputNodes[c]=l}else if($Ne(a)){const u=a.param;i={as:u,...i};let c;try{c=r.getSelectionComponent(xt(u),u)}catch{throw new Error(Zke(u))}if(l=c.materialized,!l)throw new Error(Jke(u))}return new wm(n,i,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?le(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ie({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:le(this.transform.as)}:{}};else{let r=this.transform.as;se(r)||(Q(cAe),r="_lookup"),n={as:[r]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class y2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r,this.transform=Ee(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}clone(){return new y2(null,Ee(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ie(this.transform)}`}assemble(){const{quantile:n,...r}=this.transform;return{type:"quantile",field:n,...r}}}class v2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r,this.transform=Ee(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.regression]}clone(){return new v2(null,Ee(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ie(this.transform)}`}assemble(){const{regression:n,on:r,...i}=this.transform;return{type:"regression",x:r,y:n,...i}}}class x2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r}clone(){return new x2(null,Ee(this.transform))}addDimensions(n){this.transform.groupby=Vo((this.transform.groupby??[]).concat(n),r=>r)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ie(this.transform)}`}assemble(){const{pivot:n,value:r,groupby:i,limit:o,op:s}=this.transform;return{type:"pivot",field:n,value:r,...o!==void 0?{limit:o}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}}}}class b2 extends tt{constructor(n,r){super(n);H(this,"transform");this.transform=r}clone(){return new b2(null,Ee(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ie(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function KK(e){let t=0;function n(r,i){if(r instanceof Fc&&!r.isGenerator&&!oh(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Dn&&(r.parent instanceof Fc&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof jh){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof C0||r instanceof k0||r instanceof ch||r instanceof zh||r instanceof ah||r instanceof bm||r instanceof ao||r instanceof wm||r instanceof Bh||r instanceof nf||r instanceof g2||r instanceof p2||r instanceof d2||r instanceof m2||r instanceof y2||r instanceof v2||r instanceof ql||r instanceof b2||r instanceof x2||r instanceof h2)&&i.transform.push(r.assemble()),(r instanceof ns||r instanceof es||r instanceof ic||r instanceof ra||r instanceof cd)&&i.transform.push(...r.assemble()),r instanceof Cr&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Cr?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Cr&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function jFe(e){const t=[],n=KK(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function BFe(e,t){const n=[],r=KK(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function UFe(e){return e==="top"||e==="left"||me(e)?"header":"footer"}function WFe(e){for(const t of yi)qFe(e,t);y4(e,"x"),y4(e,"y")}function qFe(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=uh("title",null,r,t);let u=ld(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=W(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=uh("labelOrient",a.header,r,t),f=a.header!==null?Dt((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=Oe(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[QK(e,t,f)]}}}function QK(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function y4(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=iO(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=UFe(a.get("orient"));s[l]??(s[l]=[QK(e,o,!1)]);const u=Zp(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function HFe(e){dO(e),Lx(e,"width"),Lx(e,"height")}function VFe(e){dO(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Lx(e,t),Lx(e,n)}function dO(e){for(const t of e.children)t.parseLayoutSize()}function Lx(e,t){const n=SK(t),r=jw(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??CK(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=Wl(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function GFe(e){const{size:t,component:n}=e;for(const r of Sa){const i=Rr(r);if(t[i]!=null&&t[i]!=null){const o=t[i];n.layoutSize.set(i,ds(o)?"step":o,!0)}else{const o=YFe(e,i);n.layoutSize.set(i,o,!1)}}}function YFe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(an(o)){const a=Ox(r.view,t);return Qc(s)||ds(a)?"step":a}else return uA(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return uA(r.view,t);{const o=Ox(r.view,t);return ds(o)?o.step:o}}}function AA(e,t,n){return ie(t,{suffix:`by_${ie(e)}`,...n})}class _g extends XK{constructor(n,r,i,o){super(n,"facet",r,i,o,n.resolve);H(this,"facet");H(this,"child");H(this,"children");this.child=yO(n.spec,this,this.getName("child"),void 0,o),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!x0(n))return{facet:this.initFacetFieldDef(n,"facet")};const r=G(n),i={};for(const o of r){if(![Js,ea].includes(o)){Q(Ww(o,"facet"));break}const s=n[o];if(s.field===void 0){Q(iA(s,o));break}i[o]=this.initFacetFieldDef(s,o)}return i}initFacetFieldDef(n,r){const i=PF(n,r);return i.header?i.header=hn(i.header):i.header===null&&(i.header=null),i}channelHasField(n){return Y(this.facet,n)}fieldDef(n){return this.facet[n]}parseData(){this.component.data=w2(this),this.child.parseData()}parseLayoutSize(){dO(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,jt(this.component.selection).some(n=>ts(n))&&uF(lF)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),WFe(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const r of yi)for(const i of nO){const o=this.component.layoutHeaders[r],s=o[i],{facetFieldDef:a}=o;if(a){const l=uh("titleOrient",a.header,this.config,r);if(["right","bottom"].includes(l)){const u=u2(r,l);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[u]="end"}}if(s!=null&&s[0]){const l=r==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";r!=="facet"&&!this.child.component.layoutSize.get(l)&&(n[u]??(n[u]={}),n[u][r]=.5),o.title&&(n.offset??(n.offset={}),n.offset[r==="row"?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:r}=this.facet,i=n?this.columnDistinctSignal():r?1:void 0;let o="all";return(!r&&this.component.resolve.scale.x==="independent"||!n&&this.component.resolve.scale.y==="independent")&&(o="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:o}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof _g))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof _g?{...this.channelHasField("column")?{encode:{update:{columns:{field:ie(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],r=[],i=[];if(this.child instanceof _g){if(this.child.channelHasField("column")){const o=ie(this.child.facet.column);n.push(o),r.push("distinct"),i.push(`distinct_${o}`)}}else for(const o of Sa){const s=this.child.component.scales[o];if(s&&!s.merged){const a=s.get("type"),l=s.get("range");if(an(a)&&Qc(l)){const u=f2(this.child,o),c=uO(u);c?(n.push(c),r.push("distinct"),i.push(`distinct_${c}`)):Q(aF(o))}}}return{fields:n,ops:r,as:i}}assembleFacet(){const{name:n,data:r}=this.component.data.facetRoot,{row:i,column:o}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),u=[];for(const f of yi){const d=this.facet[f];if(d){u.push(ie(d));const{bin:h,sort:g}=d;if(ut(h)&&u.push(ie(d,{binSuffix:"end"})),ta(g)){const{field:p,op:m=Kw}=g,y=AA(d,g);i&&o?(s.push(y),a.push("max"),l.push(y)):(s.push(p),a.push(m),l.push(y))}else if(W(g)){const p=lh(d,f);s.push(p),a.push("max"),l.push(p)}}}const c=!!i&&!!o;return{name:n,data:r,groupby:u,...c||s.length>0?{aggregate:{...c?{cross:c}:{},...s.length?{fields:s,ops:a,as:l}:{}}}:{}}}facetSortFields(n){const{facet:r}=this,i=r[n];return i?ta(i.sort)?[AA(i,i.sort,{expr:"datum"})]:W(i.sort)?[lh(i,n,{expr:"datum"})]:[ie(i,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:r}=this,i=r[n];if(i){const{sort:o}=i;return[(ta(o)?o.order:!W(o)&&o)||"ascending"]}return[]}assembleLabelTitle(){var o;const{facet:n,config:r}=this;if(n.facet)return bA(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const s of tO)if(n[s]){const a=uh("labelOrient",(o=n[s])==null?void 0:o.header,r,s);if(i[s].includes(a))return bA(n[s],s,r)}}assembleMarks(){const{child:n}=this,r=this.component.data.facetRoot,i=jFe(r),o=n.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||n.assembleTitle(),a=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:yi.map(u=>this.facetSortFields(u)).flat(),order:yi.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup(cMe(this,[]))}]}getMapping(){return this.facet}}function XFe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(ta(o.sort)){const{field:s,op:a=Kw}=o.sort;e=i=new nf(e,{joinaggregate:[{op:a,field:s,as:AA(o,o.sort,{forAs:!0})}],groupby:[ie(o)]})}return i}return null}function ZK(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((l||f)&&l!==f)){if(xm(e)&&xm(a)){if(Wr(e.values,a.values))return s}else if(oh(e)&&oh(a)){if(e.url===a.url)return s}else if(IX(e)&&e.name===s.dataName)return s}}return null}function KFe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Fc({values:[]});return t.push(r),r}const n=ZK(e.data,t);if(n)return Cl(e.data)||(n.data.format=MG({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Fc(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function QFe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(LNe(i))s=e=new ah(e,i),o="derived";else if(GF(i)){const a=URe(i);s=e=Dn.makeWithAncestors(e,{},a,n)??e,e=new zh(e,t,i.filter)}else if(RX(i))s=e=ns.makeFromTransform(e,i,t),o="number";else if(jNe(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Dn(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=es.makeFromTransform(e,i);else if(BNe(i))s=e=ao.makeFromTransform(e,i),o="number",eO(t)&&(e=new ql(e));else if(MX(i))s=e=wm.make(e,t,i,r++),o="derived";else if(PNe(i))s=e=new Bh(e,i),o="number";else if(DNe(i))s=e=new nf(e,i),o="number";else if(UNe(i))s=e=ra.makeFromTransform(e,i),o="derived";else if(WNe(i))s=e=new g2(e,i),o="derived";else if(qNe(i))s=e=new h2(e,i),o="derived";else if(INe(i))s=e=new p2(e,i),o="derived";else if(TNe(i))s=e=new x2(e,i),o="derived";else if(ONe(i))e=new b2(e,i);else if(zNe(i))s=e=ic.makeFromTransform(e,i),o="derived";else if(NNe(i))s=e=new d2(e,i),o="derived";else if(MNe(i))s=e=new y2(e,i),o="derived";else if(RNe(i))s=e=new v2(e,i),o="derived";else if(FNe(i))s=e=new m2(e,i),o="derived";else{Q(uAe(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function w2(e){var m;let t=KFe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(Cl(i)||oh(i)||xm(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new nMe;Cl(i)?(LX(i)?t=new k0(t,i.sequence):YF(i)&&(t=new C0(t,i.graticule)),s.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(s.parseNothing=!0),t=Dn.makeExplicit(t,e,s)??t,t=new ql(t);const a=e.parent&&Uh(e.parent);(St(e)||Kr(e))&&a&&(t=ns.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=QFe(t,e,s));const l=qRe(e),u=WRe(e);t=Dn.makeWithAncestors(t,{},{...l,...u},s)??t,St(e)&&(t=cd.parseAll(t,e),t=bm.parseAll(t,e)),(St(e)||Kr(e))&&(a||(t=ns.makeFromEncoding(t,e)??t),t=es.makeFromEncoding(t,e)??t,t=ah.parseAllForSortIndex(t,e));const c=t=My(_t.Raw,e,t);if(St(e)){const y=ao.makeFromEncoding(t,e);y&&(t=y,eO(e)&&(t=new ql(t))),t=ic.makeFromEncoding(t,e)??t,t=ra.makeFromEncoding(t,e)??t}let f,d;if(St(e)){const{markDef:y,mark:v,config:x}=e,b=Ke("invalid",y,x),{marks:w,scales:S}=d=jX({invalid:b,isPath:lu(v)});w!==S&&S==="include-invalid-values"&&(f=t=My(_t.PreFilterInvalid,e,t)),w==="exclude-invalid-values"&&(t=ch.make(t,e,d)??t)}const h=t=My(_t.Main,e,t);let g;if(St(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=ch.make(t,e,d)??t,g=t=My(_t.PostFilterInvalid,e,t))}St(e)&&zMe(e,h);let p=null;if(Kr(e)){const y=e.getName("facet");t=XFe(t,e.facet)??t,p=new jh(t,e,y,h.getSource()),n[y]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:p,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:g}}function My(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new Cr(n,o,e,i);return r[o]=s,s}class ZFe extends fO{constructor(n,r,i,o){var s,a,l,u;super(n,"concat",r,i,o,n.resolve);H(this,"children");(((a=(s=n.resolve)==null?void 0:s.axis)==null?void 0:a.x)==="shared"||((u=(l=n.resolve)==null?void 0:l.axis)==null?void 0:u.y)==="shared")&&Q(sAe),this.children=this.getChildren(n).map((c,f)=>yO(c,this,this.getName(`concat_${f}`),void 0,o))}parseData(){this.component.data=w2(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of G(n.component.selection))this.component.selection[r]=n.component.selection[r]}jt(this.component.selection).some(n=>ts(n))&&uF(lF)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return r2(n)?n.vconcat:HF(n)?n.hconcat:n.concat}parseLayoutSize(){VFe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=rO(this);for(const r of this.children)n.push(...r.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleMarks(){return this.children.map(n=>{const r=n.assembleTitle(),i=n.assembleGroupStyle(),o=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...r?{title:r}:{},...i?{style:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...n!=null?{columns:n}:{},bounds:"full",align:"each"}}}function JFe(e){return e===!1||e===null}const eOe={disable:1,gridScale:1,scale:1,...eX,labelExpr:1,encode:1},JK=G(eOe);class hO extends Ca{constructor(n={},r={},i=!1){super();H(this,"explicit");H(this,"implicit");H(this,"mainExtracted");this.explicit=n,this.implicit=r,this.mainExtracted=i}clone(){return new hO(Ee(this.explicit),Ee(this.implicit),this.mainExtracted)}hasAxisPart(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!JFe(this.get(n))}hasOrientSignalRef(){return me(this.explicit.orient)}}function tOe(e,t,n){const{encoding:r,config:i}=e,o=Gt(r[t])??Gt(r[_s(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(Nc(l))return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(nh(o)==="quantitative"){if(rh(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(nh(o)==="temporal"&&i.timeFormatType&&K(o)&&!o.timeUnit)return{text:ro({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function nOe(e){return Sa.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[uOe(n,e)]),t),{})}const rOe={bottom:"top",top:"bottom",left:"right",right:"left"};function iOe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of G(i.component.axes))n.axis[o]=iO(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=oOe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Sa){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!me(a)){if(r[a]>0&&!l){const u=rOe[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function oOe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=sOe(i,o)}}}else return t.map(n=>n.clone());return e}function sOe(e,t){for(const n of JK){const r=Wl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return oY(i,o);case"gridScale":return{explicit:i.explicit,value:Dt(i.value,o.value)}}return o2(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function aOe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(me(n.labelAngle)?n.labelAngle:ym(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===vK(r,i))return!0}return e===n[t]}const lOe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function uOe(e,t){var y,v;let n=t.axis(e);const r=new hO,i=Gt(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||XMe(e),l=t.getScaleComponent(e).get("type"),u=UMe(e,l,a,t.config),c=n!==void 0?!n:vA("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=VMe(i,n,e,s.style,u),d=jY(n.formatType,i,l),h=zY(i,i.type,n.format,n.formatType,s,!0),g={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const x of JK){const b=x in r4?r4[x](g):NL(x)?n[x]:void 0,w=b!==void 0,S=aOe(b,x,n,t,e);if(w&&S)r.set(x,b,S);else{const{configValue:E=void 0,configFrom:_=void 0}=NL(x)&&x!=="values"?vA(x,s.style,n.style,u):{},k=E!==void 0;w&&!k?r.set(x,b,S):(_!=="vgAxisConfig"||lOe.has(x)&&k||S0(E)||me(E))&&r.set(x,E,!1)}}const p=n.encoding??{},m=JY.reduce((x,b)=>{if(!r.hasAxisPart(b))return x;const w=_K(p[b]??{},t),S=b==="labels"?tOe(t,e,w):w;return S!==void 0&&!st(S)&&(x[b]={update:S}),x},{});return st(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function cOe({encoding:e,size:t}){for(const n of Sa){const r=Rr(n);ds(t[r])&&fl(e[n])&&(delete t[r],Q(cY(r)))}return t}const fOe={vgMark:"arc",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...rr("x",e,{defaultPos:"mid"}),...rr("y",e,{defaultPos:"mid"}),...pa(e,"radius"),...pa(e,"theta")})},dOe={vgMark:"area",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Px("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Px("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...JF(e)})},hOe={vgMark:"rect",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pa(e,"x"),...pa(e,"y")})},pOe={vgMark:"shape",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&K(n)&&n.type===Ih?{field:ie(n,{expr:"datum"})}:{}}]}},gOe={vgMark:"image",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...pa(e,"x"),...pa(e,"y"),...KF(e,"url")})},mOe={vgMark:"line",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...rr("x",e,{defaultPos:"mid"}),...rr("y",e,{defaultPos:"mid"}),...gn("size",e,{vgChannel:"strokeWidth"}),...JF(e)})},yOe={vgMark:"trail",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...rr("x",e,{defaultPos:"mid"}),...rr("y",e,{defaultPos:"mid"}),...gn("size",e),...JF(e)})};function pO(e,t){const{config:n}=e;return{...Ri(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...rr("x",e,{defaultPos:"mid"}),...rr("y",e,{defaultPos:"mid"}),...gn("size",e),...gn("angle",e),...vOe(e,n,t)}}function vOe(e,t,n){return n?{shape:{value:n}}:gn("shape",e)}const xOe={vgMark:"symbol",encodeEntry:e=>pO(e)},bOe={vgMark:"symbol",encodeEntry:e=>pO(e,"circle")},wOe={vgMark:"symbol",encodeEntry:e=>pO(e,"square")},EOe={vgMark:"rect",encodeEntry:e=>({...Ri(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pa(e,"x"),...pa(e,"y")})},SOe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ri(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Px("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Px("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...gn("size",e,{vgChannel:"strokeWidth"})}}},_Oe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ri(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...rr("x",e,{defaultPos:"mid"}),...rr("y",e,{defaultPos:"mid"}),...KF(e),...gn("size",e,{vgChannel:"fontSize"}),...gn("angle",e),...JL("align",COe(e.markDef,n,t)),...JL("baseline",kOe(e.markDef,n,t)),...rr("radius",e,{defaultPos:null}),...rr("theta",e,{defaultPos:null})}}};function COe(e,t,n){if(Ke("align",e,n)===void 0)return"center"}function kOe(e,t,n){if(Ke("baseline",e,n)===void 0)return"middle"}const AOe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Ri(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pa(e,i),...rr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:pt(Ke("thickness",n,t))}}},Ry={arc:fOe,area:dOe,bar:hOe,circle:bOe,geoshape:pOe,image:gOe,line:mOe,point:xOe,rect:EOe,rule:SOe,square:wOe,text:_Oe,tick:AOe,trail:yOe};function $Oe(e){if(Oe([Yw,Vw,D$e],e.mark)){const t=sX(e.mark,e.encoding);if(t.length>0)return TOe(e,t)}else if(e.mark===Gw){const t=nA.some(n=>Ke(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return NOe(e)}return gO(e)}const v4="faceted_path_";function TOe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:v4+e.requestDataName(_t.Main),data:e.requestDataName(_t.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:gO(e,{fromPrefix:v4})}]}const x4="stack_group_";function NOe(e){var u;const[t]=gO(e,{fromPrefix:x4}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...Kd(t.encode.update,["y","yc","y2","height",...nA]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Xr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Kd(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Xr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of nA){const f=cs(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=pt(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ie(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ie(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=cs(f,e.markDef,e.config);return d!==void 0?{...c,[f]:pt(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(_t.Main),name:x4+e.requestDataName(_t.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function MOe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!W(s)&&yo(s)&&eA(s.value)||!s&&eA(Ke("order",i,o)))){if((W(s)||K(s))&&!n)return nY(s,{expr:"datum"});if(lu(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(K(l))return{field:a}}}}function gO(e,t={fromPrefix:""}){var h;const{mark:n,markDef:r,encoding:i,config:o}=e,s=Dt(r.clip,ROe(e),FOe(e)),a=eY(r),l=i.key,u=MOe(e),c=OOe(e);c&&Object.values(e.component.selection).some(g=>g.type==="point"&&!g.bind&&g.on!=="pointerover")&&((h=e.markDef).cursor??(h.cursor="pointer"));const f=Ke("aria",r,o),d=Ry[n].postEncodingTransform?Ry[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Ry[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(_t.Main)},encode:{update:Ry[n].encodeEntry(e)},...d?{transform:d}:{}}]}function ROe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function FOe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function OOe(e){if(!e.component.selection)return null;const t=G(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=G(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class eQ extends XK{constructor(n,r,i,o={},s){super(n,"unit",r,i,s,void 0,RL(n)?n.view:void 0);H(this,"markDef");H(this,"encoding");H(this,"specifiedScales",{});H(this,"stack");H(this,"specifiedAxes",{});H(this,"specifiedLegends",{});H(this,"specifiedProjection",{});H(this,"selection",[]);H(this,"children",[]);H(this,"correctDataNames",n=>{var r,i,o;return(r=n.from)!=null&&r.data&&(n.from.data=this.lookupDataSource(n.from.data),"time"in this.encoding&&(n.from.data=n.from.data+UX)),(o=(i=n.from)==null?void 0:i.facet)!=null&&o.data&&(n.from.facet.data=this.lookupDataSource(n.from.facet.data)),n});const a=fs(n.mark)?{...n.mark}:{type:n.mark},l=a.type;a.filled===void 0&&(a.filled=vNe(a,s,{graticule:n.data&&YF(n.data)}));const u=this.encoding=ETe(n.encoding||{},l,a.filled,s);this.markDef=AX(a,u,s),this.size=cOe({encoding:u,size:RL(n)?{...o,...n.width!==void 0?{width:n.width}:{},...n.height!==void 0?{height:n.height}:{}}:o}),this.stack=kX(this.markDef,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(c=>WF(c)),this.alignStackOrderWithColorDomain()}get hasProjection(){const{encoding:n}=this,r=this.mark===RY,i=n&&pke.some(o=>_e(n[o]));return r||i}scaleDomain(n){const r=this.specifiedScales[n];return r?r.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,r){return iF.reduce((i,o)=>{const s=Gt(r[o]);return s&&(i[o]=this.initScale(s.scale??{})),i},{})}initScale(n){const{domain:r,range:i}=n,o=hn(n);return W(r)&&(o.domain=r.map(jr)),W(i)&&(o.range=i.map(jr)),o}initAxes(n){return Sa.reduce((r,i)=>{const o=n[i];if(_e(o)||i===bt&&_e(n.x2)||i===un&&_e(n.y2)){const s=_e(o)?o.axis:void 0;r[i]=s&&this.initAxis({...s})}return r},{})}initAxis(n){const r=G(n),i={};for(const o of r){const s=n[o];i[o]=S0(s)?JG(s):jr(s)}return i}initLegends(n){return Cke.reduce((r,i)=>{const o=Gt(n[i]);if(o&&Ake(i)){const s=o.legend;r[i]=s&&hn(s)}return r},{})}alignStackOrderWithColorDomain(){var m;const{color:n,fill:r,order:i,xOffset:o,yOffset:s}=this.encoding,a=r||n,l=K(a)?a:void 0,u=l==null?void 0:l.field,c=l==null?void 0:l.scale,f=l==null?void 0:l.type,d=c==null?void 0:c.domain,h=o||s,g=K(h)?h:void 0,p=`_${u}_sort_index`;if(!i&&Array.isArray(d)&&typeof u=="string"&&f==="nominal")if(g&&!g.sort)g.sort=d;else{if(!this.stack)return;const y=`indexof(${J(d)}, datum['${u}'])`,v=((m=this.markDef)==null?void 0:m.orient)==="horizontal"?"ascending":"descending";this.transforms.push({calculate:y,as:p}),this.encoding.order={field:p,type:"quantitative",sort:v}}}parseData(){this.component.data=w2(this)}parseLayoutSize(){GFe(this)}parseSelections(){this.component.selection=LMe(this,this.selection)}parseMarkGroup(){this.component.mark=$Oe(this)}parseAxesAndHeaders(){this.component.axes=nOe(this)}assembleSelectionTopLevelSignals(n){return fMe(this,n)}assembleSignals(){return[...gK(this),...uMe(this,[])]}assembleSelectionData(n){return dMe(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return rO(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!Uh(this.parent))&&(n=VX(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return n!==void 0?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return nc(this.encoding,n)}fieldDef(n){const r=this.encoding[n];return vo(r)}typedFieldDef(n){const r=this.fieldDef(n);return ur(r)?r:null}}class mO extends fO{constructor(n,r,i,o,s){super(n,"layer",r,i,s,n.resolve,n.view);H(this,"children");const a={...o,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((l,u)=>{if(i2(l))return new mO(l,this,this.getName(`layer_${u}`),a,s);if(_a(l))return new eQ(l,this,this.getName(`layer_${u}`),a,s);throw new Error(sF(l))})}parseData(){this.component.data=w2(this);for(const n of this.children)n.parseData()}parseLayoutSize(){HFe(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of G(n.component.selection))this.component.selection[r]=n.component.selection[r]}jt(this.component.selection).some(n=>ts(n))&&uF(lF)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){iOe(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleSignals()),gK(this))}assembleLayoutSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleLayoutSignals()),rO(this))}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleGroupStyle(){const n=new Set;for(const i of this.children)for(const o of le(i.assembleGroupStyle()))n.add(o);const r=Array.from(n);return r.length>1?r:r.length===1?r[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const r of this.children)if(n=r.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return hMe(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,r)=>n.concat(r.assembleLegends()),RK(this))}}function yO(e,t,n,r,i){if(Qw(e))return new _g(e,t,n,i);if(i2(e))return new mO(e,t,n,r,i);if(_a(e))return new eQ(e,t,n,r,i);if(VTe(e))return new ZFe(e,t,n,i);throw new Error(sF(e))}function POe(e,t={}){t.logger&&KAe(t.logger),t.fieldTitle&&KY(t.fieldTitle);try{const n=CX(vh(t.config,e.config)),r=PX(e,n),i=yO(r,null,"",void 0,n);return i.parse(),oFe(i.component.data,i),{spec:IOe(i,DOe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&QAe(),t.fieldTitle&&hTe()}}function DOe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):se(t)&&(t={type:t}),i&&o&&JNe(t.type)){if(i==="step"&&o==="step")Q(mL()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Q(mL(jw(s)));const a=s==="width"?"height":"width";t.type=eMe(a)}}return{...G(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...qL(n,!1),...qL(e,!0)}}function IOe(e,t,n={},r){const i=e.config?sNe(e.config):void 0,o=BFe(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(g=>(g.name==="width"||g.name==="height")&&g.value!==void 0?(t[g.name]=+g.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...h,...l?{title:l}:{},...u?{style:u}:{},...c?{encode:{update:c}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...wX(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const LOe=lke.version,zOe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Zd,accessPathWithDatum:KR,accessWithDatumToUnescapedPath:Ze,compile:POe,contains:Oe,deepEqual:Wr,deleteNestedProperty:Cx,duplicate:Ee,entries:jl,every:GR,fieldIntersection:XR,flatAccessWithDatum:FG,getFirstDefined:Dt,hasIntersection:YR,hasProperty:Y,hash:Ie,internalField:IG,isBoolean:mm,isEmpty:st,isEqual:cke,isInternalField:LG,isNullOrFalse:eA,isNumeric:Ow,keys:G,logicalExpr:Eg,mergeDeep:MG,never:NG,normalize:PX,normalizeAngle:ym,omit:Xr,pick:Kd,prefixGenerator:tA,removePathFromField:Ph,replaceAll:_c,replacePathInField:$i,resetIdCounter:dke,setEqual:RG,some:Qd,stringify:Qe,titleCase:d0,unescapeSingleQuoteAndPathDot:OG,unique:Vo,uniqueId:DG,vals:jt,varName:xt,version:LOe},Symbol.toStringTag,{value:"Module"}));function tQ(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var jOe="3.0.0",BOe={version:jOe};const bf="#fff",b4="#888",UOe={background:"#333",view:{stroke:b4},title:{color:bf,subtitleColor:bf},style:{"guide-label":{fill:bf},"guide-title":{fill:bf}},axis:{domainColor:bf,gridColor:b4,tickColor:bf}},yu="#4572a7",WOe={background:"#fff",arc:{fill:yu},area:{fill:yu},line:{stroke:yu,strokeWidth:2},path:{stroke:yu},rect:{fill:yu},shape:{stroke:yu},symbol:{fill:yu,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},vu="#30a2da",RS="#cbcbcb",qOe="#999",HOe="#333",w4="#f0f0f0",E4="#333",VOe={arc:{fill:vu},area:{fill:vu},axis:{domainColor:RS,grid:!0,gridColor:RS,gridWidth:1,labelColor:qOe,labelFontSize:10,titleColor:HOe,tickColor:RS,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:w4,group:{fill:w4},legend:{labelColor:E4,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:E4,titleFontSize:14,titlePadding:10},line:{stroke:vu,strokeWidth:2},path:{stroke:vu,strokeWidth:.5},rect:{fill:vu},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:vu},bar:{binSpacing:2,fill:vu,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},xu="#000",GOe={group:{fill:"#e5e5e5"},arc:{fill:xu},area:{fill:xu},line:{stroke:xu},path:{stroke:xu},rect:{fill:xu},shape:{stroke:xu},symbol:{fill:xu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},YOe=22,XOe="normal",S4="Benton Gothic, sans-serif",_4=11.5,KOe="normal",bu="#82c6df",FS="Benton Gothic Bold, sans-serif",C4="normal",k4=13,Sp={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},QOe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:FS,fontSize:YOe,fontWeight:XOe},arc:{fill:bu},area:{fill:bu},line:{stroke:bu,strokeWidth:2},path:{stroke:bu},rect:{fill:bu},shape:{stroke:bu},symbol:{fill:bu,size:30},axis:{labelFont:S4,labelFontSize:_4,labelFontWeight:KOe,titleFont:FS,titleFontSize:k4,titleFontWeight:C4},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:S4,labelFontSize:_4,symbolType:"square",titleFont:FS,titleFontSize:k4,titleFontWeight:C4},range:{category:Sp["category-6"],diverging:Sp["fireandice-6"],heatmap:Sp["fire-7"],ordinal:Sp["fire-7"],ramp:Sp["fire-7"]}},wu="#ab5787",Fy="#979797",ZOe={background:"#f9f9f9",arc:{fill:wu},area:{fill:wu},line:{stroke:wu},path:{stroke:wu},rect:{fill:wu},shape:{stroke:wu},symbol:{fill:wu,size:30},axis:{domainColor:Fy,domainWidth:.5,gridWidth:.2,labelColor:Fy,tickColor:Fy,tickWidth:.2,titleColor:Fy},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Eu="#3e5c69",JOe={background:"#fff",arc:{fill:Eu},area:{fill:Eu},line:{stroke:Eu},path:{stroke:Eu},rect:{fill:Eu},shape:{stroke:Eu},symbol:{fill:Eu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},ai="#1696d2",A4="#000000",ePe="#FFFFFF",Oy="Lato",OS="Lato",tPe="Lato",nPe="#DEDDDD",rPe=18,_p={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},iPe={background:ePe,title:{anchor:"start",fontSize:rPe,font:Oy},axisX:{domain:!0,domainColor:A4,domainWidth:1,grid:!1,labelFontSize:12,labelFont:OS,labelAngle:0,tickColor:A4,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Oy},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:nPe,gridWidth:1,labelFontSize:12,labelFont:OS,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Oy,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:OS,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Oy,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:_p["six-groups-cat-1"],diverging:_p["diverging-colors"],heatmap:_p["diverging-colors"],ordinal:_p["six-groups-seq"],ramp:_p["shades-blue"]},area:{fill:ai},rect:{fill:ai},line:{color:ai,stroke:ai,strokeWidth:5},trail:{color:ai,stroke:ai,strokeWidth:0,size:1},path:{stroke:ai,strokeWidth:.5},point:{filled:!0},text:{font:tPe,color:ai,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:ai,stroke:null}},arc:{fill:ai},shape:{stroke:ai},symbol:{fill:ai,size:30}},Su="#3366CC",$4="#ccc",Py="Arial, sans-serif",oPe={arc:{fill:Su},area:{fill:Su},path:{stroke:Su},rect:{fill:Su},shape:{stroke:Su},symbol:{stroke:Su},circle:{fill:Su},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Py,fontSize:12},"guide-title":{font:Py,fontSize:12},"group-title":{font:Py,fontSize:12}},title:{font:Py,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:$4,tickColor:$4,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},vO=e=>e*(1/3+1),T4=vO(9),N4=vO(10),M4=vO(12),Cp="Segoe UI",R4="wf_standard-font, helvetica, arial, sans-serif",F4="#252423",kp="#605E5C",O4="transparent",sPe="#C8C6C4",ji="#118DFF",aPe="#12239E",lPe="#E66C37",uPe="#6B007B",cPe="#E044A7",fPe="#744EC2",dPe="#D9B300",hPe="#D64550",nQ=ji,rQ="#DEEFFF",P4=[rQ,nQ],pPe=[rQ,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",nQ],gPe={view:{stroke:O4},background:O4,font:Cp,header:{titleFont:R4,titleFontSize:M4,titleColor:F4,labelFont:Cp,labelFontSize:N4,labelColor:kp},axis:{ticks:!1,grid:!1,domain:!1,labelColor:kp,labelFontSize:T4,titleFont:R4,titleColor:F4,titleFontSize:M4,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:sPe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ji},line:{stroke:ji,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Cp,fontSize:T4,fill:kp},arc:{fill:ji},area:{fill:ji,line:!0,opacity:.6},path:{stroke:ji},rect:{fill:ji},point:{fill:ji,filled:!0,size:75},shape:{stroke:ji},symbol:{fill:ji,strokeWidth:1.5,size:50},legend:{titleFont:Cp,titleFontWeight:"bold",titleColor:kp,labelFont:Cp,labelFontSize:N4,labelColor:kp,symbolType:"circle",symbolSize:75},range:{category:[ji,aPe,lPe,uPe,cPe,fPe,dPe,hPe],diverging:P4,heatmap:P4,ordinal:pPe}},PS='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',mPe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',DS=400,Dy={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},yPe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],vPe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function E2({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=Dy.gridBg[e],i=Dy.textPrimary[e],o=Dy.textSecondary[e],s=n==="dark"?yPe:vPe,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:PS,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:mPe,labelFontWeight:DS,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Dy.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:PS,fill:o,fontWeight:DS},"guide-title":{font:PS,fill:o,fontWeight:DS}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const xPe=E2({theme:"white",background:"#ffffff"}),bPe=E2({theme:"g10",background:"#f4f4f4"}),wPe=E2({theme:"g90",background:"#262626"}),EPe=E2({theme:"g100",background:"#161616"}),SPe=BOe.version,_Pe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:bPe,carbong100:EPe,carbong90:wPe,carbonwhite:xPe,dark:UOe,excel:WOe,fivethirtyeight:VOe,ggplot2:GOe,googlecharts:oPe,latimes:QOe,powerbi:gPe,quartz:ZOe,urbaninstitute:iPe,version:SPe,vox:JOe},Symbol.toStringTag,{value:"Module"}));function CPe(e,t,n,r){if(W(e))return`[${e.map(i=>t(se(i)?i:D4(i,n))).join(", ")}]`;if(ae(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(ae(c)&&(c=D4(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function kPe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function D4(e,t){return JSON.stringify(e,kPe(t))}var APe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const iQ="vg-tooltip-element",$Pe={offsetX:10,offsetY:10,id:iQ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:TPe,maxDepth:2,formatTooltip:CPe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function TPe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function NPe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return APe.toString().replaceAll(iQ,e)}function oQ(e,t,{offsetX:n,offsetY:r}){const i=sQ({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(aQ(i[s],t))return i[s];return i["top-left"]}function MPe(e,t,n,r,i){const{position:o,offsetX:s,offsetY:a}=i,l=e._el.getBoundingClientRect(),u=e._origin,c=RPe(l,u,n),f=sQ(c,r,s,a),d=Array.isArray(o)?o:[o];for(const h of d)if(aQ(f[h],r)&&!FPe(t,f[h],r))return f[h];return oQ(t,r,i)}function RPe(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,o=e.top+t[1]+r.y1,s=n;for(;s.mark.group;)s=s.mark.group,i+=s.x??0,o+=s.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:o,y2:o+l}}function sQ(e,t,n,r){const i=(e.x1+e.x2)/2,o=(e.y1+e.y2)/2,s=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,u=e.y1-t.height-r,c=o-t.height/2,f=e.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:f},left:{x:s,y:c},right:{x:l,y:c},"top-left":{x:s,y:u},"top-right":{x:l,y:u},"bottom-left":{x:s,y:f},"bottom-right":{x:l,y:f}}}function aQ(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function FPe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class OPe{constructor(t){H(this,"call");H(this,"options");H(this,"el");this.options={...$Pe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=NPe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=this.options.anchor==="mark"?MPe(t,n,r,this.el.getBoundingClientRect(),this.options):oQ(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var IS={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var PPe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),DPe=Object.prototype.hasOwnProperty;function $A(e,t){return DPe.call(e,t)}function TA(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)$A(e,i)&&r.push(i);return r}function qr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function NA(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function $u(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function lQ(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function MA(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(MA(e[t]))return!0}else if(typeof e=="object"){for(var r=TA(e),i=r.length,o=0;o<i;o++)if(MA(e[r[o]]))return!0}}return!1}function I4(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var uQ=function(e){PPe(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,I4(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=I4(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),Tt=uQ,IPe=qr,Hf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=zx(n,this.path);r&&(r=qr(r));var i=oc(n,{op:"remove",path:this.from}).removed;return oc(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=zx(n,this.from);return oc(n,{op:"add",path:this.path,value:qr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Em(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},LPe={add:function(e,t,n){return NA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Hf.move,copy:Hf.copy,test:Hf.test,_get:Hf._get};function zx(e,t){if(t=="")return e;var n={op:"_get",path:t};return oc(e,n),n.value}function oc(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):jx(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=zx(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Em(e,t.value),s.test===!1)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Tt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=qr(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=jx;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=lQ(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&g(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!NA(h))throw new Tt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);NA(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new Tt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=LPe[t.op].call(t,u,h,e);if(s.test===!1)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Hf[t.op].call(t,u,h,e);if(s.test===!1)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new Tt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function S2(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Tt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=qr(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=oc(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function zPe(e,t,n){var r=oc(e,t);if(r.test===!1)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function jx(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Tt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Hf[e.op]){if(typeof e.path!="string")throw new Tt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Tt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Tt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Tt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&MA(e.value))throw new Tt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Tt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Tt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=cQ([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Tt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Tt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function cQ(e,t,n){try{if(!Array.isArray(e))throw new Tt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)S2(qr(t),qr(e),n||!0);else{n=n||jx;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Tt)return i;throw i}}function Em(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Em(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!Em(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var jPe=Object.freeze({__proto__:null,JsonPatchError:Tt,_areEquals:Em,applyOperation:oc,applyPatch:S2,applyReducer:zPe,deepClone:IPe,getValueByPointer:zx,validate:cQ,validator:jx});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var xO=new WeakMap,BPe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),UPe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function WPe(e){return xO.get(e)}function qPe(e,t){return e.observers.get(t)}function HPe(e,t){e.observers.delete(t.callback)}function VPe(e,t){t.unobserve()}function GPe(e,t){var n=[],r,i=WPe(e);if(!i)i=new BPe(e),xO.set(e,i);else{var o=qPe(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=qr(e),t){r.callback=t,r.next=null;var s=function(){RA(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){RA(r),clearTimeout(r.next),HPe(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new UPe(t,r)),r}function RA(e,t){t===void 0&&(t=!1);var n=xO.get(e.object);bO(n.value,e.object,e.patches,"",t),e.patches.length&&S2(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function bO(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=TA(t),s=TA(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],c=e[u];if($A(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?bO(c,f,n,r+"/"+$u(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+$u(u),value:qr(c)}),n.push({op:"replace",path:r+"/"+$u(u),value:qr(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+$u(u),value:qr(c)}),n.push({op:"remove",path:r+"/"+$u(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!$A(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+$u(u),value:qr(t[u])})}}}function YPe(e,t,n){n===void 0&&(n=!1);var r=[];return bO(e,t,r,"",n),r}var XPe=Object.freeze({__proto__:null,compare:YPe,generate:RA,observe:GPe,unobserve:VPe});Object.assign({},jPe,XPe,{JsonPatchError:uQ,deepClone:qr,escapePathComponent:$u,unescapePathComponent:lQ});function KPe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LS,L4;function QPe(){if(L4)return LS;L4=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return LS=e,LS}var zS,z4;function wO(){if(z4)return zS;z4=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return zS=r=>r?typeof r!="object"?e:r:t,zS}var Iy={exports:{}},jS,j4;function EO(){if(j4)return jS;j4=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return jS={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},jS}var BS,B4;function _2(){return B4||(B4=1,BS=typeof process=="object"&&IS&&IS.NODE_DEBUG&&/\bsemver\b/i.test(IS.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),BS}var U4;function SO(){return U4||(U4=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=EO(),o=_2();t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={};let f=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,r]],g=m=>{for(const[y,v]of h)m=m.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return m},p=(m,y,v)=>{const x=g(y),b=f++;o(m,b,y),c[m]=b,l[b]=y,u[b]=x,s[b]=new RegExp(y,v?"g":void 0),a[b]=new RegExp(x,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),p("FULL",`^${l[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),p("LOOSE",`^${l[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),p("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[c.COERCE],!0),p("COERCERTLFULL",l[c.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Iy,Iy.exports)),Iy.exports}var US,W4;function ZPe(){if(W4)return US;W4=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),s=e.test(i);return o&&s&&(r=+r,i=+i),r===i?0:o&&!s?-1:s&&!o?1:r<i?-1:1};return US={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},US}var WS,q4;function _O(){if(q4)return WS;q4=1;const e=_2(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=EO(),{safeRe:r,t:i}=SO(),o=wO(),{compareIdentifiers:s}=ZPe();class a{constructor(u,c){if(c=o(c),u instanceof a){if(u.loose===!!c.loose&&u.includePrerelease===!!c.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const f=u.trim().match(c.loose?r[i.LOOSE]:r[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<n)return h}return d}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let c=0;do{const f=this.prerelease[c],d=u.prerelease[c];if(e("prerelease compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return s(f,d)}while(++c)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let c=0;do{const f=this.build[c],d=u.build[c];if(e("build compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return s(f,d)}while(++c)}inc(u,c,f){if(u.startsWith("pre")){if(!c&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(c){const d=`-${c}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!d||d[1]!==c)throw new Error(`invalid identifier: ${c}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,f),this.inc("pre",c,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,f),this.inc("pre",c,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(c===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(c){let h=[c,d];f===!1&&(h=[c]),s(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return WS=a,WS}var qS,H4;function Wh(){if(H4)return qS;H4=1;const e=_O();return qS=(n,r,i)=>new e(n,i).compare(new e(r,i)),qS}var HS,V4;function JPe(){if(V4)return HS;V4=1;const e=Wh();return HS=(n,r,i)=>e(n,r,i)===0,HS}var VS,G4;function e3e(){if(G4)return VS;G4=1;const e=Wh();return VS=(n,r,i)=>e(n,r,i)!==0,VS}var GS,Y4;function t3e(){if(Y4)return GS;Y4=1;const e=Wh();return GS=(n,r,i)=>e(n,r,i)>0,GS}var YS,X4;function n3e(){if(X4)return YS;X4=1;const e=Wh();return YS=(n,r,i)=>e(n,r,i)>=0,YS}var XS,K4;function r3e(){if(K4)return XS;K4=1;const e=Wh();return XS=(n,r,i)=>e(n,r,i)<0,XS}var KS,Q4;function i3e(){if(Q4)return KS;Q4=1;const e=Wh();return KS=(n,r,i)=>e(n,r,i)<=0,KS}var QS,Z4;function o3e(){if(Z4)return QS;Z4=1;const e=JPe(),t=e3e(),n=t3e(),r=n3e(),i=r3e(),o=i3e();return QS=(a,l,u,c)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,c);case"!=":return t(a,u,c);case">":return n(a,u,c);case">=":return r(a,u,c);case"<":return i(a,u,c);case"<=":return o(a,u,c);default:throw new TypeError(`Invalid operator: ${l}`)}},QS}var ZS,J4;function s3e(){if(J4)return ZS;J4=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}ZS=t;const n=wO(),{safeRe:r,t:i}=SO(),o=o3e(),s=_2(),a=_O(),l=fQ();return ZS}var JS,e6;function fQ(){if(e6)return JS;e6=1;const e=/\s+/g;class t{constructor($,R){if(R=i(R),$ instanceof t)return $.loose===!!R.loose&&$.includePrerelease===!!R.includePrerelease?$:new t($.raw,R);if($ instanceof o)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=$.trim().replace(e," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(F=>!p(F[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&m(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){$>0&&(this.formatted+="||");const R=this.set[$];for(let I=0;I<R.length;I++)I>0&&(this.formatted+=" "),this.formatted+=R[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){const I=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+$,F=r.get(I);if(F)return F;const O=this.options.loose,L=O?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];$=$.replace(L,P(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(l[u.COMPARATORTRIM],c),s("comparator trim",$),$=$.replace(l[u.TILDETRIM],f),s("tilde trim",$),$=$.replace(l[u.CARETTRIM],d),s("caret trim",$);let X=$.split(" ").map(he=>v(he,this.options)).join(" ").split(/\s+/).map(he=>N(he,this.options));O&&(X=X.filter(he=>(s("loose invalid filter",he,this.options),!!he.match(l[u.COMPARATORLOOSE])))),s("range list",X);const V=new Map,ne=X.map(he=>new o(he,this.options));for(const he of ne){if(p(he))return[he];V.set(he.value,he)}V.size>1&&V.has("")&&V.delete("");const de=[...V.values()];return r.set(I,de),de}intersects($,R){if(!($ instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>y(I,R)&&$.set.some(F=>y(F,R)&&I.every(O=>F.every(L=>O.intersects(L,R)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new a($,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(D(this.set[R],$,this.options))return!0;return!1}}JS=t;const n=QPe(),r=new n,i=wO(),o=s3e(),s=_2(),a=_O(),{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:d}=SO(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=EO(),p=M=>M.value==="<0.0.0-0",m=M=>M.value==="",y=(M,$)=>{let R=!0;const I=M.slice();let F=I.pop();for(;R&&I.length;)R=I.every(O=>F.intersects(O,$)),F=I.pop();return R},v=(M,$)=>(s("comp",M,$),M=S(M,$),s("caret",M),M=b(M,$),s("tildes",M),M=_(M,$),s("xrange",M),M=T(M,$),s("stars",M),M),x=M=>!M||M.toLowerCase()==="x"||M==="*",b=(M,$)=>M.trim().split(/\s+/).map(R=>w(R,$)).join(" "),w=(M,$)=>{const R=$.loose?l[u.TILDELOOSE]:l[u.TILDE];return M.replace(R,(I,F,O,L,X)=>{s("tilde",M,I,F,O,L,X);let V;return x(F)?V="":x(O)?V=`>=${F}.0.0 <${+F+1}.0.0-0`:x(L)?V=`>=${F}.${O}.0 <${F}.${+O+1}.0-0`:X?(s("replaceTilde pr",X),V=`>=${F}.${O}.${L}-${X} <${F}.${+O+1}.0-0`):V=`>=${F}.${O}.${L} <${F}.${+O+1}.0-0`,s("tilde return",V),V})},S=(M,$)=>M.trim().split(/\s+/).map(R=>E(R,$)).join(" "),E=(M,$)=>{s("caret",M,$);const R=$.loose?l[u.CARETLOOSE]:l[u.CARET],I=$.includePrerelease?"-0":"";return M.replace(R,(F,O,L,X,V)=>{s("caret",M,F,O,L,X,V);let ne;return x(O)?ne="":x(L)?ne=`>=${O}.0.0${I} <${+O+1}.0.0-0`:x(X)?O==="0"?ne=`>=${O}.${L}.0${I} <${O}.${+L+1}.0-0`:ne=`>=${O}.${L}.0${I} <${+O+1}.0.0-0`:V?(s("replaceCaret pr",V),O==="0"?L==="0"?ne=`>=${O}.${L}.${X}-${V} <${O}.${L}.${+X+1}-0`:ne=`>=${O}.${L}.${X}-${V} <${O}.${+L+1}.0-0`:ne=`>=${O}.${L}.${X}-${V} <${+O+1}.0.0-0`):(s("no pr"),O==="0"?L==="0"?ne=`>=${O}.${L}.${X}${I} <${O}.${L}.${+X+1}-0`:ne=`>=${O}.${L}.${X}${I} <${O}.${+L+1}.0-0`:ne=`>=${O}.${L}.${X} <${+O+1}.0.0-0`),s("caret return",ne),ne})},_=(M,$)=>(s("replaceXRanges",M,$),M.split(/\s+/).map(R=>k(R,$)).join(" ")),k=(M,$)=>{M=M.trim();const R=$.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return M.replace(R,(I,F,O,L,X,V)=>{s("xRange",M,I,F,O,L,X,V);const ne=x(O),de=ne||x(L),he=de||x(X),Ne=he;return F==="="&&Ne&&(F=""),V=$.includePrerelease?"-0":"",ne?F===">"||F==="<"?I="<0.0.0-0":I="*":F&&Ne?(de&&(L=0),X=0,F===">"?(F=">=",de?(O=+O+1,L=0,X=0):(L=+L+1,X=0)):F==="<="&&(F="<",de?O=+O+1:L=+L+1),F==="<"&&(V="-0"),I=`${F+O}.${L}.${X}${V}`):de?I=`>=${O}.0.0${V} <${+O+1}.0.0-0`:he&&(I=`>=${O}.${L}.0${V} <${O}.${+L+1}.0-0`),s("xRange return",I),I})},T=(M,$)=>(s("replaceStars",M,$),M.trim().replace(l[u.STAR],"")),N=(M,$)=>(s("replaceGTE0",M,$),M.trim().replace(l[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=M=>($,R,I,F,O,L,X,V,ne,de,he,Ne)=>(x(I)?R="":x(F)?R=`>=${I}.0.0${M?"-0":""}`:x(O)?R=`>=${I}.${F}.0${M?"-0":""}`:L?R=`>=${R}`:R=`>=${R}${M?"-0":""}`,x(ne)?V="":x(de)?V=`<${+ne+1}.0.0-0`:x(he)?V=`<${ne}.${+de+1}.0-0`:Ne?V=`<=${ne}.${de}.${he}-${Ne}`:M?V=`<${ne}.${de}.${+he+1}-0`:V=`<=${V}`,`${R} ${V}`.trim()),D=(M,$,R)=>{for(let I=0;I<M.length;I++)if(!M[I].test($))return!1;if($.prerelease.length&&!R.includePrerelease){for(let I=0;I<M.length;I++)if(s(M[I].semver),M[I].semver!==o.ANY&&M[I].semver.prerelease.length>0){const F=M[I].semver;if(F.major===$.major&&F.minor===$.minor&&F.patch===$.patch)return!0}return!1}return!0};return JS}var e_,t6;function a3e(){if(t6)return e_;t6=1;const e=fQ();return e_=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},e_}var l3e=a3e(),dQ=KPe(l3e);function u3e(e,t,n){const r=e.open(t),i=250,{origin:o}=new URL(t);let s=40;function a(u){u.source===r&&(s=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function l(){s<=0||(r.postMessage(n,o),setTimeout(l,i),s-=1)}setTimeout(l,i)}var c3e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function hQ(e,...t){for(const n of t)f3e(e,n);return e}function f3e(e,t){for(const n of Object.keys(t))xh(e,n,t[n],!0)}const Fo=KCe;let Sm=zOe;const Ly=typeof window<"u"?window:void 0;var _6;Sm===void 0&&((_6=Ly==null?void 0:Ly.vl)!=null&&_6.compile)&&(Sm=Ly.vl);const d3e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},h3e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Jp={vega:"Vega","vega-lite":"Vega-Lite"},Bx={vega:Fo.version,"vega-lite":Sm?Sm.version:"not available"},p3e={vega:e=>e,"vega-lite":(e,t,n)=>Sm.compile(e,{config:n,logger:t}).spec},g3e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,m3e="chart-wrapper";function y3e(e){return typeof e=="function"}function n6(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${Jp[r]} JSON Source`}function v3e(e,t,n){if(e.$schema){const r=tQ(e.$schema);n&&n!==r.library&&t.warn(`The given visualization spec is written in ${Jp[r.library]}, but mode argument sets ${Jp[n]??n}.`);const i=r.library;return dQ(Bx[i],`^${r.version.slice(1)}`)||t.warn(`The input spec uses ${Jp[i]} ${r.version}, but the current version of ${Jp[i]} is v${Bx[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}function pQ(e){return!!(e&&"load"in e)}function r6(e){return pQ(e)?e:Fo.loader(e)}function x3e(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return se(t.defaultStyle)&&(t.defaultStyle=!1),t}async function b3e(e,t,n={}){let r,i;se(t)?(i=r6(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=x3e(r),s=o.loader;(!i||s)&&(i=r6(n.loader??s));const a=await i6(o,i),l=await i6(n,i),u={...hQ(l,a),config:vh(l.config??{},a.config??{})};return await E3e(e,r,u,i)}async function i6(e,t){const n=se(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=se(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function w3e(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function E3e(e,t,n={},r){const i=n.theme?vh(_Pe[n.theme],n.config??{}):n.config,o=Yl(n.actions)?n.actions:hQ({},d3e,n.actions??{}),s={...h3e,...n.i18n},a=n.renderer??"svg",l=n.logger??xb(Fo.Warn);n.logLevel!==void 0&&l.level(n.logLevel);const u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:S,rootContainer:E}=w3e(c);if(!S.getElementById(w)){const _=document.createElement("style");_.id=w,_.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?c3e.toString():n.defaultStyle,E.appendChild(_)}}const f=v3e(t,l,n.mode);let d=p3e[f](t,l,i);if(f==="vega-lite"&&d.$schema){const w=tQ(d.$schema);dQ(Bx.vega,`^${w.version.slice(1)}`)||l.warn(`The compiled spec uses Vega ${w.version}, but current version is v${Bx.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(m3e),c.appendChild(w),h=w}const g=n.patch;if(g&&(d=g instanceof Function?g(d):S2(d,g,!0,!1).newDocument),n.formatLocale&&Fo.formatLocale(n.formatLocale),n.timeFormatLocale&&Fo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const S=n.expressionFunctions[w];"fn"in S?Fo.expressionFunction(w,S.fn,S.visitor):S instanceof Function&&Fo.expressionFunction(w,S)}const{ast:p}=n,m=Fo.parse(d,f==="vega-lite"?{}:i,{ast:p}),y=new(n.viewClass||Fo.View)(m,{loader:r,logger:l,renderer:a,...p?{expr:Fo.expressionInterpreter??n.expr??ske}:{}});if(y.addSignalListener("autosize",(w,S)=>{const{type:E}=S;E=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):E=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):E=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:S}=n,E=w&&!pQ(w)?w==null?void 0:w.baseURL:void 0,_=y3e(S)?S:new OPe({baseURL:E,...S===!0?{}:S}).call;y.tooltip(_)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(w,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let x;if(o!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const E=document.createElement("details");E.title=s.CLICK_TO_VIEW_ACTIONS,c.append(E),w=E;const _=document.createElement("summary");_.innerHTML=g3e,E.append(_),x=k=>{E.contains(k.target)||E.removeAttribute("open")},document.addEventListener("click",x)}const S=document.createElement("div");if(w.append(S),S.classList.add("vega-actions"),o===!0||o.export!==!1){for(const E of["svg","png"])if(o===!0||o.export===!0||o.export[E]){const _=s[`${E.toUpperCase()}_ACTION`],k=document.createElement("a"),T=ae(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;k.text=_,k.href="#",k.target="_blank",k.download=`${u}.${E}`,k.addEventListener("mousedown",async function(N){N.preventDefault();const P=await y.toImageURL(E,T);this.href=P}),S.append(k)}}if(o===!0||o.source!==!1){const E=document.createElement("a");E.text=s.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(_){n6(fE(t),n.sourceHeader??"",n.sourceFooter??"",f),_.preventDefault()}),S.append(E)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const E=document.createElement("a");E.text=s.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(_){n6(fE(d),n.sourceHeader??"",n.sourceFooter??"","vega"),_.preventDefault()}),S.append(E)}if(o===!0||o.editor!==!1){const E=n.editorUrl??"https://vega.github.io/editor/",_=document.createElement("a");_.text=s.EDITOR_ACTION,_.href="#",_.addEventListener("click",function(k){u3e(window,E,{config:i,mode:g?"vega":f,renderer:a,spec:fE(g?d:t)}),k.preventDefault()}),S.append(_)}}function b(){x&&document.removeEventListener("click",x),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:b,embedOptions:n}}const _m=({spec:e,className:t="",onStateClick:n})=>{const r=C.useRef(null);return C.useEffect(()=>{r.current&&(console.log("Embedding chart with spec:",e),b3e(r.current,e,{actions:{export:!0,source:!1,compiled:!1,editor:!1},renderer:"svg"}).then(i=>{n&&i.view&&i.view.addEventListener("click",(o,s)=>{var l,u,c,f,d,h,g;const a=((l=s==null?void 0:s.datum)==null?void 0:l.state)||((c=(u=s==null?void 0:s.datum)==null?void 0:u.properties)==null?void 0:c.STE_NAME21)||((d=(f=s==null?void 0:s.datum)==null?void 0:f.properties)==null?void 0:d.STATE_NAME)||((g=(h=s==null?void 0:s.datum)==null?void 0:h.properties)==null?void 0:g.state)||null;a&&n(a)})}).catch(i=>{console.error("Error embedding visualization:",i)}))},[e,n]),A.jsx("div",{ref:r,className:t,style:{width:"100%"}})},S3e=({selectedGroup:e,selectedStateName:t})=>{const n={$schema:"https://vega.github.io/schema/vega-lite/v6.4.1.json",width:"container",height:320,title:{text:"Threat Level Composition by State",fontSize:18,font:"Inter",fontWeight:600,color:"#4b6043"},data:{url:"threatened_species.csv"},transform:[...e!=="All"?[{filter:`datum.group == '${e}'`}]:[],...t?[{filter:`datum.state == '${t}'`}]:[],{aggregate:[{op:"sum",field:"count",as:"total_count"}],groupby:["state","status"]}],mark:{type:"bar",tooltip:!0},encoding:{x:{field:"state",type:"nominal",title:"State",axis:{labelAngle:-45,labelFont:"Inter",titleFont:"Inter",titleFontWeight:600}},y:{field:"total_count",type:"quantitative",title:"Number of Species",stack:"normalize",axis:{labelFont:"Inter",titleFont:"Inter",titleFontWeight:600,format:"%"}},color:{field:"status",type:"nominal",title:"Conservation Status",scale:{domain:["Critically Endangered","Endangered","Vulnerable"],range:["#b30000","#fc8d59","#fcbf49"]},legend:{titleFont:"Inter",titleFontWeight:600,labelFont:"Inter"}},tooltip:[{field:"state",type:"nominal",title:"State"},{field:"status",type:"nominal",title:"Status"},{field:"total_count",type:"quantitative",title:"Count"}]},config:{background:"transparent",axis:{grid:!0,gridColor:"#e5e5e5"}}};return A.jsx(_m,{spec:n})},_3e=({selectedGroup:e,selectedStateName:t})=>{const n={$schema:"https://vega.github.io/schema/vega-lite/v6.4.1.json",width:"container",height:320,title:{text:t?`Animal Groups in ${t}`:"Animal Groups Across Australia",fontSize:18,font:"Inter",fontWeight:600,color:"#4b6043"},data:{url:"threatened_species.csv"},transform:[...e!=="All"?[{filter:`datum.group == '${e}'`}]:[],...t?[{filter:`datum.state == '${t}'`}]:[],{aggregate:[{op:"sum",field:"count",as:"total_count"}],groupby:["group","status"]}],mark:{type:"bar",tooltip:!0},encoding:{x:{field:"group",type:"nominal",title:"Animal Group",axis:{labelAngle:-45,labelFont:"Inter",titleFont:"Inter",titleFontWeight:600}},y:{field:"total_count",type:"quantitative",title:"Number of Species",axis:{labelFont:"Inter",titleFont:"Inter",titleFontWeight:600}},color:{field:"status",type:"nominal",title:"Conservation Status",scale:{domain:["Critically Endangered","Endangered","Vulnerable"],range:["#b30000","#fc8d59","#fcbf49"]},legend:{titleFont:"Inter",titleFontWeight:600,labelFont:"Inter"}},xOffset:{field:"status"},tooltip:[{field:"group",type:"nominal",title:"Animal Group"},{field:"status",type:"nominal",title:"Status"},{field:"total_count",type:"quantitative",title:"Count"}]},config:{background:"transparent",axis:{grid:!0,gridColor:"#e5e5e5"}}};return A.jsx(_m,{spec:n})},C3e=({selectedGroup:e,selectedStateName:t})=>{const n={$schema:"https://vega.github.io/schema/vega-lite/v6.4.1.json",width:"container",height:320,title:{text:"Species Distribution: Group × Status",fontSize:18,font:"Inter",fontWeight:600,color:"#4b6043"},data:{url:"threatened_species.csv"},transform:[...e!=="All"?[{filter:`datum.group == '${e}'`}]:[],...t?[{filter:`datum.state == '${t}'`}]:[],{aggregate:[{op:"sum",field:"count",as:"total_count"}],groupby:["group","status"]}],mark:{type:"rect",tooltip:!0,stroke:"#fff",strokeWidth:2},encoding:{x:{field:"group",type:"nominal",title:"Animal Group",axis:{labelAngle:-45,labelFont:"Inter",titleFont:"Inter",titleFontWeight:600}},y:{field:"status",type:"nominal",title:"Conservation Status",axis:{labelFont:"Inter",titleFont:"Inter",titleFontWeight:600},sort:["Critically Endangered","Endangered","Vulnerable"]},color:{field:"total_count",type:"quantitative",title:"Species Count",scale:{scheme:"orangered"},legend:{titleFont:"Inter",titleFontWeight:600,labelFont:"Inter"}},tooltip:[{field:"group",type:"nominal",title:"Animal Group"},{field:"status",type:"nominal",title:"Status"},{field:"total_count",type:"quantitative",title:"Count"}]},config:{background:"transparent",axis:{grid:!1}}};return A.jsx(_m,{spec:n})},t_=({icon:e,title:t,description:n,highlight:r})=>A.jsx("div",{className:"mb-6 bg-gradient-to-r from-primary/5 to-secondary/5 rounded-lg p-5 border-l-4 border-primary",children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("div",{className:"mt-1 text-primary",children:A.jsx(e,{className:"h-6 w-6"})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:t}),A.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n}),r&&A.jsxs("p",{className:"mt-3 text-sm font-medium text-secondary bg-secondary/10 rounded px-3 py-2 inline-block",children:["💡 ",r]})]})]})});function o6(e,[t,n]){return Math.min(n,Math.max(t,e))}var k3e=C.createContext(void 0);function A3e(e){const t=C.useContext(k3e);return e||t||"ltr"}var n_=0;function $3e(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??s6()),document.body.insertAdjacentElement("beforeend",e[1]??s6()),n_++,()=>{n_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),n_--}},[])}function s6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var r_="focusScope.autoFocusOnMount",i_="focusScope.autoFocusOnUnmount",a6={bubbles:!1,cancelable:!0},T3e="FocusScope",gQ=C.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,l]=C.useState(null),u=uo(i),c=uo(o),f=C.useRef(null),d=Ft(t,p=>l(p)),h=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let p=function(x){if(h.paused||!a)return;const b=x.target;a.contains(b)?f.current=b:La(f.current,{select:!0})},m=function(x){if(h.paused||!a)return;const b=x.relatedTarget;b!==null&&(a.contains(b)||La(f.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const w of x)w.removedNodes.length>0&&La(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",m);const v=new MutationObserver(y);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",m),v.disconnect()}}},[r,a,h.paused]),C.useEffect(()=>{if(a){u6.add(h);const p=document.activeElement;if(!a.contains(p)){const y=new CustomEvent(r_,a6);a.addEventListener(r_,u),a.dispatchEvent(y),y.defaultPrevented||(N3e(P3e(mQ(a)),{select:!0}),document.activeElement===p&&La(a))}return()=>{a.removeEventListener(r_,u),setTimeout(()=>{const y=new CustomEvent(i_,a6);a.addEventListener(i_,c),a.dispatchEvent(y),y.defaultPrevented||La(p??document.body,{select:!0}),a.removeEventListener(i_,c),u6.remove(h)},0)}}},[a,u,c,h]);const g=C.useCallback(p=>{if(!n&&!r||h.paused)return;const m=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(m&&y){const v=p.currentTarget,[x,b]=M3e(v);x&&b?!p.shiftKey&&y===b?(p.preventDefault(),n&&La(x,{select:!0})):p.shiftKey&&y===x&&(p.preventDefault(),n&&La(b,{select:!0})):y===v&&p.preventDefault()}},[n,r,h.paused]);return A.jsx(rt.div,{tabIndex:-1,...s,ref:d,onKeyDown:g})});gQ.displayName=T3e;function N3e(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(La(r,{select:t}),document.activeElement!==n)return}function M3e(e){const t=mQ(e),n=l6(t,e),r=l6(t.reverse(),e);return[n,r]}function mQ(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function l6(e,t){for(const n of e)if(!R3e(n,{upTo:t}))return n}function R3e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function F3e(e){return e instanceof HTMLInputElement&&"select"in e}function La(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&F3e(e)&&t&&e.select()}}var u6=O3e();function O3e(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=c6(e,t),e.unshift(t)},remove(t){var n;e=c6(e,t),(n=e[0])==null||n.resume()}}}function c6(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function P3e(e){return e.filter(t=>t.tagName!=="A")}function D3e(e){const t=C.useRef({value:e,previous:e});return C.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var I3e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},wf=new WeakMap,zy=new WeakMap,jy={},o_=0,yQ=function(e){return e&&(e.host||yQ(e.parentNode))},L3e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=yQ(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},z3e=function(e,t,n,r){var i=L3e(t,Array.isArray(e)?e:[e]);jy[n]||(jy[n]=new WeakMap);var o=jy[n],s=[],a=new Set,l=new Set(i),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};i.forEach(u);var c=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(d){if(a.has(d))c(d);else try{var h=d.getAttribute(r),g=h!==null&&h!=="false",p=(wf.get(d)||0)+1,m=(o.get(d)||0)+1;wf.set(d,p),o.set(d,m),s.push(d),p===1&&g&&zy.set(d,!0),m===1&&d.setAttribute(n,"true"),g||d.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",d,y)}})};return c(t),a.clear(),o_++,function(){s.forEach(function(f){var d=wf.get(f)-1,h=o.get(f)-1;wf.set(f,d),o.set(f,h),d||(zy.has(f)||f.removeAttribute(r),zy.delete(f)),h||f.removeAttribute(n)}),o_--,o_||(wf=new WeakMap,wf=new WeakMap,zy=new WeakMap,jy={})}},j3e=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=I3e(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),z3e(r,i,n,"aria-hidden")):function(){return null}},qo=function(){return qo=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},qo.apply(this,arguments)};function vQ(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function B3e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var N1="right-scroll-bar-position",M1="width-before-scroll-bar",U3e="with-scroll-bars-hidden",W3e="--removed-body-scroll-bar-size";function s_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function q3e(e,t){var n=C.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var H3e=typeof window<"u"?C.useLayoutEffect:C.useEffect,f6=new WeakMap;function V3e(e,t){var n=q3e(null,function(r){return e.forEach(function(i){return s_(i,r)})});return H3e(function(){var r=f6.get(n);if(r){var i=new Set(r),o=new Set(e),s=n.current;i.forEach(function(a){o.has(a)||s_(a,null)}),o.forEach(function(a){i.has(a)||s_(a,s)})}f6.set(n,e)},[e]),n}function G3e(e){return e}function Y3e(e,t){t===void 0&&(t=G3e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var s=t(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var c=s;s=[],c.forEach(o)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){s.push(c),u()},filter:function(c){return s=s.filter(c),n}}}};return i}function X3e(e){e===void 0&&(e={});var t=Y3e(null);return t.options=qo({async:!0,ssr:!1},e),t}var xQ=function(e){var t=e.sideCar,n=vQ(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,qo({},n))};xQ.isSideCarExport=!0;function K3e(e,t){return e.useMedium(t),xQ}var bQ=X3e(),a_=function(){},C2=C.forwardRef(function(e,t){var n=C.useRef(null),r=C.useState({onScrollCapture:a_,onWheelCapture:a_,onTouchMoveCapture:a_}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noRelative,g=e.noIsolation,p=e.inert,m=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,x=e.gapMode,b=vQ(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,S=V3e([n,t]),E=qo(qo({},b),i);return C.createElement(C.Fragment,null,c&&C.createElement(w,{sideCar:bQ,removeScrollBar:u,shards:f,noRelative:h,noIsolation:g,inert:p,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:x}),s?C.cloneElement(C.Children.only(a),qo(qo({},E),{ref:S})):C.createElement(v,qo({},E,{className:l,ref:S}),a))});C2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};C2.classNames={fullWidth:M1,zeroRight:N1};var Q3e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Z3e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Q3e();return t&&e.setAttribute("nonce",t),e}function J3e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function eDe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var tDe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Z3e())&&(J3e(t,n),eDe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nDe=function(){var e=tDe();return function(t,n){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},wQ=function(){var e=nDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},rDe={left:0,top:0,right:0,gap:0},l_=function(e){return parseInt(e||"",10)||0},iDe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[l_(n),l_(r),l_(i)]},oDe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rDe;var t=iDe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},sDe=wQ(),fd="data-scroll-locked",aDe=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(U3e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(fd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(N1,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(M1,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(N1," .").concat(N1,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(M1," .").concat(M1,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(fd,`] {
    `).concat(W3e,": ").concat(a,`px;
  }
`)},d6=function(){var e=parseInt(document.body.getAttribute(fd)||"0",10);return isFinite(e)?e:0},lDe=function(){C.useEffect(function(){return document.body.setAttribute(fd,(d6()+1).toString()),function(){var e=d6()-1;e<=0?document.body.removeAttribute(fd):document.body.setAttribute(fd,e.toString())}},[])},uDe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;lDe();var o=C.useMemo(function(){return oDe(i)},[i]);return C.createElement(sDe,{styles:aDe(o,!t,i,n?"":"!important")})},FA=!1;if(typeof window<"u")try{var By=Object.defineProperty({},"passive",{get:function(){return FA=!0,!0}});window.addEventListener("test",By,By),window.removeEventListener("test",By,By)}catch{FA=!1}var Ef=FA?{passive:!1}:!1,cDe=function(e){return e.tagName==="TEXTAREA"},EQ=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!cDe(e)&&n[t]==="visible")},fDe=function(e){return EQ(e,"overflowY")},dDe=function(e){return EQ(e,"overflowX")},h6=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=SQ(e,r);if(i){var o=_Q(e,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},pDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},SQ=function(e,t){return e==="v"?fDe(t):dDe(t)},_Q=function(e,t){return e==="v"?hDe(t):pDe(t)},gDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},mDe=function(e,t,n,r,i){var o=gDe(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,l=t.contains(a),u=!1,c=s>0,f=0,d=0;do{if(!a)break;var h=_Q(e,a),g=h[0],p=h[1],m=h[2],y=p-m-o*g;(g||y)&&SQ(e,a)&&(f+=y,d+=g);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(u=!0),u},Uy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},p6=function(e){return[e.deltaX,e.deltaY]},g6=function(e){return e&&"current"in e?e.current:e},yDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},xDe=0,Sf=[];function bDe(e){var t=C.useRef([]),n=C.useRef([0,0]),r=C.useRef(),i=C.useState(xDe++)[0],o=C.useState(wQ)[0],s=C.useRef(e);C.useEffect(function(){s.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=B3e([e.lockRef.current],(e.shards||[]).map(g6),!0).filter(Boolean);return p.forEach(function(m){return m.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=C.useCallback(function(p,m){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var y=Uy(p),v=n.current,x="deltaX"in p?p.deltaX:v[0]-y[0],b="deltaY"in p?p.deltaY:v[1]-y[1],w,S=p.target,E=Math.abs(x)>Math.abs(b)?"h":"v";if("touches"in p&&E==="h"&&S.type==="range")return!1;var _=h6(E,S);if(!_)return!0;if(_?w=E:(w=E==="v"?"h":"v",_=h6(E,S)),!_)return!1;if(!r.current&&"changedTouches"in p&&(x||b)&&(r.current=w),!w)return!0;var k=r.current||w;return mDe(k,m,p,k==="h"?x:b,!0)},[]),l=C.useCallback(function(p){var m=p;if(!(!Sf.length||Sf[Sf.length-1]!==o)){var y="deltaY"in m?p6(m):Uy(m),v=t.current.filter(function(w){return w.name===m.type&&(w.target===m.target||m.target===w.shadowParent)&&yDe(w.delta,y)})[0];if(v&&v.should){m.cancelable&&m.preventDefault();return}if(!v){var x=(s.current.shards||[]).map(g6).filter(Boolean).filter(function(w){return w.contains(m.target)}),b=x.length>0?a(m,x[0]):!s.current.noIsolation;b&&m.cancelable&&m.preventDefault()}}},[]),u=C.useCallback(function(p,m,y,v){var x={name:p,delta:m,target:y,should:v,shadowParent:wDe(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(b){return b!==x})},1)},[]),c=C.useCallback(function(p){n.current=Uy(p),r.current=void 0},[]),f=C.useCallback(function(p){u(p.type,p6(p),p.target,a(p,e.lockRef.current))},[]),d=C.useCallback(function(p){u(p.type,Uy(p),p.target,a(p,e.lockRef.current))},[]);C.useEffect(function(){return Sf.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",l,Ef),document.addEventListener("touchmove",l,Ef),document.addEventListener("touchstart",c,Ef),function(){Sf=Sf.filter(function(p){return p!==o}),document.removeEventListener("wheel",l,Ef),document.removeEventListener("touchmove",l,Ef),document.removeEventListener("touchstart",c,Ef)}},[]);var h=e.removeScrollBar,g=e.inert;return C.createElement(C.Fragment,null,g?C.createElement(o,{styles:vDe(i)}):null,h?C.createElement(uDe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function wDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const EDe=K3e(bQ,bDe);var CQ=C.forwardRef(function(e,t){return C.createElement(C2,qo({},e,{ref:t,sideCar:EDe}))});CQ.classNames=C2.classNames;var SDe=[" ","Enter","ArrowUp","ArrowDown"],_De=[" ","Enter"],Oc="Select",[k2,A2,CDe]=U8(Oc),[qh,X5e]=Rm(Oc,[CDe,fb]),$2=fb(),[kDe,uu]=qh(Oc),[ADe,$De]=qh(Oc),kQ=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:f,disabled:d,required:h,form:g}=e,p=$2(t),[m,y]=C.useState(null),[v,x]=C.useState(null),[b,w]=C.useState(!1),S=A3e(u),[E,_]=nC({prop:r,defaultProp:i??!1,onChange:o,caller:Oc}),[k,T]=nC({prop:s,defaultProp:a,onChange:l,caller:Oc}),N=C.useRef(null),P=m?g||!!m.closest("form"):!0,[D,M]=C.useState(new Set),$=Array.from(D).map(R=>R.props.value).join(";");return A.jsx(Bie,{...p,children:A.jsxs(kDe,{required:h,scope:t,trigger:m,onTriggerChange:y,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:j$(),value:k,onValueChange:T,open:E,onOpenChange:_,dir:S,triggerPointerDownPosRef:N,disabled:d,children:[A.jsx(k2.Provider,{scope:t,children:A.jsx(ADe,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(R=>{M(I=>new Set(I).add(R))},[]),onNativeOptionRemove:C.useCallback(R=>{M(I=>{const F=new Set(I);return F.delete(R),F})},[]),children:n})}),P?A.jsxs(KQ,{"aria-hidden":!0,required:h,tabIndex:-1,name:c,autoComplete:f,value:k,onChange:R=>T(R.target.value),disabled:d,form:g,children:[k===void 0?A.jsx("option",{value:""}):null,Array.from(D)]},$):null]})})};kQ.displayName=Oc;var AQ="SelectTrigger",$Q=C.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,o=$2(n),s=uu(AQ,n),a=s.disabled||r,l=Ft(t,s.onTriggerChange),u=A2(n),c=C.useRef("touch"),[f,d,h]=ZQ(p=>{const m=u().filter(x=>!x.disabled),y=m.find(x=>x.value===s.value),v=JQ(m,p,y);v!==void 0&&s.onValueChange(v.value)}),g=p=>{a||(s.onOpenChange(!0),h()),p&&(s.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return A.jsx(X9,{asChild:!0,...o,children:A.jsx(rt.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":QQ(s.value)?"":void 0,...i,ref:l,onClick:De(i.onClick,p=>{p.currentTarget.focus(),c.current!=="mouse"&&g(p)}),onPointerDown:De(i.onPointerDown,p=>{c.current=p.pointerType;const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:De(i.onKeyDown,p=>{const m=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&SDe.includes(p.key)&&(g(),p.preventDefault())})})})});$Q.displayName=AQ;var TQ="SelectValue",NQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...a}=e,l=uu(TQ,n),{onValueNodeHasChildrenChange:u}=l,c=o!==void 0,f=Ft(t,l.onValueNodeChange);return wn(()=>{u(c)},[u,c]),A.jsx(rt.span,{...a,ref:f,style:{pointerEvents:"none"},children:QQ(l.value)?A.jsx(A.Fragment,{children:s}):o})});NQ.displayName=TQ;var TDe="SelectIcon",MQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return A.jsx(rt.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});MQ.displayName=TDe;var NDe="SelectPortal",RQ=e=>A.jsx(O$,{asChild:!0,...e});RQ.displayName=NDe;var Pc="SelectContent",FQ=C.forwardRef((e,t)=>{const n=uu(Pc,e.__scopeSelect),[r,i]=C.useState();if(wn(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?Lc.createPortal(A.jsx(OQ,{scope:e.__scopeSelect,children:A.jsx(k2.Slot,{scope:e.__scopeSelect,children:A.jsx("div",{children:e.children})})}),o):null}return A.jsx(PQ,{...e,ref:t})});FQ.displayName=Pc;var Bi=10,[OQ,cu]=qh(Pc),MDe="SelectContentImpl",RDe=Ug("SelectContent.RemoveScroll"),PQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:f,collisionBoundary:d,collisionPadding:h,sticky:g,hideWhenDetached:p,avoidCollisions:m,...y}=e,v=uu(Pc,n),[x,b]=C.useState(null),[w,S]=C.useState(null),E=Ft(t,oe=>b(oe)),[_,k]=C.useState(null),[T,N]=C.useState(null),P=A2(n),[D,M]=C.useState(!1),$=C.useRef(!1);C.useEffect(()=>{if(x)return j3e(x)},[x]),$3e();const R=C.useCallback(oe=>{const[Re,...ee]=P().map(j=>j.ref.current),[ue]=ee.slice(-1),ce=document.activeElement;for(const j of oe)if(j===ce||(j==null||j.scrollIntoView({block:"nearest"}),j===Re&&w&&(w.scrollTop=0),j===ue&&w&&(w.scrollTop=w.scrollHeight),j==null||j.focus(),document.activeElement!==ce))return},[P,w]),I=C.useCallback(()=>R([_,x]),[R,_,x]);C.useEffect(()=>{D&&I()},[D,I]);const{onOpenChange:F,triggerPointerDownPosRef:O}=v;C.useEffect(()=>{if(x){let oe={x:0,y:0};const Re=ue=>{var ce,j;oe={x:Math.abs(Math.round(ue.pageX)-(((ce=O.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((j=O.current)==null?void 0:j.y)??0))}},ee=ue=>{oe.x<=10&&oe.y<=10?ue.preventDefault():x.contains(ue.target)||F(!1),document.removeEventListener("pointermove",Re),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",ee,{capture:!0})}}},[x,F,O]),C.useEffect(()=>{const oe=()=>F(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[F]);const[L,X]=ZQ(oe=>{const Re=P().filter(ce=>!ce.disabled),ee=Re.find(ce=>ce.ref.current===document.activeElement),ue=JQ(Re,oe,ee);ue&&setTimeout(()=>ue.ref.current.focus())}),V=C.useCallback((oe,Re,ee)=>{const ue=!$.current&&!ee;(v.value!==void 0&&v.value===Re||ue)&&(k(oe),ue&&($.current=!0))},[v.value]),ne=C.useCallback(()=>x==null?void 0:x.focus(),[x]),de=C.useCallback((oe,Re,ee)=>{const ue=!$.current&&!ee;(v.value!==void 0&&v.value===Re||ue)&&N(oe)},[v.value]),he=r==="popper"?OA:DQ,Ne=he===OA?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:f,collisionBoundary:d,collisionPadding:h,sticky:g,hideWhenDetached:p,avoidCollisions:m}:{};return A.jsx(OQ,{scope:n,content:x,viewport:w,onViewportChange:S,itemRefCallback:V,selectedItem:_,onItemLeave:ne,itemTextRefCallback:de,focusSelectedItem:I,selectedItemText:T,position:r,isPositioned:D,searchRef:L,children:A.jsx(CQ,{as:RDe,allowPinchZoom:!0,children:A.jsx(gQ,{asChild:!0,trapped:v.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:De(i,oe=>{var Re;(Re=v.trigger)==null||Re.focus({preventScroll:!0}),oe.preventDefault()}),children:A.jsx(ob,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:A.jsx(he,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:oe=>oe.preventDefault(),...y,...Ne,onPlaced:()=>M(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:De(y.onKeyDown,oe=>{const Re=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!Re&&oe.key.length===1&&X(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let ue=P().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const ce=oe.target,j=ue.indexOf(ce);ue=ue.slice(j+1)}setTimeout(()=>R(ue)),oe.preventDefault()}})})})})})})});PQ.displayName=MDe;var FDe="SelectItemAlignedPosition",DQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,o=uu(Pc,n),s=cu(Pc,n),[a,l]=C.useState(null),[u,c]=C.useState(null),f=Ft(t,E=>c(E)),d=A2(n),h=C.useRef(!1),g=C.useRef(!0),{viewport:p,selectedItem:m,selectedItemText:y,focusSelectedItem:v}=s,x=C.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&p&&m&&y){const E=o.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),k=o.valueNode.getBoundingClientRect(),T=y.getBoundingClientRect();if(o.dir!=="rtl"){const ce=T.left-_.left,j=k.left-ce,je=E.left-j,ke=E.width+je,at=Math.max(ke,_.width),ct=window.innerWidth-Bi,cn=o6(j,[Bi,Math.max(Bi,ct-at)]);a.style.minWidth=ke+"px",a.style.left=cn+"px"}else{const ce=_.right-T.right,j=window.innerWidth-k.right-ce,je=window.innerWidth-E.right-j,ke=E.width+je,at=Math.max(ke,_.width),ct=window.innerWidth-Bi,cn=o6(j,[Bi,Math.max(Bi,ct-at)]);a.style.minWidth=ke+"px",a.style.right=cn+"px"}const N=d(),P=window.innerHeight-Bi*2,D=p.scrollHeight,M=window.getComputedStyle(u),$=parseInt(M.borderTopWidth,10),R=parseInt(M.paddingTop,10),I=parseInt(M.borderBottomWidth,10),F=parseInt(M.paddingBottom,10),O=$+R+D+F+I,L=Math.min(m.offsetHeight*5,O),X=window.getComputedStyle(p),V=parseInt(X.paddingTop,10),ne=parseInt(X.paddingBottom,10),de=E.top+E.height/2-Bi,he=P-de,Ne=m.offsetHeight/2,oe=m.offsetTop+Ne,Re=$+R+oe,ee=O-Re;if(Re<=de){const ce=N.length>0&&m===N[N.length-1].ref.current;a.style.bottom="0px";const j=u.clientHeight-p.offsetTop-p.offsetHeight,je=Math.max(he,Ne+(ce?ne:0)+j+I),ke=Re+je;a.style.height=ke+"px"}else{const ce=N.length>0&&m===N[0].ref.current;a.style.top="0px";const je=Math.max(de,$+p.offsetTop+(ce?V:0)+Ne)+ee;a.style.height=je+"px",p.scrollTop=Re-de+p.offsetTop}a.style.margin=`${Bi}px 0`,a.style.minHeight=L+"px",a.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[d,o.trigger,o.valueNode,a,u,p,m,y,o.dir,r]);wn(()=>x(),[x]);const[b,w]=C.useState();wn(()=>{u&&w(window.getComputedStyle(u).zIndex)},[u]);const S=C.useCallback(E=>{E&&g.current===!0&&(x(),v==null||v(),g.current=!1)},[x,v]);return A.jsx(PDe,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:S,children:A.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:A.jsx(rt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});DQ.displayName=FDe;var ODe="SelectPopperPosition",OA=C.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Bi,...o}=e,s=$2(n);return A.jsx(K9,{...s,...o,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});OA.displayName=ODe;var[PDe,CO]=qh(Pc,{}),PA="SelectViewport",IQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,o=cu(PA,n),s=CO(PA,n),a=Ft(t,o.onViewportChange),l=C.useRef(0);return A.jsxs(A.Fragment,{children:[A.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),A.jsx(k2.Slot,{scope:n,children:A.jsx(rt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:De(i.onScroll,u=>{const c=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&f){const h=Math.abs(l.current-c.scrollTop);if(h>0){const g=window.innerHeight-Bi*2,p=parseFloat(f.style.minHeight),m=parseFloat(f.style.height),y=Math.max(p,m);if(y<g){const v=y+h,x=Math.min(g,v),b=v-x;f.style.height=x+"px",f.style.bottom==="0px"&&(c.scrollTop=b>0?b:0,f.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});IQ.displayName=PA;var LQ="SelectGroup",[DDe,IDe]=qh(LQ),LDe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=j$();return A.jsx(DDe,{scope:n,id:i,children:A.jsx(rt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});LDe.displayName=LQ;var zQ="SelectLabel",jQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=IDe(zQ,n);return A.jsx(rt.div,{id:i.id,...r,ref:t})});jQ.displayName=zQ;var Ux="SelectItem",[zDe,BQ]=qh(Ux),UQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=e,a=uu(Ux,n),l=cu(Ux,n),u=a.value===r,[c,f]=C.useState(o??""),[d,h]=C.useState(!1),g=Ft(t,v=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,v,r,i)}),p=j$(),m=C.useRef("touch"),y=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return A.jsx(zDe,{scope:n,value:r,disabled:i,textId:p,isSelected:u,onItemTextChange:C.useCallback(v=>{f(x=>x||((v==null?void 0:v.textContent)??"").trim())},[]),children:A.jsx(k2.ItemSlot,{scope:n,value:r,disabled:i,textValue:c,children:A.jsx(rt.div,{role:"option","aria-labelledby":p,"data-highlighted":d?"":void 0,"aria-selected":u&&d,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:g,onFocus:De(s.onFocus,()=>h(!0)),onBlur:De(s.onBlur,()=>h(!1)),onClick:De(s.onClick,()=>{m.current!=="mouse"&&y()}),onPointerUp:De(s.onPointerUp,()=>{m.current==="mouse"&&y()}),onPointerDown:De(s.onPointerDown,v=>{m.current=v.pointerType}),onPointerMove:De(s.onPointerMove,v=>{var x;m.current=v.pointerType,i?(x=l.onItemLeave)==null||x.call(l):m.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(s.onPointerLeave,v=>{var x;v.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:De(s.onKeyDown,v=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&v.key===" "||(_De.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});UQ.displayName=Ux;var eg="SelectItemText",WQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...o}=e,s=uu(eg,n),a=cu(eg,n),l=BQ(eg,n),u=$De(eg,n),[c,f]=C.useState(null),d=Ft(t,y=>f(y),l.onItemTextChange,y=>{var v;return(v=a.itemTextRefCallback)==null?void 0:v.call(a,y,l.value,l.disabled)}),h=c==null?void 0:c.textContent,g=C.useMemo(()=>A.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:p,onNativeOptionRemove:m}=u;return wn(()=>(p(g),()=>m(g)),[p,m,g]),A.jsxs(A.Fragment,{children:[A.jsx(rt.span,{id:l.textId,...o,ref:d}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Lc.createPortal(o.children,s.valueNode):null]})});WQ.displayName=eg;var qQ="SelectItemIndicator",HQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return BQ(qQ,n).isSelected?A.jsx(rt.span,{"aria-hidden":!0,...r,ref:t}):null});HQ.displayName=qQ;var DA="SelectScrollUpButton",VQ=C.forwardRef((e,t)=>{const n=cu(DA,e.__scopeSelect),r=CO(DA,e.__scopeSelect),[i,o]=C.useState(!1),s=Ft(t,r.onScrollButtonChange);return wn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?A.jsx(YQ,{...e,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});VQ.displayName=DA;var IA="SelectScrollDownButton",GQ=C.forwardRef((e,t)=>{const n=cu(IA,e.__scopeSelect),r=CO(IA,e.__scopeSelect),[i,o]=C.useState(!1),s=Ft(t,r.onScrollButtonChange);return wn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;o(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?A.jsx(YQ,{...e,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});GQ.displayName=IA;var YQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,o=cu("SelectScrollButton",n),s=C.useRef(null),a=A2(n),l=C.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return C.useEffect(()=>()=>l(),[l]),wn(()=>{var c;const u=a().find(f=>f.ref.current===document.activeElement);(c=u==null?void 0:u.ref.current)==null||c.scrollIntoView({block:"nearest"})},[a]),A.jsx(rt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:De(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:De(i.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:De(i.onPointerLeave,()=>{l()})})}),jDe="SelectSeparator",XQ=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return A.jsx(rt.div,{"aria-hidden":!0,...r,ref:t})});XQ.displayName=jDe;var LA="SelectArrow",BDe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=$2(n),o=uu(LA,n),s=cu(LA,n);return o.open&&s.position==="popper"?A.jsx(Q9,{...i,...r,ref:t}):null});BDe.displayName=LA;var UDe="SelectBubbleInput",KQ=C.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=C.useRef(null),o=Ft(r,i),s=D3e(t);return C.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&c){const f=new Event("change",{bubbles:!0});c.call(a,t),a.dispatchEvent(f)}},[s,t]),A.jsx(rt.select,{...n,style:{...G8,...n.style},ref:o,defaultValue:t})});KQ.displayName=UDe;function QQ(e){return e===""||e===void 0}function ZQ(e){const t=uo(e),n=C.useRef(""),r=C.useRef(0),i=C.useCallback(s=>{const a=n.current+s;t(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[t]),o=C.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function JQ(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let s=WDe(e,Math.max(o,0));i.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function WDe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var qDe=kQ,eZ=$Q,HDe=NQ,VDe=MQ,GDe=RQ,tZ=FQ,YDe=IQ,nZ=jQ,rZ=UQ,XDe=WQ,KDe=HQ,iZ=VQ,oZ=GQ,sZ=XQ;const QDe=qDe,ZDe=HDe,aZ=C.forwardRef(({className:e,children:t,...n},r)=>A.jsxs(eZ,{ref:r,className:Un("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,A.jsx(VDe,{asChild:!0,children:A.jsx(y9,{className:"h-4 w-4 opacity-50"})})]}));aZ.displayName=eZ.displayName;const lZ=C.forwardRef(({className:e,...t},n)=>A.jsx(iZ,{ref:n,className:Un("flex cursor-default items-center justify-center py-1",e),...t,children:A.jsx(Kte,{className:"h-4 w-4"})}));lZ.displayName=iZ.displayName;const uZ=C.forwardRef(({className:e,...t},n)=>A.jsx(oZ,{ref:n,className:Un("flex cursor-default items-center justify-center py-1",e),...t,children:A.jsx(y9,{className:"h-4 w-4"})}));uZ.displayName=oZ.displayName;const cZ=C.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>A.jsx(GDe,{children:A.jsxs(tZ,{ref:i,className:Un("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[A.jsx(lZ,{}),A.jsx(YDe,{className:Un("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),A.jsx(uZ,{})]})}));cZ.displayName=tZ.displayName;const JDe=C.forwardRef(({className:e,...t},n)=>A.jsx(nZ,{ref:n,className:Un("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));JDe.displayName=nZ.displayName;const Tu=C.forwardRef(({className:e,children:t,...n},r)=>A.jsxs(rZ,{ref:r,className:Un("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[A.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:A.jsx(KDe,{children:A.jsx(Xte,{className:"h-4 w-4"})})}),A.jsx(XDe,{children:t})]}));Tu.displayName=rZ.displayName;const e5e=C.forwardRef(({className:e,...t},n)=>A.jsx(sZ,{ref:n,className:Un("-mx-1 my-1 h-px bg-muted",e),...t}));e5e.displayName=sZ.displayName;const t5e=g9("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),fZ=C.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const s=r?nte:"button";return A.jsx(s,{className:Un(t5e({variant:t,size:n,className:e})),ref:o,...i})});fZ.displayName="Button";const n5e=()=>{const[e,t]=C.useState("All"),[n,r]=C.useState(null),i={NSW:"New South Wales",VIC:"Victoria",QLD:"Queensland",WA:"Western Australia",SA:"South Australia",TAS:"Tasmania",NT:"Northern Territory",ACT:"Australian Capital Territory"},o=n?i[n]:null,s={$schema:"https://vega.github.io/schema/vega-lite/v6.4.1.json",width:"container",height:500,projection:{type:"equalEarth"},data:{url:"/threatened_species.csv"},transform:[...e!=="All"?[{filter:`datum.group == '${e}'`}]:[],{aggregate:[{op:"sum",field:"count",as:"species_count"}],groupby:["state"]},{lookup:"state",from:{data:{url:"/australia.json",format:{type:"json",property:"features"}},key:"properties.STE_NAME21",fields:["geometry"]}}],mark:{type:"geoshape",stroke:"#666",strokeWidth:.5},encoding:{shape:{field:"geometry",type:"geojson"},color:{field:"species_count",type:"quantitative",scale:{scheme:"reds"},legend:{title:"Threatened Species",orient:"bottom",direction:"horizontal",gradientLength:300}},tooltip:[{field:"state",type:"nominal",title:"State"},{field:"species_count",type:"quantitative",title:"Threatened Species",format:",.0f"}]}},a=u=>{if(u){const c=Object.keys(i).find(f=>i[f]===u);r(f=>f===c?null:c||null)}},l={$schema:"https://vega.github.io/schema/vega-lite/v6.4.1.json",width:"container",height:320,title:{text:n?`Threat Categories in ${i[n]||n}`:"Threat Categories Across All States",fontSize:18,font:"Inter",fontWeight:600,color:"#4b6043"},data:{url:"/threatened_species.csv"},transform:[...e!=="All"?[{filter:`datum.group == '${e}'`}]:[],...n?[{filter:`datum.state == '${i[n]}'`}]:[],{aggregate:[{op:"sum",field:"count",as:"total_count"}],groupby:["status"]}],mark:{type:"bar",cornerRadiusEnd:4,cursor:"pointer"},encoding:{x:{field:"status",type:"nominal",title:"Conservation Status",axis:{labelAngle:-45,labelFont:"Inter",titleFont:"Inter",titleFontWeight:600},sort:["Critically Endangered","Endangered","Vulnerable"]},y:{field:"total_count",type:"quantitative",title:"Number of Species",axis:{labelFont:"Inter",titleFont:"Inter",titleFontWeight:600}},color:{field:"status",type:"nominal",scale:{domain:["Critically Endangered","Endangered","Vulnerable"],range:["#d62828","#f77f00","#fcbf49"]},legend:null},tooltip:[{field:"status",type:"nominal",title:"Status"},{field:"total_count",type:"quantitative",title:"Count"}]},config:{background:"transparent",axis:{grid:!0,gridColor:"#e5e5e5"}}};return A.jsxs("div",{className:"min-h-screen bg-background",children:[A.jsx(yse,{}),A.jsx("header",{className:"bg-gradient-to-b from-primary/5 to-background border-b border-border",children:A.jsxs("div",{className:"container mx-auto px-6 lg:px-8 py-16 lg:py-20 max-w-7xl",children:[A.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-4 leading-tight",children:"Where Do Australia's Threatened Animals Live?"}),A.jsx("p",{className:"text-xl lg:text-2xl text-muted-foreground mb-6",children:"🐨 🦜 🐍 🐠"}),A.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl leading-relaxed",children:"Australia hosts some of the most diverse wildlife on Earth — but many are under threat. Explore which regions are most affected and which groups face the greatest conservation risks through this interactive visualisation of EPBC Act threatened species data."})]})}),A.jsx("section",{id:"visualisation",className:"container mx-auto px-6 lg:px-8 py-8 max-w-7xl",children:A.jsx("div",{className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:A.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 justify-between",children:[A.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[A.jsx("label",{htmlFor:"group-filter",className:"text-sm font-semibold text-foreground whitespace-nowrap",children:"Filter by Species Group:"}),A.jsxs(QDe,{value:e,onValueChange:t,children:[A.jsx(aZ,{className:"w-64 bg-background shadow-sm","aria-label":"Select species group",children:A.jsx(ZDe,{placeholder:"Select species group"})}),A.jsxs(cZ,{className:"bg-card z-50",children:[A.jsx(Tu,{value:"All",children:"All Groups"}),A.jsx(Tu,{value:"Mammals",children:"🐨 Mammals"}),A.jsx(Tu,{value:"Birds",children:"🦜 Birds"}),A.jsx(Tu,{value:"Reptiles",children:"🐍 Reptiles"}),A.jsx(Tu,{value:"Amphibians",children:"🐸 Amphibians"}),A.jsx(Tu,{value:"Fish",children:"🐠 Fish"})]})]})]}),(n||e!=="All")&&A.jsx(fZ,{onClick:()=>{r(null),t("All")},variant:"outline",size:"sm",className:"whitespace-nowrap",children:"Reset All Filters ✕"})]})})}),A.jsxs("section",{className:"container mx-auto px-6 lg:px-8 py-6 max-w-7xl",children:[A.jsx(t_,{icon:Jte,title:"Where Do Threatened Species Live?",description:"This choropleth map reveals the geographic distribution of threatened animal species across Australian states and territories. Darker shades indicate higher concentrations of at-risk wildlife.",highlight:"Queensland hosts the highest number of threatened species, followed by New South Wales and Western Australia"}),A.jsxs("div",{className:"bg-card rounded-xl p-6 lg:p-8 shadow-lg border border-border hover:shadow-xl transition-shadow",children:[A.jsx(_m,{spec:s,onStateClick:a}),A.jsx("p",{className:"text-xs text-muted-foreground italic text-center mt-4",children:"Hover over states to see species counts • Click to filter other visualizations"})]})]}),A.jsxs("section",{className:"container mx-auto px-6 lg:px-8 py-6 max-w-7xl",children:[A.jsx(t_,{icon:Yte,title:"How Do Threat Levels Differ Across Regions?",description:"Understanding the composition of threat categories helps identify which states face the most severe conservation challenges. The stacked bar chart shows the proportional breakdown of Critically Endangered, Endangered, and Vulnerable species.",highlight:"Victoria shows a higher proportion of 'Vulnerable' species, indicating early-stage threats requiring immediate intervention"}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-card rounded-xl p-6 lg:p-8 shadow-lg border border-border hover:shadow-xl transition-shadow",children:[A.jsx(S3e,{selectedGroup:e,selectedStateName:o}),A.jsx("p",{className:"text-xs text-muted-foreground italic text-center mt-4",children:"Normalized view showing threat composition by state"})]}),A.jsxs("div",{className:"bg-card rounded-xl p-6 lg:p-8 shadow-lg border border-border hover:shadow-xl transition-shadow",children:[A.jsx(_m,{spec:l}),A.jsxs("p",{className:"text-xs text-muted-foreground italic text-center mt-4",children:["Conservation status distribution ",n?`in ${i[n]}`:"across Australia"]})]})]})]}),A.jsxs("section",{className:"container mx-auto px-6 lg:px-8 py-6 max-w-7xl",children:[A.jsx(t_,{icon:Qte,title:"Which Animal Groups Are Most at Risk?",description:"Different animal groups face varying levels of threat across Australia. Mammals and birds dominate the threatened species lists, but reptiles and amphibians also show significant vulnerability in specific regions.",highlight:"Mammals account for the largest proportion of threatened species, followed by birds and reptiles"}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-card rounded-xl p-6 lg:p-8 shadow-lg border border-border hover:shadow-xl transition-shadow",children:[A.jsx(_3e,{selectedGroup:e,selectedStateName:o}),A.jsx("p",{className:"text-xs text-muted-foreground italic text-center mt-4",children:"Grouped comparison of animal groups by threat status"})]}),A.jsxs("div",{className:"bg-card rounded-xl p-6 lg:p-8 shadow-lg border border-border hover:shadow-xl transition-shadow",children:[A.jsx(C3e,{selectedGroup:e,selectedStateName:o}),A.jsx("p",{className:"text-xs text-muted-foreground italic text-center mt-4",children:"Heatmap showing species distribution across group and status combinations"})]})]})]}),A.jsx("section",{className:"container mx-auto px-6 lg:px-8 py-6 max-w-7xl",children:A.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:[A.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[A.jsx(Zte,{className:"h-5 w-5 text-primary"}),"Explore by State or Territory"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-3",children:["NSW","VIC","QLD","WA","SA","TAS","NT","ACT"].map(u=>A.jsx("button",{onClick:()=>r(u===n?null:u),className:`px-4 py-3 rounded-lg font-semibold transition-all shadow-sm hover:shadow-md ${n===u?"bg-primary text-primary-foreground scale-105":"bg-muted text-muted-foreground hover:bg-muted/70"}`,"aria-label":`Filter by ${u}`,children:u},u))})]})}),A.jsxs("section",{id:"insights",className:"container mx-auto px-6 lg:px-8 py-12 max-w-7xl",children:[A.jsxs("div",{className:"mb-8",children:[A.jsx("h2",{className:"text-3xl font-bold text-foreground mb-3",children:n?`Conservation Snapshot: ${i[n]||n}`:"Key Conservation Insights"}),A.jsx("p",{className:"text-muted-foreground",children:"Understanding regional patterns helps prioritize conservation efforts"})]}),n?A.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-secondary/5 rounded-xl p-8 border-l-4 border-primary shadow-lg",children:A.jsxs("div",{className:"prose prose-lg max-w-none",children:[n==="QLD"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:"Queensland hosts the highest number of threatened species across Australia, reflecting its extraordinary biodiversity from tropical rainforests to the Great Barrier Reef. The state's unique ecosystems face mounting pressure from habitat clearing, climate change, and coastal development, making it a critical conservation priority."}),n==="NSW"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:"New South Wales shows high species diversity with particular vulnerability in coastal regions and western woodlands. Urban expansion along the coast and agricultural intensification inland have created significant habitat fragmentation, threatening both terrestrial and marine species."}),n==="WA"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:"Western Australia's vast landmass contains numerous endemic species found nowhere else on Earth. Mining operations, introduced predators like foxes and cats, and changing rainfall patterns pose severe threats to these unique desert and southwest forest ecosystems."}),n==="VIC"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:`Victoria's intensive agricultural landscape and dense urban centers have transformed much of the state's original habitat. Grassland species and wetland fauna are particularly vulnerable, with the "Vulnerable" category indicating species at early-stage risk requiring immediate conservation intervention.`}),n==="TAS"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:"Tasmania's island isolation has produced unique species assemblages highly sensitive to environmental change. Climate warming, invasive species, and disease (like the devastating Tasmanian Devil facial tumor) create compounding threats to this irreplaceable biodiversity."}),n==="SA"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:"South Australia's predominantly arid and semi-arid environments host species specially adapted to harsh conditions. Increasing temperatures, prolonged droughts, and habitat degradation from pastoral activities threaten these resilient but vulnerable populations."}),n==="NT"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:"The Northern Territory's remote tropical and desert ecosystems face threats from altered fire management, feral herbivores, and predatory mammals. Indigenous land management practices offer hope for conservation of unique monsoonal and spinifex grassland species."}),n==="ACT"&&A.jsx("p",{className:"text-foreground leading-relaxed",children:"Despite its small size, the Australian Capital Territory contains important habitat remnants within an urbanised landscape. Grassland birds and woodland mammals face pressure from development, requiring careful management of the urban-nature interface."})]})}):A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(Q0,{icon:A.jsx(nne,{className:"h-6 w-6"}),state:"Queensland",abbrev:"QLD",description:"Highest number of threatened species reflecting vast biodiversity hotspots and unique tropical ecosystems under pressure.",color:"bg-secondary/10 text-secondary border-secondary/20"}),A.jsx(Q0,{icon:A.jsx(rne,{className:"h-6 w-6"}),state:"New South Wales",abbrev:"NSW",description:"High species diversity with significant urban development impact, particularly affecting coastal and woodland habitats.",color:"bg-primary/10 text-primary border-primary/20"}),A.jsx(Q0,{icon:A.jsx(tne,{className:"h-6 w-6"}),state:"Western Australia",abbrev:"WA",description:"Large number of endemic species face threats from mining activities and introduced predators in remote regions.",color:"bg-accent/10 text-accent border-accent/20"}),A.jsx(Q0,{icon:A.jsx(ine,{className:"h-6 w-6"}),state:"Tasmania",abbrev:"TAS",description:"Island ecosystems host unique species vulnerable to climate change and invasive species introduction.",color:"bg-primary/10 text-primary border-primary/20"})]})]}),A.jsx("section",{id:"data",className:"container mx-auto px-6 lg:px-8 py-12 max-w-7xl",children:A.jsxs("div",{className:"bg-card rounded-xl p-8 shadow-lg border border-border",children:[A.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"About This Visualisation"}),A.jsxs("div",{className:"space-y-4 text-foreground/80",children:[A.jsx("p",{className:"leading-relaxed",children:"This interactive data visualisation was created for FIT3179 Data Visualisation 2 at Monash University. It explores the geographic distribution and conservation status of threatened animal species across Australian states and territories using data from the Environment Protection and Biodiversity Conservation (EPBC) Act Threatened Species Lists."}),A.jsxs("div",{className:"border-l-4 border-primary pl-6 py-2",children:[A.jsx("p",{className:"text-sm font-semibold text-foreground mb-1",children:"Data Source"}),A.jsxs("p",{className:"text-sm",children:["Australian Government – Department of Climate Change, Energy, the Environment and Water (DCCEEW)",A.jsx("br",{}),"EPBC Act Threatened Species Lists (2025)"]})]}),A.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[A.jsx("p",{className:"text-sm font-semibold text-foreground mb-1",children:"Visualisation Technique"}),A.jsx("p",{className:"text-sm",children:"Built with Vega-Lite for interactive data exploration. Features include dynamic filtering, state-based drill-down analysis, and responsive design for multiple devices."})]})]})]})}),A.jsx("footer",{className:"border-t border-border bg-muted/20",children:A.jsx("div",{className:"container mx-auto px-6 lg:px-8 py-8 max-w-7xl",children:A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[A.jsxs("p",{className:"text-sm text-muted-foreground",children:[A.jsx("strong",{className:"text-foreground",children:"FIT3179 Data Visualisation 2"})," • Monash University • 2025"]}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"Created with Vega-Lite, React, and Tailwind CSS"})]})})})]})},r5e=()=>{const e=w7();return C.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),A.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:A.jsxs("div",{className:"text-center",children:[A.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),A.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),A.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},i5e=new Toe,o5e=()=>A.jsx(Moe,{client:i5e,children:A.jsxs(ooe,{children:[A.jsx(Bne,{}),A.jsx(xre,{}),A.jsx(mse,{children:A.jsxs(hse,{children:[A.jsx(mC,{path:"/",element:A.jsx(n5e,{})}),A.jsx(mC,{path:"*",element:A.jsx(r5e,{})})]})})]})});z8(document.getElementById("root")).render(A.jsx(o5e,{}));
